<!DOCTYPE html>
<html>

<head>
    <title>WebDataRocks</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link href="webdatarocks.min.css" rel="stylesheet" />
    <script src="webdatarocks.toolbar.min.js"></script>
    <script src="webdatarocks.js"></script>
	<script src="encrypt.js"></script>
</head>

<body>
    <div id="wdr-component"></div>
    <script>
	var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
        vars[key] = value;
	});
		var webdevencrypt = {
    setEncrypt: function(source,destination,passcode) {
        document.getElementById(destination).innerText = this.encryptCodes(document.getElementById(source).value,document.getElementById(passcode).value);
    },
    setDecrypt: function() {
                document.getElementById('decryptedContent').innerText = this.decryptCodes(document.getElementById('originalContent').value,document.getElementById('passcode').value);
    },
    encryptCodes: function(content,passcode) {
        var result = []; var passLen = passcode.length ;
        for(var i = 0  ; i < content.length ; i++) {
            var passOffset = i%passLen ;
            var calAscii = (content.charCodeAt(i)+passcode.charCodeAt(passOffset));
            result.push(calAscii);
        }
        return JSON.stringify(result) ;
    },
    decryptCodes: function(content,passcode) {
        var result = [];var str = '';
        var codesArr = JSON.parse(content);var passLen = passcode.length ;
        for(var i = 0  ; i < codesArr.length ; i++) {
            var passOffset = i%passLen ;
            var calAscii = (codesArr[i]-passcode.charCodeAt(passOffset));
            result.push(calAscii) ;
        }
        for(var i = 0 ; i < result.length ; i++) {
            var ch = String.fromCharCode(result[i]); str += ch ;
        }
        return str ;
    }
}
var p0= vars['v1'];

	var p1=webdevencrypt.encryptCodes(p0,'Admin123@@');
	//alert(p1);
	var p2=webdevencrypt.decryptCodes(p1,'Admin123@@');
	//alert(p2);

    var p3= vars['v2'];
    alert(p2)
	
    var pivot = new WebDataRocks({
        container: "#wdr-component",
        toolbar: true,
		 options: {    grid: {   type: "flat"    }    },
			report: {
				dataSource: {
					dataSourceType: "json",
					filename: 'https://rest2019xxbb.herokuapp.com/api/datosfijos/actarea'
				},
				 "options": {     "grid": {       "type": p3    }    }
			}
			
		
    });
    </script>
</body>

</html>