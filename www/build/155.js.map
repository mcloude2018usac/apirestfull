{"version":3,"sources":["../../src/pages/EMPRESA/bus-create/bus-create.module.ts","../../src/pages/EMPRESA/bus-create/bus-create.ts"],"names":[],"mappings":"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","file":"155.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BusCreatePage } from './bus-create';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    BusCreatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BusCreatePage),\n    TranslateModule.forChild()\n  ],\n})\nexport class BusCreatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/EMPRESA/bus-create/bus-create.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { ViewController,IonicPage,  NavController,Events , ActionSheetController, NavParams } from 'ionic-angular';\nimport {   FormBuilder,  FormGroup,   Validators } from '@angular/forms';\nimport { Auth,NotificationProvider } from '../../../providers';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\n\n@IonicPage()\n@Component({\n  selector: 'page-bus-create',\n  templateUrl: 'bus-create.html',\n})\nexport class BusCreatePage {\n  @ViewChild('fileInput') fileInput;\n  public form                  : FormGroup;\n  public codigo                : any;\n  public noplaca\t\t     : any;\n  public estado\t\t     : any;\n\n  private _ID                  : String;\n  public image              \t: any;\n  public pageTitle           \t: string;\n\n  public idtarifa\t\t     : any;\n  public idruta\t\t     : any;\n  public idtarifa2\t  :any=[];\n  public idruta2\t  :any=[];\n\n  public vtarifa  :any=[];\n  public vruta  :any=[];\n  username: string = \"\";\n  public vgrupo  :any=[];\n  idempresa: any;\n  idempresa0: any;\n  idafiliado: any;\n  isDisablednit :any;\n  constructor( public storage: Storage,public msj: NotificationProvider, public translateService: TranslateService,public viewCtrl: ViewController,public authService:  Auth,public navCtrl \t\t: NavController,  \n    public navParams \t: NavParams,   private _FB          : FormBuilder,         public actionSheetCtrl: ActionSheetController, \n          public events: Events)\n  {\n     // Define form validation - VERY basic!\n     this.form = this._FB.group({\n        codigo : ['', Validators.required],\n        noplaca     : ['', Validators.required],\n        estado    : ['', Validators.required],\n        idtarifa : ['', Validators.required],\n        idruta : ['', Validators.required]\n     });\n\n   \n\n\n     this.translateService.get('APPX').subscribe((value) => {\n      this.idempresa0=value\n\n      \n     this.authService.getReg(this.idempresa0,'tarifas').then((result) => {\n      this.vtarifa=result;\n    }, (err) => {  \n    this.msj.showError3('Error',err.error);\n  });\n     \n  })\n        \n     this.authService.getReg('dispositivo-tipo','datosfijos2').then((result) => {\n      this.vgrupo=result;\n    }, (err) => {  \n    this.msj.showError3('Error',err.error);\n  });\n\n\n\n  this.authService.getReg('RUTAS/RUTAS/' + this.idempresa0 ,'catalogos').then((result) => {\n    this.vruta=result;\n  }, (err) => {  \n  this.msj.showError3('Error',err.error);   \n});\n\n\n\n\n\n  }\n\n  \n  ngOnInit() {\n    this.storage.get('username').then((value) => {\n      this.username = value;\n  }); \n  }\n\n  ionViewDidLoad() : void\n  {  this.idempresa=this.navParams.data.record2.idempresa;\n     this.idafiliado=this.navParams.data.record2.idafiliado;\n\n    if(this.navParams.get(\"record\")==null)\n    {\n      this.translateService.get('ITEM_CREATE_TITLE').subscribe((value) => {\n        this.pageTitle=value;\n      });\n      this.isDisablednit =true\n    }\n    else {\n       this._ID \t\t\t\t=\tthis.navParams.data.record._id;\n       this.codigo\t\t\t\t=\tthis.navParams.data.record.codigo;\n       this.noplaca\t\t=\tthis.navParams.data.record.noplaca;\n       this.estado\t\t\t=\tthis.navParams.data.record.estado;\n       this.idtarifa\t\t\t=\tthis.navParams.data.record.idtarifa.id._id +','+this.navParams.data.record.idtarifa.id.nombre;\n       this.idruta\t\t\t=\tthis.navParams.data.record.idruta.id._id +','+this.navParams.data.record.idruta.id.nombre;\n       this.idtarifa2=this.idtarifa.split(',');\n       this.idruta2=this.idruta.split(',');\n       this.isDisablednit =false\n       this.translateService.get('ITEM_UPDATE_TITLE').subscribe((value) => {\n        this.pageTitle=value;\n      });\n    }\n  }\n\n  manageGallery() : void\n  {\n    \n  let creat='Actualiza';\n  if(this.navParams.get(\"record\")==null)\n  {  creat='Crea';\n  }\n     let   options       : any\t     = { \n      idempresa0 : this.idempresa0,\n     idempresa : this.idempresa,\n     idafiliado : this.idafiliado,\n     codigo : this.form.controls['codigo'].value,\n     noplaca : this.form.controls['noplaca'].value,\n     nombre : this.form.controls['noplaca'].value + ' ' +  this.form.controls['codigo'].value,\n     estado : this.form.controls['estado'].value,\n     idtarifa : {id:this.idtarifa2[0],nombre:this.idtarifa2[1]},  \n     idruta : {id:this.idruta2[0],nombre:this.idruta2[1]},  \n     bitacora:{idempresa:this.idempresa,idafiliado:'',email: this.username,permiso:creat,accion:creat+' dcatalogos '}\n    };\n\n     if(this.navParams.get(\"record\")==null)\n     {  \n          if(options){\n            this.authService.createReg('',options,'buss').then((result) => {\n              if (!this.form.valid) { return; }\n              this.viewCtrl.dismiss(result);\n          }, (err) => {\n            this.msj.showError3('Error',err.error);\n          });\n          }\n     }   \n     else\n     {\n      if(options){\n        this.authService.createReg(this._ID,options,'buss').then((result) => {\n           if (!this.form.valid) { return; }\n           this.viewCtrl.dismiss(result);\n       }, (err) => {\n        this.msj.showError3('Error',err.error);\n       });\n    }}\n  }\n\n  cancel() {\n    this.viewCtrl.dismiss();\n  }\n  done() {\n    if (!this.form.valid) { return; }\n    //this.viewCtrl.dismiss(this.form.value);\n  }\n\n  onSelectChange(selectedValue: any) {\n    this.idtarifa2=selectedValue.split(',');\n}\n        \n  onSelectChange2(selectedValue: any) {\n      this.idruta2=selectedValue.split(',');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/EMPRESA/bus-create/bus-create.ts"],"sourceRoot":""}