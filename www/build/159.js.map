{"version":3,"sources":["../../src/pages/DENUNCIAS/denunciasunidad-create/denunciasunidad-create.module.ts","../../src/pages/DENUNCIAS/denunciasunidad-create/denunciasunidad-create.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACO;AACqB;AACf;AACG;AAYzD;IAAA;IAA8C,CAAC;IAAlC,+BAA+B;QAV3C,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,0FAAyB;aAC1B;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,0FAAyB,CAAC;gBACnD,4EAAe,CAAC,QAAQ,EAAE;gBAC1B,+EAAqB;aACtB;SACF,CAAC;OACW,+BAA+B,CAAG;IAAD,sCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;AChBQ;AACoD;AAC/B;AACV;AACR;AACd;AACmB;AAS5D;IAuBE,mCAAmB,OAAgB,EAAQ,GAAyB,EAAS,gBAAkC,EAAQ,QAAwB,EAAQ,WAAkB,EAAQ,OAAyB,EACjM,SAAsB,EAAY,GAA0B,EAAiB,eAAsC,EAC7G,MAAc;QAF7B,iBAwDC;QAxDkB,YAAO,GAAP,OAAO,CAAS;QAAQ,QAAG,GAAH,GAAG,CAAsB;QAAS,qBAAgB,GAAhB,gBAAgB,CAAkB;QAAQ,aAAQ,GAAR,QAAQ,CAAgB;QAAQ,gBAAW,GAAX,WAAW,CAAO;QAAQ,YAAO,GAAP,OAAO,CAAkB;QACjM,cAAS,GAAT,SAAS,CAAa;QAAY,QAAG,GAAH,GAAG,CAAuB;QAAiB,oBAAe,GAAf,eAAe,CAAuB;QAC7G,WAAM,GAAN,MAAM,CAAQ;QAlB7B,aAAQ,GAAW,EAAE,CAAC;QAOf,YAAO,GAAO,EAAE,CAAC;QACjB,cAAS,GAAO,EAAE,CAAC;QACnB,eAAU,GAAO,EAAE,CAAC;QACpB,YAAO,GAAO,EAAE,CAAC;QACjB,cAAS,GAAO,EAAE,CAAC;QASxB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;YAChD,KAAI,CAAC,SAAS,GAAC,KAAK;YAGrB,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,GAAE,KAAI,CAAC,SAAS,EAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;gBACrF,KAAI,CAAC,OAAO,GAAC,MAAM,CAAC;YACtB,CAAC,EAAE,UAAC,GAAG;gBACP,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;YAGH,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,0BAA0B,GAAG,GAAG,GAAG,KAAI,CAAC,SAAS,EAAC,YAAY,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;gBAClG,KAAI,CAAC,SAAS,GAAC,MAAM,CAAC;YAExB,CAAC,EAAE,UAAC,GAAG;gBACP,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;QAED,CAAC,CAAC;QACC,uCAAuC;QACvC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;YACzB,MAAM,EAAO,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACtC,QAAQ,EAAK,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACtC,QAAQ,EAAK,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACtC,SAAS,EAAK,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YACvC,MAAM,EAAK,CAAC,EAAE,EAAE,kEAAU,CAAC,QAAQ,CAAC;YAEpC,uDAAuD;YACvD,qBAAqB;YACrB,qBAAqB;YACrB,kCAAkC;YAClC,6BAA6B;YAC7B,6CAA6C;YAC7C,0BAA0B;YAC1B,8FAA8F;YAE9F;;;;;;;;;;cAUE;SAEH,CAAC,CAAC;IAIN,CAAC;IAED,4CAAQ,GAAR;QAAA,iBAIC;QAHC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK;YACtC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC1B,CAAC,CAAC,CAAC;IACH,CAAC;IAED,kDAAc,GAAd;QAAA,iBA2BC;QAzBC,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAE,IAAI,CAAC,CACtC,CAAC;YACC,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;gBAC7D,KAAI,CAAC,SAAS,GAAC,KAAK,CAAC;YACvB,CAAC,CAAC,CAAC;QACL,CAAC;QACD,IAAI,CAAC,CAAC;YACH,IAAI,CAAC,GAAG,GAAO,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;YAC9C,IAAI,CAAC,MAAM,GAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACjD,IAAI,CAAC,QAAQ,GAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;YACtD,IAAI,CAAC,MAAM,GAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACjD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAE,IAAI,CAAC,MAAM,CAAC,GAAG,GAAC,GAAG,GAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,EAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;gBACxG,KAAI,CAAC,SAAS,GAAC,MAAM,CAAC;gBACtB,KAAI,CAAC,UAAU,GAAC,MAAM,CAAC;gBACvB,KAAI,CAAC,QAAQ,GAAI,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC;gBACvD,KAAI,CAAC,SAAS,GAAI,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;YACtD,CAAC,EAAE,UAAC,GAAG;gBACP,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACvC,CAAC,CAAC,CAAC;YAGF,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;gBAC9D,KAAI,CAAC,SAAS,GAAC,KAAK,CAAC;YACvB,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAID,iDAAa,GAAb;QAAA,iBAuDC;QArDD,IAAI,KAAK,GAAC,WAAW,CAAC;QACpB,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAE,IAAI,CAAC,CACtC,CAAC;YAAE,KAAK,GAAC,MAAM,CAAC;QAChB,CAAC;QAED,IAAI,GAAO,CAAC;QACZ,GAAG,GAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;QACzC,IAAI,KAAK,GAAK,EAAE,CAAC;QACjB,GAAG,EAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAE,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;YAChC,KAAK,CAAC,IAAI,CAAC,EAAC,GAAG,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAC,MAAM,EAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC;QACtD,CAAC;QAED,IAAI,IAAQ,CAAC;QACb,IAAI,GAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;QACzC,IAAI,MAAM,GAAK,EAAE,CAAC;QACnB,GAAG,EAAC,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAE,IAAI,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE,CAAC;YACpC,MAAM,CAAC,IAAI,CAAC,EAAC,GAAG,EAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,EAAC,MAAM,EAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAC,CAAC,CAAC;QAC3D,CAAC;QAGA,IAAM,OAAO,GAAoB;YAClC,MAAM,EAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,GAAG;YAC9C,SAAS,EAAE,KAAK;YAChB,UAAU,EAAE,MAAM;YAClB,MAAM,EAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,GAAG;YAChD,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM;YACjD,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK;YAC1C,QAAQ,EAAC,EAAC,SAAS,EAAC,IAAI,CAAC,SAAS,EAAC,UAAU,EAAC,EAAE,EAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAC,OAAO,EAAC,KAAK,EAAC,MAAM,EAAC,KAAK,GAAC,gBAAgB,EAAC;SAClH,CAAC;QAGD,EAAE,EAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAE,IAAI,CAAC,CACtC,CAAC;YACI,EAAE,EAAC,OAAO,CAAC,EAAC;gBACV,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,EAAE,EAAC,OAAO,EAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;oBACnE,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;wBAAC,MAAM,CAAC;oBAAC,CAAC;oBACjC,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBAClC,CAAC,EAAE,UAAC,GAAG;oBACL,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACzC,CAAC,CAAC,CAAC;YACH,CAAC;QACN,CAAC;QACD,IAAI,CACJ,CAAC;YACA,EAAE,EAAC,OAAO,CAAC,EAAC;gBACV,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAC,OAAO,EAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;oBACxE,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;wBAAC,MAAM,CAAC;oBAAC,CAAC;oBACpC,wBAAwB;oBACrB,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;gBAClC,CAAC,EAAE,UAAC,GAAG;oBACN,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACxC,CAAC,CAAC,CAAC;YACN,CAAC;QAAA,CAAC;IACJ,CAAC;IAED,0CAAM,GAAN;QACE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC;IAC1B,CAAC;IACD,wCAAI,GAAJ;QACE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QACjC,yCAAyC;IAC3C,CAAC;IAED,8CAAU,GAAV,UAAW,KAGV;QAHD,iBAaC;QARH,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,GAAC,GAAG,GAAC,iBAAiB,GAAG,IAAI,CAAC,SAAS,EAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;YACtG,KAAI,CAAC,SAAS,GAAC,MAAM,CAAC;YACtB,KAAI,CAAC,UAAU,GAAC,MAAM,CAAC;QACzB,CAAC,EAAE,UAAC,GAAG;YACP,KAAI,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,EAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IAGD,CAAC;IAnM2B;QAA3B,gEAAS,CAAC,eAAe,CAAC;kCAAgB,kFAAwB;oEAAC;IADzD,yBAAyB;QAJrC,gEAAS,CAAC;YACT,QAAQ,EAAE,6BAA6B;WACG;SAC3C,CAAC;+NAwBgD,CAA0J;YACpL,+DAAsG;YACrG,MAAM;OAzBlB,yBAAyB,CAwMrC;IAAD,CAAC;AAAA;SAxMY,yBAAyB,gB","file":"159.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DenunciasunidadCreatePage } from './denunciasunidad-create';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicSelectableModule } from 'ionic-selectable';\n\n@NgModule({\n  declarations: [\n    DenunciasunidadCreatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DenunciasunidadCreatePage),\n    TranslateModule.forChild(),\n    IonicSelectableModule\n  ],\n})\nexport class DenunciasunidadCreatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/DENUNCIAS/denunciasunidad-create/denunciasunidad-create.module.ts","import { Component ,ViewChild} from '@angular/core';\nimport { ViewController,IonicPage,  NavController,Events , ActionSheetController, NavParams } from 'ionic-angular';\nimport {   FormBuilder,  FormGroup,   Validators } from '@angular/forms';\nimport { Auth,NotificationProvider } from '../../../providers';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\nimport { IonicSelectableComponent } from 'ionic-selectable';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-denunciasunidad-create',\n  templateUrl: 'denunciasunidad-create.html',\n})\nexport class DenunciasunidadCreatePage {\n  @ViewChild('portComponent') portComponent: IonicSelectableComponent;\n  ports: any[];\n  port: any;\n\n \n  public form                  : FormGroup;\n  username: string = \"\";\n  public unidad                 : any;\n  idempresa:any;\n  public operador                 : any;\n  public operador2                 : any;\n  public denuncia\t\t     : any;\n  public estado\t\t     : any;\n  public vunidad  :any=[];\n  public voperador  :any=[];\n  public voperador2  :any=[];\n  public vjefeop  :any=[];\n  public vdenuncia  :any=[];\n\n  private _ID                  : String;\n  public pageTitle           \t: string;\n\n  constructor(public storage: Storage,public msj: NotificationProvider, public translateService: TranslateService,public viewCtrl: ViewController,public authService:  Auth,public navCtrl \t\t: NavController,  \n    public navParams \t: NavParams,   private _FB          : FormBuilder,         public actionSheetCtrl: ActionSheetController, \n          public events: Events)\n  {\n    this.translateService.get('APPX').subscribe((value) => {\n      this.idempresa=value\n      \n           \n     this.authService.getReg('UNIDADES/UNIDADES/' +this.idempresa,'catalogos').then((result) => {\n      this.vunidad=result;\n    }, (err) => {  \n    this.msj.showError3('Error',err.error);\n  });\n\n\n  this.authService.getReg('5c6394cbcffe290016d494b5' + '/' + this.idempresa,'dcatalogos').then((result) => {\n    this.vdenuncia=result;\n   \n  }, (err) => {  \n  this.msj.showError3('Error',err.error);\n});\n     \n  })\n     // Define form validation - VERY basic!\n     this.form = this._FB.group({\n       unidad     : ['', Validators.required],\n       denuncia    :['', Validators.required],\n       operador    :['', Validators.required],\n       operador2    :['', Validators.required],\n       estado    :['', Validators.required]\n      \n       //let hasSearchText = this.portComponent.hasSearchText;\n       //[isEnabled]=\"false\"\n       //[isMultiple]=\"true\"\n       //[isConfirmButtonEnabled]=\"false\"\n       //[isOnSearchEnabled]=\"false\"\n       //let isOpened = this.portComponent.isOpened;\n       // [searchDebounce]=\"1000\"\n       //  <ng-template ionicSelectableValueTemplate let-port=\"value\">{{denuncia._id}} </ng-template>\n\n       /*\n  <ng-template ionicSelectableGroupTemplate let-group=\"group\">\n                            {{group.fecha}}\n                        </ng-template>\n\n                         <ng-template ionicSelectablePlaceholderTemplate>\n                    Seleccione <span style=\"color: black;\">(Unidad)</span>\n          </ng-template>\n\n\n       */\n       \n     });\n\n\n    \n  }\n\n  ngOnInit() {\n    this.storage.get('username').then((value) => {\n      this.username = value;\n  }); \n  }\n\n  ionViewDidLoad() : void\n  {\n    if(this.navParams.get(\"record\")==null)\n    {\n      this.translateService.get('ITEM_CREATE_TITLE').subscribe((value) => {\n        this.pageTitle=value;\n      });\n    }\n    else {\n       this._ID \t\t\t\t=\tthis.navParams.data.record._id;\n       this.unidad\t\t=\tthis.navParams.data.record.unidad;\n       this.denuncia\t\t=\tthis.navParams.data.record.categoria;\n       this.estado\t\t=\tthis.navParams.data.record.estado;\n       this.authService.getReg( this.unidad._id+'/'+'unidad/empresa/' + this.idempresa,'personals').then((result) => {\n        this.voperador=result;\n        this.voperador2=result;\n        this.operador\t\t=\tthis.navParams.data.record.operadores;\n        this.operador2\t\t=\tthis.navParams.data.record.jefeop;\n      }, (err) => {  \n      this.msj.showError3('Error',err.error);\n      });\n\n\n       this.translateService.get('ITEM_UPDATE_TITLE').subscribe((value) => {\n        this.pageTitle=value;\n      });\n    }\n  }\n\n  \n\n  manageGallery() : void\n  {\n  let creat='Actualiza';\n    if(this.navParams.get(\"record\")==null)\n    {  creat='Crea';   \n    }\n\n    var aar:any;\n    aar=this.form.controls['denuncia'].value;\n    var datat:any=[];\n    for(var i = 0; i <aar.length; i++) {\n        datat.push({_id:aar[i]._id,nombre:aar[i].nombre});\n    }   \n\n    var aar2:any;\n    aar2=this.form.controls['operador'].value;\n     var datat2:any=[];\n    for(var i2 = 0; i2 <aar2.length; i2++) {\n        datat2.push({_id:aar2[i2]._id,nombre:aar2[i2].nombre});\n    }\n\n\n     let   options       : any\t     = { \n    unidad : this.form.controls['unidad'].value._id,\n     categoria: datat,\n     operadores: datat2,\n     jefeop:this.form.controls['operador2'].value._id,\n     nombre: this.unidad.nombre + this.denuncia.nombre,\n     estado: this.form.controls['estado'].value,\n     bitacora:{idempresa:this.idempresa,idafiliado:'',email: this.username,permiso:creat,accion:creat+' Departamento '}\n    };\n      \n\n     if(this.navParams.get(\"record\")==null)\n     {  \n          if(options){\n            this.authService.createReg('',options,'denunciaunidads').then((result) => {\n              if (!this.form.valid) { return; }\n              this.viewCtrl.dismiss(result);\n          }, (err) => {  \n            this.msj.showError3('Error',err.error);\n          });\n          }   \n     }   \n     else\n     {\n      if(options){\n        this.authService.createReg(this._ID,options,'denunciaunidads').then((result) => {\n           if (!this.form.valid) { return; }\n        //   console.log(result)\n           this.viewCtrl.dismiss(result);\n       }, (err) => {\n        this.msj.showError3('Error',err.error);\n       });\n    }}\n  }\n\n  cancel() {   \n    this.viewCtrl.dismiss();\n  }\n  done() {\n    if (!this.form.valid) { return; }\n    //this.viewCtrl.dismiss(this.form.value);\n  }\n\n  portChange(event: {\n    component: IonicSelectableComponent,\n    value: any \n  }) {\n\nthis.authService.getReg(event.value._id+'/'+'unidad/empresa/' + this.idempresa,'personals').then((result) => {\n  this.voperador=result;\n  this.voperador2=result;\n}, (err) => {  \nthis.msj.showError3('Error',err.error);\n});\n\n\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/DENUNCIAS/denunciasunidad-create/denunciasunidad-create.ts"],"sourceRoot":""}