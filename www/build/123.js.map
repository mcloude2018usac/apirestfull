{"version":3,"sources":["../../src/pages/GESTIONSALDO/comprasaldo-create/comprasaldo-create.module.ts","../../src/pages/GESTIONSALDO/comprasaldo-create/comprasaldo-create.ts"],"names":[],"mappings":"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","file":"123.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ComprasaldoCreatePage } from './comprasaldo-create';\n\n@NgModule({\n  declarations: [\n    ComprasaldoCreatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ComprasaldoCreatePage),\n    TranslateModule.forChild()\n  ],\n})\nexport class ComprasaldoCreatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/GESTIONSALDO/comprasaldo-create/comprasaldo-create.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { LoadingController,ViewController,IonicPage,  NavController,Events , ActionSheetController, NavParams } from 'ionic-angular';\nimport {   FormBuilder,  FormGroup,   Validators } from '@angular/forms';\nimport { Auth,NotificationProvider } from '../../../providers';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Storage } from '@ionic/storage';\n\n@IonicPage()\n@Component({\n  selector: 'page-comprasaldo-create',\n  templateUrl: 'comprasaldo-create.html',\n})\nexport class ComprasaldoCreatePage {\n  @ViewChild('fileInput') fileInput;\n  public form                  : FormGroup;\n  items: any=[];\n  tiposus: any=[];\n  public nombre\t\t     : any;\n  public cuitt\t\t     : any;\n  public monto\t\t     : any;\n  public evento\t\t     : any;\n  username: string = \"\";\n  public cui\t\t     : any;\n  public idsus2\t\t     : any;\n  public idnombre2\t\t     : any;\n  idempresa:any;\n  private _ID                  : String;\n  private _IDSUSCRIPTOR                  : String;\n  public image              \t: any;\n  public pageTitle           \t: string;\n  public idsuscriptor                : any;\n  public idcomprasaldo                : any;\n  public vtarifa  :any=[];\n\n  isDisablednit :any;\n  constructor(public storage: Storage, private loadingCtrl: LoadingController,public msj: NotificationProvider, public translateService: TranslateService,public viewCtrl: ViewController,public authService:  Auth,public navCtrl \t\t: NavController,  \n    public navParams \t: NavParams,   private _FB          : FormBuilder,         public actionSheetCtrl: ActionSheetController, \n          public events: Events)\n  {\n\n    this.translateService.get('APPX').subscribe((value) => {\n      this.idempresa=value\n    \n       \n     this.authService.getReg('TARIFA COMPRA SALDO' + '/' + this.idempresa + '/catalogo','dcatalogos').then((result) => {\n      this.vtarifa=result;\n    }, (err) => {  \n    this.msj.showError3('Error',err.error);\n  });\n\n     \n  })\n    \n\n  \n     // Define form validation - VERY basic!\n     this.form = this._FB.group({\n        cui        \t    : ['', Validators.required],\n        monto     : ['', Validators.required],\n     });\n\n    \n  }\n\n  ngOnInit() {\n    this.storage.get('username').then((value) => {\n      this.username = value;\n  });\n  \n  this.storage.get('tiposus').then((value) => {\n    this.tiposus = value.split(',');\n  this.cuitt=this.tiposus[2]\n  this.cui=this.tiposus[2]\n  this.idsus2=this.tiposus[3]\n  this.idnombre2=this.tiposus[4]\n    if(this.tiposus[0]=='Distribuidor')\n          {\n            this.isDisablednit=true;\n          }\n          else\n          {\n            this.isDisablednit=false;\n          }\n          this.focused('a')\n\n});\n\n  }\n  ionViewDidLoad() : void\n  {// this._IDSUSCRIPTOR=this.navParams.data.record2.idsuscriptor;\n    this.pageTitle=\"Compra de saldo\";\n    if(this.navParams.get(\"record\")==null)\n    {\n       \n     \n      \n      this.isDisablednit =true\n    }\n    else {\n      \n       this._ID \t\t\t\t=\tthis.navParams.data.record._id;\n       this.idsuscriptor \t\t\t\t=\tthis.navParams.data.record.idsuscriptor._id;\n       this._IDSUSCRIPTOR\t\t\t\t=\tthis.navParams.data.record.idsuscriptor._id;\n       this.nombre\t\t=\tthis.navParams.data.record.nombre;\n       this.monto\t\t\t=\tthis.navParams.data.record.monto;\n       this.isDisablednit =false\n     \n\n    }\n  }\n\n  manageGallery() : void\n  {\n\n    let creat='Actualiza';\n    if(this.navParams.get(\"record\")==null)\n    {  creat='Crea';\n    }\n\n     let   options       : any\t     = { \n      idempresa:this.idempresa,\n     idsuscriptor : {id:this._IDSUSCRIPTOR,nombre:this.nombre} ,\n    nombre : this.nombre,\n     monto : this.form.controls['monto'].value,\n     url:'',\n     estado : 'aprobado',\n     bitacora:{idempresa:this.idempresa,idafiliado:'',email: this.username,permiso:creat,accion:creat+' empresas '},\n     idsuscriptor2 : {id:this.idsus2,nombre:this.idnombre2} ,\n    };\n      \n\n     if(this.navParams.get(\"record\")==null)\n     {  \n          if(options){\n            this.authService.createReg('',options,'comprasaldos').then((result) => {\n              if (!this.form.valid) { return; }\n              this.viewCtrl.dismiss(result);\n          }, (err) => {\n            this.msj.showError3('Error',err.error);\n          });\n          }\n     }   \n     else\n     {\n      if(options){\n        this.authService.createReg(this._ID,options,'comprasaldos').then((result) => {\n           if (!this.form.valid) { return; }\n           this.viewCtrl.dismiss(result);\n       }, (err) => {\n        this.msj.showError3('Error',err.error);\n       });\n    }}\n  }\n\n  cancel() {\n    this.viewCtrl.dismiss();\n  }\n  done() {\n    if (!this.form.valid) { return; }\n    //this.viewCtrl.dismiss(this.form.value);\n  }\n\n\n\n\n  focused(selectedValue: any) {\n    if(( this.cui) && (this.cui!=''))\n    {\n\n     const loading = this.loadingCtrl.create({\n       spinner: 'bubbles',\n       content: \"Espere un momento,  Buscando información ......\"\n     });\n     loading.present();\n\n\n     this.items=[]\n     this.authService.getReg(this.cui+'/'+'persona/' + this.idempresa,'personals').then((data) => {\n      // this.msj.showError3('Resultado','Proceso OV concluido, revisa tus datos para validar información ');\n       this.nombre=data[0].nombre\n       this.idsuscriptor \t\t\t\t=\tdata[0]._id;\n       this._IDSUSCRIPTOR\t\t\t\t=\tdata[0]._id;\n     \n       this.items=data;\n       loading.dismiss();\n     \n   }, (err) => {\n\n\n this.msj.showError3('Resultado','No CUI invalido ');\n this.cui=''\n this.items=[]\n loading.dismiss();\n \n\n    \n    \n   });\n\n    }\n     \n   }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/GESTIONSALDO/comprasaldo-create/comprasaldo-create.ts"],"sourceRoot":""}