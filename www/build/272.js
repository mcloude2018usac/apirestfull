webpackJsonp([272],{833:function(n,l,e){"use strict";function t(n){return a["ɵvid"](0,[a["ɵqud"](402653184,1,{fileInput:0}),a["ɵqud"](402653184,2,{searchbar:0}),a["ɵqud"](402653184,3,{video:0}),a["ɵqud"](402653184,4,{canvas:0}),(n()(),a["ɵeld"](4,0,null,null,46,"ion-header",[],null,null,null,null,null)),a["ɵdid"](5,16384,null,0,E.a,[R.a,a.ElementRef,a.Renderer,[2,C.a]],null,null),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](7,0,null,null,42,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,y.b,y.a)),a["ɵdid"](8,49152,null,0,_.a,[w.a,[2,C.a],[2,I.a],R.a,a.ElementRef,a.Renderer],{color:[0,"color"]},null),(n()(),a["ɵted"](-1,3,["\n        "])),(n()(),a["ɵeld"](10,0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==a["ɵnov"](n,12).toggle()&&t}return t},S.b,S.a)),a["ɵdid"](11,1097728,[[5,4]],0,P.a,[[8,""],R.a,a.ElementRef,a.Renderer],null,null),a["ɵdid"](12,1064960,null,0,x.a,[k.a,[2,C.a],[2,P.a],[2,_.a]],{menuToggle:[0,"menuToggle"]},null),a["ɵdid"](13,16384,null,1,F.a,[R.a,a.ElementRef,a.Renderer,[2,M.a],[2,_.a]],null,null),a["ɵqud"](603979776,5,{_buttons:1}),(n()(),a["ɵted"](-1,0,["\n            "])),(n()(),a["ɵeld"](16,0,null,0,1,"ion-icon",[["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](17,147456,null,0,j.a,[R.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](-1,0,["\n          "])),(n()(),a["ɵted"](-1,3,["\n      "])),(n()(),a["ɵeld"](20,0,null,3,2,"ion-title",[],null,null,null,D.b,D.a)),a["ɵdid"](21,49152,null,0,T.a,[R.a,a.ElementRef,a.Renderer,[2,M.a],[2,_.a]],null,null),(n()(),a["ɵted"](-1,0,["\n       Entradas y Salidas\n      "])),(n()(),a["ɵted"](-1,3,["   \n  \n      "])),(n()(),a["ɵeld"](24,0,null,2,24,"ion-buttons",[["end",""]],null,null,null,null,null)),a["ɵdid"](25,16384,null,1,F.a,[R.a,a.ElementRef,a.Renderer,[2,M.a],[2,_.a]],null,null),a["ɵqud"](603979776,6,{_buttons:1}),(n()(),a["ɵted"](-1,null,["\n          "])),(n()(),a["ɵeld"](28,0,null,null,5,"button",[["icon-only",""],["ion-button",""],["padding-right",""],["rel","tooltip"],["title","Entrada"]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.entradita()&&t}return t},S.b,S.a)),a["ɵdid"](29,1097728,[[6,4]],0,P.a,[[8,""],R.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,0,["\n              "])),(n()(),a["ɵeld"](31,0,null,0,1,"ion-icon",[["name","log-in"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](32,147456,null,0,j.a,[R.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](-1,0,["\n            "])),(n()(),a["ɵted"](-1,null,["\n          "])),(n()(),a["ɵeld"](35,0,null,null,5,"button",[["icon-only",""],["ion-button",""],["padding-right",""],["rel","tooltip"],["title","Salida"]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.salidita()&&t}return t},S.b,S.a)),a["ɵdid"](36,1097728,[[6,4]],0,P.a,[[8,""],R.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,0,["\n              "])),(n()(),a["ɵeld"](38,0,null,0,1,"ion-icon",[["name","log-out"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](39,147456,null,0,j.a,[R.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](-1,0,["\n            "])),(n()(),a["ɵted"](-1,null,["\n\n            "])),(n()(),a["ɵeld"](42,0,null,null,5,"button",[["icon-only",""],["ion-button",""],["padding-right",""],["rel","tooltip"],["title","Buscar por cui"]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.showFilter()&&t}return t},S.b,S.a)),a["ɵdid"](43,1097728,[[6,4]],0,P.a,[[8,""],R.a,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,0,["\n                "])),(n()(),a["ɵeld"](45,0,null,0,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a["ɵdid"](46,147456,null,0,j.a,[R.a,a.ElementRef,a.Renderer],{name:[0,"name"]},null),(n()(),a["ɵted"](-1,0,["\n              "])),(n()(),a["ɵted"](-1,null,["\n        \n        "])),(n()(),a["ɵted"](-1,3,["\n         \n    "])),(n()(),a["ɵted"](-1,null,["       \n   \n  \n  "])),(n()(),a["ɵted"](-1,null,["\n    \n  "])),(n()(),a["ɵeld"](52,0,null,null,57,"ion-content",[["class","list-avatar-page"],["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,q.b,q.a)),a["ɵdid"](53,4374528,null,0,A.a,[R.a,O.a,L.a,a.ElementRef,a.Renderer,w.a,U.a,a.NgZone,[2,C.a],[2,I.a]],null,null),(n()(),a["ɵted"](-1,1,["\n     \n      "])),(n()(),a["ɵeld"](55,0,null,1,53,"form",[["novalidate",""],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,e){var t=!0;if("submit"===l){t=!1!==a["ɵnov"](n,57).onSubmit(e)&&t}if("reset"===l){t=!1!==a["ɵnov"](n,57).onReset()&&t}return t},null,null)),a["ɵdid"](56,16384,null,0,i.v,[],null,null),a["ɵdid"](57,540672,null,0,i.i,[[8,null],[8,null]],{form:[0,"form"]},null),a["ɵprd"](2048,null,i.b,null,[i.i]),a["ɵdid"](59,16384,null,0,i.p,[i.b],null,null),(n()(),a["ɵted"](-1,null,["\n          "])),(n()(),a["ɵeld"](61,0,null,null,46,"ion-list",[],null,null,null,null,null)),a["ɵdid"](62,16384,null,0,B.a,[R.a,a.ElementRef,a.Renderer,O.a,N.l,L.a],null,null),(n()(),a["ɵted"](-1,null,["\n                   "])),(n()(),a["ɵeld"](64,0,null,null,5,"ion-searchbar",[["placeholder","Toma de documentos"],["primary",""],["show-cancel","true"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"keyup"],[null,"ngModelChange"]],function(n,l,e){var t=!0,a=n.component;if("keyup"===l){t=!1!==a.updateList(e)&&t}if("ngModelChange"===l){t=!1!==(a.no_orientacion=e)&&t}return t},z.b,z.a)),a["ɵdid"](65,540672,null,0,i.f,[[8,null],[8,null],[8,null]],{form:[0,"form"],model:[1,"model"]},{update:"ngModelChange"}),a["ɵprd"](2048,null,i.n,null,[i.f]),a["ɵdid"](67,16384,null,0,i.o,[i.n],null,null),a["ɵdid"](68,1294336,[[2,4],["searchbar",4]],0,G.a,[R.a,O.a,a.ElementRef,a.Renderer,[2,i.n]],{placeholder:[0,"placeholder"]},null),(n()(),a["ɵted"](-1,null,["\n                 "])),(n()(),a["ɵted"](-1,null,["\n                 "])),(n()(),a["ɵeld"](71,0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),a["ɵted"](72,null,["DPI: ",""])),(n()(),a["ɵted"](-1,null,["\n                    "])),(n()(),a["ɵeld"](74,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),a["ɵted"](75,null,["Nombre: ",""])),(n()(),a["ɵted"](-1,null,["\n                    "])),(n()(),a["ɵeld"](77,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),a["ɵted"](78,null,["Telefono: ",""])),(n()(),a["ɵted"](-1,null,["\n                    "])),(n()(),a["ɵeld"](80,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),a["ɵted"](81,null,["Fecha nacimiento: ",""])),(n()(),a["ɵted"](-1,null,["\n                    "])),(n()(),a["ɵeld"](83,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),a["ɵted"](84,null,["Fecha y hora: ",""])),(n()(),a["ɵted"](-1,null,["\n                       "])),(n()(),a["ɵeld"](86,0,null,null,18,"ion-grid",[["class","grid"]],null,null,null,null,null)),a["ɵdid"](87,16384,null,0,H.a,[],null,null),(n()(),a["ɵted"](-1,null,["  \n                        "])),(n()(),a["ɵeld"](89,0,null,null,14,"ion-row",[["class","row"]],null,null,null,null,null)),a["ɵdid"](90,16384,null,0,V.a,[],null,null),(n()(),a["ɵted"](-1,null,[" \n                          "])),(n()(),a["ɵeld"](92,0,null,null,4,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](93,16384,null,0,Z.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n                              "])),(n()(),a["ɵeld"](95,0,[[3,0],["video",1]],null,0,"video",[["autoplay",""],["height","300"],["id","user-video-element"],["width","300"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n                          "])),(n()(),a["ɵted"](-1,null,["\n                          "])),(n()(),a["ɵeld"](98,0,null,null,4,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),a["ɵdid"](99,16384,null,0,Z.a,[],null,null),(n()(),a["ɵted"](-1,null,["\n                              "])),(n()(),a["ɵeld"](101,0,null,null,0,"img",[["height","300"],["width","300"]],[[8,"src",4]],null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n                          "])),(n()(),a["ɵted"](-1,null,["\n                        "])),(n()(),a["ɵted"](-1,null,["\n                      "])),(n()(),a["ɵted"](-1,null,["\n                   \n                   \n                     "])),(n()(),a["ɵeld"](106,0,[[4,0],["canvas",1]],null,0,"canvas",[["height","480"],["id","canvas"],["width","640"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n                   \n                  \n\n               \n           "])),(n()(),a["ɵted"](-1,null,["\n\n         \n        "])),(n()(),a["ɵted"](-1,1,["\n      \n  \n  "]))],function(n,l){var e=l.component;n(l,8,0,"navbarColor");n(l,12,0,"");n(l,17,0,"menu");n(l,32,0,"log-in");n(l,39,0,"log-out");n(l,46,0,"funnel");n(l,57,0,e.form);n(l,65,0,e.form.controls.no_orientacion,e.no_orientacion);n(l,68,0,"Toma de documentos")},function(n,l){var e=l.component;n(l,7,0,a["ɵnov"](l,8)._hidden,a["ɵnov"](l,8)._sbPadding);n(l,10,0,a["ɵnov"](l,12).isHidden);n(l,16,0,a["ɵnov"](l,17)._hidden);n(l,31,0,a["ɵnov"](l,32)._hidden);n(l,38,0,a["ɵnov"](l,39)._hidden);n(l,45,0,a["ɵnov"](l,46)._hidden);n(l,52,0,a["ɵnov"](l,53).statusbarPadding,a["ɵnov"](l,53)._hasRefresher);n(l,55,0,a["ɵnov"](l,59).ngClassUntouched,a["ɵnov"](l,59).ngClassTouched,a["ɵnov"](l,59).ngClassPristine,a["ɵnov"](l,59).ngClassDirty,a["ɵnov"](l,59).ngClassValid,a["ɵnov"](l,59).ngClassInvalid,a["ɵnov"](l,59).ngClassPending);n(l,64,1,[a["ɵnov"](l,67).ngClassUntouched,a["ɵnov"](l,67).ngClassTouched,a["ɵnov"](l,67).ngClassPristine,a["ɵnov"](l,67).ngClassDirty,a["ɵnov"](l,67).ngClassValid,a["ɵnov"](l,67).ngClassInvalid,a["ɵnov"](l,67).ngClassPending,a["ɵnov"](l,68)._animated,a["ɵnov"](l,68)._value,a["ɵnov"](l,68)._isActive,a["ɵnov"](l,68)._showCancelButton,a["ɵnov"](l,68)._shouldAlignLeft,a["ɵnov"](l,68)._isFocus]);n(l,72,0,e.dpitt);n(l,75,0,e.nombrett);n(l,78,0,e.dpitt);n(l,81,0,e.fechatt);n(l,84,0,e.horaprint);n(l,101,0,a["ɵinlineInterpolate"](1,"",e.image,""))})}Object.defineProperty(l,"__esModule",{value:!0});var a=e(0),i=(e(1),e(14),e(19)),u=(e(145),e(142)),o=(e(96),function(){function n(n,l,e,t,a,u,o,r,d,s,c,h){this._IMAGE=n,this.alertCtrl=l,this.storage=e,this.msj=t,this.translateService=a,this.viewCtrl=u,this.authService=o,this.navCtrl=r,this.navParams=d,this._FB=s,this.actionSheetCtrl=c,this.events=h,this.username="",this.tiposus=[],this.leer=!1,this.fecha=(new Date).toISOString(),this.items=[],this.resultado=[],this.form=this._FB.group({no_orientacion:["",i.t.compose([i.t.required])]}),this.checkPermissions(),this.getCameraStream()}return n.prototype.ionViewDidLoad=function(){},n.prototype.checkPermissions=function(){},n.prototype.getCameraStream=function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(n){document.getElementById("user-video-element").srcObject=n}).catch(function(n){console.log(n)})},n.prototype.entradita=function(){var n=this;this.alertCtrl.create({title:"Datos",inputs:[{name:"direccion",placeholder:"Ingrese direccion / No. casa"},{name:"contacto",placeholder:"Ingrese contacto"}],buttons:[{text:"Cancelar"},{text:"Agregar",handler:function(l){if(l){var e={idempresa:n.navParams.data.idempresa,idempresa0:"5cd9e0d7f8f59200166a3af3",nombre:n.nombrett,cui:n.dpitt,direccion:n.direcciontt,telefo:n.telefonott,fechanac:n.fechatt,idpersonal:"",estado:"Entrada",fotoe:n.image,contactocasa:l.contacto,dircasa:l.direccion,horas:0,tentrada:n.fecha,nodispositivo:"5cd9ea59096a7609f01eb89b",noprov:"5cd9e0faf8f59200166a3af5",bitacora:{idempresa:n.navParams.data.idempresa,idafiliado:"",monto:n.username,permiso:"Crea",accion:"Crea entrada casa "}};e&&n.authService.createReg("",e,"Entradascasas").then(function(l){n.no_orientacion="",n.image="",n.dpitt="",n.nombrett="",n.fechatt="",n.horaprint="",n.entra="",n.leer=!1,n.msj.showError3("Exito","El ingreso se a creado exitosamente..")},function(l){n.msj.showError3("Error",l.error),n.leer=!1})}}}]}).present()},n.prototype.procesaingreso=function(){var n=this;this.entra&&this.authService.getReg(this.dpitt+"/CUI","Entradascasas").then(function(l){n.leer=!1,console.log(l);var e=n.canvas.nativeElement.getContext("2d").drawImage(n.video.nativeElement,0,0,640,480);console.log(e),n.image=n.canvas.nativeElement.toDataURL("image/png"),"entrando"==l[0].es&&n._IMAGE.generateFromImage(n.image,400,400,.5,function(l){n.image=l,n.entradita()}),"saliendo"==l[0].es&&n._IMAGE.generateFromImage(n.image,400,400,.5,function(l){n.image=l,n.salidita()})},function(l){n.leer=!1,n.msj.showError3("Error",l.error)})},n.prototype.salidita=function(){var n=this,l={estado:"Salisa exitosa",fotos:this.image,horas:0,tsalida:this.fecha,bitacora:{idempresa:this.navParams.data.idempresa,idafiliado:"",monto:this.username,permiso:"Actualiza",accion:"Actualiza salida casa "}};l&&this.authService.createReg(this.dpitt,l,"Entradascasas").then(function(l){n.no_orientacion="",n.image="",n.dpitt="",n.nombrett="",n.fechatt="",n.horaprint="",n.leer=!1,n.msj.showError3("Exito","La salida a sido realizada exitosamente..")},function(l){n.msj.showError3("Error",l.error),n.leer=!1})},n.prototype.showFilter=function(){var n=this;this.alertCtrl.create({title:"ingrese CUI",inputs:[{name:"dpi"}],buttons:[{text:"cancelar"},{text:"Aceptar",handler:function(l){l&&(n.dpitt=l.dpi,n.authService.getReg("noboleta/"+l.dpi,"asignapaps").then(function(l){n.items=l},function(l){n.msj.showError3("Error",l.error)}))}}]}).present()},n.prototype.ngOnInit=function(){var n=this;this.storage.get("username").then(function(l){n.username=l}),this.storage.get("tiposus").then(function(l){n.tiposus=l.split(",")})},n.prototype.cancel=function(){this.viewCtrl.dismiss()},n.prototype.done=function(){},n.prototype.updateList=function(n){if("Enter"==n.key&&0==this.leer){this.leer=!0;var l=new Date,e=(new Date).toISOString();this.horadb=e.split("T")[0]+"T"+l.getHours()+":"+l.getMinutes()+":00.000Z",this.horaprint=e.split("T")[0]+" "+l.getHours()+":"+l.getMinutes(),this.entra="aaa";var t=n.target.value;if(console.log(t),t.indexOf(";")>0){var a=t.split(";")[0];this.dpitt=a.substring(5,a.length),this.dpitt=this.dpitt.substring(0,9)+this.dpitt.substring(10,14),this.procesaingreso()}var i;t.indexOf("]")>0&&(i=t.split("]"),this.nombrett=i[2]+" "+i[3]+" "+i[4]+" "+i[5],this.dpitt=i[8],this.direcciontt=i[9],this.fechatt=i[6],this.procesaingreso()),t.indexOf("|")>0&&(i=t.split("|"),this.nombrett=i[2]+" "+i[3]+" "+i[4]+" "+i[5],this.dpitt=i[8],this.direcciontt=i[9],this.fechatt=i[6],this.procesaingreso())}},n}()),r=e(247),d=function(){return function(){}}(),s=e(238),c=e(239),h=e(240),m=e(241),p=e(242),g=e(243),f=e(244),v=e(245),b=e(246),E=e(46),R=e(3),C=e(7),y=e(62),_=e(33),w=e(8),I=e(21),S=e(45),P=e(30),x=e(252),k=e(39),F=e(144),M=e(34),j=e(41),D=e(69),T=e(47),q=e(61),A=e(25),O=e(5),L=e(11),U=e(31),B=e(63),N=e(12),z=e(448),G=e(100),H=e(256),V=e(151),Z=e(150),J=e(255),K=e(152),Q=e(148),W=e(71),X=e(44),Y=e(70),$=e(15),nn=e(149),ln=e(99),en=a["ɵcrt"]({encapsulation:2,styles:[],data:{}}),tn=a["ɵccf"]("page-parqueolicencia",o,function(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"page-parqueolicencia",[],null,null,null,t,en)),a["ɵdid"](1,114688,null,0,o,[J.a,K.a,Q.a,W.a,X.a,C.a,Y.a,I.a,$.a,i.d,nn.a,ln.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),an=e(17),un=e(92),on=e(93),rn=e(95),dn=e(94),sn=e(146),cn=e(143),hn=e(57);e.d(l,"ParqueolicenciaPageModuleNgFactory",function(){return mn});var mn=a["ɵcmf"](d,[],function(n){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[s.a,c.a,h.a,m.a,p.a,g.a,f.a,v.a,b.a,tn]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](4608,an.n,an.m,[a.LOCALE_ID,[2,an.x]]),a["ɵmpd"](4608,i.w,i.w,[]),a["ɵmpd"](4608,i.d,i.d,[]),a["ɵmpd"](4608,un.b,un.a,[]),a["ɵmpd"](4608,on.a,on.b,[]),a["ɵmpd"](4608,rn.b,rn.a,[]),a["ɵmpd"](4608,dn.b,dn.a,[]),a["ɵmpd"](4608,X.a,X.a,[sn.a,un.b,on.a,rn.b,dn.b,X.b,X.c]),a["ɵmpd"](512,an.b,an.b,[]),a["ɵmpd"](512,i.u,i.u,[]),a["ɵmpd"](512,i.j,i.j,[]),a["ɵmpd"](512,i.r,i.r,[]),a["ɵmpd"](512,cn.a,cn.a,[]),a["ɵmpd"](512,cn.b,cn.b,[]),a["ɵmpd"](512,u.a,u.a,[]),a["ɵmpd"](512,r.a,r.a,[]),a["ɵmpd"](512,d,d,[]),a["ɵmpd"](256,hn.a,o,[]),a["ɵmpd"](256,X.c,void 0,[]),a["ɵmpd"](256,X.b,void 0,[])])})}});