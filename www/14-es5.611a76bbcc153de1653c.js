function _defineProperties(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"0rIg":function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var l=function e(){_classCallCheck(this,e)}},"7YSU":function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var l=t("8Y7J"),i=t("MKJQ"),o=t("sZkV"),a=t("s7LF"),r=t("SVse"),u=t("Gs+c"),c=t("TSSN"),s=t("ZtEv"),d=l["\u0275crt"]({encapsulation:0,styles:[[".book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}ion-header[_ngcontent-%COMP%]{background:#4caf50}ion-title[_ngcontent-%COMP%]{text-align:center}ion-grid.cardON2[_ngcontent-%COMP%]{background-color:#606163;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardON2[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#414142}ion-grid.cardON[_ngcontent-%COMP%]{background-color:#4284ff;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardON[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#679cff}ion-grid.cardOFF[_ngcontent-%COMP%]{background-color:#bbb7b7;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardOFF[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#d4d4d4}.msg[_ngcontent-%COMP%]{float:left;padding:5px 8px;font-size:.8em;color:#fff;border-radius:5px}.number[_ngcontent-%COMP%]{color:#fff;font-size:1.5em;line-height:2em;text-align:center}.digits[_ngcontent-%COMP%]{padding-right:5%;padding-left:5%}.bank[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{color:#fff;font-size:.8em}.bank[_ngcontent-%COMP%]{text-align:right}.ON[_ngcontent-%COMP%]{background-color:#8de278}.OFF[_ngcontent-%COMP%], .ON[_ngcontent-%COMP%]{height:8px;width:8px;border-radius:50%;display:inline-block;margin-right:2px}.OFF[_ngcontent-%COMP%]{background-color:#fb5f5f}.brand[_ngcontent-%COMP%]{max-width:40%;float:right}.chip[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-width:50px;padding-top:5%;border-radius:10%!important;overflow:hidden}ion-icon#power[_ngcontent-%COMP%]{font-size:2em}"]],data:{}});function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,48,"ion-item",[],null,null,null,i.Pb,i.A)),l["\u0275did"](1,49152,null,0,o.I,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](2,0,null,0,42,"ion-grid",[],[[2,"cardON",null]],null,null,i.Db,i.t)),l["\u0275did"](3,49152,null,0,o.B,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](4,0,null,0,9,"ion-row",[],null,null,null,i.ac,i.Q)),l["\u0275did"](5,49152,null,0,o.hb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](6,0,null,0,4,"ion-col",[["class","state"]],null,null,null,i.xb,i.n)),l["\u0275did"](7,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](8,0,null,0,2,"div",[["class","msg"]],null,null,null,null,null)),(e()(),l["\u0275eld"](9,0,null,null,0,"span",[],[[2,"ON",null],[2,"OFF",null]],null,null,null,null)),(e()(),l["\u0275ted"](10,null,[" "," "])),(e()(),l["\u0275eld"](11,0,null,0,2,"ion-col",[["class","bank"]],null,null,null,i.xb,i.n)),l["\u0275did"](12,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](13,0,[" "," "])),(e()(),l["\u0275eld"](14,0,null,0,8,"ion-row",[],null,null,null,i.ac,i.Q)),l["\u0275did"](15,49152,null,0,o.hb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](16,0,null,0,3,"ion-col",[["class","chip"],["size","2"]],null,null,null,i.xb,i.n)),l["\u0275did"](17,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{size:[0,"size"]},null),(e()(),l["\u0275eld"](18,0,null,0,1,"ion-img",[["src","assets/img/chip.png"]],null,null,null,i.Gb,i.w)),l["\u0275did"](19,49152,null,0,o.E,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{src:[0,"src"]},null),(e()(),l["\u0275eld"](20,0,null,0,2,"ion-col",[["class","number3"],["size","10"]],null,null,null,i.xb,i.n)),l["\u0275did"](21,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{size:[0,"size"]},null),(e()(),l["\u0275ted"](22,0,[" "," "])),(e()(),l["\u0275eld"](23,0,null,0,13,"ion-row",[["class","digits"]],null,null,null,i.ac,i.Q)),l["\u0275did"](24,49152,null,0,o.hb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](25,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),l["\u0275did"](26,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](-1,0,[" **** "])),(e()(),l["\u0275eld"](28,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),l["\u0275did"](29,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](-1,0,[" **** "])),(e()(),l["\u0275eld"](31,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),l["\u0275did"](32,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](-1,0,[" **** "])),(e()(),l["\u0275eld"](34,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),l["\u0275did"](35,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](36,0,[" "," "])),(e()(),l["\u0275eld"](37,0,null,0,7,"ion-row",[],null,null,null,i.ac,i.Q)),l["\u0275did"](38,49152,null,0,o.hb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](39,0,null,0,2,"ion-col",[["class","date"]],null,null,null,i.xb,i.n)),l["\u0275did"](40,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](41,0,[" Expira: "," / "," "])),(e()(),l["\u0275eld"](42,0,null,0,2,"ion-col",[["class","bank"]],null,null,null,i.xb,i.n)),l["\u0275did"](43,49152,null,0,o.u,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](44,0,[" "," "])),(e()(),l["\u0275eld"](45,0,null,0,3,"ion-radio",[["color","success"],["slot","start"]],null,[[null,"ionBlur"],[null,"ionSelect"]],(function(e,n,t){var i=!0;return"ionBlur"===n&&(i=!1!==l["\u0275nov"](e,48)._handleBlurEvent(t.target)&&i),"ionSelect"===n&&(i=!1!==l["\u0275nov"](e,48)._handleIonSelect(t.target)&&i),i}),i.Yb,i.N)),l["\u0275prd"](5120,null,a.m,(function(e){return[e]}),[o.Mb]),l["\u0275did"](47,49152,null,0,o.Y,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"],value:[1,"value"]},null),l["\u0275did"](48,16384,null,0,o.Mb,[l.ElementRef],null,null)],(function(e,n){e(n,17,0,"2"),e(n,19,0,"assets/img/chip.png"),e(n,21,0,"10"),e(n,47,0,"success",n.context.$implicit._id)}),(function(e,n){var t=n.component;e(n,2,0,"Activo"),e(n,9,0,"Activo"==n.context.$implicit.estado,"Inactivo"==n.context.$implicit.estado),e(n,10,0,n.context.$implicit.estado),e(n,13,0,n.context.$implicit.banco),e(n,22,0,n.context.$implicit.nombre),e(n,36,0,t.padLeadingZeros(t.authenticationService.decryptvalue(n.context.$implicit.n4))),e(n,41,0,n.context.$implicit.mes,n.context.$implicit.ano),e(n,44,0,n.context.$implicit.tipo)}))}function g(e){return l["\u0275vid"](0,[l["\u0275qud"](671088640,1,{radioGroup:0}),l["\u0275qud"](671088640,2,{searchElementRef:0}),(e()(),l["\u0275eld"](2,0,null,null,12,"ion-header",[],null,null,null,i.Eb,i.u)),l["\u0275did"](3,49152,null,0,o.C,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{translucent:[0,"translucent"]},null),(e()(),l["\u0275eld"](4,0,null,0,10,"ion-toolbar",[["color","primary"]],null,null,null,i.sc,i.ib)),l["\u0275did"](5,49152,null,0,o.Ab,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(e()(),l["\u0275eld"](6,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,i.pb,i.f)),l["\u0275did"](7,49152,null,0,o.m,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](8,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.closeModal()&&l),l}),i.ob,i.e)),l["\u0275did"](9,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](10,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),l["\u0275did"](11,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(e()(),l["\u0275eld"](12,0,null,0,2,"ion-title",[],null,null,null,i.qc,i.gb)),l["\u0275did"](13,49152,null,0,o.yb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](14,0,["",""])),(e()(),l["\u0275eld"](15,0,null,null,32,"ion-content",[["class","ion-padding"]],null,null,null,i.yb,i.o)),l["\u0275did"](16,49152,null,0,o.v,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{fullscreen:[0,"fullscreen"]},null),(e()(),l["\u0275eld"](17,0,null,0,4,"ion-item-divider",[["color","primary"]],null,null,null,i.Kb,i.B)),l["\u0275did"](18,49152,null,0,o.J,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(e()(),l["\u0275eld"](19,0,null,0,2,"ion-label",[],null,null,null,i.Qb,i.G)),l["\u0275did"](20,49152,null,0,o.O,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](-1,0,[" Canal de pago "])),(e()(),l["\u0275eld"](22,0,null,0,22,"ion-list",[],null,null,null,i.Sb,i.H)),l["\u0275did"](23,49152,null,0,o.P,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](24,0,null,0,20,"ion-radio-group",[["value","efectivo"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(e,n,t){var i=!0;return"ionBlur"===n&&(i=!1!==l["\u0275nov"](e,27)._handleBlurEvent(t.target)&&i),"ionChange"===n&&(i=!1!==l["\u0275nov"](e,27)._handleChangeEvent(t.target)&&i),i}),i.Xb,i.O)),l["\u0275prd"](5120,null,a.m,(function(e){return[e]}),[o.Ob]),l["\u0275did"](26,49152,null,0,o.Z,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{value:[0,"value"]},null),l["\u0275did"](27,16384,null,0,o.Ob,[l.ElementRef],null,null),(e()(),l["\u0275eld"](28,0,null,0,16,"div",[],null,null,null,null,null)),(e()(),l["\u0275eld"](29,0,null,null,15,"ion-radio-group",[["allow-empty-selection","true"],["name","radio-group"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(e,n,t){var i=!0,o=e.component;return"ionBlur"===n&&(i=!1!==l["\u0275nov"](e,32)._handleBlurEvent(t.target)&&i),"ionChange"===n&&(i=!1!==l["\u0275nov"](e,32)._handleChangeEvent(t.target)&&i),"ionChange"===n&&(i=!1!==o.radioSelect(t)&&i),i}),i.Xb,i.O)),l["\u0275prd"](5120,null,a.m,(function(e){return[e]}),[o.Ob]),l["\u0275did"](31,49152,[[1,4],["radioGroup",4]],0,o.Z,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),l["\u0275did"](32,16384,null,0,o.Ob,[l.ElementRef],null,null),(e()(),l["\u0275eld"](33,0,null,0,9,"ion-item",[],null,null,null,i.Pb,i.A)),l["\u0275did"](34,49152,null,0,o.I,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](35,0,null,0,3,"ion-label",[],null,null,null,i.Qb,i.G)),l["\u0275did"](36,49152,null,0,o.O,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](37,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Saldo actual"])),(e()(),l["\u0275eld"](39,0,null,0,3,"ion-radio",[["color","success"],["slot","start"],["value","efectivo"]],null,[[null,"ionBlur"],[null,"ionSelect"]],(function(e,n,t){var i=!0;return"ionBlur"===n&&(i=!1!==l["\u0275nov"](e,42)._handleBlurEvent(t.target)&&i),"ionSelect"===n&&(i=!1!==l["\u0275nov"](e,42)._handleIonSelect(t.target)&&i),i}),i.Yb,i.N)),l["\u0275prd"](5120,null,a.m,(function(e){return[e]}),[o.Mb]),l["\u0275did"](41,49152,null,0,o.Y,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"],value:[1,"value"]},null),l["\u0275did"](42,16384,null,0,o.Mb,[l.ElementRef],null,null),(e()(),l["\u0275and"](16777216,null,0,1,null,m)),l["\u0275did"](44,278528,null,0,r.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),l["\u0275eld"](45,0,null,0,2,"ion-button",[["color","primary"],["expand","block"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.pagar()&&l),l}),i.ob,i.e)),l["\u0275did"](46,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"],expand:[1,"expand"]},null),(e()(),l["\u0275ted"](-1,0,[" PAGAR "]))],(function(e,n){var t=n.component;e(n,3,0,!0),e(n,5,0,"primary"),e(n,11,0,"close"),e(n,16,0,!0),e(n,18,0,"primary"),e(n,26,0,"efectivo"),e(n,31,0,"radio-group"),e(n,41,0,"success","efectivo"),e(n,44,0,t.items),e(n,46,0,"primary","block")}),(function(e,n){e(n,14,0,n.component.tituloxx)}))}var f=l["\u0275ccf"]("app-my-modalcredito",u.a,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-my-modalcredito",[],null,null,null,g,d)),l["\u0275did"](1,4308992,null,0,u.a,[c.l,o.Gb,s.a,o.Ib],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[])},"Gs+c":function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var l=t("mrSG");t("ZtEv");var i=function(){function e(n,t,l,i){_classCallCheck(this,e),this.translateService=n,this.modalController=t,this.authenticationService=l,this.navParams=i,this.title="AGM project",this.items2=[],this.msg="",this.userinfo=[],this.items=[],this.defaultSelectedRadio="efectivo",this.userinfo=this.authenticationService.getcopiauser(),this.passcode="",this.finalPin="",this.mypinseguro=this.userinfo[0].codpersonal,this.message=!0,this.pageStatus="Enter Pin",this.int=0,this.newPincount=0,this.fingerPin=!1}return _createClass(e,[{key:"padLeadingZeros",value:function(e,n){for(var t=e+"";t.length<n;)t="0"+t;return t}},{key:"ngOnInit",value:function(){var e=this;this.tituloxx=this.navParams.get("title"),this.metodopago=this.navParams.get("metodopago"),this.userinfo=this.authenticationService.getcopiauser(),this.translateService.get("SEGUROM").subscribe((function(n){e.seguro=n})),this.translateService.get("MSGM").subscribe((function(n){e.msg=n})),this.pideregistros("Activo")}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.selectTwo()}),400)}},{key:"pagar",value:function(){this.modalController.dismiss({data:this.metodopago,item:this.tpagoid})}},{key:"closeModal",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.modalController.dismiss({data:"close"});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"selectTwo",value:function(){this.radioGroup.value="efectivo"}},{key:"pideregistros",value:function(e){var n=this;this.itemsList=[],this.authenticationService.getReg("todos/"+e+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id,"tarjetacreditos",0).then((function(e){n.items=e,n.itemsList=n.items}),(function(e){n.authenticationService.presentAlert(e.error,n.msg,"")}))}},{key:"radioSelect",value:function(e){this.tpagoid=e.detail.value}}]),e}()},KyMZ:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var l=function e(){_classCallCheck(this,e)}},OEUh:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var l=t("8Y7J"),i=t("MKJQ"),o=t("sZkV"),a=t("SVse"),r=t("fc4l"),u=t("ZtEv"),c=l["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{--page-margin:var(--app-fair-margin);--page-background:var(--app-background);--page-swiper-pagination-space:30px;--page-swiper-pagination-height:18px;--page-pagination-bullet-size:10px;--page-options-gutter:calc(var(--page-margin)/2);--page-related-items-gutter:calc(var(--page-margin)/2);--page-color:#089bdf}.book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}.detail-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500;color:var(--ion-color-dark-tint);margin:0;margin-bottom:calc(var(--page-margin)/2)}"]],data:{}});function s(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"ion-button",[["color","danger"],["title","Parar escaner"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.stopScan()&&l),l}),i.ob,i.e)),l["\u0275did"](1,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"ion-icon",[["name","stop-circle-outline"],["slot","start"]],null,null,null,i.Fb,i.v)),l["\u0275did"](3,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null)],(function(e,n){e(n,1,0,"danger"),e(n,3,0,"stop-circle-outline")}),null)}function d(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,3,"ion-button",[["color","warning"],["title","Reset"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.reset()&&l),l}),i.ob,i.e)),l["\u0275did"](1,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(e()(),l["\u0275eld"](2,0,null,0,1,"ion-icon",[["name","refresh-circle-outline"],["slot","start"]],null,null,null,i.Fb,i.v)),l["\u0275did"](3,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null)],(function(e,n){e(n,1,0,"warning"),e(n,3,0,"refresh-circle-outline")}),null)}function m(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,4,"h3",[["class","detail-title"]],null,null,null,null,null)),(e()(),l["\u0275ted"](-1,null,["Monto a cobrar: "])),(e()(),l["\u0275eld"](2,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),l["\u0275ted"](3,null,[" ",""])),l["\u0275ppd"](4,2)],null,(function(e,n){var t=n.component,i=l["\u0275unv"](n,3,0,e(n,4,0,l["\u0275nov"](n.parent,0),t.monto,t.moneda));e(n,3,0,i)}))}function g(e){return l["\u0275vid"](0,[l["\u0275pid"](0,a.CurrencyPipe,[l.LOCALE_ID,l.DEFAULT_CURRENCY_CODE]),l["\u0275qud"](671088640,1,{video:0}),l["\u0275qud"](671088640,2,{canvas:0}),l["\u0275qud"](671088640,3,{fileinput:0}),l["\u0275qud"](671088640,4,{searchElementRef:0}),(e()(),l["\u0275eld"](5,0,null,null,24,"ion-header",[],null,null,null,i.Eb,i.u)),l["\u0275did"](6,49152,null,0,o.C,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{translucent:[0,"translucent"]},null),(e()(),l["\u0275eld"](7,0,null,0,22,"ion-toolbar",[["color","primary"]],null,null,null,i.sc,i.ib)),l["\u0275did"](8,49152,null,0,o.Ab,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{color:[0,"color"]},null),(e()(),l["\u0275eld"](9,0,null,0,17,"ion-buttons",[["slot","end"]],null,null,null,i.pb,i.f)),l["\u0275did"](10,49152,null,0,o.m,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275and"](16777216,null,0,1,null,s)),l["\u0275did"](12,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275and"](16777216,null,0,1,null,d)),l["\u0275did"](14,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](15,0,null,0,3,"ion-button",[["title","Iniciar escaner"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.startScan()&&l),l}),i.ob,i.e)),l["\u0275did"](16,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](17,0,null,0,1,"ion-icon",[["name","qr-code-outline"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),l["\u0275did"](18,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(e()(),l["\u0275eld"](19,0,null,0,3,"ion-button",[["title","leer imagen qr de galeria"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.captureImage()&&l),l}),i.ob,i.e)),l["\u0275did"](20,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](21,0,null,0,1,"ion-icon",[["name","image-outline"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),l["\u0275did"](22,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(e()(),l["\u0275eld"](23,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.closeModal()&&l),l}),i.ob,i.e)),l["\u0275did"](24,49152,null,0,o.l,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275eld"](25,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),l["\u0275did"](26,49152,null,0,o.D,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{name:[0,"name"]},null),(e()(),l["\u0275eld"](27,0,null,0,2,"ion-title",[],null,null,null,i.qc,i.gb)),l["\u0275did"](28,49152,null,0,o.yb,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],null,null),(e()(),l["\u0275ted"](29,0,["",""])),(e()(),l["\u0275eld"](30,0,null,null,7,"ion-content",[["class","ion-padding"]],null,null,null,i.yb,i.o)),l["\u0275did"](31,49152,null,0,o.v,[l.ChangeDetectorRef,l.ElementRef,l.NgZone],{fullscreen:[0,"fullscreen"]},null),(e()(),l["\u0275eld"](32,0,[[3,0],["fileinput",1]],0,0,"input",[["accept","image/*;capture=camera"],["hidden",""],["type","file"]],null,[[null,"change"]],(function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.handleFile(t.target.files)&&l),l}),null,null)),(e()(),l["\u0275eld"](33,0,null,0,0,"br",[],null,null,null,null,null)),(e()(),l["\u0275and"](16777216,null,0,1,null,m)),l["\u0275did"](35,16384,null,0,a.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["\u0275eld"](36,0,[[1,0],["video",1]],0,0,"video",[["width","100%"]],[[8,"hidden",0]],null,null,null,null)),(e()(),l["\u0275eld"](37,0,[[2,0],["canvas",1]],0,0,"canvas",[["hidden",""]],null,null,null,null,null))],(function(e,n){var t=n.component;e(n,6,0,!0),e(n,8,0,"primary"),e(n,12,0,t.scanActive),e(n,14,0,t.scanResult),e(n,18,0,"qr-code-outline"),e(n,22,0,"image-outline"),e(n,26,0,"close"),e(n,31,0,!0),e(n,35,0,0!==t.monto)}),(function(e,n){var t=n.component;e(n,29,0,t.tituloxx),e(n,36,0,!t.scanActive)}))}var f=l["\u0275ccf"]("app-my-modalscanpay",r.a,(function(e){return l["\u0275vid"](0,[(e()(),l["\u0275eld"](0,0,null,null,1,"app-my-modalscanpay",[],null,null,null,g,c)),l["\u0275did"](1,4308992,null,0,r.a,[o.b,o.Gb,o.Eb,o.Qb,u.a,l.NgZone,o.Ib,o.Kb],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[])},fc4l:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var l=t("mrSG"),i=(t("ZtEv"),t("7Ozu")),o=t.n(i),a=function(){function e(n,t,l,i,o,a,r,u){_classCallCheck(this,e),this.alertController=n,this.modalController=t,this.loadingCtrl=l,this.toastCtrl=i,this.authenticationService=o,this.ngZone=a,this.navParams=r,this.plt=u,this.scanActive=!1,this.scanResult=null,this.loading=null,this.title="AGM project",this.zoom=16,this.userinfo=[],this.monto=0,this.plt.is("ios")&&"standalone"in window.navigator&&window}return _createClass(e,[{key:"dismissModal",value:function(){this.modalController.dismiss({data:"close"})}},{key:"ngOnInit",value:function(){this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.navParams.get("title"),this.moneda=this.navParams.get("moneda"),this.monto=this.navParams.get("monto"),this.tipo=this.navParams.get("tipo")}},{key:"ngAfterViewInit",value:function(){this.canvasElement=this.canvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.videoElement=this.video.nativeElement,this.startScan()}},{key:"showQrToast",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastCtrl.create({message:"Open ".concat(this.scanResult,"?"),position:"top",buttons:[{text:"Open",handler:function(){window.open(n.scanResult,"_system","location=yes")}}]});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"reset",value:function(){this.scanResult=null}},{key:"stopScan",value:function(){this.scanActive=!1}},{key:"startScan",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 2:return n=e.sent,this.videoElement.srcObject=n,this.videoElement.setAttribute("playsinline",!0),e.next=7,this.loadingCtrl.create({});case 7:return this.loading=e.sent,e.next=10,this.loading.present();case 10:this.videoElement.play(),requestAnimationFrame(this.scan.bind(this));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"scan",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.videoElement.readyState!==this.videoElement.HAVE_ENOUGH_DATA){e.next=14;break}if(e.t0=this.loading,!e.t0){e.next=7;break}return e.next=5,this.loading.dismiss();case 5:this.loading=null,this.scanActive=!0;case 7:this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.width=this.videoElement.videoWidth,this.canvasContext.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),n=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),(t=o()(n.data,n.width,n.height,{inversionAttempts:"dontInvert"}))?(this.scanActive=!1,this.scanResult=this.authenticationService.decryptvalue(t.data),l=this.scanResult.split("\xb0"),this.tokenactual=l[6],"pagoqr"===this.tipo?this.verificapago(l):this.cobronormal(l)):this.scanActive&&requestAnimationFrame(this.scan.bind(this)),e.next=15;break;case 14:requestAnimationFrame(this.scan.bind(this));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"captureImage",value:function(){this.fileinput.nativeElement.click()}},{key:"handleFile",value:function(e){var n=this,t=e.item(0),l=new Image;l.onload=function(){n.canvasContext.drawImage(l,0,0,n.canvasElement.width,n.canvasElement.height);var e=n.canvasContext.getImageData(0,0,n.canvasElement.width,n.canvasElement.height),t=o()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"});if(t){n.scanResult=n.authenticationService.decryptvalue(t.data);var i=n.scanResult.split("\xb0");n.tokenactual=i[6],"cobrapagoqr"===n.tipo?n.cobronormalreves(i):"pagoqr"===n.tipo?n.verificapago(i):n.cobronormal(i)}},l.src=URL.createObjectURL(t)}},{key:"verificapago",value:function(e){var n=this;this.authenticationService.getReg(this.tokenactual+"/3","compratokens",0).then((function(t){t.length>0?3===t[0].estado?n.cobronormalsinsaldo(e):0===t[0].estado?n.authenticationService.getReg(e[1]+"/personadispid/"+e[0],"personals",0).then((function(t){if(Number(t[0].saldo)>=Number(n.monto)){var l={estado:2,cobroservicio:n.userinfo[0].idempresa.nombre+"<br> en la ubicaci\xf3n:"+n.userinfo[0].idempresa.direccion+"<br> Quiere cobrar "+n.moneda+" "+n.monto+"<br> \xbf Desea autorizar la transaccion?",bitacora:{idempresa:n.userinfo[0].idempresa._id,idafiliado:"",email:n.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+n.tokenactual}};l&&n.authenticationService.createReg(n.tokenactual,l,"compratokens").then((function(t){n.StartTimer(e)}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}else{var i={estado:10,cobroservicio:"Fondos insuficientes",bitacora:{idempresa:n.userinfo[0].idempresa._id,idafiliado:"",email:n.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+n.tokenactual}};i&&n.authenticationService.createReg(n.tokenactual,i,"compratokens").then((function(e){n.authenticationService.presentAlert("Fondos insuficientes","Precauci\xf3n","")}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")})):n.StartTimer(e):n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}),(function(e){n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"StartTimer",value:function(e){var n=this;this.timer=setTimeout((function(t){n.authenticationService.getReg(n.tokenactual+"/3","compratokens",0).then((function(t){t.length>0&&3===t[0].estado?n.cobronormalsinsaldo(e):n.StartTimer(e)}),(function(e){n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}),3e3)}},{key:"closeModal",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.modalController.dismiss({data:"close"});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"cobronormal",value:function(e){var n=this;this.authenticationService.getReg(e[6]+"/2","compratokens",0).then((function(t){var l;if((l=t).length>0)if(0===t[0].estado)if(n.authenticationService.decryptvalue(l[0].trama)+"\xb0"+l[0]._id+"\xb0"+l[0].tipo===n.scanResult)if(n.monto===e[4]){var i={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:n.userinfo[0].idempresa._id,idsuscriptor:e[1],tipocompra:"servicio",tokencompra:l[0]._id,nombre:e[2],monto:n.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:n.userinfo[0].idempresa._id,idafiliado:"",email:n.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:e[1],idsuscriptor2:{id:n.userinfo[0]._id,nombre:n.userinfo[0].nombre}};i&&n.authenticationService.createReg("",i,"comprasaldos").then((function(t){n.modalController.dismiss({data:"Se ha realizado una venta a: "+e[2]+"<br> Por un monto de "+n.moneda+" "+n.monto})}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}else n.authenticationService.presentAlert("El Monto no coincide con lo que el cliente programo.<br> El cliente quiere comprar: "+n.moneda+" "+e[4]+"<br> Se quiere acreditar: "+n.moneda+" "+n.monto,"Precauci\xf3n","");else n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"seguroacepta",value:function(e,n,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function l(){var i,o=this;return regeneratorRuntime.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.alertController.create({message:e,buttons:[{text:"No Aceptar",cssClass:"secondary",handler:function(e){var n={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};n&&o.authenticationService.createReg(o.tokenactual,n,"compratokens").then((function(e){o.modalController.dismiss("ok")}),(function(e){o.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}},{text:"Aceptar",handler:function(){var e=n[2].split("<"),l={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:n[0],idsuscriptor:o.userinfo[0]._id,tipocompra:"servicio",tokencompra:t[0]._id,nombre:o.userinfo[0].nombre,monto:n[4],url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:n[0],idafiliado:"",email:o.userinfo[0].email,permiso:"Crea",accion:"Cobro por pago de servicio"},idempresa0:o.userinfo[0]._id,idsuscriptor2:{id:n[1],nombre:e[0]}};l&&o.authenticationService.createReg("",l,"comprasaldos").then((function(e){var n={estado:33,cobroservicio:"Cobro realizado con exito ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};n&&o.authenticationService.createReg(o.tokenactual,n,"compratokens").then((function(e){o.modalController.dismiss("ok")}),(function(e){o.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}),(function(e){var n={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};n&&o.authenticationService.createReg(o.tokenactual,n,"compratokens").then((function(e){o.modalController.dismiss("ok")}),(function(e){o.authenticationService.presentAlert(e.error,"Precauci\xf3n","")})),o.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}}]});case 2:return i=l.sent,l.next=5,i.present();case 5:case"end":return l.stop()}}),l,this)})))}},{key:"cobronormalreves",value:function(e){var n=this;this.authenticationService.getReg(e[6]+"/2","compratokens",0).then((function(t){var l;(l=t).length>0&&0===t[0].estado&&n.authenticationService.decryptvalue(l[0].trama)+"\xb0"+l[0].tipo+"\xb0"+l[0]._id+"\xb0"+l[0].tipo===n.scanResult?n.seguroacepta(e[2]+"<br> Quiere cobrar "+n.moneda+" "+e[4]+"<br> \xbf Desea autorizar la transaccion?",e,l):n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"cobronormalsinsaldo",value:function(e){var n=this;this.authenticationService.getReg(e[1]+"/personadispid/"+e[0],"personals",0).then((function(t){if(Number(t[0].saldo)>=Number(n.monto))n.authenticationService.getReg(e[6]+"/2","compratokens",0).then((function(t){var l;l=t;var i={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:n.userinfo[0].idempresa._id,idsuscriptor:e[1],tipocompra:"servicio",tokencompra:l[0]._id,nombre:e[2],monto:n.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:n.userinfo[0].idempresa._id,idafiliado:"",email:n.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:e[1],idsuscriptor2:{id:n.userinfo[0]._id,nombre:n.userinfo[0].nombre}};i&&n.authenticationService.createReg("",i,"comprasaldos").then((function(t){n.modalController.dismiss({data:"Se ha realizado una venta a: "+e[2]+"<br> Por un monto de "+n.moneda+" "+n.monto})}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}),(function(e){n.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}));else{var l={estado:100,cobroservicio:"Fondos insuficientes, transaccion anulada",bitacora:{idempresa:n.userinfo[0].idempresa._id,idafiliado:"",email:n.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+n.tokenactual}};l&&n.authenticationService.createReg(n.tokenactual,l,"compratokens").then((function(e){n.authenticationService.presentAlert("Fondos insuficientes, transaccion anulada","Precauci\xf3n","")}),(function(e){n.authenticationService.presentAlert(e.error,"Precauci\xf3n","")}))}}))}}]),e}()}}]);