{"version":3,"sources":["webpack:///src/app/DESARROLLO/TIENDAS/producto-compra/producto-compra.module.ts","webpack:///src/app/DESARROLLO/TIENDAS/producto-compra/producto-compra.page.ts","webpack:///src/app/DESARROLLO/TIENDAS/producto-compra/producto-compra.page.html"],"names":["ProductoCompraPageModule","routerOutlet","router","authenticationService","alertController","translateService","modalController","showAgeFilter","showmenu","items","variables","userinfo","viewType","tituloxx","sienvio","efecto","seguro","msg","currentSegment","searchSubject","ReplaySubject","this","apifoto","getapifoto","getCurrentNavigation","extras","state","llave","llave0","categoria","getcopiauser","moneda","idempresa","titulo","searchQuery","get","subscribe","value","cartItemCount","getCartItemCount","pideregistros","itemsList","getReg","_id","then","data","err","presentAlert","error","filterList","list","query","filter","item","nombre","toLowerCase","includes","event","setTimeout","target","complete","length","disabled","addProduct","idproveedor","id","name","xunidad","unidad","price","precio","amount","presentingElement","animated","direccion","telefono","correo","getTop","modal","component","componentProps","cssClass","create","onWillDismiss","present"],"mappings":"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","file":"x","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { RouterModule} from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComponentsModule } from '../../../components/components.module';\n\n\n\nimport { MyModalcardPageModule } from '../../../DESARROLLO/modals/my-modalcard/my-modalcard.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule } from '@angular/forms';\n\n\nimport { ProductoCompraPage } from './producto-compra.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule, TranslateModule.forChild(),  MyModalcardPageModule,\n    RouterModule.forChild([{ path: '', component: ProductoCompraPage }]),\n    ComponentsModule\n  ],\n  declarations: [ProductoCompraPage],\n})\nexport class ProductoCompraPageModule {}\n","import { Component , OnInit , ViewChild } from '@angular/core';\nimport {AlertController, ModalController ,  IonRouterOutlet} from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport {  Router , NavigationExtras } from '@angular/router';\nimport { AuthenticationService } from '../../services/Authentication.service';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { MyModalcardPage } from '../../../DESARROLLO/modals/my-modalcard/my-modalcard.page';\nimport { ReplaySubject} from 'rxjs';\nimport { IonInfiniteScroll } from '@ionic/angular';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-producto-compra',\n  templateUrl: './producto-compra.page.html',\n  styleUrls: ['./producto-compra.page.scss'],\n})\nexport class ProductoCompraPage implements OnInit {\n  @ViewChild(IonInfiniteScroll, { static : false }) infiniteScroll: IonInfiniteScroll;\nrangeForm: FormGroup;\nsearchQuery: string;\nshowAgeFilter = false;\nshowmenu = false;\nllave:any;\ncategoria:any;\n  items: any  = [] ;\n  variables: any = [];\n  userinfo: any = [];\n  viewType = 'grid';\n  moneda:any;\n  tituloxx = '';\n  sienvio:any = false;\n  efecto = 0;\n  seguro = '';\n  msg = '';\n  apifoto : String;\n  cartItemCount: BehaviorSubject<number>;\n  \n  \n  lat: number;\n    lng: number;\n    address: string;\n  \n  \n  itemsList: Array<any>;\n  public currentSegment: string = \"Todos\";\n  searchSubject: ReplaySubject<any> = new ReplaySubject<any>(1);\n\nconstructor(   private routerOutlet: IonRouterOutlet , private router: Router, private authenticationService: AuthenticationService,\n   public alertController: AlertController,     public translateService: TranslateService    ,    private modalController: ModalController\n   ) { this.apifoto = this.authenticationService.getapifoto();\n }\n\n  ngOnInit() {\n    this.variables = this.router.getCurrentNavigation().extras.state.variables;\n    this.llave = this.router.getCurrentNavigation().extras.state.llave0;\n    this.categoria = this.router.getCurrentNavigation().extras.state.categoria;\n    this.sienvio = this.router.getCurrentNavigation().extras.state.sienvio;\n    this.userinfo = this.authenticationService.getcopiauser();\n    this.moneda =  this.userinfo [0].idempresa.moneda\n    this.tituloxx =   this.router.getCurrentNavigation().extras.state.titulo ;\n    this.searchQuery = '';\n    this.translateService.get('SEGUROM').subscribe((value) => {   this.seguro = value  });\n    this.translateService.get('MSGM').subscribe((value) => {   this.msg = value  });\n    this.cartItemCount = this.authenticationService.getCartItemCount();\n    this.pideregistros();\n  }\n\n \n  pideregistros0() {\n   this.pideregistros();\n  }\n  pideregistros() {\n       this.itemsList = [];\n       this.efecto = 0 ;\n       this.authenticationService.getReg('todosproductos/Activo/' + this.userinfo[0].idempresa._id + '/' + this.llave +'Â°'+this.categoria, 'productos', 0).then((data) => {\n  \n       this.efecto=1;\n       this.items =  data;\n       this.itemsList = this.items;\n }, (err) => {\n   this.authenticationService.presentAlert(err.error , this.msg , '');\n });\n  }\n  searchList() {\n \n    const query = (this.searchQuery && this.searchQuery !== null) ? this.searchQuery : '';\n    this.itemsList = this.filterList(this.items, query);\n  }\n filterList(list, query): Array<any> {\n   return list.filter(item => item.nombre.toLowerCase().includes(query.toLowerCase()));\n  }\n  loadData(event) {\n    setTimeout(() => {\n      event.target.complete();\n      if ( this.items.length === 1000) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n\n  masprod(item, event: any) {\n    this.authenticationService.addProduct({idproveedor:this.llave ,id: item._id,  name: item.nombre + ' ' + item.xunidad + ' ' + item.unidad,  price: item.precio,  amount: 1});\n}\n\n\n\nasync openCart() {\n  const modal = await this.modalController.create({\n    component: MyModalcardPage,\n    animated: true,\n    componentProps:  {sienvio:this.sienvio ,moneda:this.moneda, nombre:  this.userinfo[0].nombre , direccion: this.userinfo[0].direccion,  telefono: this.userinfo[0].telefono, correo: this.userinfo[0].correo   },\n    presentingElement: await this.modalController.getTop() , cssClass: 'modal-fullscreen'\n  });\n  modal.onWillDismiss().then((data) => {\n  });\n  return await modal.present();\n}\n\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"ProvidesPage\"></ion-back-button>\n    </ion-buttons>\n\n   \n    <ion-title>{{tituloxx}}</ion-title>\n  </ion-toolbar>\n  <ion-toolbar class=\"filters-toolbar\">\n    <ion-row class=\"searchbar-row\" align-items-center>\n      <ion-col>\n        <ion-searchbar animated [(ngModel)]=\"searchQuery\" (ionChange)=\"searchList()\" placeholder=\"{{ 'BUSCARM' | translate }}\"></ion-searchbar>\n\n   \n      </ion-col>\n      <ion-col class=\"call-to-action-col\">\n        <ion-button fill=\"clear\" color=\"tw_botton1\" class=\"filters-btn\" >\n          <ion-icon slot=\"icon-only\" name=\"options\"></ion-icon>\n        </ion-button>\n      </ion-col>\n    </ion-row>\n  \n    </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"fashion-listing-content\">\n  <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\">\n    <ion-fab-button color=\"tw_botton1\" style=\"height: 70px;  width: 70px;\" (click)=\"openCart()\" #cart>\n      <div class=\"cart-length\">{{ cartItemCount | async }}</div>\n      <ion-icon name=\"cart\" class=\"cart-icon\"></ion-icon>\n    </ion-fab-button>\n  </ion-fab>\n\n\n  <ng-container >\n    <ion-row class=\"items-row\">\n      <ion-col size=\"6\" class=\"listing-item\" *ngFor=\"let item of itemsList\">\n        <div class=\"item-image-wrapper\">\n          <a class=\"image-anchor\" [queryParams]=\"{ page: 99 }\" [routerLink]=\"['/app/categories/fashion/detalle', item._id]\">\n            <app-aspect-ratio [ratio]=\"{w: 3, h: 3}\">\n              <app-image-shell class=\"item-image\" animation=\"spinner\" [src]=\"item.foto1\" [alt]=\"'product image'\"></app-image-shell>\n            </app-aspect-ratio>\n          </a>\n        </div>\n        <ion-row class=\"item-body\">\n          <ion-col size=\"12\" class=\"main-info\">\n            <h4 class=\"item-name\">\n              <a class=\"name-anchor\" >\n                <app-text-shell animation=\"gradient\" [data]=\"item.nombre + ' ' + item.xunidad + ' ' + item.unidad \"></app-text-shell>\n              </a>\n            \n            </h4>\n          </ion-col>\n          <ion-col size=\"12\">\n            <ion-row class=\"secondary-info\">\n              <ion-col class=\"price-col\">\n                <span class=\"item-sale-price\">\n                  <app-text-shell animation=\"gradient\" [data]=\"item.precio | currency:moneda \"></app-text-shell>\n                </span>\n              </ion-col>\n              <ng-container *ngIf=\"item.precio != '0'\">\n                <ion-col class=\"separator\">\n                </ion-col>\n                <ion-col class=\"price-col\">\n                  <span class=\"item-original-price\">\n                    <app-text-shell animation=\"gradient\" [data]=\"item.precio | currency:moneda\"></app-text-shell>\n                  </span>\n                </ion-col>\n              </ng-container>\n            </ion-row>\n          </ion-col>\n          <ion-col size=\"10\" style=\"    display: flex;        justify-content: left;\">\n            <ion-fab-button color=\"tw_botton1\"  (click)=\"masprod(item,$event)\">\n              <ion-icon  name=\"add\"></ion-icon>\n            </ion-fab-button>\n           \n         <!--   \n            <ion-item class=\"counter-item input-item\">\n            \n              <app-counter-input   (click)=\"masprod(item,$event)\" ></app-counter-input>\n            </ion-item>\n            -->\n          </ion-col>\n       \n         \n        </ion-row>\n      </ion-col>\n    </ion-row>\n  </ng-container>\n</ion-content>\n"]}