"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[700],{80700:(I,v,c)=>{c.r(v),c.d(v,{PedidoCompraPageModule:()=>qe});var n=c(23349),A=c(55787),m=c(69808),y=c(33678),Z=c(51062),r=c(93075),f=c(57565),b=c(22675),_=c(36351),e=c(5e3);let U=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,r.u5,n.Pc,r.UX,f.R,Z.aw.forChild()]]}),t})(),N=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,r.u5,b.v,n.Pc,r.UX,f.R,Z.aw.forChild()]]}),t})();var h=c(70655),x=c(49926),w=c(4707),P=c(63814);function E(t,l){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"ion-icon",38),e.TgZ(2,"span"),e._uU(3,"Ingrese producto"),e.qZA(),e.qZA())}function k(t,l){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"ion-icon",38),e.TgZ(2,"span"),e._uU(3,"Ingrese nombre"),e.qZA(),e.qZA())}function J(t,l){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"ion-icon",38),e.TgZ(2,"span"),e._uU(3,"Ingrese direcci\xf3n"),e.qZA(),e.qZA())}function S(t,l){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"ion-icon",38),e.TgZ(2,"span"),e._uU(3,"Ingrese tel\xe9fono"),e.qZA(),e.qZA())}function Q(t,l){1&t&&(e.TgZ(0,"div",37),e._UZ(1,"ion-icon",38),e.TgZ(2,"span"),e._uU(3,"Ingrese tipo pago"),e.qZA(),e.qZA())}function L(t,l){if(1&t&&(e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row",39),e.TgZ(3,"ion-col",40),e.TgZ(4,"ion-button",41),e._UZ(5,"ion-icon",42),e.qZA(),e.qZA(),e.TgZ(6,"ion-col",43),e._uU(7),e.qZA(),e.TgZ(8,"ion-col",40),e.TgZ(9,"ion-button",41),e._UZ(10,"ion-icon",44),e.qZA(),e.qZA(),e.TgZ(11,"ion-col",45),e.TgZ(12,"ion-button",41),e._UZ(13,"ion-icon",46),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"ion-row"),e.TgZ(15,"ion-col",25),e.TgZ(16,"b"),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"ion-col",26),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=l.$implicit,o=e.oxw();e.xp6(3),e.Q6J("hidden",!0),e.xp6(4),e.hij(" ",i.amount," "),e.xp6(1),e.Q6J("hidden",!0),e.xp6(3),e.Q6J("hidden",!0),e.xp6(6),e.Oqu(i.name),e.xp6(2),e.hij(" ",e.xi3(20,6,i.amount*i.price,o.moneda)," ")}}let O=(()=>{class t{constructor(i,o,a,s,d,g){this.alertController=i,this.translateService=o,this.modalController=a,this.navParams=s,this.authenticationService=d,this.modalCtrl=g,this.cart=[],this.variables=[],this.userinfo=[],this.botton1=!1,this.seguro=""}dismissModal(){this.modalCtrl.dismiss("close")}ngOnInit(){this.userinfo=this.authenticationService.getcopiauser(),this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.cart=this.authenticationService.getCart(),this.Form=new r.cw({direccion:new r.NI("",r.kI.required),nombre:new r.NI("",r.kI.required),telefono:new r.NI("",r.kI.required),tpago:new r.NI("",r.kI.required),total:new r.NI("",r.kI.required),direccion2a:new r.NI(""),direccion2:new r.NI(""),nombre2:new r.NI(""),nit:new r.NI(""),departamento:new r.NI("",r.kI.required),municipio:new r.NI("",r.kI.required),zona:new r.NI("",r.kI.required),pagaracambio:new r.NI("")}),this.Form.controls.nombre.setValue(this.navParams.data.data.nombre),this.Form.controls.direccion.setValue(this.navParams.data.data.direccion),this.Form.controls.telefono.setValue(this.navParams.data.data.telefono),this.Form.controls.tpago.setValue(this.navParams.data.data.tipopago),this.Form.controls.total.setValue(this.navParams.data.data.total),this.Form.controls.departamento.setValue(this.navParams.data.data.departamento),this.Form.controls.municipio.setValue(this.navParams.data.data.municipio),this.Form.controls.zona.setValue(this.navParams.data.data.zona),this.Form.controls.direccion2a.setValue(this.navParams.data.data.direccion2a),this.totalenvio=this.navParams.data.data.totalenvio,this.totalproductos=this.navParams.data.data.totalproductos,this.grantotal=this.navParams.data.data.total,this.Form.controls.pagaracambio.setValue(this.navParams.data.data.pagaracambio),this.Form.controls.nombre2.setValue(this.navParams.data.data.nombre2),this.Form.controls.direccion2.setValue(this.navParams.data.data.direccion2),this.Form.controls.nit.setValue(this.navParams.data.data.nit),this.moneda=this.navParams.data.moneda,this.recibida=this.navParams.data.data.createdAt,this.noorden="1",this.estadoorden=this.navParams.data.data.estado,this.cart=this.navParams.data.data.dproductos,this.estadopedido=this.navParams.data.data.estado,"user"!==this.userinfo[0].role&&"Operador pedidos"!==this.userinfo[0].role&&"Administrador"!==this.userinfo[0].role?this.botton1=!0:("Abiertas"===this.estadopedido&&(this.estadoejecuta="En proceso"),"En proceso"===this.estadopedido&&(this.estadoejecuta="En camino"),"En camino"===this.estadopedido&&(this.estadoejecuta="Entregadas"),"Entregadas"===this.estadopedido&&(this.botton1=!0,this.estadoejecuta="En proceso"),"Anuladas"===this.estadopedido&&(this.botton1=!0,this.estadoejecuta="En proceso"),"Abiertas"===this.estadopedido&&(this.botton1=!0,this.estadoejecuta="En proceso"))}decreaseCartItem(i){this.authenticationService.decreaseProduct(i)}increaseCartItem(i){this.authenticationService.addProduct(i)}removeCartItem(i){this.authenticationService.removeProduct(i)}close(){this.modalCtrl.dismiss()}checkout(){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Gracias "+this.Form.controls.nombre.value,message:"El monto de sus compra es "+this.Form.controls.total.value+" <br>"+this.seguro,buttons:[{text:"No",cssClass:"secondary",handler:o=>{}},{text:"Si",handler:()=>{const o=[];for(let s=0;s<this.cart.length;s++)o.push({idproveedor:this.cart[s].idproveedor,id:this.cart[s].id,name:this.cart[s].name,price:this.cart[s].price,amount:this.cart[s].amount,subtotal:this.cart[s].price*this.cart[s].amount});const a={idempresa:this.userinfo[0].idempresa._id,nombre:this.Form.controls.nombre.value,direccion:this.Form.controls.direccion.value,telefono:this.Form.controls.telefono.value,total:this.Form.controls.total.value,tipopago:this.Form.controls.tpago.value,idusuario:this.userinfo[0]._id,estado:"Abiertas",deliveryasignado:"",dproductos:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crear",accion:"Creacion de pedido de compra"}};a&&this.authenticationService.createReg("",a,"orden_compras").then(s=>{!this.Form.valid||(this.authenticationService.presentAlert("Pedido creado con exito","Gracias",""),this.authenticationService.borrarProduct(),this.modalCtrl.dismiss("close"))},s=>{this.authenticationService.presentAlert(s.error,"Precauci\xf3n","")})}}]})).present()})}dacomponente(i,o){return(0,h.mG)(this,void 0,void 0,function*(){let a="";"ubicacion"===i&&(a=this.Form.controls.ubicacion.value);const s=yield this.modalController.create({component:P.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:a},cssClass:"modal-fullscreen"});return s.onWillDismiss().then(d=>{"close"===d.data||("direccion"===i?this.Form.controls.direccion.setValue(d.data.direccion):this.Form.controls.ubicacion.setValue(d.data.direccion+" {"+d.data.la+"\xb0"+d.data.lo+"}"))}),yield s.present()})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(n.Br),e.Y36(Z.sK),e.Y36(n.IN),e.Y36(n.X1),e.Y36(x.$),e.Y36(n.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-modalcard2"]],decls:146,vars:44,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],["fullscreen",""],["lines","full",1,"inputs-list"],[1,"input-item"],["color","tertiary","slot","end"],[1,"ion-padding"],[1,"user-details-fields","fields-section"],[1,"ion-text-wrap"],[1,"legal-title"],["inputMode","text","clearInput","true","formControlName","total","required","",3,"hidden"],[1,"error-container"],["class","error-message",4,"ngIf"],["position","floating"],["color","danger"],["inputMode","text","clearInput","true","formControlName","nombre","required","",3,"readonly"],["inputMode","text","clearInput","true","formControlName","direccion","required","",3,"readonly"],["rows","4","inputMode","text","clearInput","true","formControlName","direccion2a",3,"readonly"],["inputMode","text","clearInput","true","formControlName","departamento","required","",1,"ion-text-end",3,"readonly"],["inputMode","text","clearInput","true","formControlName","municipio","required","",1,"ion-text-end",3,"readonly"],["inputMode","text","clearInput","true","formControlName","zona","required","",1,"ion-text-end",3,"readonly"],["size","9"],["size","3",1,"ion-text-end"],["type","number","formControlName","telefono","required","",3,"readonly"],["inputMode","text","clearInput","true","formControlName","nombre2",3,"readonly"],["inputMode","text","clearInput","true","formControlName","direccion2",3,"readonly"],["inputMode","text","clearInput","true","formControlName","nit",3,"readonly"],["type","number","formControlName","pagaracambio",3,"readonly"],["formControlName","tpago",3,"disabled"],["value","Efectivo"],["value","Tarjeta"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["expand","full",3,"disabled","click"],[1,"error-message"],["name","information-circle-outline"],[1,"ion-align-items-center"],["size","2",1,"ion-align-self-center",3,"hidden"],["color","medium","fill","clear"],["name","remove-circle","slot","icon-only"],["size","1",1,"ion-align-self-center"],["name","add-circle","slot","icon-only"],["size","2","offset","5",3,"hidden"],["name","close-circle","slot","icon-only"]],template:function(i,o){1&i&&(e.TgZ(0,"form",0),e.TgZ(1,"ion-header"),e.TgZ(2,"ion-toolbar",1),e.TgZ(3,"ion-buttons",2),e.TgZ(4,"ion-button",3),e.NdJ("click",function(){return o.dismissModal()}),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.TgZ(6,"ion-title",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"ion-content",6),e.TgZ(9,"ion-list",7),e.TgZ(10,"ion-item",8),e.TgZ(11,"ion-badge",1),e._uU(12),e.qZA(),e.TgZ(13,"ion-badge",9),e._uU(14),e.ALo(15,"date"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"section",11),e.TgZ(18,"ion-item",12),e.TgZ(19,"h2",13),e._uU(20,"Informaci\xf3n del cliente"),e.qZA(),e.qZA(),e.TgZ(21,"ion-list",7),e._UZ(22,"ion-input",14),e.TgZ(23,"div",15),e.YNc(24,E,4,0,"div",16),e.qZA(),e.TgZ(25,"ion-item",8),e.TgZ(26,"ion-label",17),e._uU(27,"Nombre de entrega"),e.TgZ(28,"ion-text",18),e._uU(29,"*"),e.qZA(),e.qZA(),e._UZ(30,"ion-input",19),e.qZA(),e.TgZ(31,"div",15),e.YNc(32,k,4,0,"div",16),e.qZA(),e.TgZ(33,"ion-item",8),e.TgZ(34,"ion-label",17),e._uU(35,"Direcci\xf3n de entrega"),e.TgZ(36,"ion-text",18),e._uU(37,"*"),e.qZA(),e.qZA(),e._UZ(38,"ion-input",20),e.qZA(),e.TgZ(39,"ion-item",8),e.TgZ(40,"ion-label",17),e._uU(41,"Comentarios/ instrucciones de envio"),e.qZA(),e._UZ(42,"ion-textarea",21),e.qZA(),e.TgZ(43,"ion-item",8),e.TgZ(44,"ion-label"),e._uU(45,"Departamento"),e.TgZ(46,"ion-text",18),e._uU(47,"*"),e.qZA(),e.qZA(),e._UZ(48,"ion-input",22),e.qZA(),e.TgZ(49,"ion-item",8),e.TgZ(50,"ion-label"),e._uU(51,"Municipio"),e.TgZ(52,"ion-text",18),e._uU(53,"*"),e.qZA(),e.qZA(),e._UZ(54,"ion-input",23),e.qZA(),e.TgZ(55,"ion-item",8),e.TgZ(56,"ion-label"),e._uU(57,"Zona "),e.TgZ(58,"ion-text",18),e._uU(59,"*"),e.qZA(),e.qZA(),e._UZ(60,"ion-input",24),e.qZA(),e.TgZ(61,"ion-grid"),e.TgZ(62,"ion-row"),e.TgZ(63,"ion-col",25),e.TgZ(64,"strong"),e._uU(65," Total a productos:"),e.qZA(),e.qZA(),e.TgZ(66,"ion-col",26),e.TgZ(67,"strong"),e._uU(68),e.ALo(69,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"ion-grid"),e.TgZ(71,"ion-row"),e.TgZ(72,"ion-col",25),e.TgZ(73,"strong"),e._uU(74," Total a envio:"),e.qZA(),e.qZA(),e.TgZ(75,"ion-col",26),e.TgZ(76,"strong"),e._uU(77),e.ALo(78,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"ion-grid"),e.TgZ(80,"ion-row"),e.TgZ(81,"ion-col",25),e.TgZ(82,"strong"),e._uU(83," Total a cancelar:"),e.qZA(),e.qZA(),e.TgZ(84,"ion-col",26),e.TgZ(85,"strong"),e._uU(86),e.ALo(87,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",15),e.YNc(89,J,4,0,"div",16),e.qZA(),e.TgZ(90,"ion-item",8),e.TgZ(91,"ion-label",17),e._uU(92,"Tel\xe9fono"),e.TgZ(93,"ion-text",18),e._uU(94,"*"),e.qZA(),e.qZA(),e._UZ(95,"ion-input",27),e.qZA(),e.TgZ(96,"div",15),e.YNc(97,S,4,0,"div",16),e.qZA(),e.TgZ(98,"ion-item",12),e.TgZ(99,"h2",13),e._uU(100,"Datos de facturaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(101,"ion-item",8),e.TgZ(102,"ion-label",17),e._uU(103,"Nombre "),e.qZA(),e._UZ(104,"ion-input",28),e.qZA(),e.TgZ(105,"ion-item",8),e.TgZ(106,"ion-label",17),e._uU(107,"Direcci\xf3n"),e.qZA(),e._UZ(108,"ion-input",29),e.qZA(),e.TgZ(109,"ion-item",8),e.TgZ(110,"ion-label",17),e._uU(111,"Nit"),e.qZA(),e._UZ(112,"ion-input",30),e.qZA(),e.TgZ(113,"ion-item",8),e.TgZ(114,"ion-label",17),e._uU(115,"Indica cuanto pagar\xe1s para env\xedar cambio con tu orden"),e.qZA(),e._UZ(116,"ion-input",31),e.qZA(),e.TgZ(117,"ion-item",8),e.TgZ(118,"ion-label",17),e._uU(119,"Tipo pago"),e.TgZ(120,"ion-text",18),e._uU(121,"*"),e.qZA(),e.qZA(),e.TgZ(122,"ion-select",32),e.TgZ(123,"ion-select-option",33),e._uU(124,"Efectivo"),e.qZA(),e.TgZ(125,"ion-select-option",34),e._uU(126,"Tarjeta"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(127,"div",15),e.YNc(128,Q,4,0,"div",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(129,"ion-list"),e.TgZ(130,"ion-item",12),e.TgZ(131,"h2",13),e._uU(132,"Detalle de productos"),e.qZA(),e.qZA(),e.YNc(133,L,21,9,"ion-item",35),e.TgZ(134,"ion-item"),e.TgZ(135,"ion-grid"),e.TgZ(136,"ion-row"),e.TgZ(137,"ion-col",25),e.TgZ(138,"h3",13),e._uU(139,"Total"),e.qZA(),e.qZA(),e.TgZ(140,"ion-col",26),e.TgZ(141,"h3",13),e._uU(142),e.ALo(143,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(144,"ion-button",36),e.NdJ("click",function(){return o.checkout()}),e._uU(145),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("formGroup",o.Form),e.xp6(7),e.hij("Detalle del pedido (",o.estadoorden,")"),e.xp6(5),e.hij("Orden #",o.noorden," "),e.xp6(2),e.hij("Recibida:",e.xi3(15,29,o.recibida,"dd-MM-yyyy, hh:mm aaa"),""),e.xp6(8),e.Q6J("hidden",!0),e.xp6(2),e.Q6J("ngIf",o.Form.get("total").hasError("required")&&(o.Form.get("total").dirty||o.Form.get("total").touched)),e.xp6(6),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("ngIf",o.Form.get("nombre").hasError("required")&&(o.Form.get("nombre").dirty||o.Form.get("nombre").touched)),e.xp6(6),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("readonly",!0),e.xp6(8),e.hij(" ",e.xi3(69,32,o.totalproductos,o.moneda),""),e.xp6(9),e.hij(" ",e.xi3(78,35,o.totalenvio,o.moneda),""),e.xp6(9),e.hij(" ",e.xi3(87,38,o.grantotal,o.moneda),""),e.xp6(3),e.Q6J("ngIf",o.Form.get("direccion").hasError("required")&&(o.Form.get("direccion").dirty||o.Form.get("direccion").touched)),e.xp6(6),e.Q6J("readonly",!0),e.xp6(2),e.Q6J("ngIf",o.Form.get("telefono").hasError("required")&&(o.Form.get("telefono").dirty||o.Form.get("telefono").touched)),e.xp6(7),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(4),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("disabled",!0),e.xp6(6),e.Q6J("ngIf",o.Form.get("tpago").hasError("required")&&(o.Form.get("tpago").dirty||o.Form.get("tpago").touched)),e.xp6(5),e.Q6J("ngForOf",o.cart),e.xp6(9),e.hij(" ",e.xi3(143,41,o.totalproductos,o.moneda),""),e.xp6(2),e.Q6J("disabled",!o.Form.valid),e.xp6(1),e.hij(" ",o.estadoejecuta," "))},directives:[r._Y,r.JL,r.sg,n.Gu,n.sr,n.Sm,n.YG,n.gu,n.wd,n.W2,n.q_,n.Ie,n.yp,n.pK,n.j9,r.JJ,r.u,r.Q7,m.O5,n.Q$,n.yW,n.g2,n.jY,n.Nd,n.wI,n.as,n.t9,n.QI,n.n0,m.sg],pipes:[m.uU,m.H9],styles:[".book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}.legal-title[_ngcontent-%COMP%]{color:var(--ion-color-secondary);margin:var(--page-margin) 0px calc(var(--page-margin) / 2)}.legal-text[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:calc(var(--page-margin) / 2) 0px var(--page-margin);font-size:14px;line-height:20px;text-align:justify}"]}),t})();var z=c(15190),j=c(24171);const R=["canvas"];function D(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"ion-item",10),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row",53),e.TgZ(3,"ion-col",54),e.TgZ(4,"ion-button",55),e.NdJ("click",function(){const s=e.CHM(i).$implicit;return e.oxw().decreaseCartItem(s)}),e._UZ(5,"ion-icon",56),e.qZA(),e.qZA(),e.TgZ(6,"ion-col",57),e._uU(7),e.qZA(),e.TgZ(8,"ion-col",54),e.TgZ(9,"ion-button",55),e.NdJ("click",function(){const s=e.CHM(i).$implicit;return e.oxw().increaseCartItem(s)}),e._UZ(10,"ion-icon",58),e.qZA(),e.qZA(),e.TgZ(11,"ion-col",59),e.TgZ(12,"ion-button",55),e.NdJ("click",function(){const s=e.CHM(i).$implicit;return e.oxw().removeCartItem(s)}),e._UZ(13,"ion-icon",60),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"ion-row"),e.TgZ(15,"ion-col",12),e.TgZ(16,"b"),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"ion-col",13),e._uU(19),e.ALo(20,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=l.$implicit,o=e.oxw();e.xp6(7),e.hij(" ",i.amount," "),e.xp6(10),e.Oqu(i.name),e.xp6(2),e.hij(" ",e.xi3(20,3,i.amount*i.price,o.moneda)," ")}}function Y(t,l){1&t&&(e.TgZ(0,"div",61),e._UZ(1,"ion-icon",62),e.TgZ(2,"span"),e._uU(3,"Ingrese producto"),e.qZA(),e.qZA())}function G(t,l){1&t&&(e.TgZ(0,"div",61),e._UZ(1,"ion-icon",62),e.TgZ(2,"span"),e._uU(3,"Ingrese nombre"),e.qZA(),e.qZA())}function V(t,l){1&t&&(e.TgZ(0,"div",61),e._UZ(1,"ion-icon",62),e.TgZ(2,"span"),e._uU(3,"Ingrese direcci\xf3n"),e.qZA(),e.qZA())}function B(t,l){if(1&t&&(e.TgZ(0,"ion-select-option",63),e._uU(1),e.qZA()),2&t){const i=l.$implicit,o=e.oxw();e.Q6J("value",i.nombre+"\xb0"+i.costo),e.xp6(1),e.Oqu(i.nombre+" envio: "+o.moneda+i.costo)}}function $(t,l){1&t&&(e.TgZ(0,"div",61),e._UZ(1,"ion-icon",62),e.TgZ(2,"span"),e._uU(3,"Ingrese tel\xe9fono"),e.qZA(),e.qZA())}function W(t,l){1&t&&(e.TgZ(0,"div",61),e._UZ(1,"ion-icon",62),e.TgZ(2,"span"),e._uU(3,"Ingrese tipo pago"),e.qZA(),e.qZA())}let H=(()=>{class t{constructor(i,o,a,s,d,g,u){this.elementRef=i,this.alertController=o,this.translateService=a,this.modalController=s,this.navParams=d,this.authenticationService=g,this.modalCtrl=u,this.cart=[],this.variables=[],this.userinfo=[],this.vzona=[],this.seguro=""}dismissModal(){this.modalCtrl.dismiss("close")}init(){const i=this.elementRef.nativeElement.querySelector("canvas");i.width=window.innerWidth,i.height=window.innerHeight-140,this.signaturePad&&this.signaturePad.clear()}ingreso(){this.vuelto=Number(this.Form.controls.ingreso.value)-Number(this.Form.controls.total.value)}ngAfterViewInit(){this.signaturePad=new j.Z(this.signaturePadElement.nativeElement),this.signaturePad.clear(),this.signaturePad.penColor="rgb(56,128,255)"}save(){this.signaturePad.toDataURL()}isCanvasBlank(){if(this.signaturePad)return!!this.signaturePad.isEmpty()}clear(){this.signaturePad.clear()}undo(){const i=this.signaturePad.toData();i&&(i.pop(),this.signaturePad.fromData(i))}ngOnInit(){this.init(),this.variables=this.navParams.get("datatt"),this.userinfo=this.authenticationService.getcopiauser(),this.translateService.get("SEGUROM").subscribe(a=>{this.seguro=a});for(let a=0;a<this.variables.dproductos.length;a++)this.authenticationService.addProduct2({idproveedor:this.variables.dproductos[a].idproveedor,id:this.variables.dproductos[a].id,name:this.variables.dproductos[a].name,price:this.variables.dproductos[a].price,amount:1});this.cart=this.variables.dproductos,this.Form=new r.cw({direccion:new r.NI("",r.kI.required),nombre:new r.NI("",r.kI.required),telefono:new r.NI("",r.kI.required),tpago:new r.NI("",r.kI.required),total:new r.NI("",r.kI.required),ingreso:new r.NI(""),direccion2a:new r.NI(""),direccion2:new r.NI(""),nombre2:new r.NI(""),nit:new r.NI(""),totalenvio:new r.NI(""),departamento:new r.NI("",r.kI.required),municipio:new r.NI("",r.kI.required),zona:new r.NI("",r.kI.required),pagaracambio:new r.NI("")}),this.Form.controls.nombre.setValue(this.variables.nombre),this.Form.controls.direccion.setValue(this.variables.direccion),this.Form.controls.telefono.setValue(this.variables.telefono),this.Form.controls.tpago.setValue(this.variables.tipopago),this.Form.controls.departamento.setValue(this.variables.departamento),this.Form.controls.municipio.setValue(this.variables.municipio),this.Form.controls.direccion2a.setValue(this.variables.direccion2a),this.Form.controls.pagaracambio.setValue(this.variables.pagaracambio),this.Form.controls.nombre2.setValue(this.variables.nombre2),this.Form.controls.direccion2.setValue(this.variables.direccion2),this.Form.controls.nit.setValue(this.variables.nit),this.Form.controls.ingreso.setValue(this.variables.pagaracambio),this.vuelto=Number(this.Form.controls.pagaracambio.value)-Number(this.Form.controls.total.value);let i=this.Form.controls.departamento.value,o=this.Form.controls.municipio.value;""!==i&&""!==o&&this.authenticationService.getReg("zona/"+i+"/"+this.userinfo[0].idempresa._id+"/"+o,"ubicacionentregas",0).then(a=>{this.vzona=a,this.Form.controls.zona.setValue(this.variables.zona)},a=>{this.authenticationService.presentAlert(a.error,"Precauci\xf3n","")}),this.Form.controls.totalenvio.setValue(this.variables.totalenvio),this.totalenvio2=this.variables.totalenvio,this.moneda=this.navParams.data.moneda,this.idcompra=this.variables._id}decreaseCartItem(i){this.authenticationService.decreaseProduct2(i)}increaseCartItem(i){this.authenticationService.addProduct2(i)}removeCartItem(i){this.authenticationService.removeProduct2(i)}getTotal2(){const i=this.cart.reduce((a,s)=>a+s.price*s.amount,0);this.Form.controls.total.setValue(0!==i?i:"");var o=this.Form.controls.totalenvio.value;return Number(i)+Number(o)}onSelectcategoria(i){if(i.detail.value){let o=i.detail.value.split("\xb0");this.Form.controls.totalenvio.setValue(o[1]),this.totalenvio2=o[1]}else this.Form.controls.totalenvio.setValue("0"),this.totalenvio2="0"}getTotal(){const i=this.cart.reduce((o,a)=>o+a.price*a.amount,0);return this.Form.controls.total.setValue(0!==i?i:""),i}close(){this.modalCtrl.dismiss()}checkout(){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Gracias "+this.Form.controls.nombre.value,message:"El monto de sus compra es "+this.getTotal2()+" <br>"+this.seguro,buttons:[{text:"No",cssClass:"secondary",handler:o=>{}},{text:"Si",handler:()=>{const o=[];for(let a=0;a<this.cart.length;a++)o.push({idproveedor:this.cart[a].idproveedor,id:this.cart[a].id,name:this.cart[a].name,price:this.cart[a].price,amount:this.cart[a].amount,subtotal:this.cart[a].price*this.cart[a].amount});this.authenticationService.subefoto("","Image2s",this.signaturePad.toDataURL(),"","","","","create",this.userinfo[0].idempresa._id,"",this.idcompra).then(a=>{let s=[];s=a,this.firma=s.url;const d={idempresa:this.userinfo[0].idempresa._id,idcompra:this.idcompra,nombre:this.Form.controls.nombre.value,direccion:this.Form.controls.direccion.value,telefono:this.Form.controls.telefono.value,total:this.getTotal2(),tipopago:this.Form.controls.tpago.value,direccion2a:this.Form.controls.direccion2a.value,nombre2:this.Form.controls.nombre2.value,direccion2:this.Form.controls.direccion2.value,nit:this.Form.controls.nit.value,totalenvio:this.Form.controls.totalenvio.value,totalproductos:this.Form.controls.total.value,departamento:this.Form.controls.departamento.value,municipio:this.Form.controls.municipio.value,zona:this.Form.controls.zona.value,pagaracambio:this.Form.controls.pagaracambio.value,idusuario:this.userinfo[0]._id,estado:"Facturada",firma:this.firma,efectivo:this.Form.controls.ingreso.value,dproductos:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crear",accion:"Creacion de venta"}};d&&this.authenticationService.createReg("",d,"orden_ventas").then(g=>{if(!this.Form.valid)return;let u=[];u=g,this.authenticationService.presentAlert("Venta realizada con exito","Gracias",""),this.authenticationService.borrarProduct2(),this.modalCtrl.dismiss({estado:"exito",idventa:u._id})},g=>{this.authenticationService.presentAlert(g.error,"Precauci\xf3n","")})})}}]})).present()})}dacomponente(i,o){return(0,h.mG)(this,void 0,void 0,function*(){let a="";"ubicacion"===i&&(a=this.Form.controls.ubicacion.value);const s=yield this.modalController.create({component:P.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:a},cssClass:"modal-fullscreen"});return s.onWillDismiss().then(d=>{"close"===d.data||("direccion"===i?this.Form.controls.direccion.setValue(d.data.direccion):this.Form.controls.ubicacion.setValue(d.data.direccion+" {"+d.data.la+"\xb0"+d.data.lo+"}"))}),yield s.present()})}combodatoslimpia(i){return(0,h.mG)(this,void 0,void 0,function*(){this.Form.controls[i].setValue("")})}combodatos(i,o,a,s,d,g,u){return(0,h.mG)(this,void 0,void 0,function*(){let p="";""!==u&&(p=this.Form.controls[u].value);const T=yield this.modalController.create({component:z.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{grabax:g,variables:this.variables,userinfo:this.userinfo,doble:p,record2:null,op:this.userinfo[0].idempresa._id+"-"+o,frm:a,idllave:"",titlex:"Buscar "+d},cssClass:"modal-fullscreen"});return T.onWillDismiss().then(ye=>{let q=[];if(q=ye,"close"!==q.data)if(q.data){this.Form.controls[s].setValue(q.data.nombre);let M=this.Form.controls.departamento.value,F=this.Form.controls.municipio.value;""!==M&&""!==F&&this.authenticationService.getReg("zona/"+M+"/"+this.userinfo[0].idempresa._id+"/"+F,"ubicacionentregas",0).then(C=>{this.vzona=C},C=>{this.authenticationService.presentAlert(C.error,"Precauci\xf3n","")})}else this.Form.controls[s].setValue("")}),yield T.present()})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(e.SBq),e.Y36(n.Br),e.Y36(Z.sK),e.Y36(n.IN),e.Y36(n.X1),e.Y36(x.$),e.Y36(n.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-modalcard3"]],viewQuery:function(i,o){if(1&i&&e.Gf(R,7),2&i){let a;e.iGM(a=e.CRH())&&(o.signaturePadElement=a.first)}},decls:178,vars:35,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],["fullscreen",""],["color","warning","expand","full",3,"click"],[1,"ion-padding"],["color","secondary"],[1,"ion-text-wrap"],["class","ion-text-wrap",4,"ngFor","ngForOf"],["size","9"],["size","3",1,"ion-text-end"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],["inputMode","text","clearInput","true","formControlName","total","required","",3,"hidden"],[1,"error-container"],["class","error-message",4,"ngIf"],[1,"input-item"],["position","floating"],["color","danger"],["inputMode","text","clearInput","true","formControlName","nombre","required",""],["inputMode","text","clearInput","true","formControlName","direccion","required",""],["title","Seleccione ubicaci\xf3n",3,"click"],["slot","icon-only","name","map-outline"],["rows","4","inputMode","text","clearInput","true","formControlName","direccion2a"],["inputMode","text","clearInput","true","formControlName","departamento","required","",1,"ion-text-end",3,"readonly","click"],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],["inputMode","text","clearInput","true","formControlName","municipio","required","",1,"ion-text-end",3,"readonly","click"],["formControlName","zona",3,"placeholder","ionChange"],["style","white-space: pre-wrap !important;",3,"value",4,"ngFor","ngForOf"],["type","number","readonly","","formControlName","totalenvio","required","",3,"hidden"],["type","number","formControlName","telefono","required",""],["inputMode","text","clearInput","true","formControlName","nombre2"],["inputMode","text","clearInput","true","formControlName","direccion2"],["inputMode","text","clearInput","true","formControlName","nit"],["type","number","formControlName","pagaracambio"],["formControlName","tpago"],["value","Efectivo"],["value","TotalPay"],["type","number","formControlName","ingreso",3,"ionChange"],["sticky",""],["title","Limpiar",3,"click"],["slot","icon-only","name","document-outline"],["title","Deshacer",3,"click"],["slot","icon-only","name","arrow-undo-circle-outline"],["width","400","height","400",1,"signature-pad-canvas",2,"touch-action","none"],["canvas",""],["color","secondary","expand","full",3,"click"],[1,"ion-align-items-center"],["size","2",1,"ion-align-self-center"],["color","medium","fill","clear",3,"click"],["name","remove-circle","slot","icon-only"],["size","1",1,"ion-align-self-center"],["name","add-circle","slot","icon-only"],["size","2","offset","5"],["name","close-circle","slot","icon-only"],[1,"error-message"],["name","information-circle-outline"],[2,"white-space","pre-wrap !important",3,"value"]],template:function(i,o){1&i&&(e.TgZ(0,"form",0),e.TgZ(1,"ion-header"),e.TgZ(2,"ion-toolbar",1),e.TgZ(3,"ion-buttons",2),e.TgZ(4,"ion-button",3),e.NdJ("click",function(){return o.dismissModal()}),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.TgZ(6,"ion-title",5),e._uU(7,"Detalle del pedido"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"ion-content",6),e.TgZ(9,"ion-button",7),e.NdJ("click",function(){return o.combodatos(1,"formulario-plantilla","frmcats","formulario","Formulario","productos","")}),e._uU(10," AGREGAR OTRO PRODUCTO "),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"ion-list"),e.TgZ(13,"ion-item-divider",9),e.TgZ(14,"ion-label",10),e._uU(15," Detalle del pedido "),e.qZA(),e.qZA(),e.YNc(16,D,21,6,"ion-item",11),e.TgZ(17,"ion-item"),e.TgZ(18,"ion-grid"),e.TgZ(19,"ion-row"),e.TgZ(20,"ion-col",12),e.TgZ(21,"strong"),e._uU(22,"Total:"),e.qZA(),e.qZA(),e.TgZ(23,"ion-col",13),e.TgZ(24,"strong"),e._uU(25),e.ALo(26,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"section",14),e.TgZ(28,"ion-list",15),e._UZ(29,"ion-input",16),e.TgZ(30,"div",17),e.YNc(31,Y,4,0,"div",18),e.qZA(),e.TgZ(32,"ion-item-divider",9),e.TgZ(33,"ion-label",10),e._uU(34," Datos de envio "),e.qZA(),e.qZA(),e.TgZ(35,"ion-item",19),e.TgZ(36,"ion-label",20),e._uU(37,"Nombre de entrega"),e.TgZ(38,"ion-text",21),e._uU(39,"*"),e.qZA(),e.qZA(),e._UZ(40,"ion-input",22),e.qZA(),e.TgZ(41,"div",17),e.YNc(42,G,4,0,"div",18),e.qZA(),e.TgZ(43,"ion-item",19),e.TgZ(44,"ion-label",20),e._uU(45,"Direcci\xf3n de entrega"),e.TgZ(46,"ion-text",21),e._uU(47,"*"),e.qZA(),e.qZA(),e._UZ(48,"ion-input",23),e.TgZ(49,"ion-buttons",2),e.TgZ(50,"ion-button",24),e.NdJ("click",function(){return o.dacomponente("direccion","read")}),e._UZ(51,"ion-icon",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",17),e.YNc(53,V,4,0,"div",18),e.qZA(),e.TgZ(54,"ion-item",19),e.TgZ(55,"ion-label",20),e._uU(56,"Comentarios/ instrucciones de envio"),e.qZA(),e._UZ(57,"ion-textarea",26),e.qZA(),e.TgZ(58,"ion-item",19),e.TgZ(59,"ion-label"),e._uU(60,"Departamento"),e.TgZ(61,"ion-text",21),e._uU(62,"*"),e.qZA(),e.qZA(),e.TgZ(63,"ion-input",27),e.NdJ("click",function(){return o.combodatos(1,"1000-departamento-plantilla","frmcats","departamento","Departamento","nograba","")}),e.qZA(),e.TgZ(64,"ion-buttons",2),e.TgZ(65,"ion-button",28),e.NdJ("click",function(){return o.combodatoslimpia("departamento")}),e._UZ(66,"ion-icon",29),e.qZA(),e.TgZ(67,"ion-button",30),e.NdJ("click",function(){return o.combodatos(1,"1000-departamento-plantilla","frmcats","departamento","Departamento","nograba","")}),e._UZ(68,"ion-icon",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"ion-item",19),e.TgZ(70,"ion-label"),e._uU(71,"Municipio"),e.TgZ(72,"ion-text",21),e._uU(73,"*"),e.qZA(),e.qZA(),e.TgZ(74,"ion-input",32),e.NdJ("click",function(){return o.combodatos(1,"1000-municipio-plantilla","frmcats","municipio","Municipio","nograba","municipio")}),e.qZA(),e.TgZ(75,"ion-buttons",2),e.TgZ(76,"ion-button",28),e.NdJ("click",function(){return o.combodatoslimpia("municipio")}),e._UZ(77,"ion-icon",29),e.qZA(),e.TgZ(78,"ion-button",30),e.NdJ("click",function(){return o.combodatos(1,"1000-municipio-plantilla","frmcats","municipio","Municipio","nograba","municipio")}),e._UZ(79,"ion-icon",31),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"ion-item",19),e.TgZ(81,"ion-label"),e._uU(82,"Zona "),e.TgZ(83,"ion-text",21),e._uU(84,"*"),e.qZA(),e.qZA(),e.TgZ(85,"ion-select",33),e.NdJ("ionChange",function(s){return o.onSelectcategoria(s)}),e.ALo(86,"translate"),e.YNc(87,B,2,2,"ion-select-option",34),e.qZA(),e.qZA(),e._UZ(88,"ion-input",35),e.TgZ(89,"ion-grid"),e.TgZ(90,"ion-row"),e.TgZ(91,"ion-col",12),e.TgZ(92,"strong"),e._uU(93," Total a envio:"),e.qZA(),e.qZA(),e.TgZ(94,"ion-col",13),e.TgZ(95,"strong"),e._uU(96),e.ALo(97,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(98,"ion-grid"),e.TgZ(99,"ion-row"),e.TgZ(100,"ion-col",12),e.TgZ(101,"strong"),e._uU(102," Total a productos:"),e.qZA(),e.qZA(),e.TgZ(103,"ion-col",13),e.TgZ(104,"strong"),e._uU(105),e.ALo(106,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"ion-grid"),e.TgZ(108,"ion-row"),e.TgZ(109,"ion-col",12),e.TgZ(110,"strong"),e._uU(111," Total a cancelar:"),e.qZA(),e.qZA(),e.TgZ(112,"ion-col",13),e.TgZ(113,"strong"),e._uU(114),e.ALo(115,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(116,"ion-item",19),e.TgZ(117,"ion-label",20),e._uU(118,"Tel\xe9fono"),e.TgZ(119,"ion-text",21),e._uU(120,"*"),e.qZA(),e.qZA(),e._UZ(121,"ion-input",36),e.qZA(),e.TgZ(122,"div",17),e.YNc(123,$,4,0,"div",18),e.qZA(),e.TgZ(124,"ion-item-divider",9),e.TgZ(125,"ion-label",10),e._uU(126," Datos de facturaci\xf3n "),e.qZA(),e.qZA(),e.TgZ(127,"ion-item",19),e.TgZ(128,"ion-label",20),e._uU(129,"Nombre "),e.qZA(),e._UZ(130,"ion-input",37),e.qZA(),e.TgZ(131,"ion-item",19),e.TgZ(132,"ion-label",20),e._uU(133,"Direcci\xf3n"),e.qZA(),e._UZ(134,"ion-input",38),e.qZA(),e.TgZ(135,"ion-item",19),e.TgZ(136,"ion-label",20),e._uU(137,"Nit"),e.qZA(),e._UZ(138,"ion-input",39),e.qZA(),e.TgZ(139,"ion-item",19),e.TgZ(140,"ion-label",20),e._uU(141,"Indica cuanto pagar\xe1s para env\xedar cambio con tu orden"),e.qZA(),e._UZ(142,"ion-input",40),e.qZA(),e.TgZ(143,"ion-item",19),e.TgZ(144,"ion-label",20),e._uU(145,"Tipo pago"),e.TgZ(146,"ion-text",21),e._uU(147,"*"),e.qZA(),e.qZA(),e.TgZ(148,"ion-select",41),e.TgZ(149,"ion-select-option",42),e._uU(150,"Efectivo"),e.qZA(),e.TgZ(151,"ion-select-option",43),e._uU(152,"TotalPay"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(153,"div",17),e.YNc(154,W,4,0,"div",18),e.qZA(),e.TgZ(155,"ion-item",19),e.TgZ(156,"ion-label",20),e._uU(157,"Monto recibido"),e.TgZ(158,"ion-text",21),e._uU(159,"*"),e.qZA(),e.qZA(),e.TgZ(160,"ion-input",44),e.NdJ("ionChange",function(){return o.ingreso()}),e.qZA(),e.qZA(),e.TgZ(161,"h1"),e._uU(162),e.ALo(163,"currency"),e.qZA(),e.TgZ(164,"ion-item-divider",45),e.TgZ(165,"ion-buttons",2),e.TgZ(166,"ion-button",46),e.NdJ("click",function(){return o.clear()}),e._UZ(167,"ion-icon",47),e.qZA(),e.TgZ(168,"ion-button",48),e.NdJ("click",function(){return o.undo()}),e._UZ(169,"ion-icon",49),e.qZA(),e.qZA(),e.qZA(),e.TgZ(170,"ion-item",19),e.TgZ(171,"ion-label",10),e._uU(172,"Ingrese su firma digital"),e.qZA(),e.qZA(),e.TgZ(173,"ion-item",19),e._UZ(174,"canvas",50,51),e.qZA(),e.qZA(),e.qZA(),e.TgZ(176,"ion-button",52),e.NdJ("click",function(){return o.checkout()}),e._uU(177," FACTURAR PEDIDO "),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("formGroup",o.Form),e.xp6(16),e.Q6J("ngForOf",o.cart),e.xp6(9),e.hij(" ",e.xi3(26,18,o.getTotal(),o.moneda),""),e.xp6(4),e.Q6J("hidden",!0),e.xp6(2),e.Q6J("ngIf",o.Form.get("total").hasError("required")&&(o.Form.get("total").dirty||o.Form.get("total").touched)),e.xp6(11),e.Q6J("ngIf",o.Form.get("nombre").hasError("required")&&(o.Form.get("nombre").dirty||o.Form.get("nombre").touched)),e.xp6(11),e.Q6J("ngIf",o.Form.get("direccion").hasError("required")&&(o.Form.get("direccion").dirty||o.Form.get("direccion").touched)),e.xp6(10),e.Q6J("readonly",!0),e.xp6(11),e.Q6J("readonly",!0),e.xp6(11),e.s9C("placeholder",e.lcZ(86,21,"SELECTVALORM")),e.xp6(2),e.Q6J("ngForOf",o.vzona),e.xp6(1),e.Q6J("hidden",!0),e.xp6(8),e.hij(" ",e.xi3(97,23,o.totalenvio2,o.moneda),""),e.xp6(9),e.hij(" ",e.xi3(106,26,o.getTotal(),o.moneda),""),e.xp6(9),e.hij(" ",e.xi3(115,29,o.getTotal2(),o.moneda),""),e.xp6(9),e.Q6J("ngIf",o.Form.get("telefono").hasError("required")&&(o.Form.get("telefono").dirty||o.Form.get("telefono").touched)),e.xp6(31),e.Q6J("ngIf",o.Form.get("tpago").hasError("required")&&(o.Form.get("tpago").dirty||o.Form.get("tpago").touched)),e.xp6(8),e.hij("Vuelto:",e.xi3(163,32,o.vuelto,o.moneda),""))},directives:[r._Y,r.JL,r.sg,n.Gu,n.sr,n.Sm,n.YG,n.gu,n.wd,n.W2,n.q_,n.rH,n.Q$,m.sg,n.Ie,n.jY,n.Nd,n.wI,n.pK,n.j9,r.JJ,r.u,r.Q7,m.O5,n.yW,n.g2,n.t9,n.QI,n.as,n.n0],pipes:[m.H9,Z.X$],styles:[".book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}.drawing-active[_ngcontent-%COMP%]{background:#d6fffc}.title[_ngcontent-%COMP%]{text-align:center;font-weight:700;padding:10px}canvas[_ngcontent-%COMP%]{border:3px dashed gray;width:100%}"]}),t})();var K=c(80829),X=c(26806);const ee=["barChart"],oe=["valueBarsCanvas"];function ie(t,l){if(1&t&&(e.TgZ(0,"ion-label"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.lnq("",e.lcZ(2,3,"NOREGISTROSM")," ",i.itemsList.length," ",e.lcZ(3,5,"NOREGISTROSM5"),"")}}function te(t,l){1&t&&(e.TgZ(0,"ion-item",43),e.TgZ(1,"ion-label",44),e._UZ(2,"skeleton-element"),e._UZ(3,"skeleton-element"),e._UZ(4,"skeleton-element",45),e.qZA(),e.qZA())}const ae=function(){return[0,1,2,3,4,5,6]};function ne(t,l){1&t&&(e.TgZ(0,"ion-list"),e.YNc(1,te,5,0,"ion-item",42),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,ae)))}function re(t,l){if(1&t&&e._UZ(0,"ion-img-viewer",57),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("title",i.nombre)("src",o.apifoto+i.foto1)}}function se(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario1,"")}}function le(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario2,"")}}function ce(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario3,"")}}function de(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario4,"")}}function ue(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario5,"")}}function me(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario6,"")}}function ge(t,l){if(1&t&&(e.TgZ(0,"ion-badge",58),e._uU(1),e.qZA()),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("hidden",o.admin),e.xp6(1),e.hij("Ultimo comentario: ",i.comentario7,"")}}function pe(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"ion-button",59),e.NdJ("click",function(){e.CHM(i);const a=e.oxw().$implicit;return e.oxw(2).otrasop(a)}),e.ALo(1,"translate"),e._UZ(2,"ion-icon",60),e.qZA()}2&t&&e.s9C("title",e.lcZ(1,1,"MENUM"))}function he(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"ion-item",47),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row"),e.TgZ(3,"ion-col",15),e.TgZ(4,"ion-avatar",1),e.YNc(5,re,1,2,"ion-img-viewer",48),e.qZA(),e.TgZ(6,"ion-label",44),e.TgZ(7,"ion-note",49),e._uU(8),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"p"),e.TgZ(11,"strong"),e._uU(12,"Recibida:"),e.qZA(),e._uU(13),e.ALo(14,"date"),e._UZ(15,"br"),e.TgZ(16,"strong"),e._uU(17,"Nombre:"),e.qZA(),e._uU(18),e._UZ(19,"br"),e.TgZ(20,"strong"),e._uU(21,"Direccion:"),e.qZA(),e._uU(22),e._UZ(23,"br"),e.TgZ(24,"strong"),e._uU(25,"Telefono:"),e.qZA(),e._uU(26),e._UZ(27,"br"),e.TgZ(28,"strong"),e._uU(29,"Total:"),e.qZA(),e._uU(30),e.ALo(31,"currency"),e._UZ(32,"br"),e.TgZ(33,"strong"),e._uU(34,"Monto que pagar\xe1 para env\xedar cambio :"),e.qZA(),e._uU(35),e.ALo(36,"currency"),e._UZ(37,"br"),e.TgZ(38,"strong"),e._uU(39,"Tipo pago:"),e.qZA(),e._uU(40),e._UZ(41,"br"),e.YNc(42,se,2,2,"ion-badge",50),e.YNc(43,le,2,2,"ion-badge",50),e.YNc(44,ce,2,2,"ion-badge",50),e.YNc(45,de,2,2,"ion-badge",50),e.YNc(46,ue,2,2,"ion-badge",50),e.YNc(47,me,2,2,"ion-badge",50),e.YNc(48,ge,2,2,"ion-badge",50),e.qZA(),e.TgZ(49,"ion-badge",51),e._uU(50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"ion-row"),e.TgZ(52,"ion-col",15),e.TgZ(53,"ion-toolbar",52),e.TgZ(54,"ion-buttons",53),e.TgZ(55,"button",4),e.NdJ("click",function(){const s=e.CHM(i).$implicit;return e.oxw(2).verdetalle(s)}),e.ALo(56,"translate"),e._UZ(57,"ion-icon",54),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.qZA(),e.TgZ(60,"ion-buttons",55),e.YNc(61,pe,3,3,"ion-button",56),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=l.$implicit,o=l.index,a=e.oxw(2);e.xp6(5),e.Q6J("ngIf",void 0!==i.foto),e.xp6(3),e.hij("No. ",o+1,""),e.xp6(5),e.hij(" ",e.xi3(14,20,i.createdAt,"dd-MM-yyyy, hh:mm aaa")," "),e.xp6(5),e.hij(" ",i.nombre," "),e.xp6(4),e.hij(" ",i.direccion," "),e.xp6(4),e.hij(" ",i.telefono," "),e.xp6(4),e.hij(" ",e.xi3(31,23,i.total,a.moneda)," "),e.xp6(5),e.hij(" ",e.xi3(36,26,i.pagaracambio,a.moneda)," "),e.xp6(5),e.hij(" ",i.tipopago,""),e.xp6(2),e.Q6J("ngIf","Abiertas"===i.estado),e.xp6(1),e.Q6J("ngIf","En proceso"===i.estado),e.xp6(1),e.Q6J("ngIf","Asignando repartidor"===i.estado),e.xp6(1),e.Q6J("ngIf","En camino"===i.estado),e.xp6(1),e.Q6J("ngIf","Entregadas"===i.estado),e.xp6(1),e.Q6J("ngIf","Anuladas"===i.estado),e.xp6(1),e.Q6J("ngIf","Facturadas"===i.estado),e.xp6(2),e.Oqu(i.estado),e.xp6(5),e.s9C("title",e.lcZ(56,29,"DETALLEM")),e.xp6(3),e.hij(" ",e.lcZ(59,31,"DETALLEM")," "),e.xp6(3),e.Q6J("ngIf","user"!==a.role)}}function Ze(t,l){if(1&t&&(e.TgZ(0,"ion-list"),e.YNc(1,he,62,33,"ion-item",46),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.itemsList)("ngForTrackBy",i.trackItems)}}function _e(t,l){if(1&t&&e._UZ(0,"ion-img-viewer",57),2&t){const i=e.oxw().$implicit,o=e.oxw(2);e.Q6J("title",i.nombre)("src",o.apifoto+i.foto1)}}function fe(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"ion-button",59),e.NdJ("click",function(){e.CHM(i);const a=e.oxw().$implicit;return e.oxw(2).otrasop(a)}),e.ALo(1,"translate"),e._UZ(2,"ion-icon",60),e.qZA()}2&t&&e.s9C("title",e.lcZ(1,1,"MENUM"))}function Ae(t,l){if(1&t){const i=e.EpF();e.TgZ(0,"ion-col",62),e.TgZ(1,"ion-card",44),e.TgZ(2,"ion-row",63),e.TgZ(3,"ion-col"),e.TgZ(4,"span",64),e._uU(5,"No."),e.qZA(),e.TgZ(6,"span",65),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"ion-col"),e.TgZ(9,"span",64),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"ion-item",47),e.TgZ(12,"ion-avatar",1),e.YNc(13,_e,1,2,"ion-img-viewer",48),e.qZA(),e.TgZ(14,"ion-label",44),e.TgZ(15,"p"),e.TgZ(16,"strong"),e._uU(17,"Recibida:"),e.qZA(),e._uU(18),e._UZ(19,"br"),e.TgZ(20,"strong"),e._uU(21,"Nombre:"),e.qZA(),e._uU(22),e._UZ(23,"br"),e.TgZ(24,"strong"),e._uU(25,"Direccion:"),e.qZA(),e._uU(26),e._UZ(27,"br"),e.TgZ(28,"strong"),e._uU(29,"Telefono:"),e.qZA(),e._uU(30),e._UZ(31,"br"),e.TgZ(32,"strong"),e._uU(33,"Total:"),e.qZA(),e._uU(34),e.ALo(35,"currency"),e._UZ(36,"br"),e.TgZ(37,"strong"),e._uU(38,"Tipo pago:"),e.qZA(),e._uU(39),e._UZ(40,"br"),e.TgZ(41,"ion-badge",58),e._uU(42),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(43,"ion-card-content"),e.TgZ(44,"ion-row",15),e.TgZ(45,"ion-toolbar",52),e.TgZ(46,"ion-buttons",53),e.TgZ(47,"button",4),e.NdJ("click",function(){const s=e.CHM(i).$implicit;return e.oxw(2).verdetalle(s)}),e.ALo(48,"translate"),e._UZ(49,"ion-icon",54),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.qZA(),e.TgZ(52,"ion-buttons",55),e.YNc(53,fe,3,3,"ion-button",56),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&t){const i=l.$implicit,o=l.index,a=e.oxw(2);e.xp6(7),e.hij("",o+1," "),e.xp6(3),e.hij("",i.estado," "),e.xp6(3),e.Q6J("ngIf",void 0!==i.foto1),e.xp6(5),e.hij(" ",i.createdAt," "),e.xp6(4),e.hij(" ",i.nombre," "),e.xp6(4),e.hij(" ",i.direccion," "),e.xp6(4),e.hij(" ",i.telefono," "),e.xp6(4),e.hij(" ",e.xi3(35,14,i.total,a.moneda)," "),e.xp6(5),e.hij(" ",i.tipopago,""),e.xp6(2),e.Q6J("hidden",a.admin),e.xp6(1),e.Oqu(i.comentario1),e.xp6(5),e.s9C("title",e.lcZ(48,17,"DETALLEM")),e.xp6(3),e.hij(" ",e.lcZ(51,19,"DETALLEM")," "),e.xp6(3),e.Q6J("ngIf","user"!==a.role)}}function Te(t,l){if(1&t&&(e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row"),e.YNc(2,Ae,54,21,"ion-col",61),e.qZA(),e.qZA()),2&t){const i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.itemsList)("ngForTrackBy",i.trackItems)}}function ve(t,l){1&t&&(e.TgZ(0,"h3",66),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NODATOS")," "))}let be=(()=>{class t{constructor(i,o,a,s,d,g){this.routerOutlet=i,this.router=o,this.authenticationService=a,this.alertController=s,this.translateService=d,this.modalController=g,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.vgraf=[],this.variables=[],this.admin=!0,this.userinfo=[],this.viewType="list",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Todos",this.searchSubject=new w.t(1),this.apifoto=this.authenticationService.getapifoto(),this.generateColorArray(5)}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ionViewDidLoad(){this.createBarChart()}generateColorArray(i){this.colorArray=[];for(let o=0;o<i;o++)this.colorArray.push("#"+Math.floor(16777215*Math.random()).toString(16))}createBarChart(){this.valueBarsChart=new K.kL(this.valueBarsCanvas.nativeElement,{type:"bar",data:{labels:this.vgraf.labels,datasets:[{label:"Cantidad",data:this.vgraf.data,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{indexAxis:"y",elements:{bar:{borderWidth:2}}}})}ngOnInit(){this.userinfo=this.authenticationService.getcopiauser(),("Administrador"===this.userinfo[0].role||"Inventario admin"===this.userinfo[0].role)&&(this.admin=!1),this.logo1=this.authenticationService.dalogo1(this.userinfo),this.moneda=this.userinfo[0].idempresa.moneda,this.role=this.userinfo[0].role,this.router.getCurrentNavigation().extras.state?(this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.variables=this.router.getCurrentNavigation().extras.state.variables):this.tituloxx="Pedidos",this.searchQuery="",this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.translateService.get("MSGM").subscribe(i=>{this.msg=i}),this.rangeForm=new r.cw({dual:new r.NI({lower:1,upper:100})}),this.currentSegment="Abiertas",this.pideregistros(this.currentSegment)}filterContacts(i){const o=i.detail.value;this.currentSegment=o,"grafica"===o?(this.viewType="grafica",this.createBarChart()):(this.viewType="list",this.pideregistros(o))}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(i){this.itemsList=[],this.efecto=0,"Administrador"===this.userinfo[0].role?(this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/admin","orden_compras",0).then(o=>{this.efecto=1,this.items=o,this.itemsList=this.items},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")}),this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/admingraf","orden_compras",0).then(o=>{this.vgraf=o},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")})):"user"===this.userinfo[0].role?(this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/individual","orden_compras",0).then(o=>{this.efecto=1,this.items=o,this.itemsList=this.items},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")}),this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/individualgraf","orden_compras",0).then(o=>{this.vgraf=o},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")})):(this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/operador","orden_compras",0).then(o=>{this.efecto=1,this.items=o,this.itemsList=this.items},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")}),this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id+"/operadorgraf","orden_compras",0).then(o=>{this.vgraf=o},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")}))}trackItems(i,o){return o.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(i,o){return i.filter(a=>a.nombre.toLowerCase().includes(o.toLowerCase()))}otrasop2(i,o,a,s,d){return(0,h.mG)(this,void 0,void 0,function*(){if(0===s){let g={};g={operacion:"actualizafactura",comentario7:"Facturada",idventa:d,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}},g&&this.authenticationService.createReg(i._id,g,"orden_compras").then(u=>{this.pideregistros(this.currentSegment)},u=>{this.authenticationService.presentAlert(u.error,"Precauci\xf3n","")})}else yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese algun comentario",inputs:[{name:"comentario",id:"comentario",type:"textarea",placeholder:"Ingrese comentario en caso de ser necesario"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Enviar",handler:u=>{let p={};switch(a){case"1":p={operacion:"actualiza"+a,comentario1:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"2":p={operacion:"actualiza"+a,comentario2:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"3":p={operacion:"actualiza"+a,comentario3:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"4":p={operacion:"actualiza"+a,comentario4:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"5":p={operacion:"actualiza"+a,comentario5:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"6":p=i.idventa?{operacion:"actualiza"+a,comentario6:u.comentario,idventa:i.idventa,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}}:{operacion:"actualiza"+a,comentario6:u.comentario,idventa:"",estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}};break;case"7":p={operacion:"actualiza"+a,comentario7:u.comentario,estado:o,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza estado ("+o+") orden de compra "+i._id}}}p&&this.authenticationService.createReg(i._id,p,"orden_compras").then(T=>{this.pideregistros(this.currentSegment)},T=>{this.authenticationService.presentAlert(T.error,"Precauci\xf3n","")})}}]})).present().then(()=>{document.querySelector("ion-alert textarea").focus()})})}otrasop(i){return(0,h.mG)(this,void 0,void 0,function*(){const o=[];switch(i.estado){case"Abiertas":o.push({name:"evento",type:"radio",label:"Enviar a procesar pedido",value:"En proceso"}),o.push({name:"evento",type:"radio",label:"Regresar a estado anuladas",value:"Anuladas"});break;case"En proceso":o.push({name:"evento",type:"radio",label:"Asignar a repartidor",value:"Asignando repartidor"}),o.push({name:"evento",type:"radio",label:"Regresar a estado abiertas",value:"Abiertas"}),o.push({name:"evento",type:"radio",label:"Enviar a  estado anuladas",value:"Anuladas"}),o.push({name:"evento",type:"radio",label:"En camino a entregar",value:"En camino"});break;case"Asignando repartidor":o.push({name:"evento",type:"radio",label:"En camino a entregar",value:"En camino"}),o.push({name:"evento",type:"radio",label:"Regresar a estado en proceso ",value:"En proceso"}),o.push({name:"evento",type:"radio",label:"Enviar a estado anuladas",value:"Anuladas"});break;case"En camino":o.push({name:"evento",type:"radio",label:"Entregando pedido",value:"Entregadas"}),o.push({name:"evento",type:"radio",label:"Regresar a estado en proceso ",value:"En proceso"}),o.push({name:"evento",type:"radio",label:"Enviar a estado anuladas",value:"Anuladas"});break;case"Entregadas":o.push({name:"evento",type:"radio",label:"Recibiendo pedido",value:"Facturadas"}),o.push({name:"evento",type:"radio",label:"Regresar a estado en camino",value:"En camino"}),o.push({name:"evento",type:"radio",label:"Enviar a estado anuladas",value:"Anuladas"});break;case"Anuladas":i.idventa||(o.push({name:"evento",type:"radio",label:"Regresar a estado abiertas",value:"Abiertas"}),o.push({name:"evento",type:"radio",label:"Regresar a estado en proceso ",value:"En proceso"}),o.push({name:"evento",type:"radio",label:"Regresar a estado asignando repartidor",value:"Asignando repartidor"}),o.push({name:"evento",type:"radio",label:"Regresar a estado en camino",value:"En camino"}),o.push({name:"evento",type:"radio",label:"Regresar a estado entregadas",value:"Entregadas"}),o.push({name:"evento",type:"radio",label:"Regresar a estado facturadas",value:"Facturadas"}));break;case"Facturadas":o.push({name:"evento",type:"radio",label:"Regresar a estado anuladas",value:"Anuladas"})}yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Opci\xf3n",inputs:o,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:s=>{}},{text:"Ejecutar",handler:s=>{switch(s){case"Abiertas":this.otrasop2(i,s,"1",1,"");break;case"En proceso":this.otrasop2(i,s,"2",1,"");break;case"Asignando repartidor":this.otrasop2(i,s,"3",1,"");break;case"En camino":this.otrasop2(i,s,"4",1,"");break;case"Entregadas":this.otrasop2(i,s,"5",1,"");break;case"Anuladas":this.otrasop2(i,s,"6",1,"");break;case"Facturadas":this.openCart(i)}}}]})).present()})}deleteRecord(i){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:a=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(i._id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa+"/na","productos").then(s=>{this.pideregistros(this.currentSegment)},s=>{this.authenticationService.presentAlert(s.error,this.msg,"")})}}]})).present()})}verdetalle(i){return(0,h.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:O,animated:!0,componentProps:{moneda:this.moneda,data:i,correo:this.userinfo[0].correo,estadopedido:this.currentSegment},presentingElement:yield this.modalController.getTop(),cssClass:"modal-fullscreen"});return o.onWillDismiss().then(a=>{}),yield o.present()})}openCart(i){return(0,h.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:H,animated:!0,componentProps:{datatt:i,moneda:this.moneda},presentingElement:yield this.modalController.getTop(),cssClass:"modal-fullscreen"});return o.onWillDismiss().then(a=>{"exito"===a.data.estado&&this.otrasop2(i,"Facturadas","7",0,a.data.idventa)}),yield o.present()})}loadData(i){setTimeout(()=>{i.target.complete(),1e3===this.items.length&&(i.target.disabled=!0)},500)}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(n.jP),e.Y36(A.F0),e.Y36(x.$),e.Y36(n.Br),e.Y36(Z.sK),e.Y36(n.IN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pedido-compra"]],viewQuery:function(i,o){if(1&i&&(e.Gf(ee,7),e.Gf(oe,7),e.Gf(n.ju,5)),2&i){let a;e.iGM(a=e.CRH())&&(o.barChart=a.first),e.iGM(a=e.CRH())&&(o.valueBarsCanvas=a.first),e.iGM(a=e.CRH())&&(o.infiniteScroll=a.first)}},decls:65,vars:41,consts:[["color","primary"],["slot","start"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","refresh-circle-outline"],["alt","logo","id","header_logo","height","33",3,"src"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col",3,"hidden"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],[3,"formGroup","hidden"],[1,"range-item-row"],["size","12"],[1,"range-header"],[1,"user-friends-content"],["sticky",""],[4,"ngIf"],["scrollable","","value","Abiertas",3,"ionChange"],["value","Abiertas","checked","",3,"title"],["name","folder-open-outline"],["value","En proceso",3,"title"],["name","checkmark-done-outline"],["value","Asignando repartidor",3,"title"],["name","send-outline"],["value","En camino",3,"title"],["name","bicycle-outline"],["value","Entregadas",3,"title"],["name","home"],["value","Anuladas",3,"title"],["name","close-outline"],["value","Facturadas",3,"title"],["name","wallet-outline"],["title","Estado de eventos","value","grafica"],["name","bar-chart-outline"],[3,"hidden"],["valueBarsCanvas",""],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated"],["scheme","dark",3,"title","src",4,"ngIf"],["slot","end"],["color","primary",3,"hidden",4,"ngIf"],["color","medium"],["color","transparent"],["slot","secondary"],["slot","icon-only","name","create-outline"],["slot","primary"],["color","secondary",3,"title","click",4,"ngIf"],["scheme","dark",3,"title","src"],["color","primary",3,"hidden"],["color","secondary",3,"title","click"],["slot","icon-only","ios","ellipsis-horizontal","md","ellipsis-vertical"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],[1,"empty-list-message"]],template:function(i,o){1&i&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title",2),e._uU(5," Pedidos de compra "),e.qZA(),e.TgZ(6,"ion-buttons",3),e.TgZ(7,"ion-button",4),e.NdJ("click",function(){return o.pideregistros0()}),e.ALo(8,"translate"),e._UZ(9,"ion-icon",5),e.qZA(),e._UZ(10,"img",6),e.qZA(),e.qZA(),e.TgZ(11,"ion-toolbar",7),e.TgZ(12,"ion-row",8),e.TgZ(13,"ion-col"),e.TgZ(14,"ion-searchbar",9),e.NdJ("ngModelChange",function(s){return o.searchQuery=s})("ionChange",function(){return o.searchList()}),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"ion-col",10),e.TgZ(17,"ion-button",11),e.NdJ("click",function(){return o.showAgeFilter=!o.showAgeFilter}),e.ALo(18,"translate"),e._UZ(19,"ion-icon",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"form",13),e.TgZ(21,"ion-row",14),e.TgZ(22,"ion-col",15),e._UZ(23,"div",16),e.qZA(),e._UZ(24,"ion-col",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"ion-content",17),e.TgZ(26,"ion-item-divider",18),e.YNc(27,ie,4,7,"ion-label",19),e.qZA(),e.TgZ(28,"ion-segment",20),e.NdJ("ionChange",function(s){return o.filterContacts(s)}),e.TgZ(29,"ion-segment-button",21),e.ALo(30,"translate"),e._UZ(31,"ion-icon",22),e.qZA(),e.TgZ(32,"ion-segment-button",23),e.ALo(33,"translate"),e._UZ(34,"ion-icon",24),e.qZA(),e.TgZ(35,"ion-segment-button",25),e.ALo(36,"translate"),e._UZ(37,"ion-icon",26),e.qZA(),e.TgZ(38,"ion-segment-button",27),e.ALo(39,"translate"),e._UZ(40,"ion-icon",28),e.qZA(),e.TgZ(41,"ion-segment-button",29),e.ALo(42,"translate"),e._UZ(43,"ion-icon",30),e.qZA(),e.TgZ(44,"ion-segment-button",31),e.ALo(45,"translate"),e._UZ(46,"ion-icon",32),e.qZA(),e.TgZ(47,"ion-segment-button",33),e.ALo(48,"translate"),e._UZ(49,"ion-icon",34),e.qZA(),e.TgZ(50,"ion-segment-button",35),e._UZ(51,"ion-icon",36),e.qZA(),e.qZA(),e.YNc(52,ne,2,2,"ion-list",19),e.TgZ(53,"ion-list",37),e.TgZ(54,"ion-card"),e.TgZ(55,"ion-card-header"),e._uU(56," Segumiento de pedidos de compra "),e.qZA(),e.TgZ(57,"ion-card-content"),e._UZ(58,"canvas",null,38),e.qZA(),e.qZA(),e.qZA(),e.YNc(60,Ze,2,2,"ion-list",19),e.YNc(61,Te,3,2,"ion-grid",19),e.YNc(62,ve,3,3,"h3",39),e.TgZ(63,"ion-infinite-scroll",40),e.NdJ("ionInfinite",function(s){return o.loadData(s)}),e._UZ(64,"ion-infinite-scroll-content",41),e.qZA(),e.qZA()),2&i&&(e.xp6(7),e.MGl("title"," ",e.lcZ(8,21,"REFRESCARM"),""),e.xp6(3),e.Q6J("src",o.apifoto+o.logo1,e.LSH),e.xp6(4),e.s9C("placeholder",e.lcZ(15,23,"BUSCARM")),e.Q6J("ngModel",o.searchQuery),e.xp6(2),e.Q6J("hidden",!o.showAgeFilter),e.xp6(1),e.MGl("title"," ",e.lcZ(18,25,"FILTROM"),""),e.xp6(3),e.Q6J("formGroup",o.rangeForm)("hidden",!o.showAgeFilter),e.xp6(7),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0),e.xp6(2),e.MGl("title"," ",e.lcZ(30,27,"ESTADOC1"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(33,29,"ESTADOC2"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(36,31,"ESTADOC31"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(39,33,"ESTADOC3"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(42,35,"ESTADOC4"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(45,37,"ESTADOC5"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(48,39,"ESTADOC6"),""),e.xp6(5),e.Q6J("ngIf",0===o.efecto),e.xp6(1),e.Q6J("hidden","grafica"!==o.viewType),e.xp6(7),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"list"===o.viewType),e.xp6(1),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"grid"===o.viewType),e.xp6(1),e.Q6J("ngIf",0===(null==o.itemsList?null:o.itemsList.length)))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.YG,n.gu,n.Nd,n.wI,n.VI,n.j9,r.JJ,r.On,r._Y,r.JL,r.sg,n.W2,n.rH,m.O5,n.cJ,n.QI,n.GO,n.q_,n.PM,n.Zi,n.FN,n.ju,n.MB,n.Q$,m.sg,n.Ie,X.B,n.jY,n.BJ,n.uN,n.yp,_.A6],pipes:[Z.X$,m.uU,m.H9],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),t})(),qe=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,n.Pc,y.K,r.u5,r.UX,_.YL,U,f.R,b.v,N,A.Bz.forChild([{path:"",component:be}]),Z.aw.forChild()]]}),t})()},22675:(I,v,c)=>{c.d(v,{v:()=>b});var n=c(69808),A=c(93075),m=c(51062),y=c(23349),Z=c(55787),r=c(34345),f=c(5e3);let b=(()=>{class _{}return _.\u0275fac=function(U){return new(U||_)},_.\u0275mod=f.oAB({type:_}),_.\u0275inj=f.cJS({imports:[[n.ez,A.u5,A.UX,y.Pc,Z.Bz,r.Cl,m.aw.forChild()]]}),_})()}}]);