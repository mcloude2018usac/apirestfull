"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4030],{64030:(y,w,s)=>{s.r(w),s.d(w,{frmkardexListPageModule:()=>V});var a=s(23349),T=s(55787),k=s(69808),P=s(33678),p=s(51062),h=s(93075),v=s(36351),_=s(70655),A=s(68554),M=s(4707),U=s(15190),I=s(21295),t=s(5e3),S=s(26806);function L(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().buscar01()}),t._UZ(1,"ion-icon",18),t.qZA()}}function N(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw().buscar0()}),t._UZ(1,"ion-icon",20),t.qZA()}}function j(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeToList()}),t._UZ(1,"ion-icon",22),t.qZA()}}function E(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeToGrid()}),t._UZ(1,"ion-icon",23),t.qZA()}}function z(o,d){if(1&o&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",e.itemsList.length," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function F(o,d){1&o&&(t.TgZ(0,"ion-item",25),t.TgZ(1,"ion-label",26),t._UZ(2,"skeleton-element"),t._UZ(3,"skeleton-element"),t._UZ(4,"skeleton-element",27),t.qZA(),t.qZA())}const J=function(){return[0,1,2,3,4,5,6]};function Q(o,d){1&o&&(t.TgZ(0,"ion-list"),t.YNc(1,F,5,0,"ion-item",24),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,J)))}function B(o,d){if(1&o&&(t.TgZ(0,"ion-badge",46),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("Estado:",e.estadoprint,"")}}function G(o,d){if(1&o&&(t.TgZ(0,"ion-badge",47),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("Estado:",e.estadoprint,"")}}function D(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",29),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-row",30),t.TgZ(3,"ion-col"),t.TgZ(4,"span",31),t._uU(5,"No. de tarjeta:"),t.qZA(),t.TgZ(6,"span",32),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-item"),t.TgZ(9,"ion-label",26),t.TgZ(10,"ion-checkbox",33),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.isChecked=n})("ionChange",function(){return t.CHM(e),t.oxw(3).checkEvent()}),t.qZA(),t.TgZ(11,"p"),t.TgZ(12,"strong"),t._uU(13,"Codigo articulo:"),t.qZA(),t._uU(14),t._UZ(15,"br"),t.TgZ(16,"strong"),t._uU(17,"Nombre del articulo:"),t.qZA(),t._uU(18),t._UZ(19,"br"),t.TgZ(20,"strong"),t._uU(21,"Fecha:"),t.qZA(),t._uU(22),t._UZ(23,"br"),t.TgZ(24,"strong"),t._uU(25,"Documento de ingreso o egreso:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29,"Proveedor:"),t.qZA(),t.TgZ(30,"span"),t._UZ(31,"div",34),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"strong"),t._uU(34,"Saldo Inicial:"),t.qZA(),t._uU(35),t._UZ(36,"br"),t.TgZ(37,"strong"),t._uU(38,"Ingreso:"),t.qZA(),t._uU(39),t._UZ(40,"br"),t.TgZ(41,"strong"),t._uU(42,"Egreso:"),t.qZA(),t._uU(43),t._UZ(44,"br"),t.TgZ(45,"strong"),t._uU(46,"Costo:"),t.qZA(),t._uU(47),t._UZ(48,"br"),t.TgZ(49,"strong"),t._uU(50,"C-unitario:"),t.qZA(),t._uU(51),t._UZ(52,"br"),t.TgZ(53,"strong"),t._uU(54,"V-saldo:"),t.qZA(),t._uU(55),t.ALo(56,"currency"),t._UZ(57,"br"),t.TgZ(58,"strong"),t._uU(59,"Observaciones:"),t.qZA(),t._uU(60),t._UZ(61,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(62,"ion-item",35),t.TgZ(63,"ion-toolbar",36),t.TgZ(64,"ion-badge",37),t._uU(65),t.qZA(),t.YNc(66,B,2,1,"ion-badge",38),t.TgZ(67,"ion-buttons",39),t.TgZ(68,"ion-button",40),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).imprimiree(c)}),t._UZ(69,"ion-icon",41),t.qZA(),t.qZA(),t.TgZ(70,"ion-buttons",39),t.TgZ(71,"ion-button",42),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).imprimir(c)}),t._UZ(72,"ion-icon",6),t.qZA(),t.qZA(),t.TgZ(73,"ion-buttons",39),t.TgZ(74,"ion-button",43),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).anular(c)}),t._UZ(75,"ion-icon",44),t.qZA(),t.qZA(),t.YNc(76,G,2,1,"ion-badge",45),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=d.$implicit,i=d.index,n=t.oxw(3);t.xp6(7),t.hij("",e.nodockardex," "),t.xp6(3),t.Q6J("ngModel",e.isChecked),t.xp6(4),t.hij(" ",e.producto," "),t.xp6(4),t.hij(" ",e.producton," "),t.xp6(4),t.hij(" ",e.fecha.substring(0,10)," "),t.xp6(4),t.AsE(" ",e.nodoc," - ",e.accion," "),t.xp6(5),t.Q6J("innerHtml",n.authenticationService.gethtmlsimple(e.proveedor),t.oJD),t.xp6(4),t.hij(" ",e.saldoanterior," "),t.xp6(4),t.hij(" ",e.ingreso," "),t.xp6(4),t.hij(" ",e.egreso," "),t.xp6(4),t.hij(" ",e.precio," "),t.xp6(4),t.hij(" ",e.saldoactual," "),t.xp6(4),t.hij(" ",t.gM2(56,18,e.total,"Q ",!0,"1.2")," "),t.xp6(5),t.hij(" ",e.obs," "),t.xp6(5),t.Oqu(n.itemsList.length-i),t.xp6(1),t.Q6J("ngIf","No impreso"===e.estadoprint),t.xp6(10),t.Q6J("ngIf","No impreso"!==e.estadoprint)}}function R(o,d){if(1&o&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.YNc(2,D,77,23,"ion-col",28),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.itemsList)("ngForTrackBy",e.trackItems)}}function Y(o,d){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.YNc(2,Q,2,2,"ion-list",13),t.YNc(3,R,3,2,"ion-grid",13),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",0===e.efecto),t.xp6(1),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0&&"grid"===e.viewType)}}function H(o,d){if(1&o&&(t.TgZ(0,"ion-badge",46),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("Estado:",e.estadoprint,"")}}function $(o,d){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",50),t.TgZ(2,"ion-checkbox",33),t.NdJ("ngModelChange",function(n){return t.CHM(e).$implicit.isChecked=n})("ionChange",function(){return t.CHM(e),t.oxw(2).checkEvent()}),t.qZA(),t.TgZ(3,"ion-badge",37),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"td",51),t._uU(6),t.qZA(),t.TgZ(7,"td",52),t._uU(8),t.qZA(),t.TgZ(9,"td",53),t._uU(10),t.qZA(),t.TgZ(11,"td",54),t._uU(12),t.qZA(),t.TgZ(13,"td",55),t._uU(14),t.qZA(),t.TgZ(15,"td",56),t._uU(16),t.qZA(),t.TgZ(17,"td",57),t._uU(18),t.qZA(),t.TgZ(19,"td",58),t._uU(20),t.qZA(),t.TgZ(21,"td",59),t._uU(22),t.qZA(),t.TgZ(23,"td",60),t._uU(24),t.qZA(),t.TgZ(25,"td",61),t._uU(26),t.qZA(),t.TgZ(27,"td",62),t._uU(28),t.ALo(29,"currency"),t.qZA(),t.TgZ(30,"td",63),t._uU(31),t.qZA(),t.TgZ(32,"td",64),t.TgZ(33,"ion-toolbar",36),t.YNc(34,H,2,1,"ion-badge",38),t.TgZ(35,"ion-buttons",39),t.TgZ(36,"ion-button",40),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).imprimiree(c)}),t._UZ(37,"ion-icon",41),t.qZA(),t.qZA(),t.TgZ(38,"ion-buttons",39),t.TgZ(39,"ion-button",43),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(2).anular(c)}),t._UZ(40,"ion-icon",44),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=d.$implicit,i=d.index;t.xp6(2),t.Q6J("ngModel",e.isChecked),t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.producton),t.xp6(2),t.lnq("",e.fecha.substring(0,10).split("-")[2],"-",e.fecha.substring(0,10).split("-")[1],"-",e.fecha.substring(0,10).split("-")[0],""),t.xp6(2),t.Oqu(e.e1),t.xp6(2),t.Oqu(e.e2),t.xp6(2),t.Oqu(e.s1),t.xp6(2),t.Oqu(e.s2),t.xp6(2),t.Oqu(e.saldoanterior),t.xp6(2),t.Oqu(e.ingreso),t.xp6(2),t.Oqu(e.egreso),t.xp6(2),t.Oqu(e.saldoactual),t.xp6(2),t.Oqu(e.precio),t.xp6(2),t.hij("",t.gM2(29,18,e.total,"Q ",!0,"1.2")," "),t.xp6(3),t.Oqu(e.obs),t.xp6(3),t.Q6J("ngIf","No impreso"===e.estadoprint)}}function K(o,d){if(1&o&&(t.TgZ(0,"table",48),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t._UZ(3,"th"),t.TgZ(4,"th"),t._uU(5,"Articulo"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Fecha"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"No 1h"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Proveedor"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"No requisici\xf3n"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Solicitante"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Saldo inicial"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Ingreso"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Egreso"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Saldo"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"c-unitario"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"v-saldo"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Obs"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Opciones"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"tbody"),t.YNc(33,$,41,23,"tr",49),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(33),t.Q6J("ngForOf",e.itemsList)("ngForTrackBy",e.trackItems)}}let W=(()=>{class o{constructor(e,i,n,c,u,l,m,f,g){this.menu=e,this.Pdfx=i,this.modalCtrl=n,this.routerOutlet=c,this.router=u,this.authenticationService=l,this.alertController=m,this.translateService=f,this.modalController=g,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.viewType="tabla",this.tituloxx="",this.efecto=0,this.dataperido=[],this.dataempresa=[],this.dataproyecto=[],this.datagrupo=[],this.seguro="",this.msg="",this.filtroxx=!1,this.filtrostt=!1,this.currentSegment="Activo",this.searchSubject=new M.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="tabla"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.menu.enable(!1),this.variables=this.router.getCurrentNavigation().extras.state.variables,this.tituloxx=this.variables.nombre,this.userinfo=this.authenticationService.getcopiauser(),this.filtrostt=!0,this.filtroxx=!0,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(e=>{this.seguro=e}),this.translateService.get("MSGM").subscribe(e=>{this.msg=e}),this.rangeForm=new h.cw({dual:new h.NI({lower:1,upper:100})}),this.currentSegment="Activo"}filterContacts(e){this.currentSegment=e.detail.value}anular(e){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese No de tarjeta kardex , linea de impresi\xf3n y comentario de impresi\xf3n",inputs:[{name:"notarjeta",id:"notarjeta",placeholder:"Ingrese No. de tarjeta de kardex"},{name:"lineai",id:"lineai",placeholder:"Ingrese No. de linea de impresi\xf3n"},{name:"comentario",id:"comentario",type:"textarea",placeholder:"Ingrese comentario de anulaci\xf3n"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Anular e imprimir",handler:n=>{if(Number(n.nolinea)<1&&Number(n.nolinea)>15)this.authenticationService.presentAlert("Ingrese numero de linea valido (1..15)","Precauci\xf3n","");else if(""===n.notarjeta&&""===n.nolinea)this.authenticationService.presentAlert("Ingrese No. de tarjeta valido \xf3 numero de linea","Precauci\xf3n","");else{const c={operacion:"actualizalineakardexanula",nodockardex:n.notarjeta,estadoprint:"Impreso",nodockardexlinea:n.nolinea,anulacion:n.comentario};c&&this.authenticationService.createReg(e._id,c,"correoss").then(u=>{let l=[];l.push([{columns:[{width:50,text:""}],columnGap:1,margin:[30,120,10,10],fontSize:8}]);for(var m=0;m<Number(n.lineai);m++)if(Number(n.lineai)-1===m){var f="",g="",Z="",r="";"Salida"===e.tipo?(f=e.nodoc,g=e.unidad):(Z=e.nodoc,r=e.proveedor),l.push([{columns:[{width:53,text:this.dafecha(e.fecha)},{width:60,text:f},{width:115,text:g},{width:63,text:Z},{width:130,text:r},{width:70,text:e.ingreso},{width:65,text:e.egreso},{width:65,text:e.saldoanterior},{width:70,text:e.saldoactual},{width:60,text:"Q."+e.total},{width:100,text:e.obs}],columnGap:1,margin:[5,16,10,0],fontSize:9}])}else l.push([{columns:[{width:50,text:""},{width:60,text:""},{width:115,text:""},{width:60,text:""},{width:130,text:""},{width:70,text:""},{width:65,text:""},{width:65,text:""},{width:70,text:""},{width:60,text:""},{width:100,text:""}],columnGap:1,margin:[5,16,10,0],fontSize:9}]);this.Pdfx.printfrm2("",e,"",l,"kardex-"+e.producton,"FOLIO"),this.items=[],this.productocodigo="",this.productocategoria="",this.productonombre="",this.itemsList=this.items},u=>{this.authenticationService.presentAlert(u.error,"Precauci\xf3n","")})}}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}dafecha(e){var n=new Date(e).toISOString().substr(0,10).split("-");return n[2]+"-"+n[1]+"-"+n[0]}imprimiree(e){return(0,_.mG)(this,void 0,void 0,function*(){let i=[];i.push([{columns:[{width:470,text:""},{width:200,text:""}],columnGap:1,margin:[140,1,10,1],fontSize:8}]),i.push([{columns:[{width:480,text:e.producto},{width:200,text:e.categoria}],columnGap:1,margin:[140,25,10,1],fontSize:8}]),i.push([{columns:[{width:470,text:e.producton},{width:150,text:e.unidad}],columnGap:1,margin:[140,10,10,1],fontSize:8}]),this.Pdfx.printfrm2("",e,"",i,"kardexencabezado-"+e.producton,"FOLIO"),this.items=[],this.productocodigo="",this.productocategoria="",this.productonombre="",this.itemsList=this.items})}imprimir2(){return(0,_.mG)(this,void 0,void 0,function*(){for(var e=[],i=[],c=0;c<this.itemsList.length;c++)!0===this.itemsList[c].isChecked&&(e.push(this.itemsList[c]),i.push(this.itemsList[c]._id));0===e.length?this.authenticationService.presentAlert("Seleccione algun registro para impresion","Precauci\xf3n",""):yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese No de tarjeta kardex y linea de impresi\xf3n ",inputs:[{name:"notarjeta",id:"notarjeta",placeholder:"Ingrese No. de tarjeta de kardex"},{name:"nolinea",id:"nolinea",placeholder:"Ingrese No. de linea de impresi\xf3n"},{name:"comentario",id:"comentario",type:"textarea",placeholder:"Ingrese comentario "}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Imprimir",handler:l=>{var m=e.length+Number(l.nolinea)-1;if(m<0&&(m*=-1),m>15)this.authenticationService.presentAlert("Seleccione No de registros validos (1..15)","Precauci\xf3n","");else if(""===l.notarjeta&&""===l.nolinea)this.authenticationService.presentAlert("Ingrese No. de tarjeta valido \xf3 numero de linea","Precauci\xf3n","");else{const f={operacion:"actualizalineakardexmasivo",nodockardex:l.notarjeta,estadoprint:"Impreso",id:i,nodockardexlinea:l.nolinea,anulacion:l.comentario};f&&this.authenticationService.createReg("12333",f,"correoss").then(g=>{let Z=[];Z.push([{columns:[{width:50,text:""}],columnGap:1,margin:[30,111,10,10],fontSize:8}]);for(var r=0;r<Number(l.nolinea)-1;r++)Z.push([{columns:[{width:50,text:" "},{width:60,text:" "},{width:115,text:" "},{width:60,text:""},{width:130,text:" "},{width:70,text:" "},{width:65,text:""},{width:65,text:""},{width:70,text:""},{width:60,text:""},{width:100,text:""}],columnGap:1,margin:[37,16,10,0],fontSize:9}]);for(r=0;r<e.length;r++){var O,C="",x="",q="",b="";O=""===l.comentario||String(e[r].obs).indexOf("Acta administrativa No")>=0?e[r].obs:l.comentario,"Salida"===e[r].tipo?"Elimina Ingreso formulario 1-H"===e[r].accion||"Anula Ingreso formulario 1-H"===e[r].accion?(q=e[r].nodoc,(b=e[r].proveedor).indexOf("<br>")>=0&&(b=e[r].proveedor.split("<br>")[1].split(":")[1]),b=b.substring(0,34)):(C=e[r].nodoc,(x=e[r].proveedor).indexOf("<br>")>=0&&(x=e[r].proveedor.split("<br>")[1].split(":")[1]),x=x.substring(0,34)):"Elimina Salida requisici\xf3n"===e[r].accion||"Anula Salida requisici\xf3n"===e[r].accion?(C=e[r].nodoc,(x=e[r].proveedor).indexOf("<br>")>=0&&(x=e[r].proveedor.split("<br>")[1].split(":")[1]),x=x.substring(0,34)):(q=e[r].nodoc,(b=e[r].proveedor).indexOf("<br>")>=0&&(b=e[r].proveedor.split("<br>")[1].split(":")[1]),b=b.substring(0,34)),Z.push([{columns:[{width:58,text:this.dafecha(e[r].fecha)},{width:52,text:q},{width:123,text:b,fontSize:6},{width:60,text:C},{width:127,text:x,fontSize:6},{width:68,text:"  "+e[r].ingreso},{width:65,text:e[r].egreso},{width:65,text:e[r].saldoactual},{width:70,text:"Q."+Number(e[r].precio).toFixed(2)},{width:77,text:"Q."+Number(e[r].total).toFixed(2)},{width:128,text:O}],columnGap:1,margin:[37,16,10,0],fontSize:9}])}this.Pdfx.printfrm2("",e[0],"",Z,"kardex-"+String(e[0].producton).replace(".",""),"FOLIO"),this.items=[],this.productocodigo="",this.productocategoria="",this.productonombre="",this.itemsList=this.items},g=>{this.authenticationService.presentAlert(g.error,"Precauci\xf3n","")})}}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}imprimir(e){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese No de tarjeta kardex y linea de impresi\xf3n ",inputs:[{name:"notarjeta",id:"notarjeta",placeholder:"Ingrese No. de tarjeta de kardex"},{name:"nolinea",id:"nolinea",placeholder:"Ingrese No. de linea de impresi\xf3n"},{name:"comentario",id:"comentario",type:"textarea",placeholder:"Ingrese comentario "}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Imprimir",handler:n=>{if(Number(n.nolinea)<1&&Number(n.nolinea)>15)this.authenticationService.presentAlert("Ingrese numero de linea valido (1..15)","Precauci\xf3n","");else if(""===n.notarjeta&&""===n.nolinea)this.authenticationService.presentAlert("Ingrese No. de tarjeta valido \xf3 numero de linea","Precauci\xf3n","");else{const c={operacion:"actualizalineakardex",nodockardex:n.notarjeta,estadoprint:"Impreso",nodockardexlinea:n.nolinea,anulacion:n.comentario};c&&this.authenticationService.createReg(e._id,c,"correoss").then(u=>{let l=[];l.push([{columns:[{width:50,text:""}],columnGap:1,margin:[30,110,10,10],fontSize:8}]);for(var m=0;m<Number(n.nolinea);m++)if(Number(n.nolinea)-1===m){var C,f="",g="",Z="",r="";C=""===n.comentario?e.obs:n.comentario,"Salida"===e.tipo?(f=e.nodoc,(g=e.proveedor).indexOf("<br>")>=0&&(g=e.proveedor.split("<br>")[1].split(":")[1]),g=g.substring(0,34)):(Z=e.nodoc,(r=e.proveedor).indexOf("<br>")>=0&&(r=e.proveedor.split("<br>")[1].split(":")[1]),r=r.substring(0,34)),l.push([{columns:[{width:50,text:this.dafecha(e.fecha)},{width:60,text:Z},{width:115,text:r,fontSize:6},{width:60,text:f},{width:130,text:g,fontSize:6},{width:70,text:e.ingreso},{width:65,text:e.egreso},{width:65,text:e.saldoactual},{width:70,text:"Q."+Number(e.precio).toFixed(2)},{width:60,text:"Q."+Number(e.total).toFixed(2)},{width:100,text:C}],columnGap:1,margin:[39,16,10,0],fontSize:9}])}else l.push([{columns:[{width:50,text:" "},{width:60,text:" "},{width:115,text:" "},{width:60,text:""},{width:130,text:" "},{width:70,text:" "},{width:65,text:""},{width:65,text:""},{width:70,text:""},{width:60,text:""},{width:100,text:""}],columnGap:1,margin:[39,16,10,0],fontSize:9}]);this.Pdfx.printfrm2("",e,"",l,"kardex-"+e.producton,"FOLIO")},u=>{this.authenticationService.presentAlert(u.error,"Precauci\xf3n","")})}}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}buscar01(){return(0,_.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese No de tarjeta kardex  ",inputs:[{name:"notarjeta",id:"notarjeta",placeholder:"Ingrese No. de tarjeta de kardex"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"Buscar",handler:i=>{i&&(""===i.notarjeta?this.authenticationService.presentAlert("Ingrese No. de tarjeta","Precauci\xf3n",""):(this.itemsList=[],this.efecto=0,this.filtroxx=!0,this.authenticationService.getReg(i.notarjeta+"/kardex2/"+this.userinfo[0].idempresa._id,"correoss",0).then(n=>{this.efecto=1,this.items=n,this.productocodigo=this.items[0].producto,this.productocategoria=this.items[0].producton,this.productonombre=this.items[0].categoria,this.itemsList=this.items},n=>{this.authenticationService.presentAlert(n.error,this.msg,"")})))}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}checkEvent(){const e=this.itemsList.length;let i=0;this.itemsList.map(n=>{n.isChecked&&i++}),i>0&&i<e?(this.isIndeterminate=!0,this.masterCheck=!1):i==e?(this.masterCheck=!0,this.isIndeterminate=!1):(this.isIndeterminate=!1,this.masterCheck=!1)}buscar0(){return(0,_.mG)(this,void 0,void 0,function*(){const u=yield this.modalCtrl.create({component:U.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalCtrl.getTop(),componentProps:{frmapirest:"",idcampofiltromanual:"",tipo:"select",filtrar:"",idfrmconsulta:{id:"5fc01bbba8d0a14888774579",nombre:"Articulos"},idfrmconsulta2:[{_id:"60063d962b305c001e1a75ef",id:"5fc01da8a8d0a14888774582",nombre:"unidaddemedida\xb0Unidad de medida"},{_id:"5ff62a217d56fa1ddca36d75",id:"5fc01cffa8d0a1488877457c",nombre:"codigoarticulo\xb0C\xf3digo articulo"},{_id:"5ff62a217d56fa1ddca36d76",id:"5fc01d17a8d0a1488877457e",nombre:"descripciondelarticulo\xb0Descripci\xf3n del articulo"},{_id:"60063d962b305c001e1a75f1",id:"5fc01d78a8d0a14888774580",nombre:"precioporunidad\xb0Precio unitario"},{_id:"5ff62a217d56fa1ddca36d77",id:"5fc01ef8a8d0a14888774585",nombre:"categoria\xb0categoria"},{_id:"5ff62a217d56fa1ddca36d78",id:"5fc025df09ca5a2018e86ae3",nombre:"existenciaactual\xb0Existencia actual"}],siformulatiot:"si",variables:"",userinfo:"",grabax:"formulariott",vector:[],record2:null,op:"5fc030bd2fc3552d1014794a",frm:"frmcats",idllave:"",titlex:"Buscar Articulo (*)"},cssClass:"modal-fullscreen"});return u.onWillDismiss().then(l=>{let m=[];if(m=l,l.data){var f=l.data.nombre.split("<br>");this.itemsList=[],this.efecto=0,this.filtroxx=!0,this.authenticationService.getReg(f[1].split(":")[1].trim()+"/kardex1/"+this.userinfo[0].idempresa._id,"correoss",0).then(g=>{this.efecto=1,this.items=g,this.productocodigo=this.items[0].producto,this.productocategoria=this.items[0].producton,this.productonombre=this.items[0].categoria,this.itemsList=this.items},g=>{this.authenticationService.presentAlert(g.error,this.msg,"")})}}),yield u.present()})}loadData(e){setTimeout(()=>{e.target.complete(),1e3===this.items.length&&(e.target.disabled=!0)},500)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a._q),t.Y36(I.$),t.Y36(a.IN),t.Y36(a.jP),t.Y36(T.F0),t.Y36(A.$),t.Y36(a.Br),t.Y36(p.sK),t.Y36(a.IN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-frmkardex-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(a.ju,5),2&e){let n;t.iGM(n=t.CRH())&&(i.infiniteScroll=n.first)}},decls:26,vars:10,consts:[["color","primary"],["slot","start"],["defaultHref","frmtareasprogramadasCreatePage"],["size","small"],["collapse","true","slot","end"],["title","Imprimir registros seleccionados","title","Imprimir",3,"click"],["slot","icon-only","name","print-outline"],["title","Buscar por no tarjeta kardex","title","Filtrar",3,"click",4,"ngIf"],["title","Buscar por producto","title","Filtrar",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],[1,"user-friends-content"],[1,"ion-text-center"],["sticky",""],[4,"ngIf"],["class","pure-table",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],["title","Buscar por no tarjeta kardex","title","Filtrar",3,"click"],["slot","icon-only","name","search-circle-outline"],["title","Buscar por producto","title","Filtrar",3,"click"],["slot","icon-only","name","filter-outline"],[3,"click"],["slot","icon-only","name","grid"],["slot","icon-only","name","list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],["slot","start",3,"ngModel","ngModelChange","ionChange"],[1,"first-letter",3,"innerHtml"],["lines","full"],["color","transparent"],["color","primary","slot","start"],["color","danger","slot","end",4,"ngIf"],["slot","primary"],["title","Imprimir encabezado","color","secondary",3,"click"],["slot","icon-only","name","albums-outline"],["title","Imprimir","color","secondary",3,"click"],["title","Anular e imprimir","color","secondary",3,"click"],["slot","icon-only","name","close-circle-outline"],["color","secondary","slot","end",4,"ngIf"],["color","danger","slot","end"],["color","secondary","slot","end"],[1,"pure-table"],[4,"ngFor","ngForOf","ngForTrackBy"],["data-label","Check"],["data-label","Articulo"],["data-label","Fecha"],["data-label","No 1h"],["data-label","Proveedor"],["data-label","No requisici\xf3n"],["data-label","Solictante"],["data-label","Saldo inicial"],["data-label","Ingreso"],["data-label","Egreso"],["data-label","Saldo"],["data-label","c-unitario"],["data-label","v-unitario"],["data-label","Obs"],["data-label","opciones"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4),t.TgZ(7,"ion-button",5),t.NdJ("click",function(){return i.imprimir2()}),t._UZ(8,"ion-icon",6),t.qZA(),t.qZA(),t.TgZ(9,"ion-buttons",4),t.YNc(10,L,2,0,"ion-button",7),t.qZA(),t.TgZ(11,"ion-buttons",4),t.YNc(12,N,2,0,"ion-button",8),t.qZA(),t.TgZ(13,"ion-buttons",4),t.YNc(14,j,2,0,"ion-button",9),t.YNc(15,E,2,0,"ion-button",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"ion-content",10),t.TgZ(17,"div",11),t.TgZ(18,"h1"),t._uU(19),t.qZA(),t.qZA(),t.TgZ(20,"ion-item-divider",12),t.YNc(21,z,4,7,"ion-label",13),t.qZA(),t.YNc(22,Y,4,2,"div",13),t.YNc(23,K,34,2,"table",14),t.TgZ(24,"ion-infinite-scroll",15),t.NdJ("ionInfinite",function(c){return i.loadData(c)}),t._UZ(25,"ion-infinite-scroll-content",16),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij(" ",i.tituloxx," "),t.xp6(5),t.Q6J("ngIf",!0===i.filtrostt),t.xp6(2),t.Q6J("ngIf",!0===i.filtrostt),t.xp6(2),t.Q6J("ngIf","grid"===i.viewType),t.xp6(1),t.Q6J("ngIf","tabla"===i.viewType),t.xp6(4),t.AsE("Kardex producto: ",i.productocodigo," ",i.productocategoria,""),t.xp6(2),t.Q6J("ngIf",(null==i.itemsList?null:i.itemsList.length)>0),t.xp6(1),t.Q6J("ngIf",(null==i.itemsList?null:i.itemsList.length)>0&&"grid"===i.viewType),t.xp6(1),t.Q6J("ngIf",(null==i.itemsList?null:i.itemsList.length)>0&&"tabla"===i.viewType))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.YG,a.gu,k.O5,a.W2,a.rH,a.ju,a.MB,a.Q$,a.q_,k.sg,a.Ie,S.B,a.jY,a.Nd,a.wI,a.PM,a.nz,a.w,h.JJ,h.On,a.yp],pipes:[p.X$,k.H9],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}#profile-info[_ngcontent-%COMP%]{position:absolute;top:-95px;width:100%;z-index:2;text-align:center}#profile-name[_ngcontent-%COMP%]{color:#444;font-size:26px;box-shadow:0!important;text-align:center}.profile-description[_ngcontent-%COMP%]{font-size:15px;color:#888}.profile-numbers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#444;font-size:medium;margin-bottom:3px}.profile-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;color:#34354c}hr[_ngcontent-%COMP%]{border:0;height:1px;background:#444;background:-webkit-linear-gradient(left,rgba(0,0,0,0) 0%,#bcc6d6 50%,rgba(0,0,0,0) 100%)}table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;margin:0;padding:0;border-collapse:collapse;border-spacing:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ddd;padding:5px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:10px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-transform:uppercase;font-size:10px;letter-spacing:1px}@media screen and (max-width: 600px){table[_ngcontent-%COMP%]{border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;display:block;font-size:9px;border-bottom:2px solid #ddd}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;text-align:right;font-size:9px;border-bottom:1px dotted #ccc}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:700}}"]}),o})();var X=s(22675);let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[k.ez,a.Pc,P.K,h.u5,h.UX,v.YL,X.v,T.Bz.forChild([{path:"",component:W}]),p.aw.forChild()]]}),o})()},22675:(y,w,s)=>{s.d(w,{v:()=>_});var a=s(69808),T=s(93075),k=s(51062),P=s(23349),p=s(55787),h=s(56604),v=s(5e3);let _=(()=>{class A{}return A.\u0275fac=function(U){return new(U||A)},A.\u0275mod=v.oAB({type:A}),A.\u0275inj=v.cJS({imports:[[a.ez,T.u5,T.UX,P.Pc,p.Bz,h.Cl,k.aw.forChild()]]}),A})()},26806:(y,w,s)=>{s.d(w,{B:()=>P});var a=s(5e3),T=s(69808);const k=function(p,h){return{"no-animated":p,inline:h}};let P=(()=>{class p{constructor(){this.width="100%",this.height="16px",this.borderRadius="0",this.rounded=!1,this.noAnimated=!1,this.inline=!1,this.styles={}}ngOnInit(){this.styles={width:this.width,height:this.height,borderRadius:this.borderRadius},this.rounded&&(this.styles.borderRadius="999em")}}return p.\u0275fac=function(v){return new(v||p)},p.\u0275cmp=a.Xpm({type:p,selectors:[["skeleton-element"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius",rounded:"rounded",noAnimated:"noAnimated",inline:"inline"},decls:1,vars:5,consts:[[3,"ngClass","ngStyle"]],template:function(v,_){1&v&&a._UZ(0,"div",0),2&v&&a.Q6J("ngClass",a.WLB(2,k,_.noAnimated,_.inline))("ngStyle",_.styles)},directives:[T.mk,T.PC],styles:["[_nghost-%COMP%]{display:block}[inline][_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .no-animated[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important;background:rgba(130,130,130,.2)}.animated-background[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(130,130,130,.2);background:linear-gradient(to right,rgba(130,130,130,.2) 8%,rgba(130,130,130,.3) 18%,rgba(130,130,130,.2) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}"]}),p})()}}]);