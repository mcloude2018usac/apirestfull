{"version":3,"sources":["webpack:///src/app/DESARROLLO/TIENDAS/producto-compra2/producto-compra2.module.ts","webpack:///src/app/components/counter-input/counter-input.component.ts","webpack:///src/app/components/counter-input/counter-input.component.html","webpack:///src/app/DESARROLLO/TIENDAS/producto-compra2/producto-compra2.page.ts","webpack:///src/app/DESARROLLO/TIENDAS/producto-compra2/producto-compra2.page.html"],"names":["ProductoCompra2PageModule","CounterInputComponent","_counterValue","propagateChange","validateFn","this","val","inputs","minValue","maxValue","counterRangeMax","counterRangeMin","c","value","rangeError","given","min","max","counterValue","fn","routerOutlet","router","authenticationService","alertController","translateService","modalController","showAgeFilter","showmenu","items","variables","userinfo","viewType","tituloxx","efecto","seguro","msg","sienvio","currentSegment","searchSubject","ReplaySubject","apifoto","getapifoto","getCurrentNavigation","extras","state","llave","llave0","categoria","tipovista","moneda","getcopiauser","titulo","searchQuery","get","subscribe","cartItemCount","getCartItemCount","pideregistros","itemsList","getReg","idempresa","_id","then","data","err","presentAlert","error","filterList","list","query","filter","item","nombre","toLowerCase","includes","event","setTimeout","target","complete","length","disabled","console","log","currentTarget","innerText","addProduct","idproveedor","id","name","xunidad","unidad","price","precio","amount","rate","modal","create","component","animated","componentProps","direccion","telefono","correo","presentingElement","getTop","cssClass","onWillDismiss","present","i","navigate","user"],"mappings":"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","file":"x","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { RouterModule} from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComponentsModule } from '../../../components/components.module';\nimport { NgxIonicImageViewerModule } from 'ngx-ionic-image-viewer';\nimport { MyModalcardPageModule } from '../../../DESARROLLO/modals/my-modalcard/my-modalcard.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule } from '@angular/forms';\n\n\nimport { ProductoCompra2Page } from './producto-compra2.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule, TranslateModule.forChild(),  MyModalcardPageModule, NgxIonicImageViewerModule,\n    RouterModule.forChild([{ path: '', component: ProductoCompra2Page }]),\n    ComponentsModule\n  ],\n  declarations: [ProductoCompra2Page],\n})\nexport class ProductoCompra2PageModule {}\n","import { Component, forwardRef, Input, OnChanges, ViewEncapsulation } from '@angular/core';\nimport { FormControl, ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\n\nexport function counterRangeValidator(minValue, maxValue) {\n  return (c: FormControl) => {\n    const err = {\n      rangeError: {\n        given: c.value,\n        min: minValue || 0,\n        max: maxValue || 10\n      }\n    };\n\n    return (c.value > +maxValue || c.value < +minValue) ? err : null;\n  };\n}\n\n@Component({\n  selector: 'app-counter-input',\n  templateUrl: './counter-input.component.html',\n  styleUrls: ['./counter-input.component.scss'],\n  providers: [\n    { provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => CounterInputComponent), multi: true },\n    { provide: NG_VALIDATORS, useExisting: forwardRef(() => CounterInputComponent), multi: true }\n  ],\n  encapsulation: ViewEncapsulation.None\n})\nexport class CounterInputComponent implements ControlValueAccessor, OnChanges {\n  // tslint:disable-next-line:no-input-rename\n  @Input('counterValue') _counterValue = 0;\n  // tslint:disable-next-line:no-input-rename\n  @Input('max') counterRangeMax;\n  // tslint:disable-next-line:no-input-rename\n  @Input('min') counterRangeMin;\n\n  propagateChange: any = () => {}; // Noop function\n  validateFn: any = () => {}; // Noop function\n\n  get counterValue() {\n    return this._counterValue;\n  }\n\n  set counterValue(val) {\n    this._counterValue = val;\n    this.propagateChange(val);\n  }\n\n  ngOnChanges(inputs) {\n    if (inputs.counterRangeMax || inputs.counterRangeMin) {\n      this.validateFn = counterRangeValidator(this.counterRangeMin, this.counterRangeMax);\n    }\n  }\n\n  writeValue(value) {\n    if (value) {\n      this.counterValue = value;\n    }\n  }\n\n  registerOnChange(fn) {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched() {}\n\n  increase() {\n    this.counterValue++;\n  }\n\n  decrease() {\n    this.counterValue--;\n  }\n\n  validate(c: FormControl) {\n    return this.validateFn(c);\n  }\n}\n","<div class=\"button-outer\">\n  <div class=\"button-wrapper\">\n    <ion-button class=\"counter-icon\" (click)=\"decrease()\">\n      <ion-icon slot=\"icon-only\" name=\"remove\"></ion-icon>\n    </ion-button>\n  </div>\n</div>\n<span class=\"counter-value\">{{ _counterValue }}</span>\n<div class=\"button-outer\">\n  <div class=\"button-wrapper\">\n    <ion-button class=\"counter-icon\" (click)=\"increase()\">\n      <ion-icon slot=\"icon-only\" name=\"add\"></ion-icon>\n    </ion-button>\n  </div>\n</div>\n","import { Component , OnInit , ViewChild } from '@angular/core';\nimport {AlertController, ModalController ,  IonRouterOutlet} from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport {  Router , NavigationExtras } from '@angular/router';\nimport { AuthenticationService } from '../../services/Authentication.service';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { MyModalcardPage } from '../../../DESARROLLO/modals/my-modalcard/my-modalcard.page';\nimport { ReplaySubject} from 'rxjs';\nimport { IonInfiniteScroll } from '@ionic/angular';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'app-producto-compra2',\n  templateUrl: './producto-compra2.page.html',\n  styleUrls: ['./producto-compra2.page.scss'],\n})\nexport class ProductoCompra2Page implements OnInit {\n  @ViewChild(IonInfiniteScroll, { static : false }) infiniteScroll: IonInfiniteScroll;\nrangeForm: FormGroup;\nsearchQuery: string;\nshowAgeFilter = false;\nshowmenu = false;\nllave:any;\ncategoria:any;\n  items: any  = [] ;\n  variables: any = [];\n  userinfo: any = [];\n  viewType = 'grid';\n  moneda:any;\n  tipovista:any;\n\n  tituloxx = '';\n  efecto = 0;\n  seguro = '';\n  msg = '';\n  apifoto : String;\n  cartItemCount: BehaviorSubject<number>;\n  sienvio:any = false;\n  \n  lat: number;\n    lng: number;\n    address: string;\n  \n  \n  itemsList: Array<any>;\n  public currentSegment: string = \"Todos\";\n  searchSubject: ReplaySubject<any> = new ReplaySubject<any>(1);\n\nconstructor(   private routerOutlet: IonRouterOutlet , private router: Router, private authenticationService: AuthenticationService,\n   public alertController: AlertController,     public translateService: TranslateService    ,    private modalController: ModalController\n   ) { this.apifoto = this.authenticationService.getapifoto();\n }\n//producto-detalle1\n  ngOnInit() {\n    this.variables = this.router.getCurrentNavigation().extras.state.variables;\n    this.llave = this.router.getCurrentNavigation().extras.state.llave0;\n    this.categoria = this.router.getCurrentNavigation().extras.state.categoria;\n    this.tipovista = this.router.getCurrentNavigation().extras.state.tipovista;\n    this.sienvio = this.router.getCurrentNavigation().extras.state.sienvio;\n    this.moneda = this.router.getCurrentNavigation().extras.state.moneda;\n    this.userinfo = this.authenticationService.getcopiauser();\n    this.tituloxx =   this.router.getCurrentNavigation().extras.state.titulo ;\n    this.searchQuery = '';\n    this.translateService.get('SEGUROM').subscribe((value) => {   this.seguro = value  });\n    this.translateService.get('MSGM').subscribe((value) => {   this.msg = value  });\n    this.cartItemCount = this.authenticationService.getCartItemCount();\n    this.pideregistros();\n  }\n\n \n  pideregistros0() {\n   this.pideregistros();\n  }\n  pideregistros() {\n       this.itemsList = [];\n       this.efecto = 0 ;\n       this.authenticationService.getReg('todosproductos/Activo/' + this.userinfo[0].idempresa._id + '/' + this.llave +'Â°'+this.categoria, 'productos', 0).then((data) => {\n  \n       this.efecto=1;\n       this.items =  data;\n       this.itemsList = this.items;\n }, (err) => {\n   this.authenticationService.presentAlert(err.error , this.msg , '');\n });\n  }\n  searchList() {\n \n    const query = (this.searchQuery && this.searchQuery !== null) ? this.searchQuery : '';\n    this.itemsList = this.filterList(this.items, query);\n  }\n filterList(list, query): Array<any> {\n   return list.filter(item => item.nombre.toLowerCase().includes(query.toLowerCase()));\n  }\n  loadData(event) {\n    setTimeout(() => {\n      event.target.complete();\n      if ( this.items.length === 1000) {\n        event.target.disabled = true;\n      }\n    }, 500);\n  }\n\n\n  masprod(item, event: any) {\n    console.log(event.currentTarget.innerText);\n    this.authenticationService.addProduct({idproveedor: this.llave ,id: item._id,  name: item.nombre + ' ' + item.xunidad + ' ' + item.unidad,  price: item.precio,  amount: 1,rate:''});\n}\n\n\n\nasync openCart() {\n  const modal = await this.modalController.create({\n    component: MyModalcardPage,\n    animated: true,\n    componentProps:  {sienvio:this.sienvio ,moneda:this.moneda, nombre:  this.userinfo[0].nombre , direccion: this.userinfo[0].direccion,  telefono: this.userinfo[0].telefono, correo: this.userinfo[0].correo   },\n   \n    presentingElement: await this.modalController.getTop() , cssClass: 'modal-fullscreen'\n  });\n  modal.onWillDismiss().then((data) => {\n  });\n  return await modal.present();\n}\n\n\ndamenu(i, item) {\n\n\n  const navigationExtras: NavigationExtras = {\n    state: {\n      variables: this.variables,\n      user: 'this.username',\n      llave: item._id,\n      sienvio:this.sienvio,\n      llave0: this.llave,\n      tipovista: this.tipovista,\n      moneda: this.moneda,\n      data: item,\n      titulo: 'Producto ' + item.nombre\n    }\n  };\n  this.router.navigate(['producto-detalle1'], navigationExtras);\n\n}\n\n\n}\n","<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-back-button defaultHref=\"ProvidesPage\"></ion-back-button>\n    </ion-buttons>\n\n   \n    <ion-title>{{tituloxx}}</ion-title>\n  </ion-toolbar>\n  \n\n  <ion-toolbar class=\"filters-toolbar\">\n    <ion-row class=\"searchbar-row\" align-items-center>\n      <ion-col>\n        <ion-searchbar animated [(ngModel)]=\"searchQuery\" (ionChange)=\"searchList()\" placeholder=\"{{ 'BUSCARM' | translate }}\"></ion-searchbar>\n\n   \n      </ion-col>\n      <ion-col class=\"call-to-action-col\">\n        <!--\n       <ion-button fill=\"clear\" color=\"tw_botton1\" class=\"filters-btn\" >\n          <ion-icon slot=\"icon-only\" name=\"options\"></ion-icon>\n        </ion-button>\n-->\n      \n\n      </ion-col>\n    </ion-row>\n  \n    </ion-toolbar>\n        \n</ion-header>\n\n<ion-content class=\"fashion-listing-content\">\n  <ion-fab horizontal=\"end\" vertical=\"top\" slot=\"fixed\" edge>\n    <ion-fab-button color=\"tw_botton1\" style=\"height: 50px;  width: 50px;\" (click)=\"openCart()\" #cart>\n      <div class=\"cart-length\">{{ cartItemCount | async }}</div>\n            <ion-icon name=\"cart\" class=\"cart-icon\"></ion-icon>\n    </ion-fab-button>\n\n  </ion-fab>\n<br>\n\n  <ion-list class=\"friends-list\" *ngIf=\"itemsList.length > 0\">\n    <ion-item  [routerLink]=\"\" class=\"friend-item\" *ngFor=\"let item of itemsList;let i = index;\">\n      <ion-row  (click)=\"damenu(i,item)\" class=\"user-details-section\">\n        <ion-col *ngIf=\"tipovista=== 'Lista con imagenes' || tipovista=== 'Lista con imagenes sin cobro al inicio'\"  class=\"user-image-wrapper\" size=\"1\">\n          <app-aspect-ratio  [ratio]=\"{w: 1, h: 1}\">\n            <app-image-shell class=\"notification-image\" [src]=\"apifoto + item.foto1\" [alt]=\"'user image'\"></app-image-shell>\n          </app-aspect-ratio>\n        \n        </ion-col>\n        <ion-col (click)=\"damenu(i,item)\" class=\"user-data-wrapper\">\n        \n      \n          \n          <div class=\"user-info\">\n            <h3 class=\"user-name\">\n             \n              <app-text-shell [data]=\"item.nombre + ' ' + item.xunidad + ' ' + item.unidad \"></app-text-shell>\n            </h3>\n            <h5 class=\"user-job\">\n              <app-text-shell [data]=\"item.precio | currency:moneda\"></app-text-shell>\n            </h5>\n          </div>\n        \n        \n        </ion-col>\n       \n        <ion-col *ngIf=\" tipovista !== 'Lista con imagenes sin cobro al inicio'\"  class=\"user-image-wrapper\" size=\"3\">\n          <app-counter-input min=\"0\" max=\"100\" (click)=\"masprod(item,$event)\">5</app-counter-input>\n        \n        </ion-col>\n        <ion-col class=\"user-image-wrapper\" size=\"0.5\">\n        \n        </ion-col>\n      </ion-row>\n    </ion-item>\n  </ion-list>\n\n\n \n</ion-content>\n"]}