(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3cJI":function(i,t,s){"use strict";s.d(t,"a",(function(){return r}));var e=s("mrSG"),a=s("jtHE");class r{constructor(i,t,s,e,r){this.modalController=i,this.alertController=t,this.translateService=s,this.authenticationService=e,this.navParams=r,this.searchSubject=new a.a(1),this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.tmultiple=!1,this.vector=[],this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.grabax=!0,this.efecto=0,this.keys=[],this.seguro="",this.msg=""}searchList(){this.searchSubject.next({query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(i,t){return i.filter(i=>i.nombre.toLowerCase().includes(t.toLowerCase()))}checkEvent(){const i=this.itemsList.length;let t=0;this.itemsList.map(i=>{i.isChecked&&t++}),t>0&&t<i?(this.isIndeterminate=!0,this.masterCheck=!1):t==i?(this.masterCheck=!0,this.isIndeterminate=!1):(this.isIndeterminate=!1,this.masterCheck=!1)}checkMaster(){setTimeout(()=>{this.itemsList.forEach(i=>{i.isChecked=this.masterCheck})})}getKeys(i){const t=[];this.keys=i.nombre.split("\xb0");for(let s=0;s<this.keys.length;s++){const i=this.keys[s].split(":");""!==i[0]&&String(i[0]).indexOf("\xac")<0&&t.push(void 0===i[1]?i[0]+"  ":"<strong>"+i[0]+"</strong> : "+i[1])}return this.keys=t,!0}pideregistros(){if(""!==this.doblex)this.authenticationService.getReg("todos/"+this.data+"/"+this.userinfo[0].idempresa._id+"/"+this.doblex,this.frm,0).then(i=>{this.items=i,this.itemsList=this.items});else if("sigraba"===this.sigraba||"nograba"===this.sigraba)this.authenticationService.getReg("todos/"+this.data+"/"+this.userinfo[0].idempresa._id,this.frm,0).then(i=>{this.items=i,this.itemsList=this.items});else if("sigraba"===this.sigraba)this.items=this.vector;else{const i=[],t=[];switch(this.sigraba){case"multas":this.authenticationService.getReg("5f74c136f22ed14ea01c1cc1/descripcion\xb0Descripci\xf3n,monto\xb0Monto,plazoenminutospararesolver\xb0Plazo en minutos para resolver/"+this.userinfo[0].idempresa._id+"/formulariocombo/","frmmovils",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"actividadsiguiente":this.authenticationService.getReg(this.idllave0+"/actividadsiguiente/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmactividads",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"controlmultipleidnombre":this.tmultiple=!0,this.authenticationService.getReg(this.filtroformularioconsulta,this.formularioconsulta,0).then(i=>{this.items=i,this.itemsList=this.items,this.itemsList=[];for(let t=0;t<this.items.length;t++){let i=0;if(this.idcampos)for(let s=0;s<this.idcampos.length;s++)this.idcampos[s]===this.items[t]._id&&(i=1);if(0===i&&this.idcamposmodificables)for(let s=0;s<this.idcamposmodificables.length;s++)this.idcamposmodificables[s]===this.items[t]._id&&(i=1);if(0===i&&this.idcamposmodificables2.length>0){for(let s=0;s<this.idcamposmodificables2.length;s++)this.idcamposmodificables2[s]===this.items[t]._id&&(i=1);i=0===i?1:0}this.itemsList.push(1===i?{_id:this.items[t]._id,name:this.items[t].name,nombre:this.items[t].nombre,isChecked:!0}:{_id:this.items[t]._id,name:this.items[t].name,nombre:this.items[t].nombre,isChecked:!1})}this.items=this.itemsList});break;case"formulariottcheck":for(let i=0;i<this.idfrmconsulta2.length;i++)t.push([this.idfrmconsulta2[i].nombre]);switch(this.idfrmconsulta.id){case"users":this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,"personals",0).then(i=>{this.items=i,this.itemsList=this.items});break;default:let i="";i=void 0!==this.filtrar&&""!==this.filtrar?this.idfrmconsulta.id+"/"+t+"/"+this.userinfo[0].idempresa._id+"\xac\xb0"+this.filtrar+"/formulariocombofiltro/":this.idfrmconsulta.id+"/"+t+"/"+this.userinfo[0].idempresa._id+"/formulariocombo/",this.authenticationService.getReg(i,"frmmovils",0).then(i=>{this.items=i,this.itemsList=this.items})}break;case"formulariott":let s="";for(let t=0;t<this.idfrmconsulta2.length;t++)i.push([this.idfrmconsulta2[t].nombre]);if(""!==this.idpapafiltro&&void 0!==this.idpapafiltro)this.filtrar='"idpapa":"'+this.idpapafiltro+'"',s=this.idfrmconsulta.id+"/"+i+"/"+this.userinfo[0].idempresa._id+"\xac"+this.filtrar+"/formulariosolopapafiltro/","select2"===this.tipo||"select3"===this.tipo?(this.tmultiple=!0,this.authenticationService.getReg(s,"frmmovils",0).then(i=>{if(this.items=i,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let i=0;i<this.items.length;i++){let t=0;if(this.idcampos)for(let s=0;s<this.idcampos.length;s++)this.idcampos[s]===this.items[i]._id&&(t=1);this.itemsList.push(1===t?{_id:this.items[i]._id,name:this.items[i].name,nombre:this.items[i].nombre,isChecked:!0}:{_id:this.items[i]._id,name:this.items[i].name,nombre:this.items[i].nombre,isChecked:!1})}this.items=this.itemsList}})):(this.tmultiple=!1,this.authenticationService.getReg(s,"frmmovils",0).then(i=>{this.items=i,this.itemsList=this.items}));else switch(this.idfrmconsulta.id){case"users":this.authenticationService.getReg("Activo/personasactivasfiltro/"+this.userinfo[0].idempresa._id+"\xac"+this.idcampofiltromanual,"personals",0).then(i=>{this.items=i,this.itemsList=this.items});break;default:s=void 0!==this.filtrar&&""!==this.filtrar?this.idfrmconsulta.id+"/"+i+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.filtrar+"/formulariocombofiltro/":this.idfrmconsulta.id+"/"+i+"/"+this.userinfo[0].idempresa._id+"/formulariocombo/",this.authenticationService.getReg(s,"frmmovils",0).then(i=>{this.items=i,this.itemsList=this.items})}break;case"formulariot":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(i=>{this.items=i,this.items.push({_id:"users",nombre:"Usuarios sistema**"}),this.itemsList=this.items});break;case"formulariot2":switch(this.idllave){case"users":this.tmultiple=!1,this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,"personals",0).then(i=>{this.items=i,this.itemsList=this.items});break;default:let i="formulariocamposverid";"formulario-plantilla"===this.catalogot?this.tmultiple=!0:(this.tmultiple=!1,i="formulariocamposveridcampo"),this.authenticationService.getReg(this.idllave+"/"+i+"/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(i=>{if(this.items=i,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let i=0;i<this.items.length;i++){let t=0;if(this.idcampos)for(let s=0;s<this.idcampos.length;s++)this.idcampos[s].id===this.items[i]._id&&(t=1);this.itemsList.push(1===t?{_id:this.items[i]._id,name:this.items[i].name,nombre:this.items[i].nombre,isChecked:!0}:{_id:this.items[i]._id,name:this.items[i].name,nombre:this.items[i].nombre,isChecked:!1})}this.items=this.itemsList}})}break;case"role":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,"rols",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"role1":this.authenticationService.getReg("todos/todosope/"+this.userinfo[0].idempresa._id,"rols",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"tarifas":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].idempresa._id,"tarifas",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"formulariodetalle":this.authenticationService.getReg("detalle/Activo/"+this.userinfo[0].idempresa._id+"/frmmovilp","frmmovils",0).then(i=>{this.items=i,this.itemsList=this.items});break;case"personals":this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,this.sigraba,0).then(i=>{if(this.items=i,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let i=0;i<this.items.length;i++){let t=0;if(this.idusuario)for(let s=0;s<this.idusuario.length;s++)this.idusuario[s].email===this.items[i].email&&(t=1);this.itemsList.push(1===t?{_id:this.items[i]._id,correo:this.items[i].email,nombre:this.items[i].nombre,isChecked:!0}:{_id:this.items[i]._id,correo:this.items[i].email,nombre:this.items[i].nombre,isChecked:!1})}"usuario-plantilla-grupoproceso"===this.op&&this.itemsList.push({_id:"USUARIOSOLICITANTE",correo:"USUARIOSOLICITANTE",nombre:"USUARIO SOLICITANTE",isChecked:!1}),this.items=this.itemsList}});break;case"frmmovils":this.authenticationService.getReg(this.tipo+"/Activo/"+this.userinfo[0].idempresa._id+"/frmmovilp",this.sigraba,0).then(i=>{this.items=i,this.itemsList=this.items});break;case"frmactors":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.idllave,this.sigraba,0).then(i=>{this.items=i,this.itemsList=this.items});break;default:this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,this.sigraba,0).then(i=>{if(this.items=i,this.itemsList=this.items,!0===this.tmultiple){for(let i=0;i<this.items.length;i++){let t=0;if(this.idusuario)for(let s=0;s<this.idusuario.length;s++)this.idusuario[s].email===this.items[i].email&&(t=1);this.itemsList.push(1===t?{_id:this.items[i]._id,nombre:this.items[i].nombre,isChecked:!0}:{_id:this.items[i]._id,nombre:this.items[i].nombre,isChecked:!1})}this.items=this.itemsList}})}}}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.authenticationService.getcopiauser(),this.frm=this.navParams.get("frm"),this.data=this.navParams.get("op"),this.tipo=this.navParams.get("tipo"),this.tituloxx=this.navParams.get("titlex"),this.doblex=this.navParams.get("doble"),this.idasociado=this.navParams.get("idasociado"),this.bloquear=this.navParams.get("bloquear"),void 0===this.bloquear&&(this.bloquear=""),this.tmultiple=this.navParams.get("tmultiple"),this.idusuario=this.navParams.get("tarraymultiple"),this.idcampos=this.navParams.get("tarraymultiple"),this.idllave=this.navParams.get("idllave"),this.idllave0=this.navParams.get("idllave0"),this.idpapafiltro=this.navParams.get("idpapafiltro"),this.catalogot=this.navParams.get("catalogot"),this.op=this.navParams.get("op"),this.idcampofiltromanual=this.navParams.get("idcampofiltromanual"),this.idfrmconsulta=this.navParams.get("idfrmconsulta"),this.idfrmconsulta2=this.navParams.get("idfrmconsulta2"),this.siformulatiot=this.navParams.get("siformulatiot"),this.idcamposmodificables=this.navParams.get("idcamposmodificables"),this.idcamposmodificables2=this.navParams.get("idcamposmodificables2"),this.filtroformularioconsulta=this.navParams.get("filtroformularioconsulta"),this.formularioconsulta=this.navParams.get("formularioconsulta"),this.filtrar=this.navParams.get("filtrar"),void 0===this.tmultiple&&(this.tmultiple=!1),void 0===this.doblex&&(this.doblex=""),this.sigraba=this.navParams.get("grabax"),this.vector=this.navParams.get("vector"),void 0===this.navParams.get("grabax")&&(this.sigraba="sigraba"),this.grabax="sigraba"!==this.sigraba,this.pideregistros(),this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),"frmcats"===this.frm?this.idunidadt=this.data:(this.idunidadt=this.data.idunidad,this.idformulario=this.data.idformulario)}ionViewDidLoad(){this.frm=this.data.frm,null==this.navParams.get("record")?this.tituloxx="Creaci\xf3n de "+this.idunidadt:(this.Form.controls.nombre.setValue(this.data.record.nombre),this.tituloxx="Actualizaci\xf3n de "+this.idunidadt)}addRecord(){return Object(e.a)(this,void 0,void 0,(function*(){const i=yield this.alertController.create({header:"Ingrese informaci\xf3n",message:"",inputs:[{name:"nombre",type:"text",placeholder:"Ingrese informaci\xf3n"}],buttons:[{text:"Cancelar",cssClass:"secondary",handler:i=>{}},{text:"Aceptar",handler:i=>{let t;t="frmcats"===this.frm?{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idunidad2:this.doblex,nombre:i.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Crea catalogos dinamicos "}}:{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idformulario:this.idformulario,nombre:i.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Crea catalogos dinamicos "}},this.authenticationService.createReg("",t,this.frm).then(i=>{this.pideregistros()},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})}}]});yield i.present().then(()=>{document.querySelector("ion-alert input").focus()})}))}closeModal(){return Object(e.a)(this,void 0,void 0,(function*(){this.modalController.dismiss("close")}))}selectitem(i){if(!0===this.tmultiple){const i=[];let t="",s="",e="";for(let a=0;a<this.itemsList.length;a++)if(!0===this.itemsList[a].isChecked)switch(this.sigraba){case"controlmultipleidnombre":i.push({id:this.itemsList[a]._id,nombre:this.itemsList[a].nombre}),e=e+" , "+this.itemsList[a].nombre,t=t+";"+this.itemsList[a]._id;break;case"formulariot2":switch(this.idllave){case"users":i.push({id:this.itemsList[a]._id,nombre:this.itemsList[a].nombre}),e=e+" , "+this.itemsList[a].nombre,t=t+";"+this.itemsList[a]._id;break;default:i.push({id:this.itemsList[a]._id,nombre:this.itemsList[a].name+"\xb0"+this.itemsList[a].nombre}),e=e+" , "+this.itemsList[a].nombre,t=t+";"+this.itemsList[a]._id}break;default:if("select2"===this.tipo||"select3"===this.tipo){i.push({email:this.itemsList[a]._id,nombre:this.itemsList[a].nombre}),e=e+" "+this.itemsList[a].nombre,t=t+";"+this.itemsList[a]._id,s=s+this.itemsList[a].nombre.split("\xac")[1]+";";break}i.push({email:this.itemsList[a]._id,nombre:this.itemsList[a].nombre,correo:this.itemsList[a].correo}),e=e+" "+this.itemsList[a].nombre,t=t+";"+this.itemsList[a]._id}switch(this.sigraba){case"formulariot2":default:this.modalController.dismiss({_id:i,correos:t,nombres:e,correos2:s})}}else this.modalController.dismiss({_id:i._id,nombre:i.nombre})}deleteRecord(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:i=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(i.id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na",this.frm).then(i=>{this.pideregistros()},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})}}]});yield t.present()}))}updateRecord(i){return Object(e.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Ingrese informaci\xf3n",message:"",inputs:[{name:"nombre",type:"text",value:i.nombre,placeholder:"Ingrese informaci\xf3n"}],buttons:[{text:"Cancelar",cssClass:"secondary",handler:i=>{}},{text:"Aceptar",handler:t=>{let s;s="frmcats"===this.frm?{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idunidad2:this.doblex,nombre:t.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza catalogos dinamicos "}}:{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idformulario:this.idformulario,nombre:t.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza catalogos dinamicos "}},this.authenticationService.createReg(i.id,s,this.frm).then(i=>{this.pideregistros()},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})}}]});yield t.present()}))}}}}]);
//# sourceMappingURL=default~DESARROLLO-ASOCIADOINVENTARIO-asociado-list-asociado-list-module-ngfactory~DESARROLLO-ASOCIA~77ef9bcf-es2015.8c2486985ad7f557b963.js.map