"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2205],{12205:(Y,M,h)=>{h.r(M),h.d(M,{formulariomovilsdListPageModule:()=>Ri});var u=h(23349),k=h(55787),w=h(69808),T=h(33678),v=h(51062),g=h(93075),z=h(36351),p=h(70655),D=h(68554),B=h(21295),V=h(4707),$=h(63814),F=h(15190),J=h(26388),i=h(5e3),W=h(59978),X=h(21113);const K=["inputId"],ii=["fotoa"];function ti(n,m){if(1&n&&(i.TgZ(0,"a",12),i._uU(1),i.qZA()),2&n){const e=i.oxw();i.MGl("href","https://www.google.com/maps/search/?api=1&query=",e.geoposiciontxt.replace("\xac",","),"",i.LSH),i.xp6(1),i.hij("geoposici\xf3n: ",e.geoposiciontxt.replace("\xac",","),"")}}function ei(n,m){if(1&n&&(i.TgZ(0,"div"),i._UZ(1,"dynamic-form",13,14),i.qZA()),2&n){const e=i.oxw();i.xp6(1),i.Q6J("controls",e.controls)("form",e.form)}}function oi(n,m){1&n&&(i.TgZ(0,"div",15),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&n&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"obteniendo_info")," "))}let Q=(()=>{class n{constructor(e,a,t,r,o,c,d){this.router=e,this.modalController=a,this.controlsService=t,this.translateService=r,this.authenticationService=o,this.navParams=c,this.actionSheetController=d,this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.loading=!1,this.OPERACIONT="CREAR",this.fechascompone=[],this.horascompone=[],this.submitted=[],this.muestrabien=!1,this.apifoto=this.authenticationService.getapifoto()}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.loading=!1,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.navParams.get("title"),this.idcategoria=this.navParams.data.record2.idcategoria,this.nidformulario=this.navParams.data.record2.nidformulario,this.idformulario=this.navParams.data.record2.idformulario,this.regitrosacumulados=this.navParams.data.record2.regitrosacumulados,this.tipo2=this.navParams.data.record2.tipo2,this.tipo=this.navParams.data.record2.tipo,this.ejecuta=this.navParams.data.record2.ejecuta,this.ejecutainicio=this.navParams.data.record2.ejecutainicio,this.ejecutaactualiza=this.navParams.data.record2.ejecutaactualiza,this.ejecutaelimina=this.navParams.data.record2.ejecutaelimina,null==this.navParams.get("record")?(this.OPERACIONT=this.authenticationService.datraduccion("guardar")+" "+this.navParams.data.record2.nidformulario,this.titulo1=this.authenticationService.datraduccion("agregar")+" "+this.navParams.data.record2.nidformulario,this.titulo2=this.authenticationService.datraduccion("completa_form")+" "+this.navParams.data.record2.nidformulario,this.translateService.get("NUEVOM").subscribe(e=>{this.tituloxx=e+" "+this.tituloxx,this.lpermiso=e})):(this.OPERACIONT=this.authenticationService.datraduccion("actualizar")+" "+this.navParams.data.record2.nidformulario,this.titulo1=this.authenticationService.datraduccion("actualizar")+" "+this.navParams.data.record2.nidformulario,this.titulo2=this.authenticationService.datraduccion("camios_deseas")+" "+this.navParams.data.record2.nidformulario,this.translateService.get("ACTUALIZAM").subscribe(e=>{this.tituloxx=e+" "+this.tituloxx,this.lpermiso=e}),this._ID=this.navParams.data.record._id),this.form=new g.cw({}),this.onValueChanges()}onValueChanges(){this.form.valueChanges.subscribe(e=>{this.submitted=e})}davaloritem(e,a){let t="";return t=e[a]?e[a]:"",t}dalistacat(e,a){let t;for(let r=0;r<e.length;r++)if(e[r].label===a){t={key:e[r].key,label:e[r].label};break}return t}ngAfterViewInit(){null==this.navParams.get("record")?this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(e=>{const a=[],t=e;for(let o=0;o<t.length;o++){const c=t[o].required;let d="",s="",f=[];switch(t[o].type){case"fecha":this.fechascompone.push(t[o].name);break;case"fechahora":this.horascompone.push(t[o].name);break;case"label":s=".";break;case"check":s=t[o].default,""==s?s="false":s||(s="false");break;case"select":f=this.dalistacat(t[o].options,t[o].default);break;default:s=t[o].default}f||(f=""),s||(s=""),d="true"==c?" (*)":" "+this.authenticationService.datraduccion("opcional");var r=t[o].title+d;"es"!==this.authenticationService.getlenguaje()&&t[o].title2&&(r=t[o].title2+d),"label"===t[o].type&&(s=".",d=""),"select"==t[o].type||"select2"==t[o].type?(""===f&&(f=t[o].default),a.push({siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:t[o]._id,actualiza:"no",verregistros:t[o].verregistros,order:t[o].order,name:t[o].name,type:t[o].type,required:t[o].required,placeholder:t[o].placeholder,display:t[o].display,selected:t[o].selected,disabled:t[o].disabled,hidden:t[o].hidden,title:r,position:t[o].position,labelsizefondt:t[o].labelsizefondt,default:t[o].default,valor:f,default2:t[o].default2,default3:t[o].default3,copiarencampo:t[o].copiarencampo,categoria:t[o].categoria,combofijo:t[o].combofijo,idcadmovil:this.tt,options:t[o].options,fondoetiqueta:t[o].fondoetiqueta,coloretiqueta:t[o].coloretiqueta,blike:t[o].blike,rangomin:t[o].rangomin,rangomax:t[o].rangomax,rangostep:t[o].rangostep,alfatypo2:t[o].alfatypo2,alfatypo:t[o].alfatypo,idfrmconsulta:t[o].idfrmconsulta,idfrmconsulta2:t[o].idfrmconsulta2,idfrmconsulta2origen:t[o].idfrmconsulta2origen,idfrmconsultaorigen:t[o].idfrmconsultaorigen,usarunaves:t[o].usarunaves,idcampofiltro2:t[o].idcampofiltro2,idcampofiltro:t[o].idcampofiltro,idcampofiltromanual:t[o].idcampofiltromanual,regitrosacumulados:this.regitrosacumulados,idfrmconsultaorigenpapa:t[o].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:t[o].idfrmconsultaorigenpapa2,frmapirest:t[o].frmapirest,idcampofiltropapa:t[o].idcampofiltropapa})):a.push({siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:t[o]._id,actualiza:"no",order:t[o].order,name:t[o].name,type:t[o].type,required:t[o].required,placeholder:t[o].placeholder,display:t[o].display,selected:t[o].selected,disabled:t[o].disabled,hidden:t[o].hidden,title:r,position:t[o].position,labelsizefondt:t[o].labelsizefondt,default:t[o].default,valor:s,default2:t[o].default2,default3:t[o].default3,copiarencampo:t[o].copiarencampo,categoria:t[o].categoria,combofijo:t[o].combofijo,idcadmovil:this.tt,options:t[o].options,fondoetiqueta:t[o].fondoetiqueta,coloretiqueta:t[o].coloretiqueta,blike:t[o].blike,rangomin:t[o].rangomin,rangomax:t[o].rangomax,rangostep:t[o].rangostep,alfatypo2:t[o].alfatypo2,alfatypo:t[o].alfatypo,idfrmconsulta:"",idfrmconsulta2:"",idfrmconsulta2origen:"",idfrmconsultaorigen:"",usarunaves:"",idcampofiltro:"",idcampofiltro2:"",idcampofiltromanual:"",regitrosacumulados:"",frmapirest:"",idfrmconsultaorigenpapa:"",idcampofiltropapa:""})}this.controls=this.controlsService.getControls(a),this.muestrabien=!0},e=>{this.authenticationService.presentAlert(e.error,this.authenticationService.datraduccion("precaucion"),"")}):this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(e=>{const a=[],t=e;for(let o=0;o<t.length;o++){let d="";d="true"===t[o].required?" (*)":" "+this.authenticationService.datraduccion("opcional");let s="";"fecha"===(s=this.davaloritem(this.navParams.data.record,t[o].name),t[o].type)&&(s=this.authenticationService.dafecha(s,1),this.fechascompone.push(t[o].name)),s||(s=""),"label"===t[o].type&&(s=".",d="");var r=t[o].title+d;"es"!==this.authenticationService.getlenguaje()&&t[o].title2&&(r=t[o].title2+d),a.push("select"===t[o].type||"select2"==t[o].type?{siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:t[o]._id,actualiza:"si",verregistros:t[o].verregistros,order:t[o].order,name:t[o].name,type:t[o].type,required:t[o].required,placeholder:t[o].placeholder,display:t[o].display,selected:t[o].selected,disabled:t[o].disabled,hidden:t[o].hidden,title:r,position:t[o].position,labelsizefondt:t[o].labelsizefondt,default:"",valor:s,default2:t[o].default2,default3:t[o].default3,copiarencampo:t[o].copiarencampo,categoria:t[o].categoria,combofijo:t[o].combofijo,idcadmovil:this.tt,options:t[o].options,fondoetiqueta:t[o].fondoetiqueta,coloretiqueta:t[o].coloretiqueta,blike:t[o].blike,rangomin:t[o].rangomin,rangomax:t[o].rangomax,rangostep:t[o].rangostep,alfatypo2:t[o].alfatypo2,alfatypo:t[o].alfatypo,idfrmconsulta:t[o].idfrmconsulta,idfrmconsulta2:t[o].idfrmconsulta2,idfrmconsulta2origen:t[o].idfrmconsulta2origen,idfrmconsultaorigen:t[o].idfrmconsultaorigen,usarunaves:t[o].usarunaves,idcampofiltro2:t[o].idcampofiltro2,idcampofiltro:t[o].idcampofiltro,idcampofiltromanual:t[o].idcampofiltromanual,regitrosacumulados:this.regitrosacumulados,frmapirest:t[o].frmapirest,idfrmconsultaorigenpapa:t[o].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:t[o].idfrmconsultaorigenpapa2,idcampofiltropapa:t[o].idcampofiltropapa}:{siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:t[o]._id,actualiza:"si",order:t[o].order,name:t[o].name,type:t[o].type,required:t[o].required,placeholder:t[o].placeholder,display:t[o].display,selected:t[o].selected,disabled:t[o].disabled,hidden:t[o].hidden,title:r,position:t[o].position,labelsizefondt:t[o].labelsizefondt,default:"",valor:s,default2:t[o].default2,default3:t[o].default3,copiarencampo:t[o].copiarencampo,categoria:t[o].categoria,combofijo:t[o].combofijo,idcadmovil:this.tt,options:t[o].options,fondoetiqueta:t[o].fondoetiqueta,coloretiqueta:t[o].coloretiqueta,blike:t[o].blike,rangomin:t[o].rangomin,rangomax:t[o].rangomax,rangostep:t[o].rangostep,alfatypo2:t[o].alfatypo2,alfatypo:t[o].alfatypo,idfrmconsulta:"",idfrmconsulta2:"",idfrmconsulta2origen:"",idfrmconsultaorigen:"",usarunaves:"",idcampofiltro:"",",idcampofiltro2":"",idcampofiltromanual:"",regitrosacumulados:"",frmapirest:"",idfrmconsultaorigenpapa:"",idcampofiltropapa:""})}this.controls=this.controlsService.getControls(a),this.muestrabien=!0},e=>{this.authenticationService.presentAlert(e.error,this.authenticationService.datraduccion("precaucion"),"")})}objectToArray(e){var a=[];for(var t in e)a.push([t,e[t]]);return a}submitForm(){if(this.loading=!0,"INVALID"===this.form.status)this.loading=!1,this.authenticationService.presentAlert(this.authenticationService.datraduccion("ingrese_todoscampos"),this.authenticationService.datraduccion("precaucion"),"");else{let r="Actualiza";for(let o=0;o<this.fechascompone.length;o++)this.submitted[this.fechascompone[o]]=this.authenticationService.dafecha(this.submitted[this.fechascompone[o]],2);if(null==this.navParams.get("record")&&(r="Crea"),null==this.navParams.get("record")){this.submitted.usuarionew=this.userinfo[0].email,this.submitted.usuarioup=this.userinfo[0].email,this.submitted.usuarioup2=this.userinfo[0].nombrealias,this.submitted.usuarionew2=this.userinfo[0].nombrealias,this.submitted.idempresa=this.userinfo[0].idempresa._id,this.submitted.geoposicionxxx=this.geoposiciontxt,this.submitted.estadointerno="activo",this.submitted.comentarioanulado="",this.submitted.comentariocerrado="";const o={idcat:this.idcategoria,idform:this.idformulario,estructura:this.submitted,estructuraante:this.navParams.data.record,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,ejecutainicio:this.ejecutainicio,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:r,accion:"Crea en formulario movil"}};o&&this.authenticationService.createRegmovil("",o,"frmmovils").then(c=>{this.loading=!1,this.modalController.dismiss("ok")},c=>{this.loading=!1,this.authenticationService.presentAlert(c.error,this.authenticationService.datraduccion("precaucion"),"")})}else{var e=this.objectToArray(this.submitted),a=this.objectToArray(this.navParams.data.record),t="";for(let c=0;c<e.length;c++)for(let d=0;d<a.length;d++)e[c][0]===a[d][0]&&e[c][1]===a[d][1]&&(t=t+e[c][0]+"\xb0");this.submitted.usuarioup=this.userinfo[0].email,this.submitted.usuarioup2=this.userinfo[0].nombrealias,this.submitted.idempresa=this.userinfo[0].idempresa._id,this.submitted.geoposicionxxx=this.geoposiciontxt,this.submitted.estadointerno="activo",this.submitted.comentarioanulado="",this.submitted.comentariocerrado="";const o={idcat:this.idcategoria,idform:this.idformulario,estructura:this.submitted,estructuraante:this.navParams.data.record,nocambio:t,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:r,accion:"Actualiza en formulario movil"}};o&&this.authenticationService.createRegmovil(this.navParams.data.record._id,o,"frmmovils").then(c=>{this.loading=!1,this.modalController.dismiss("ok")},c=>{this.loading=!1,this.authenticationService.presentAlert(c.error,this.authenticationService.datraduccion("precaucion"),"")})}}}dacomponente(e,a){return(0,p.mG)(this,void 0,void 0,function*(){let t="";"ubicacion"===e&&(t=this.form.controls.ubicacion.value);const r=yield this.modalController.create({component:$.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:t}});return r.onWillDismiss().then(o=>{"close"===o.data||("direccion"===e?this.form.controls.direccion.setValue(o.data.direccion):this.form.controls.ubicacion.setValue(o.data.direccion+" {"+o.data.la+"\xb0"+o.data.lo+"}"))}),yield r.present()})}takePicture(e){return(0,p.mG)(this,void 0,void 0,function*(){const a=yield J.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:J.dk.DataUrl,source:J.oK.Camera});this.authenticationService.generateFromImage(a.dataUrl,200,200,.5,t=>{"fotoa"===e&&(this.fotoimg=t,this.form.controls.foto.setValue(this.authenticationService.procesafoto(this.form.controls.foto.value)))})})}uploadPWA2(e,a){a&&a.length>0&&this.firstFileToBase64(a[0]).then(r=>{this.authenticationService.generateFromImage(r,200,300,.5,o=>{"fotoa"===e&&(this.fotoimg=o,this.form.controls.foto.setValue(this.authenticationService.procesafoto(this.form.controls.foto.value)))})},r=>{"fotoa"===e&&(this.fotoimg=null,this.form.controls.foto1.setValue(""))})}uploadPWA(e){if("fotoa"===e){if(null==this.fotoa)return;this.uploadPWA2(e,this.fotoa.nativeElement.files)}}firstFileToBase64(e){return new Promise((a,t)=>{const r=new FileReader;r&&null!=e?(r.readAsDataURL(e),r.onload=()=>{a(r.result)},r.onerror=o=>{t(o)}):t(new Error("No file found"))})}takePicture2(e){return(0,p.mG)(this,void 0,void 0,function*(){"fotoa"===e&&this.fotoa.nativeElement.click()})}fotodatos(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(e)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(e)}}]})).present()})}combodatos(e,a,t,r,o,c){return(0,p.mG)(this,void 0,void 0,function*(){const d=yield this.modalController.create({component:F.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{grabax:c,variables:this.variables,userinfo:this.userinfo,record2:null,op:a,frm:t,idllave:this.idllave,titlex:"Buscar "+o}});return d.onWillDismiss().then(s=>{let f=[];f=s,"close"!==f.data&&this.form.controls[r].setValue(f.data?f.data.nombre:"")}),yield d.present()})}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(k.F0),i.Y36(u.IN),i.Y36(W.X),i.Y36(v.sK),i.Y36(D.$),i.Y36(u.X1),i.Y36(u.BX))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-formulariomovils-create"]],viewQuery:function(e,a){if(1&e&&(i.Gf(K,5),i.Gf(ii,7)),2&e){let t;i.iGM(t=i.CRH())&&(a.inputElement=t.first),i.iGM(t=i.CRH())&&(a.fotoa=t.first)}},decls:17,vars:5,consts:[["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],["target","_blank",3,"href",4,"ngIf"],["ion-content-print","",1,"user-details-fields","fields-section"],[4,"ngIf","ngIfElse"],["loading",""],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"hidden","click"],["target","_blank",3,"href"],[3,"controls","form"],["dynamicForm","dynamicForm"],[1,"loading"]],template:function(e,a){if(1&e&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar",0),i.TgZ(2,"ion-buttons",1),i.TgZ(3,"ion-button",2),i.NdJ("click",function(){return a.dismissModal()}),i._UZ(4,"ion-icon",3),i.qZA(),i.qZA(),i._UZ(5,"ion-title",4),i.qZA(),i.qZA(),i.TgZ(6,"ion-content",5),i.YNc(7,ti,2,2,"a",6),i.TgZ(8,"section",7),i.YNc(9,ei,3,2,"div",8),i.YNc(10,oi,3,3,"ng-template",null,9,i.W1O),i.qZA(),i.qZA(),i.TgZ(12,"ion-footer"),i.TgZ(13,"ion-row",10),i.TgZ(14,"ion-col"),i.TgZ(15,"ion-button",11),i.NdJ("click",function(){return a.submitForm()}),i._uU(16),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e){const t=i.MAs(11);i.xp6(7),i.Q6J("ngIf",void 0!==a.geoposiciontxt&&""!==a.geoposiciontxt),i.xp6(2),i.Q6J("ngIf",a.controls)("ngIfElse",t),i.xp6(6),i.Q6J("hidden",!a.muestrabien),i.xp6(1),i.Oqu(a.OPERACIONT)}},directives:[u.Gu,u.sr,u.Sm,u.YG,u.gu,u.wd,u.W2,w.O5,u.fr,u.Nd,u.wI,X.r],pipes:[v.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;font-size:x-large}"]}),n})();var E=h(56604),G=h(65239),ai=h(94327),ri=h(16112),si=h(26806),ni=h(75525);function li(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw().exportarexcel()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",18),i.qZA()}2&n&&i.MGl("title"," ",i.lcZ(1,1,"descargar_excel"),"")}function ci(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw().exportageneral()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",19),i.qZA()}2&n&&i.MGl("title"," ",i.lcZ(1,1,"reporte_generalpdf"),"")}function ui(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw().addRecord()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",20),i.qZA()}2&n&&i.MGl("title"," ",i.lcZ(1,1,"AGREGARM"),"")}function di(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){return i.CHM(e),i.oxw().comandoscmd()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",21),i.qZA()}2&n&&i.MGl("title"," ",i.lcZ(1,1,"ejecutar_comandos"),"")}function mi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-searchbar",22),i.NdJ("ngModelChange",function(t){return i.CHM(e),i.oxw().searchQuery=t})("ionChange",function(){return i.CHM(e),i.oxw().searchList()}),i.ALo(1,"translate"),i.qZA()}if(2&n){const e=i.oxw();i.s9C("title",e.idformulario),i.s9C("placeholder",i.lcZ(1,3,"BUSCARM")),i.Q6J("ngModel",e.searchQuery)}}function hi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",23),i.NdJ("click",function(){return i.CHM(e),i.oxw().showFilter()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",24),i.qZA()}2&n&&i.MGl("title"," ",i.lcZ(1,1,"FILTROM"),"")}function fi(n,m){if(1&n&&(i.TgZ(0,"ion-label"),i._uU(1),i.ALo(2,"translate"),i.ALo(3,"translate"),i.qZA()),2&n){const e=i.oxw();i.xp6(1),i.lnq("",i.lcZ(2,3,"NOREGISTROSM")," ",e.itemsList.length," ",i.lcZ(3,5,"NOREGISTROSM5"),"")}}function pi(n,m){if(1&n&&(i.TgZ(0,"div"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&n){const e=i.oxw(2).$implicit;i.xp6(1),i.AsE(" ",i.lcZ(2,2,"codigo_interno"),": ",e.item.sequencia,"")}}function gi(n,m){if(1&n&&(i.TgZ(0,"ion-badge",37),i.YNc(1,pi,3,4,"div",15),i.qZA()),2&n){const e=i.oxw(3);i.xp6(1),i.Q6J("ngIf","Si"===e.userinfo[0].idempresa.sicodigointerno)}}function vi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).dageoposicion(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",38),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"geoposicion"))}function _i(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).generareporte(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",39),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"generar_reporte"))}function bi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).anularfrm(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",40),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"anular_frm"))}function xi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).finalizarfrm(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",41),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"cerrar_frm"))}function yi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).printpdf(t.item,0)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",19),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"imprimir_pdf"))}function Si(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).printpdf(t.item,1)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",19),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"imprimir_pdf"))}function Ci(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).print(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",19),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"imprimir"))}function Zi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).printexcel(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",18),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"imprimir_excel"))}function Ai(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-button",5),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).deleteRecord(t.item)}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",42),i.qZA()}2&n&&i.s9C("title",i.lcZ(1,1,"ELIMINARM"))}function Ti(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-buttons",43),i.TgZ(1,"ion-button",44),i.NdJ("click",function(){i.CHM(e);const t=i.oxw().$implicit;return i.oxw(2).otrasop(t.item,t.nombre)}),i.ALo(2,"translate"),i._UZ(3,"ion-icon",45),i.qZA(),i.qZA()}2&n&&(i.xp6(1),i.s9C("title",i.lcZ(2,1,"MENUM")))}function Pi(n,m){if(1&n){const e=i.EpF();i.TgZ(0,"ion-item-sliding"),i.TgZ(1,"ion-item",27),i.NdJ("click",function(){const r=i.CHM(e).$implicit;return i.oxw(2).updateRecord(r.item)}),i._UZ(2,"ion-icon",28),i.TgZ(3,"ion-label",29),i.YNc(4,gi,2,1,"ion-badge",30),i.TgZ(5,"span"),i._UZ(6,"div",31),i.ALo(7,"sanitizeHtml"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(8,"ion-item",32),i.TgZ(9,"ion-toolbar",33),i.TgZ(10,"ion-badge",34),i._uU(11),i.qZA(),i.TgZ(12,"ion-buttons",35),i.YNc(13,vi,3,3,"ion-button",7),i.qZA(),i.TgZ(14,"ion-buttons",35),i.YNc(15,_i,3,3,"ion-button",7),i.qZA(),i.TgZ(16,"ion-buttons",35),i.YNc(17,bi,3,3,"ion-button",7),i.qZA(),i.TgZ(18,"ion-buttons",35),i.YNc(19,xi,3,3,"ion-button",7),i.qZA(),i.TgZ(20,"ion-buttons",35),i.YNc(21,yi,3,3,"ion-button",7),i.qZA(),i.TgZ(22,"ion-buttons",35),i.YNc(23,Si,3,3,"ion-button",7),i.qZA(),i.TgZ(24,"ion-buttons",35),i.YNc(25,Ci,3,3,"ion-button",7),i.qZA(),i.TgZ(26,"ion-buttons",35),i.YNc(27,Zi,3,3,"ion-button",7),i.qZA(),i.TgZ(28,"ion-buttons",35),i.YNc(29,Ai,3,3,"ion-button",7),i.qZA(),i.YNc(30,Ti,4,3,"ion-buttons",36),i.qZA(),i.qZA(),i.qZA()}if(2&n){const e=m.$implicit,a=m.index,t=i.oxw(2);i.xp6(4),i.Q6J("ngIf","Si"===t.userinfo[0].idempresa.sicodigointerno),i.xp6(2),i.Q6J("innerHtml",i.lcZ(7,13,e.nombre),i.oJD),i.xp6(5),i.Oqu(t.itemsList.length-a),i.xp6(2),i.Q6J("ngIf",""!==e.item.geoposicionxxx&&void 0!==e.item.geoposicionxxx),i.xp6(2),i.Q6J("ngIf",""!==t.variables.generareporte&&void 0!==t.variables.generareporte),i.xp6(2),i.Q6J("ngIf","true"===t.variables.anularorden&&"Cerrado"!==e.item.estadointerno&&"Anulado"!==e.item.estadointerno),i.xp6(2),i.Q6J("ngIf","true"===t.variables.finalizaorden&&"Cerrado"!==e.item.estadointerno&&"Anulado"!==e.item.estadointerno),i.xp6(2),i.Q6J("ngIf","true"===t.variables.imprimeorden&&"false"===t.variables.reporteencabezado),i.xp6(2),i.Q6J("ngIf","true"===t.variables.imprimeorden&&"true"===t.variables.reporteencabezado),i.xp6(2),i.Q6J("ngIf","false"===t.variables.imprimeorden),i.xp6(2),i.Q6J("ngIf","true"===t.variables.imprimeorden2),i.xp6(2),i.Q6J("ngIf","true"===t.variables.peliminacion&&"Cerrado"!==e.item.estadointerno&&"Anulado"!==e.item.estadointerno),i.xp6(1),i.Q6J("ngIf",1===t.tienedetalle)}}function ki(n,m){if(1&n&&(i.TgZ(0,"cdk-virtual-scroll-viewport",25),i.YNc(1,Pi,31,15,"ion-item-sliding",26),i.qZA()),2&n){const e=i.oxw();i.Q6J("items",e.itemsList),i.xp6(1),i.Q6J("cdkVirtualForOf",e.items)("cdkVirtualForTrackBy",e.trackItems)}}function wi(n,m){1&n&&(i.TgZ(0,"ion-item",47),i.TgZ(1,"ion-label",29),i._UZ(2,"skeleton-element"),i._UZ(3,"skeleton-element"),i._UZ(4,"skeleton-element",48),i.qZA(),i.qZA())}const Li=function(){return[0,1,2,3,4,5,6]};function ji(n,m){1&n&&(i.TgZ(0,"ion-list"),i.YNc(1,wi,5,0,"ion-item",46),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,Li)))}function qi(n,m){1&n&&(i.TgZ(0,"h3",49),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&n&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"NODATOS")," "))}let Ni=(()=>{class n{constructor(e,a,t,r,o,c,d,s,f){this.platform=e,this.loadingCtrl=a,this.Pdfx=t,this.routerOutlet=r,this.router=o,this.authenticationService=c,this.alertController=d,this.translateService=s,this.modalController=f,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.items2=[],this.variables=[],this.comandos=[],this.userinfo=[],this.tienedetalle=0,this.viewType="list",this.tituloxx="",this.cmpver=[],this.camposbusqueda=[],this.fileName="ExcelSheet.xlsx",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Todos",this.searchSubject=new V.t(1),this.keysaa=[],this.keys=[],this.keysprint=[],this.numTimesLeft=5,this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.comandos=void 0===this.router.getCurrentNavigation().extras.state.variables.comandos?[]:this.router.getCurrentNavigation().extras.state.variables.comandos,this.idllave=this.router.getCurrentNavigation().extras.state.idllave,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.idcategoria=this.router.getCurrentNavigation().extras.state.idcategoria,this.verregistros=this.router.getCurrentNavigation().extras.state.verregistros,this.nidformulario=this.router.getCurrentNavigation().extras.state.nidformulario,this.idformulario=this.router.getCurrentNavigation().extras.state.idformulario,this.geoposicion=this.router.getCurrentNavigation().extras.state.geoposicion,this.cmpver=this.router.getCurrentNavigation().extras.state.datat,this.ordenfrm=this.router.getCurrentNavigation().extras.state.ordenfrm,this.tipo2=this.router.getCurrentNavigation().extras.state.tipo2,this.tipo=this.router.getCurrentNavigation().extras.state.tipo,this.ejecuta=this.router.getCurrentNavigation().extras.state.ejecuta,this.ejecutainicio=this.router.getCurrentNavigation().extras.state.ejecutainicio,this.ejecutaactualiza=this.router.getCurrentNavigation().extras.state.ejecutaactualiza,this.ejecutaelimina=this.router.getCurrentNavigation().extras.state.ejecutaelimina,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(e=>{this.seguro=e}),this.translateService.get("MSGM").subscribe(e=>{this.msg=e}),this.rangeForm=new g.cw({dual:new g.NI({lower:1,upper:100})}),this.currentSegment="todos",this.authenticationService.convertToDataURLviaCanvas(this.authenticationService.getapifoto()+this.userinfo[0].idempresa.foto0,"image/png").then(e=>this.logotipoempresa=e),this.authenticationService.getReg(this.idformulario+"/formulariocamposver2/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(e=>{let a;a=e;for(let r=0;r<a.length;r++){var t=a[r].nombre;"es"!==this.authenticationService.getlenguaje()&&(t=a[r].nombre2),this.camposbusqueda.push({name:"myInput",type:"radio",label:t,value:a[r]._id+"\xb0"+a[r].tipo})}},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")}),this.authenticationService.getReg(this.idllave+"/camposdetalle/"+this.userinfo[0].idempresa._id+"/1","frmmovilds",0).then(e=>{let a=[];if(a=e,this.items2=[],a.length>0){this.tienedetalle=1;for(let r=0;r<a.length;r++){let o="";var t=e[r].title;"es"!==this.authenticationService.getlenguaje()&&(t=e[r].title2),"Check List Detalle"===e[r].type&&(o="Check list "),this.items2.push(0===r?{name:e[r].name,type:"radio",label:o+t,checked:!0,value:e[r]._id+"\xb0"+e[r].idformdetalle.id+"\xb0/ProductoListPage\xb0"+t+" ->"+this.nidformulario+"\xb0"+e[r].type+"\xb0"+e[r].maxnumregistros+"\xb0"+e[r].idmovil+"\xb0"+this.nidformulario}:{name:e[r].name,type:"radio",label:o+t,checked:!1,value:e[r]._id+"\xb0"+e[r].idformdetalle.id+"\xb0/ProductoListPage\xb0"+t+" ->"+this.nidformulario+"\xb0"+e[r].type+"\xb0"+e[r].maxnumregistros+"\xb0"+e[r].idmovil+"\xb0"+this.nidformulario})}}},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")}),this.pideregistros(this.currentSegment),this.geoposiciontxt="",this.geoposiciontxt="false"===this.geoposicion||void 0===this.geoposicion?"":this.setCurrentLocationa33()}dageoposicion(e){var a="https://www.google.com/maps/search/?api=1&query="+e.geoposicionxxx.replace("\xac",",");this.authenticationService.addNewEvent2nube("",a)}setCurrentLocationa33(){return(0,p.mG)(this,void 0,void 0,function*(){var e;e=yield this.authenticationService.getGPS(),this.geoposiciontxt=e.length>0?e[0].la+"\xac"+e[0].ln:""})}filterContacts(e){const a=e.detail.value;this.currentSegment=a,this.pideregistros(a)}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(e){this.itemsList=[],this.efecto=0;let a="";a="Ver solo los mios"===this.verregistros?this.idllave+"/formulario/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+this.authenticationService.getlenguaje()+"\xb0"+this.authenticationService.replaceAll(this.apifoto,"/","-")+"\xb0"+this.ordenfrm:this.idllave+"/formulario/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+this.authenticationService.getlenguaje()+"\xb0"+this.authenticationService.replaceAll(this.apifoto,"/","-")+"\xb0"+this.ordenfrm,this.authenticationService.getReg(a,"frmmovils",0).then(t=>{this.efecto=1,this.items=t,this.itemsList=this.items},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")})}trackItems(e,a){return a.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:""),this.items=this.itemsList}filterList(e,a){return e.filter(t=>t.nombre.toLowerCase().includes(a.toLowerCase()))}otrasop(e,a){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("sel_opcion"),inputs:this.items2,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:r=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:r=>{const o=r.split("\xb0");"Check List Detalle"===o[4]?this.combodatoscheck0(this.idformulario,e,o[0],o[3]):this.authenticationService.getReg(o[1],"frmmovils",0).then(c=>{this.authenticationService.getReg(o[1]+"/formulariocamposver/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(d=>{this.authenticationService.getReg("todos/permisos/"+this.userinfo[0].idempresa._id+"/"+o[1]+"/"+this.userinfo[0]._id,"formulariousrds",0).then(s=>{var f;s.length>0?(this.verregistros=s[0].verregistros,f={acciones:s[0].acciones,master:a,activas:s[0].activas,anularorden:s[0].anularorden,cerradas:s[0].cerradas,comentariosorden:s[0].comentariosorden,documentacionorden:s[0].documentacionorden,documentosorden:s[0].documentosorden,ejecutadas:s[0].ejecutadas,eliminaorden:s[0].eliminaorden,filtrarorden:s[0].filtrarorden,estadomaster:e.estadointerno,finalizaorden:s[0].finalizaorden,fotosorden:s[0].fotosorden,generareporte:s[0].generareporte,imprimeorden:s[0].imprimeorden,reporteencabezado:s[0].reporteencabezado,pactualizacion:s[0].actualizacion,pausarorden:s[0].pausarorden,pconsulta:s[0].consulta,pcreacion:s[0].creacion,peliminacion:s[0].eliminacion,pfiltro:s[0].filtro,pingreso:s[0].ingreso,potros1:"",publico:s[0].publico,tareasorden:s[0].tareasorden,trayectoriaorden:s[0].trayectoriaorden}):f={acciones:this.variables.acciones,master:a,activas:this.variables.activas,anularorden:this.variables.anularorden,cerradas:this.variables.cerradas,comentariosorden:this.variables.comentariosorden,documentacionorden:this.variables.documentacionorden,documentosorden:this.variables.documentosorden,ejecutadas:this.variables.ejecutadas,eliminaorden:this.variables.eliminaorden,filtrarorden:this.variables.filtrarorden,estadomaster:"activo",finalizaorden:this.variables.finalizaorden,fotosorden:this.variables.fotosorden,generareporte:this.variables.generareporte,imprimeorden:this.variables.imprimeorden,imprimeorden2:this.variables.imprimeorden2,reporteencabezado:this.variables.reporteencabezado,pactualizacion:this.variables.pactualizacion,pausarorden:this.variables.pausarorden,pconsulta:this.variables.pconsulta,pcreacion:this.variables.pcreacion,peliminacion:this.variables.peliminacion,pfiltro:this.variables.pfiltro,pingreso:this.variables.pingreso,potros1:this.variables.potros,publico:this.variables.publico,tareasorden:this.variables.tareasorden,trayectoriaorden:this.variables.trayectoriaorden};const L=[];L.push({tabla:this.nidformulario,idtabla:this.idformulario,item:e}),this.router.navigate(["formulariomovilsd2ListPage"],{state:{variables:f,user:null,master:a,estadomaster:e.estadointerno,idllave0:e._id,idllave:c[0]._id,datat:d,verregistros:this.verregistros,idcategoria:c[0].categoria,idcampo:o[0],idformulario:c[0]._id,nidformulario:c[0].nombre,regitrosacumulados:L,tipo2:c[0].tipo2,ejecuta:c[0].ejecuta,ejecutaactualiza:c[0].ejecutaactualiza,ejecutaelimina:c[0].ejecutaelimina,ejecutainicio:c[0].ejecutainicio,tipo:c[0].tipo,title:o[3],formularionombre:o[7],rranterior:"",rrsiguiente:"3",noreg:o[5],geoposicion:c[0].geoposicion}})},s=>{this.authenticationService.presentAlert(s.error,this.msg,"")})},d=>{this.authenticationService.presentAlert(d.error,this.msg,"")})},c=>{this.authenticationService.presentAlert(c.error,this.msg,"")})}}]})).present()})}generareporte(e){}str2DOMElement(e){var a=document.createElement("iframe");a.style.display="none",document.body.appendChild(a),a.contentDocument.open(),a.contentDocument.write(e),a.contentDocument.close();var t=a.contentDocument.body.firstChild;return document.body.removeChild(a),t}printexcel(e){return(0,p.mG)(this,void 0,void 0,function*(){this.authenticationService.getReg(this.nidformulario+"\xb0"+this.idformulario+"/"+e._id+"/"+this.userinfo[0].idempresa._id+"/frmmovilpreporteexcel/1","frmmovils",0).then(a=>{console.log(a),this.authenticationService.bajarexcel(a.estado,"requisicion"+e.nodocumento+".xlsx")})})}exportageneral(){return(0,p.mG)(this,void 0,void 0,function*(){let e="";e="Ver solo los mios"===this.verregistros?this.idllave+"/formulariogeneralpdf/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+this.variables.camposreporte.nombre:this.idllave+"/formulariogeneralpdf/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+this.variables.camposreporte.nombre,this.authenticationService.getReg(e,"frmmovils",0).then(a=>{this.efecto=1,this.Pdfx.printfrmsolologos(this.nidformulario,null,this.tipo2,a,this.logotipoempresa,this.userinfo[0].idempresa.nombre,this.userinfo[0].nombrealias,this.authenticationService.dafechastringtodatefinal(new Date,"dd-MM-yyyy, hh:mm aaa"),this.userinfo[0].idempresa.subtitulo,"REPORTE INVENTARIO DE ARTICULOS",this.userinfo[0].idempresa.simarca,"portrait")},a=>{this.authenticationService.presentAlert(a.error,this.msg,"")})})}anularfrm1(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("ingrese_comentario"),inputs:[{name:"comentario",id:"comentario",type:"textarea",placeholder:this.authenticationService.datraduccion("ingrese_motivo")}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:()=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:t=>{const r={operacion:"actualizafrmdirecto",idform:e._id,formulario:this.idllave,update:{estadointerno:"Anulado",comentarioanulado:t.comentario},bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"actualiza formulario estado anulado "+this.idllave+"  "+e._id}};r&&this.authenticationService.createRegmovil("",r,"frmmovils").then(o=>{const c={operacion:"anulaorden",idform:e._id,idformulario:this.idformulario,formulario:this.idllave,idempresa:this.userinfo[0].idempresa._id,papaitem:e,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"actualiza formulario estado finaliza "+this.idllave+"  "+e._id}};c&&this.authenticationService.createRegmovil("",c,"frmmovils").then(d=>{this.pideregistros(this.currentSegment)},d=>{this.authenticationService.presentAlert(d.error,this.authenticationService.datraduccion("precaucion"),"")}),this.pideregistros(this.currentSegment)},o=>{this.authenticationService.presentAlert(o.error,this.authenticationService.datraduccion("precaucion"),"")})}}]})).present().then(()=>{document.querySelector("ion-alert textarea").focus()})})}anularfrm(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:this.authenticationService.datraduccion("cancelar"),cssClass:"secondary",handler:t=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:()=>{this.anularfrm1(e)}}]})).present()})}finalizarfrm1(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("ingrese_comentario"),inputs:[{name:"comentario",id:"comentario",type:"textarea",placeholder:this.authenticationService.datraduccion("ingrese_motivo")}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:()=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:t=>{const r={operacion:"actualizafrmdirecto",idform:e._id,formulario:this.idllave,update:{estadointerno:"Cerrado",comentariocerrado:t.comentario},bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"actualiza formulario estado finaliza "+this.idllave+"  "+e._id}};r&&this.authenticationService.createRegmovil("",r,"frmmovils").then(o=>{this.pideregistros(this.currentSegment)},o=>{this.authenticationService.presentAlert(o.error,this.authenticationService.datraduccion("precaucion"),"")})}}]})).present().then(()=>{document.querySelector("ion-alert textarea").focus()})})}finalizarfrm(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:t=>{}},{text:"Si",handler:()=>{this.finalizarfrm1(e)}}]})).present()})}printa(e){return(0,p.mG)(this,void 0,void 0,function*(){let a="";a=e._id+"/formulariogeneralpdfsolo/"+this.userinfo[0].idempresa._id+"\xb0"+this.idformulario+"\xb0"+this.idformulario+"\xb0"+this.authenticationService.getlenguaje(),this.authenticationService.getReg(a,"frmmovils",0).then(t=>{this.efecto=1,this.Pdfx.printfrmsolologos(this.nidformulario,null,this.tipo2,t,this.logotipoempresa,this.userinfo[0].idempresa.nombre,this.userinfo[0].nombrealias,this.authenticationService.dafechastringtodatefinal(new Date,"dd-MM-yyyy, hh:mm aaa"),this.userinfo[0].idempresa.subtitulo,this.nidformulario,this.userinfo[0].idempresa.simarca,"portrait")},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")})})}print(e){return(0,p.mG)(this,void 0,void 0,function*(){this.authenticationService.printproceso(e,this.userinfo,this.nidformulario,this.nidformulario,this.cmpver,this.idformulario,this.logotipoempresa,this.tipo2)})}printpdf(e,a){return(0,p.mG)(this,void 0,void 0,function*(){1===a?this.authenticationService.getReg(this.nidformulario+"\xb0"+this.idformulario+"/"+e._id+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.authenticationService.getlenguaje()+"/frmmovilpreportepdf/1","frmmovils",0).then(t=>{var r;console.log(t),r=t,console.log(r.estado),this.Pdfx.printfrmsolologos(this.nidformulario,null,this.tipo2,r.estado,this.logotipoempresa,this.userinfo[0].idempresa.nombre,this.userinfo[0].nombrealias,this.authenticationService.dafechastringtodatefinal(new Date,"dd-MM-yyyy, hh:mm aaa"),this.userinfo[0].idempresa.subtitulo,this.nidformulario,this.userinfo[0].idempresa.simarca,"portrait")}):this.authenticationService.getReg(this.nidformulario+"\xb0"+this.idformulario+"/"+e._id+"/"+this.userinfo[0].idempresa._id+"/frmmovilpreportepdf/1","frmmovils",0).then(t=>{var r;console.log(t),r=t,console.log(r.estado),this.Pdfx.printfrmsolo(this.nidformulario,e,this.tipo2,r.estado)})})}buscarqr(){return(0,p.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:ri.D,animated:!0,componentProps:{moneda:"",title:"Buscar por QR",monto:0,tipo:"formabusca"},presentingElement:yield this.modalController.getTop(),cssClass:"modal-fullscreen"});return e.onWillDismiss().then(a=>{if("close"!==a.data.data){var t=a.data.data.split("\xb0");this.authenticationService.getReg(t[2]+"/"+t[0]+"/"+this.userinfo[0].idempresa._id+"\xb0"+t[2]+"/unregistromoviltodo","frmmovils",0).then(r=>{this.efecto=1,this.items=r,this.itemsList=this.items})}}),yield e.present()})}deleteRecord(e){return(0,p.mG)(this,void 0,void 0,function*(){var a={estructura:e,papaitem:e,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina};"Formulario"===this.tipo2&&(yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:r=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteRegbody(e._id+"/"+this.idformulario+"/formulario/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"\xb0Formulario\xb0"+this.ejecutainicio+"\xb0"+this.ejecuta+"\xb0"+this.ejecutaactualiza+"\xb0"+this.ejecutaelimina+"/na","frmmovils",a).then(o=>{this.pideregistros(this.currentSegment)},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")})}}]})).present())})}updateRecord(e){return(0,p.mG)(this,void 0,void 0,function*(){if("true"===this.variables.pactualizacion&&"Cerrado"!==e.estadointerno&&"Anulado"!==e.estadointerno&&"Formulario"===this.tipo2){const a=[];a.push({tabla:this.nidformulario,idtabla:this.idformulario,item:e});const t=yield this.modalController.create({component:Q,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:e,title:this.nidformulario,record2:{tipo:this.tipo,tipo2:this.tipo2,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,geoposicion:this.geoposicion,regitrosacumulados:a,idcategoria:this.idcategoria,idformulario:this.idformulario,nidformulario:this.nidformulario},userinfo:this.userinfo},cssClass:"modal-fullscreen"});return t.onWillDismiss().then(r=>{"close"!==r.data&&this.pideregistros(this.currentSegment)}),yield t.present()}})}comandoscmd(){return(0,p.mG)(this,void 0,void 0,function*(){for(var e=[],a=0;a<this.comandos.length;a++){var t=this.comandos[a].nombre;"es"!==this.authenticationService.getlenguaje()&&(t=this.comandos[a].nombre2),e.push(0===a?{name:this.comandos[a].nombre,type:"radio",label:t,checked:!0,value:this.comandos[a].email+"\xb0"+this.comandos[a].nombre}:{name:this.comandos[a].nombre,type:"radio",label:t,checked:!1,value:this.comandos[a].email+"\xb0"+this.comandos[a].nombre})}yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("sel_opcion"),inputs:e,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:o=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:o=>{this.enviacomando(this.idformulario,o)}}]})).present()})}enviacomando(e,a){return(0,p.mG)(this,void 0,void 0,function*(){var t=e+"\xb0"+a,r=a.split("\xb0");if(void 0===t||""===t)this.authenticationService.presentAlert(this.authenticationService.datraduccion("frm_noejecucion"),this.authenticationService.datraduccion("precaucion"),"");else{var o=[];o.push({tabla:this.nidformulario,idtabla:this.idformulario,item:[]});const c={operacion:"ejecutaoperacion",idempresa:this.userinfo[0].idempresa._id,idcat:this.idcategoria,idform:this.idformulario,estructura:"nada",geoposiciontxt:this.geoposiciontxt,acumulados:o,idpapa:this.idllave,tipo:this.tipo,tipo2:this.tipo2,ejecuta:t,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crear",accion:""}};c&&this.authenticationService.createRegmovil("",c,"frmmovils").then(d=>{var s;"csv"===(s=d).tipo?this.authenticationService.bajarexcel(s.data,r[1]+".csv"):this.authenticationService.presentAlert(this.authenticationService.datraduccion("ope_exito"),"","Exito")},d=>{this.authenticationService.presentAlert(d.error,this.authenticationService.datraduccion("precaucion"),"")})}})}s2ab(e){let a=new ArrayBuffer(e.length),t=new Uint8Array(a);for(let r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return a}exportarexcel(){return(0,p.mG)(this,void 0,void 0,function*(){let e="";e="Ver solo los mios"===this.verregistros?this.idllave+"/formularioexcel/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+this.authenticationService.getlenguaje():this.idllave+"/formularioexcel/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+this.authenticationService.getlenguaje(),this.authenticationService.getReg(e,"frmmovils",0).then(a=>{this.efecto=1;const t=G.utils.book_new();t.SheetNames.push(this.nidformulario);const c=G.utils.aoa_to_sheet(a);t.Sheets[this.nidformulario]=c;const d=G.write(t,{bookType:"xlsx",type:this.platform.is("android")?"base64":"binary"});ai.saveAs(new Blob([this.s2ab(d)],{type:"application/octet-stream"}),this.nidformulario+".xlsx")},a=>{this.authenticationService.presentAlert(a.error,this.msg,"")})})}addRecord(){return(0,p.mG)(this,void 0,void 0,function*(){if("true"===this.geoposicion&&""===this.geoposiciontxt)return void this.authenticationService.presentAlert(this.authenticationService.datraduccion("frm_geosi"),this.msg,"");const e=[];e.push({tabla:this.nidformulario,idtabla:this.idformulario,item:null});const a=yield this.modalController.create({component:Q,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,title:this.nidformulario,record2:{tipo:this.tipo,tipo2:this.tipo2,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,geoposiciontxt:this.geoposiciontxt,regitrosacumulados:e,idcategoria:this.idcategoria,idformulario:this.idformulario,nidformulario:this.nidformulario},userinfo:this.userinfo},cssClass:"modal-fullscreen"});return a.onWillDismiss().then(t=>{"close"!==t.data&&this.pideregistros(this.currentSegment)}),yield a.present()})}loadData(e){setTimeout(()=>{this.numTimesLeft-=1,e.target.complete()},500)}showFilter(){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("buscar_campos"),inputs:this.camposbusqueda,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:a=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:a=>{this.showFilter2(a)}}]})).present()})}showFilter2(e){return(0,p.mG)(this,void 0,void 0,function*(){const a=e.split("\xb0");yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("info_buscar"),inputs:[{name:"campo2",label:"Buscar",placeholder:"",type:a[1]}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:r=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:r=>{this.itemsList=[],this.efecto=0;let o="";o="Ver solo los mios"===this.verregistros?this.idformulario+"/"+a[0]+"/"+r.campo2.replace("/","\xac")+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email:this.idformulario+"/"+a[0]+"/"+r.campo2.replace("/","\xac")+"/"+this.userinfo[0].idempresa._id+"\xb0todos",this.authenticationService.getReg(o,"frmmovils",0).then(c=>{this.efecto=1,this.items=c,this.itemsList=this.items},c=>{this.authenticationService.presentAlert(c.error,this.msg,"")})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}davaloritem(e,a){let t="";return t=e[a]?e[a]:"",t}combodatoscheck0(e,a,t,r){return(0,p.mG)(this,void 0,void 0,function*(){let o="";this.authenticationService.getReg(e+"\xb0"+t+"/formulariodidxx/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(c=>{let d;const s=c;for(let l=0;l<s.length;l++){let S="";S="true"===s[l].required?" (*)":" (Opcional)";let C="";C=this.davaloritem(a,s[l].name),C||(C=""),"label"===s[l].type&&(C=".");var f=s[l].title+S;if("es"!==this.authenticationService.getlenguaje()&&s[l].title2&&(f=s[l].title2+S),"select3"===s[l].type){const R=[];R.push({tabla:this.nidformulario,idtabla:this.idformulario,item:a}),o=s[l].name,d={idformulario:e,idcampo:s[l]._id,actualiza:"si",verregistros:s[l].verregistros,order:s[l].order,name:s[l].name,type:s[l].type,required:s[l].required,placeholder:s[l].placeholder,display:s[l].display,selected:s[l].selected,disabled:s[l].disabled,hidden:s[l].hidden,title:f,position:s[l].position,labelsizefondt:s[l].labelsizefondt,default:"",default2:s[l].default2,default3:s[l].default3,copiarencampo:s[l].copiarencampo,valor:C,categoria:s[l].categoria,combofijo:s[l].combofijo,idcadmovil:"",options:s[l].options,fondoetiqueta:s[l].fondoetiqueta,coloretiqueta:s[l].coloretiqueta,blike:s[l].blike,rangomin:s[l].rangomin,rangomax:s[l].rangomax,rangostep:s[l].rangostep,alfatypo2:s[l].alfatypo2,alfatypo:s[l].alfatypo,idfrmconsulta:s[l].idfrmconsulta,idfrmconsulta2:s[l].idfrmconsulta2,idfrmconsulta2origen:s[l].idfrmconsulta2origen,idfrmconsultaorigen:s[l].idfrmconsultaorigen,usarunaves:s[l].usarunaves,idcampofiltro:s[l].idcampofiltro,idcampofiltro2:s[l].idcampofiltro2,idcampofiltromanual:s[l].idcampofiltromanual,regitrosacumulados:R,idfrmconsultaorigenpapa:s[l].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:s[l].idfrmconsultaorigenpapa2,frmapirest:s[l].frmapirest,idcampofiltropapa:s[l].idcampofiltropapa}}}this.combodatoscheck(d,a,r,t,o)},c=>{this.authenticationService.presentAlert(c.error,this.authenticationService.datraduccion("precaucion"),"")})})}replaceAll(e,a,t){return e.replace(new RegExp(a,"g"),t)}combodatoscheck(e,a,t,r,o){return(0,p.mG)(this,void 0,void 0,function*(){const c=a;if("no"===e.actualiza)for(let _=0;_<e.regitrosacumulados.length;_++)e.regitrosacumulados[_].idtabla===e.idformulario&&(e.regitrosacumulados[_].item=c);let d="sigraba";"true"===e.combofijo&&(d="nograba");let s="";e.idfrmconsulta&&""!==e.idfrmconsulta.id&&void 0!==e.idfrmconsulta.id&&(s="si",d="formulariott");let f="",l="";if(void 0!==e.idcampofiltro&&""!==e.idcampofiltro){for(let _=0;_<e.regitrosacumulados.length;_++)if(e.regitrosacumulados[_].idtabla===e.idfrmconsultaorigen.id){for(let Z=0;Z<e.idfrmconsulta2origen.length;Z++){var L=e.regitrosacumulados[_].item[e.idfrmconsulta2origen[Z].nombre.split("\xb0")[0]],S=L.split("\xb0"),C=L;if(L.indexOf("\xb0")>=0){C="<br>";for(let b=0;b<S.length;b++)S[b].indexOf("\xac")<0&&(C=C+"<strong>"+S[b].split(":")[0]+"</strong> : "+S[b].split(":")[1]+"<br>")}l=l+"<strong>"+e.idfrmconsulta2origen[Z].nombre.split("\xb0")[1]+"</strong>: "+C.split("\xac")[0]+"<br>"}l=l+"\xac"+e.regitrosacumulados[_].item._id}f="Ver solo los mios"===e.verregistros?""!==e.idcampofiltropapa&&void 0!==e.idcampofiltropapa?'"'+e.idcampofiltropapa+'":"'+l+'","usuarionew":"'+this.userinfo[0].email+'"':'"'+e.idcampofiltro+'":"'+l+'","usuarionew":"'+this.userinfo[0].email+'"':""!==e.idcampofiltropapa&&void 0!==e.idcampofiltropapa?'"'+e.idcampofiltropapa+'":"'+l+'"':l.indexOf("\xac")>=0?'"'+e.idcampofiltro+'":{"$regex" : "'+l.split("\xac")[1]+'", "$options" : "i"}':'"'+e.idcampofiltro+'":"'+l+'"'}else"Ver solo los mios"===e.verregistros&&(f='"usuarionew":"'+this.userinfo[0].email+'"');if(""===e.idcampofiltropapa||void 0===e.idcampofiltropapa){const _=yield this.modalController.create({component:F.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{idcampofiltromanual:e.idcampofiltromanual,tipo:e.type,filtrar:f,idfrmconsulta:e.idfrmconsulta,idfrmconsulta2:e.idfrmconsulta2,siformulatiot:s,variables:"",userinfo:"",grabax:d,vector:e.options,record2:null,op:e.idcampo,frm:"frmcats",idllave:"",titlex:"Buscar "+t}});return _.onWillDismiss().then(Z=>{let b=[];b=Z,"close"!==b.data&&b.data&&this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(O=>{const j={},q=O;for(let x=0;x<q.length;x++){const P=q[x].name;let y="";y=this.davaloritem(a,q[x].name),y||(y=""),""!==q[x].type&&(j[P]=P===o?b.data.correos:y)}j.usuarioup=this.userinfo[0].email,j.idempresa=this.userinfo[0].idempresa._id;const N={idcat:this.idcategoria,idform:this.idformulario,estructura:j,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza en formulario movil"}};N&&this.authenticationService.createRegmovil(a._id,N,"frmmovils").then(x=>{this.pideregistros(this.currentSegment)},x=>{this.authenticationService.presentAlert(x.error,this.authenticationService.datraduccion("precaucion"),"")})})}),yield _.present()}f=this.replaceAll(f,"/","\xeb"),this.authenticationService.getReg(e.idfrmconsultaorigenpapa.id+"/"+f+"/"+this.userinfo[0].idempresa._id+"/formulariosolopapa/","frmmovils",0).then(Z=>(0,p.mG)(this,void 0,void 0,function*(){let b=[];"select3"===e.type&&(b=e.valor.split("\xac")[0].split(";"));var O="";Z[0]._id&&(O=Z[0]._id);const j=yield this.modalController.create({component:F.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{idcampofiltromanual:e.idcampofiltromanual,tarraymultiple:b,tipo:e.type,idpapafiltro:O,filtrar:f,idfrmconsulta:e.idfrmconsulta,idfrmconsulta2:e.idfrmconsulta2,siformulatiot:s,variables:"",userinfo:"",grabax:d,vector:e.options,record2:null,op:e.idcampo,frm:"frmcats",idllave:"",titlex:"Buscar "+e.title}});return j.onWillDismiss().then(q=>{let N=[];N=q,"close"!==N.data&&N.data&&this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(x=>{const P={},y=x;for(let A=0;A<y.length;A++){const U=y[A].name;let I="";I=this.davaloritem(a,y[A].name),I||(I=""),""!==y[A].type&&(P[U]=U===o?N.data.correos+"\xac"+N.data.correos2:I)}P.usuarioup=this.userinfo[0].email,P.idempresa=this.userinfo[0].idempresa._id;const H={idcat:this.idcategoria,idform:this.idformulario,estructura:P,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza en formulario movil"}};H&&this.authenticationService.createRegmovil(a._id,H,"frmmovils").then(A=>{this.pideregistros(this.currentSegment)},A=>{this.authenticationService.presentAlert(A.error,this.authenticationService.datraduccion("precaucion"),"")})})}),yield j.present()}),Z=>{this.authenticationService.presentAlert(Z.error,this.authenticationService.datraduccion("precaucion"),"")})})}}return n.\u0275fac=function(e){return new(e||n)(i.Y36(u.t4),i.Y36(u.HT),i.Y36(B.$),i.Y36(u.jP),i.Y36(k.F0),i.Y36(D.$),i.Y36(u.Br),i.Y36(v.sK),i.Y36(u.IN))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-formulariomovilsd-list"]],viewQuery:function(e,a){if(1&e&&i.Gf(E.N7,5),2&e){let t;i.iGM(t=i.CRH())&&(a.viewPort=t.first)}},decls:29,vars:17,consts:[["color","primary"],["slot","start"],["defaultHref","categoriaformularioListPage"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","qr-code-outline"],[3,"title","click",4,"ngIf"],["slot","icon-only","name","refresh-circle-outline"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"title","ngModel","placeholder","ngModelChange","ionChange",4,"ngIf"],[1,"call-to-action-col"],["fill","clear","color","secondary","class","filters-btn",3,"title","click",4,"ngIf"],["sticky",""],[4,"ngIf"],["itemSize","56","minBufferPx","900","maxBufferPx","1350",3,"items",4,"ngIf"],["class","empty-list-message",4,"ngIf"],["slot","icon-only","name","download-outline"],["slot","icon-only","name","print-outline"],["slot","icon-only","name","add"],["slot","icon-only","name","caret-forward-circle-outline"],["animated","",3,"title","ngModel","placeholder","ngModelChange","ionChange"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],["itemSize","56","minBufferPx","900","maxBufferPx","1350",3,"items"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["lines","none","detail","",1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated",3,"click"],["name","star","slot","start"],[1,"ion-text-wrap"],["color","light","slot","start",4,"ngIf"],[1,"first-letter",3,"innerHtml"],["lines","full"],["color","transparent"],["color","primary","slot","start"],["slot","secondary"],["slot","primary",4,"ngIf"],["color","light","slot","start"],["slot","icon-only","name","map-outline"],["slot","icon-only","name","document-outline"],["slot","icon-only","name","thumbs-down-outline"],["slot","icon-only","name","radio-button-on-outline"],["slot","icon-only","name","trash-outline"],["slot","primary"],["color","secondary",3,"title","click"],["slot","icon-only","ios","ellipsis-horizontal","md","ellipsis-vertical"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["width","67%"],[1,"empty-list-message"]],template:function(e,a){1&e&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar",0),i.TgZ(2,"ion-buttons",1),i._UZ(3,"ion-back-button",2),i.qZA(),i.TgZ(4,"ion-title",3),i._uU(5),i.qZA(),i.TgZ(6,"ion-buttons",4),i.TgZ(7,"ion-button",5),i.NdJ("click",function(){return a.buscarqr()}),i.ALo(8,"translate"),i._UZ(9,"ion-icon",6),i.qZA(),i.YNc(10,li,3,3,"ion-button",7),i.YNc(11,ci,3,3,"ion-button",7),i.YNc(12,ui,3,3,"ion-button",7),i.YNc(13,di,3,3,"ion-button",7),i.TgZ(14,"ion-button",5),i.NdJ("click",function(){return a.pideregistros0()}),i.ALo(15,"translate"),i._UZ(16,"ion-icon",8),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"ion-toolbar",9),i.TgZ(18,"ion-row",10),i.TgZ(19,"ion-col"),i.YNc(20,mi,2,5,"ion-searchbar",11),i.qZA(),i.TgZ(21,"ion-col",12),i.YNc(22,hi,3,3,"ion-button",13),i.qZA(),i.qZA(),i.qZA(),i.TgZ(23,"ion-item-divider",14),i.YNc(24,fi,4,7,"ion-label",15),i.qZA(),i.qZA(),i.TgZ(25,"ion-content"),i.YNc(26,ki,2,3,"cdk-virtual-scroll-viewport",16),i.YNc(27,ji,2,2,"ion-list",15),i.YNc(28,qi,3,3,"h3",17),i.qZA()),2&e&&(i.xp6(5),i.hij(" ",a.tituloxx," "),i.xp6(2),i.s9C("title",i.lcZ(8,13,"buscar_porqr")),i.xp6(3),i.Q6J("ngIf","Si"===a.userinfo[0].idempresa.siexporta),i.xp6(1),i.Q6J("ngIf","Formulario"===a.tipo2&&"true"===a.variables.preporte2),i.xp6(1),i.Q6J("ngIf","Formulario"===a.tipo2&&"true"===a.variables.pcreacion),i.xp6(1),i.Q6J("ngIf",0!==a.comandos.length),i.xp6(1),i.MGl("title"," ",i.lcZ(15,15,"REFRESCARM"),""),i.xp6(6),i.Q6J("ngIf","true"===a.variables.pconsulta),i.xp6(2),i.Q6J("ngIf","true"===a.variables.pfiltro),i.xp6(2),i.Q6J("ngIf",(null==a.itemsList?null:a.itemsList.length)>0),i.xp6(2),i.Q6J("ngIf",(null==a.itemsList?null:a.itemsList.length)>0&&"list"===a.viewType),i.xp6(1),i.Q6J("ngIf",0===a.efecto),i.xp6(1),i.Q6J("ngIf",0===(null==a.itemsList?null:a.itemsList.length)))},directives:[u.Gu,u.sr,u.Sm,u.oU,u.cs,u.wd,u.YG,u.gu,w.O5,u.Nd,u.wI,u.rH,u.W2,u.VI,u.j9,g.JJ,g.On,u.Q$,E.N7,E.xd,E.x0,u.td,u.Ie,u.yp,u.q_,w.sg,si.B],pipes:[v.X$,ni.A],styles:["[_nghost-%COMP%]{--ion-safe-area-top: 20px;--ion-safe-area-bottom: 22px;--page-margin: var(--app-narrow-margin)}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:uppercase;font-size:14px}.image[_ngcontent-%COMP%]{height:5vw;width:5vw;border:2px solid #fff;border-radius:50%;box-shadow:0 0 5px gray;display:block}.circle-pic[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10%;display:block}"]}),n})();var Mi=h(76398),zi=h(81656),Ei=h(92448),Ii=h(22753);let Ri=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[[w.ez,u.Pc,T.K,g.u5,g.UX,z.YL,Mi.N,Ii.D,E.Cl,k.Bz.forChild([{path:"",component:Ni}]),v.aw.forChild(),zi.YZ,Ei.D]]}),n})()},26806:(Y,M,h)=>{h.d(M,{B:()=>T});var u=h(5e3),k=h(69808);const w=function(v,g){return{"no-animated":v,inline:g}};let T=(()=>{class v{constructor(){this.width="100%",this.height="16px",this.borderRadius="0",this.rounded=!1,this.noAnimated=!1,this.inline=!1,this.styles={}}ngOnInit(){this.styles={width:this.width,height:this.height,borderRadius:this.borderRadius},this.rounded&&(this.styles.borderRadius="999em")}}return v.\u0275fac=function(z){return new(z||v)},v.\u0275cmp=u.Xpm({type:v,selectors:[["skeleton-element"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius",rounded:"rounded",noAnimated:"noAnimated",inline:"inline"},decls:1,vars:5,consts:[[3,"ngClass","ngStyle"]],template:function(z,p){1&z&&u._UZ(0,"div",0),2&z&&u.Q6J("ngClass",u.WLB(2,w,p.noAnimated,p.inline))("ngStyle",p.styles)},directives:[k.mk,k.PC],styles:["[_nghost-%COMP%]{display:block}[inline][_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .no-animated[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important;background:rgba(130,130,130,.2)}.animated-background[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(130,130,130,.2);background:linear-gradient(to right,rgba(130,130,130,.2) 8%,rgba(130,130,130,.3) 18%,rgba(130,130,130,.2) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}"]}),v})()},75525:(Y,M,h)=>{h.d(M,{A:()=>w});var u=h(5e3),k=h(22313);let w=(()=>{class T{constructor(g){this._sanitizer=g}transform(g){return this._sanitizer.bypassSecurityTrustHtml(g)}}return T.\u0275fac=function(g){return new(g||T)(u.Y36(k.H7,16))},T.\u0275pipe=u.Yjl({name:"sanitizeHtml",type:T,pure:!0}),T})()}}]);