"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5383],{55383:(Rt,M,v)=>{v.r(M),v.d(M,{formulariomovilsdprocesoListPageModule:()=>Gt});var h=v(23349),N=v(55787),P=v(69808),R=v(33678),L=v(51062),q=v(93075),E=v(36351),b=v(70655),G=v(68554),z=v(4707),J=v(63814),k=v(15190),O=v(26388),t=v(5e3),F=v(59978),Q=v(21113);const Y=["inputId"],B=["fotoa"];function D(c,m){if(1&c&&(t.TgZ(0,"div"),t._UZ(1,"dynamic-form",11,12),t.qZA()),2&c){const i=t.oxw();t.xp6(1),t.Q6J("controls",i.controls)("form",i.form)}}function V(c,m){1&c&&(t.TgZ(0,"div",13),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"obteniendo_info")," "))}let H=(()=>{class c{constructor(i,o,e,s,a,r,u,l,d){this.platform=i,this.alertController=o,this.router=e,this.modalController=s,this.controlsService=a,this.translateService=r,this.authenticationService=u,this.navParams=l,this.actionSheetController=d,this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.fechascompone=[],this.horascompone=[],this.actividades=[],this.actorcorreo=[],this.acciones=[],this.submitted=[],this.submitted2=[],this.datosreghtml="",this.botonesactividad=[],this.seguro="",this.msg="",this.camposmodifica=[],this.camposlectura=[],this.datosusuario=[],this.norequeridospp="",this.muestrabien=!1,this.apifoto=this.authenticationService.getapifoto()}dismissModal(){this.modalController.dismiss("close","","modal-filters")}ionViewDidEnter(){}ngOnInit(){this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.navParams.get("title"),this.idcategoria=this.navParams.data.record2.idcategoria,this.modopcx="modal-fullscreen","true"===this.variables.modopc&&(this.platform.is("desktop")||this.platform.is("mobileweb"))&&(this.modopcx="modal-fullscreen2"),this.nidformulario=this.navParams.data.record2.nidformulario,this.idformulario=this.navParams.data.record2.idformulario,this.regitrosacumulados=this.navParams.data.record2.regitrosacumulados,this.geoposiciontxt=this.navParams.data.record2.geoposiciontxt,this.tipo2=this.navParams.data.record2.tipo2,this.tipo=this.navParams.data.record2.tipo,this.ejecuta=this.navParams.data.record2.ejecuta,this.ejecutainicio=this.navParams.data.record2.ejecutainicio,this.ejecutaactualiza=this.navParams.data.record2.ejecutaactualiza,this.ejecutaelimina=this.navParams.data.record2.ejecutaelimina,this.acciones=this.navParams.data.record2.acciones,this.actividades=this.navParams.data.record2.actividades,this.actorcorreo=this.navParams.data.record2.actorcorreo,this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.translateService.get("MSGM").subscribe(i=>{this.msg=i}),null==this.navParams.get("record")?(this.OPERACIONT=this.authenticationService.datraduccion("guardar")+" "+this.navParams.data.record2.nidformulario,this.titulo1=this.authenticationService.datraduccion("agregar")+" "+this.navParams.data.record2.nidformulario,this.titulo2=this.authenticationService.datraduccion("completa_form")+" "+this.navParams.data.record2.nidformulario,this.actactual=this.daactividadactual("INICIO",this.actividades),this.daacciones(this.acciones,this.actactual._id),this.translateService.get("NUEVOM").subscribe(i=>{this.tituloxx=i+" "+this.tituloxx,this.lpermiso=i})):(this.OPERACIONT=this.authenticationService.datraduccion("actualizar")+" "+this.navParams.data.record2.nidformulario,this.titulo1=this.authenticationService.datraduccion("actualizar")+" "+this.navParams.data.record2.nidformulario,this.titulo2=this.authenticationService.datraduccion("camios_deseas")+" "+this.navParams.data.record2.nidformulario,this.actactual=this.daactividadactual2(this.navParams.data.record.idactividadxxx,this.actividades),this.daacciones(this.acciones,this.actactual._id),this.translateService.get("ACTUALIZAM").subscribe(i=>{this.tituloxx=i+" "+this.tituloxx,this.lpermiso=i}),this._ID=this.navParams.data.record._id),this.form=new q.cw({}),this.onValueChanges()}onValueChanges(){this.form.valueChanges.subscribe(i=>{this.submitted=i})}davaloritem(i,o){let e="";return e=i[o]?i[o]:"",e}daacciones(i,o){let e=0;for(let a=0;a<i.length;a++)if(i[a].idpapa===o){var s=i[a].nombre;"es"!==this.authenticationService.getlenguaje()&&(s=i[a].nombre2),0===e?(this.botonesactividad.push({name:i[a].nombre,type:"radio",label:s,checked:!0,value:i[a]}),e+=1):this.botonesactividad.push({name:i[a].nombre,type:"radio",label:s,checked:!1,value:i[a]})}}dalistacat(i,o){let e;for(let s=0;s<i.length;s++)if(i[s].label===o){e={key:i[s].key,label:i[s].label};break}return e}daactividadactual2(i,o){let e;for(let s=0;s<o.length;s++)if(o[s]._id===i){e=o[s];break}return e}dagruposasignados(i,o){let e=[];for(let s=0;s<o.length;s++)o[s].idpapa===i&&e.push(o[s]._id);return e}daactividadactual(i,o){let e;for(let s=0;s<o.length;s++)if(o[s].clase===i){e=o[s];break}return e}daactividadsiguiente(i,o){let e;for(let s=0;s<o.length;s++)if(o[s]._id===i){e=o[s];break}return e}existecampo(i,o){let e=!1;for(let s=0;s<i.length;s++)if(i[s]===o){e=!0;break}return e}ngAfterViewInit(){null==this.navParams.get("record")?((""!==this.actactual.camposmodificables||void 0!==this.actactual.camposmodificables)&&this.actactual.camposmodificables.id&&(this.camposmodifica=this.actactual.camposmodificables.id.split(";")),(""!==this.actactual.camposlectura||void 0!==this.actactual.camposlectura)&&this.actactual.camposlectura.id&&(this.camposlectura=this.actactual.camposlectura.id.split(";")),this.norequeridospp="",this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(i=>{const o=[],e=i;for(let r=0;r<e.length;r++){const u=e[r].required;let l="",d="",n=[];switch(e[r].type){case"fecha":this.fechascompone.push(e[r].name);break;case"fechahora":this.horascompone.push(e[r].name);break;case"label":d=".";break;case"check":d=e[r].default,""===d?d="false":d||(d="false");break;case"select":n=this.dalistacat(e[r].options,e[r].default);break;default:d=e[r].default}n||(n=""),d||(d=""),l="true"===u?" (*)":" "+this.authenticationService.datraduccion("opcional");let p=!1,g=!1,f=!1,_=!1,Z=!1;g=this.existecampo(this.camposmodifica,e[r]._id),!0!==g?(p=this.existecampo(this.camposlectura,e[r]._id),!0===p?(_=!1,Z=e[r].required,f=!0,g=!1):(f=!1,_=!0,Z=!1,this.norequeridospp=this.norequeridospp+e[r].name+"\xb0",g=!1,e[r].required&&(void 0===d||""===d||null===d)&&(d="0"))):(_=!1,p=!1,Z=!0,"fecha"===e[r].type&&(d=""));var s=e[r].title+l;"es"!==this.authenticationService.getlenguaje()&&e[r].title2&&(s=e[r].title2+l),"verquery"===e[r].type||"selectremoto"===e[r].type||"select"===e[r].type||"select2"===e[r].type?(o.push({modopxc:this.modopcx,siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:e[r]._id,actualiza:"no",verregistros:e[r].verregistros,order:e[r].order,name:e[r].name,type:e[r].type,required:""+Z,placeholder:e[r].placeholder,display:e[r].display,filtrocampo2:e[r].filtrocampo2,selected:e[r].selected,disabled:""+p,hidden:""+_,title:s,position:e[r].position,labelsizefondt:e[r].labelsizefondt,default:e[r].default,valor:"verquery"===e[r].type?d:n,default2:e[r].default2,default3:e[r].default3,copiarencampo:e[r].copiarencampo,categoria:e[r].categoria,combofijo:e[r].combofijo,idcadmovil:this.tt,options:e[r].options,fondoetiqueta:e[r].fondoetiqueta,coloretiqueta:e[r].coloretiqueta,blike:e[r].blike,rangomin:e[r].rangomin,rangomax:e[r].rangomax,rangostep:e[r].rangostep,alfatypo2:e[r].alfatypo2,alfatypo:e[r].alfatypo,idfrmconsulta:e[r].idfrmconsulta,idfrmconsulta2:e[r].idfrmconsulta2,idfrmconsulta2origen:e[r].idfrmconsulta2origen,idfrmconsultaorigen:e[r].idfrmconsultaorigen,usarunaves:e[r].usarunaves,idcampofiltro:e[r].idcampofiltro,idcampofiltro2:e[r].idcampofiltro2,idcampofiltromanual:e[r].idcampofiltromanual,regitrosacumulados:this.regitrosacumulados,frmapirest:e[r].frmapirest,idfrmconsultaorigenpapa:e[r].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:e[r].idfrmconsultaorigenpapa2,idcampofiltropapa:e[r].idcampofiltropapa}),this.datosreghtml=this.datosreghtml+"<strong>"+e[r].title+"</strong>: "+d+"<br>"):(o.push({modopxc:this.modopcx,siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:e[r]._id,actualiza:"no",order:e[r].order,name:e[r].name,type:e[r].type,required:""+Z,placeholder:e[r].placeholder,display:e[r].display,filtrocampo2:e[r].filtrocampo2,selected:e[r].selected,disabled:""+p,hidden:""+_,title:s,position:e[r].position,labelsizefondt:e[r].labelsizefondt,default:e[r].default,valor:d,default2:e[r].default2,default3:e[r].default3,copiarencampo:e[r].copiarencampo,categoria:e[r].categoria,combofijo:e[r].combofijo,idcadmovil:this.tt,options:e[r].options,fondoetiqueta:e[r].fondoetiqueta,coloretiqueta:e[r].coloretiqueta,blike:e[r].blike,rangomin:e[r].rangomin,rangomax:e[r].rangomax,rangostep:e[r].rangostep,alfatypo2:e[r].alfatypo2,alfatypo:e[r].alfatypo,idfrmconsulta:"",idfrmconsulta2:"",idfrmconsulta2origen:"",idfrmconsultaorigen:"",usarunaves:"",idcampofiltro:"",idcampofiltro2:"",idcampofiltromanual:"",regitrosacumulados:"",frmapirest:"",idfrmconsultaorigenpapa:"",idcampofiltropapa:""}),this.datosreghtml=this.datosreghtml+"<strong>"+e[r].title+"</strong>: "+d+"<br>")}this.controls=this.controlsService.getControls(o),this.muestrabien=!0},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})):((""!==this.actactual.camposmodificables||void 0!==this.actactual.camposmodificables)&&(this.camposmodifica=this.actactual.camposmodificables.id.split(";")),(""!==this.actactual.camposlectura||void 0!==this.actactual.camposlectura)&&(this.camposlectura=this.actactual.camposlectura.id.split(";")),this.norequeridospp="",this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(i=>{const o=[],e=i;for(let a=0;a<e.length;a++){let u="";u="true"===e[a].required?" (*)":" "+this.authenticationService.datraduccion("opcional");let l="";"fecha"===(l=this.davaloritem(this.navParams.data.record,e[a].name),e[a].type)&&(l=this.authenticationService.dafecha(l,1),this.fechascompone.push(e[a].name)),l||(l=""),"label"===e[a].type&&(l=".");let d=!1,n=!1,p=!1,g=!1,f=!1;n=this.existecampo(this.camposmodifica,e[a]._id),!0!==n?(d=this.existecampo(this.camposlectura,e[a]._id),!0===d?(g=!1,f=e[a].required,p=!0,n=!1):(p=!1,g=!0,f=!1,this.norequeridospp=this.norequeridospp+e[a].name+"\xb0",e[a].required&&(void 0===l||""===l||null===l)&&(l="0"),n=!1)):(g=!1,d=!1,f=!0,"0"===l&&(l=""));var s=e[a].title+u;"es"!==this.authenticationService.getlenguaje()&&e[a].title2&&(s=e[a].title2+u),"select"===e[a].type||"select2"==e[a].type?(o.push({modopxc:this.modopcx,siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:e[a]._id,actualiza:"si",verregistros:e[a].verregistros,order:e[a].order,name:e[a].name,type:e[a].type,required:""+f,placeholder:e[a].placeholder,display:e[a].display,filtrocampo2:e[a].filtrocampo2,selected:e[a].selected,disabled:""+d,hidden:""+g,title:s,position:e[a].position,labelsizefondt:e[a].labelsizefondt,default:"",valor:l,default2:e[a].default2,default3:e[a].default3,copiarencampo:e[a].copiarencampo,categoria:e[a].categoria,combofijo:e[a].combofijo,idcadmovil:this.tt,options:e[a].options,fondoetiqueta:e[a].fondoetiqueta,coloretiqueta:e[a].coloretiqueta,blike:e[a].blike,rangomin:e[a].rangomin,rangomax:e[a].rangomax,rangostep:e[a].rangostep,alfatypo2:e[a].alfatypo2,alfatypo:e[a].alfatypo,idfrmconsulta:e[a].idfrmconsulta,idfrmconsulta2:e[a].idfrmconsulta2,idfrmconsulta2origen:e[a].idfrmconsulta2origen,idfrmconsultaorigen:e[a].idfrmconsultaorigen,usarunaves:e[a].usarunaves,idcampofiltro:e[a].idcampofiltro,idcampofiltro2:e[a].idcampofiltro2,idcampofiltromanual:e[a].idcampofiltromanual,regitrosacumulados:this.regitrosacumulados,frmapirest:e[a].frmapirest,idfrmconsultaorigenpapa:e[a].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:e[a].idfrmconsultaorigenpapa2,idcampofiltropapa:e[a].idcampofiltropapa}),this.datosreghtml=this.datosreghtml+"<strong>"+e[a].title+"</strong>: "+l+"<br>"):(o.push({modopxc:this.modopcx,siimagenlocal:this.userinfo[0].idempresa.siimagenes,titulo1:this.titulo1,titulo2:this.titulo2,idformulario:this.idformulario,idcampo:e[a]._id,actualiza:"si",order:e[a].order,name:e[a].name,type:e[a].type,required:""+f,placeholder:e[a].placeholder,display:e[a].display,filtrocampo2:e[a].filtrocampo2,selected:e[a].selected,disabled:""+d,hidden:""+g,title:s,position:e[a].position,labelsizefondt:e[a].labelsizefondt,default:"",valor:l,default2:e[a].default2,default3:e[a].default3,copiarencampo:e[a].copiarencampo,categoria:e[a].categoria,combofijo:e[a].combofijo,idcadmovil:this.tt,options:e[a].options,fondoetiqueta:e[a].fondoetiqueta,coloretiqueta:e[a].coloretiqueta,blike:e[a].blike,rangomin:e[a].rangomin,rangomax:e[a].rangomax,rangostep:e[a].rangostep,alfatypo2:e[a].alfatypo2,alfatypo:e[a].alfatypo,idfrmconsulta:"",idfrmconsulta2:"",idfrmconsulta2origen:"",idfrmconsultaorigen:"",usarunaves:"",idcampofiltro:"",idcampofiltro2:"",idcampofiltromanual:"",regitrosacumulados:"",frmapirest:"",idfrmconsultaorigenpapa:"",idcampofiltropapa:""}),this.datosreghtml=this.datosreghtml+"<strong>"+e[a].title+"</strong>: "+l+"<br>")}this.controls=this.controlsService.getControls(o),this.muestrabien=!0},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")}))}gruposusuarios2(i,o,e,s){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione usuario para asignar orden",inputs:i,buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:r=>{}},{text:"Enviar",handler:r=>{this.submitForm(e,r.split("\xac")[0],"enviausuario",r.split("\xac")[1],r.split("\xac")[2],r.split("\xac")[3])}}]})).present()})}gruposusuario0a(i,o,e,s){return(0,b.mG)(this,void 0,void 0,function*(){this.datosusuario=o,yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Grupos de usuarios",inputs:i,buttons:[{text:"Enviar -> grupo completo",cssClass:"secondary",handler:r=>{this.submitForm(e,r.split("\xac")[1],"enviagrupousuario",r.split("\xac")[2],r.split("\xac")[3],r.split("\xac")[4])}},{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:r=>{}}]})).present()})}gruposusuario0b(i,o,e,s){return(0,b.mG)(this,void 0,void 0,function*(){this.datosusuario=o,yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Grupos de usuarios y despues usuario ",inputs:i,buttons:[{text:"Cancelar",role:"cancelar",cssClass:"secondary",handler:r=>{}},{text:"Seleccionar usuario de grupo",handler:r=>{var u=[];i=this.datosusuario;for(let d=0;d<i.length;d++)if(r.split("\xac")[0]===i[d]._id){var l;l=i[d].usuarios;for(let n=0;n<l.length;n++)u.push({name:l[n].nombre,type:"radio",label:l[n].nombre,value:l[n].email+"\xac"+l[n].correo+"\xac"+l[n].nombre+"\xac"+i[d]._id})}this.gruposusuarios2(u,"1",e,s)}}]})).present()})}gruposusuario(i,o,e,s){return(0,b.mG)(this,void 0,void 0,function*(){"ASIGNACI\xd3N GRUPO USUARIOS"===s?this.gruposusuario0a(i,o,e,s):this.gruposusuario0b(i,o,e,s)})}submitForm0(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Opci\xf3n",inputs:this.botonesactividad,buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Ok",handler:o=>{this.actsiguiente=this.daactividadsiguiente(o.actividadsiguiente.id,this.actividades),"ASIGNACI\xd3N GRUPO USUARIOS"===o.tipo||"ASIGNACI\xd3N USUARIO"===o.tipo||"ASIGNACI\xd3N"===o.tipo?"INVALID"===this.form.status?this.authenticationService.presentAlert("Ingrese todos los campos requeridos en el formulario","Precauci\xf3n",""):this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.actsiguiente.actor.id,"frmactorgrupos",0).then(e=>{var s,a=[];s=e;for(let d=0;d<s.length;d++){var r=s[d].usuarios,u="",l="";for(let n=0;n<r.length;n++)u=u+r[n].email+"\xb0",l=l+r[n].correo+";";a.push({name:s[d].nombre,type:"radio",label:s[d].nombre,value:s[d]._id+"\xac"+u+"\xac"+l+"\xac"+s[d].nombre+"\xac"+s[d]._id})}this.gruposusuario(a,s,o,o.tipo)},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")}):this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.actsiguiente.actor.id,"frmactorgrupos",0).then(e=>{var s;s=e;var r="",u="";for(let d=0;d<s.length;d++){var l=s[d].usuarios;for(let n=0;n<l.length;n++)r=r+l[n].email+"\xb0",u=u+l[n].correo+";"}this.submitForm(o,r,"normal",u,"","")})}}]})).present()})}submitForm(i,o,e,s,a,r){if("INVALID"===this.form.status)this.authenticationService.presentAlert("Ingrese todos los campos requeridos en el formulario","Precauci\xf3n","");else{let g="Actualiza";for(let f=0;f<this.fechascompone.length;f++)this.submitted[this.fechascompone[f]]=this.authenticationService.dafecha(this.submitted[this.fechascompone[f]],2);this.datosreghtml="";var u=Object.keys(this.submitted);for(let f=0;f<u.length;f++)this.datosreghtml=this.datosreghtml+"<strong>"+u[f]+"</strong>: "+this.submitted[u[f]]+"<br>";if(null==this.navParams.get("record")&&(g="Crea"),null==this.navParams.get("record")){this.actsiguiente=this.daactividadsiguiente(i.actividadsiguiente.id,this.actividades);var d=this.dagruposasignados(this.actsiguiente.actor.id,this.actorcorreo);""!==r&&(d=[r]);var n="",p="";"EJECUCI\xd3N (USUARIO PUBLICO)"===i.tipo&&(n=this.userinfo[0]._id,p=this.userinfo[0].correonotifica),this.submitted.usuarionew=this.userinfo[0].email,this.submitted.usuarioup=this.userinfo[0].email,this.submitted.usuarioup2=this.userinfo[0].nombrealias,this.submitted.usuarionew2=this.userinfo[0].nombrealias,this.submitted.idempresa=this.userinfo[0].idempresa._id,this.submitted.geoposicionxxx=this.geoposiciontxt,this.submitted.estadointerno="activo",this.submitted.comentarioanulado="",this.submitted.comentariocerrado="",""!==n&&(this.submitted.ususariopublico=n),""!==p&&(this.submitted.ususariopublico2=p),"enviausuario"==e||"enviagrupousuario"==e?("enviausuario"==e&&(this.submitted.ususariopublico=o,this.submitted.ususariopublico2=s),this.submitted.idusuariosasigna=o.split("\xb0")):this.submitted.idusuariosasigna="normal"==e?o.split("\xb0"):[],this.submitted.pmodulo=this.userinfo[0]._id,this.submitted.idactividadxxx=i.actividadsiguiente.id,this.submitted.estadoxxx=i.estado,this.submitted.grupoasignado=d,this.submitted.asignadoxxx=""===a||void 0===a?i.asignadoxxx:a,this.submitted.ejecutainicio=i.ejecutainicio,this.submitted.ejecutafinal=i.ejecuta,this.submitted.actividadxxx=i.actividadsiguiente.nombre,this.submitted.idaccionxxx=i._id,this.submitted.accionxxx=i.nombre,this.submitted.tipoaccionxxx=i.tipo,this.submitted.subtipoaccionxxx=i.subtipo,this.submitted.idactorxxx=this.actsiguiente.actor.id,this.submitted.actorxxx=this.actsiguiente.actor.nombre,this.submitted.actividadclasexxx=this.actsiguiente.clase,this.submitted.actividadtipoxxx=this.actsiguiente.tipo,this.submitted.leidoxxx=!1,this.submitted.enviadoporxxx=this.userinfo[0].nombre+"  ("+this.userinfo[0].email+")",this.submitted.estadoordenxxx="activa";const f={idcat:this.idcategoria,idform:this.idformulario,estructura:this.submitted,norequeridospp:this.norequeridospp,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,trayectoria:{idempresa:this.userinfo[0].idempresa._id,idorden:"idorden",procedimiento:this.nidformulario,idordeng:"idordeng",usuariocreador:{id:this.userinfo[0]._id,nombre:this.userinfo[0].nombre,email:this.userinfo[0].email,usuarionew2:this.userinfo[0].nombrealias},estadoxxx:i.estado,enviadoporxxx:this.userinfo[0].nombre+"  ("+this.userinfo[0].email+")",minutos:0,grupoasignado:d,tipocreacionorden:"INICIAL",ususariopublico:n,ususariopublico2:p,info:this.authenticationService.replaceAll(this.datosreghtml,'"',""),nombre:"nombre",idform:this.idformulario,tipoform:this.tipo,tipo2form:this.tipo2,ejecuta:this.ejecuta,categoriaform:this.idcategoria,idactividad:i.actividadsiguiente.id,actoractividad:{id:this.actsiguiente.actor.id,nombre:this.actsiguiente.actor.nombre},claseactividad:this.actsiguiente.clase,nombreactividad:this.actsiguiente.nombre,tipoactividad:this.actsiguiente.tipo,asignadoxxx:a,etapaactividad:this.actsiguiente.etapa,salioorden:1,estadoorden:"activa",idaccion:i._id,tipoaccion:i.tipo,subtipoaccion:i.subtipo,nombreaccion:i.nombre,estadoaccion:i.estado,actividadsiguienteaccion:{id:i.actividadsiguiente.id,nombre:i.actividadsiguiente.nombre}},bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:g,accion:"Crea en formulario movil"}};f&&this.authenticationService.createRegmovil("",f,"frmmovils").then(_=>{this.terminacreacion(i,e,s)},_=>{_.error.indexOf("Precauci\xf3n registro ya existe en base de datos, este formulario tiene llaves unicas:")>=0?(this.terminacreacion(i,e,s),this.authenticationService.presentAlert(_.error,"Precauci\xf3n","")):this.authenticationService.presentAlert(_.error,"Precauci\xf3n","")})}}}terminacreacion(i,o,e){if("false"===i.mandacorreo)this.modalController.dismiss("ok","","modal-filters");else{let l="";for(let n=0;n<this.actorcorreo.length;n++)if(this.actorcorreo[n].idpapa===this.actsiguiente.actor.id){let p=this.actorcorreo[n].usuarios;for(let g=0;g<p.length;g++)l="USUARIOSOLICITANTE"===p[g].correo?l+this.userinfo[0].email+";":l+p[g].correo+";"}"normal"===o?l+=i.notificacionemail:l=e+";"+i.notificacionemail;let d='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+' alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>      <p style="text-align: left;">Tienes una solicitud de un nuevo requerimiento:</p>       <p style="text-align: left;"><strong>Proceso</strong>:&nbsp; '+this.nidformulario+'</p>       <p style="text-align: left;"><strong>Actividad actual</strong>: '+this.actsiguiente.nombre+'</p>       <p style="text-align: left;"><strong>mensaje</strong>:'+i.notificacionmsm+"</p>      <p>&nbsp;</p>      <p>&nbsp;</p>      <p>saludos</p></body> </html>";var a=l.split(";").filter(function(n){return""!==n}),r="",u={};"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(r="crea/1/GMAIL",u={destino:a,html:d,text:d,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:i.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(r="crea/1/OFFICE365",u={destino:a,html:d,text:d,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:i.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(r="",u={destino:l,html:d,text:d,subjet:i.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(r,u,"mails").then(n=>{this.modalController.dismiss("ok","","modal-filters")},n=>{this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n",""),this.modalController.dismiss("ok","","modal-filters")})}}dacomponente(i,o){return(0,b.mG)(this,void 0,void 0,function*(){let e="";"ubicacion"===i&&(e=this.form.controls.ubicacion.value);const s=yield this.modalController.create({component:J.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:e},cssClass:"modal-fullscreen"});return s.onWillDismiss().then(a=>{"close"===a.data||("direccion"===i?this.form.controls.direccion.setValue(a.data.direccion):this.form.controls.ubicacion.setValue(a.data.direccion+" {"+a.data.la+"\xb0"+a.data.lo+"}"))}),yield s.present()})}takePicture(i){return(0,b.mG)(this,void 0,void 0,function*(){const o=yield O.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:O.dk.DataUrl,source:O.oK.Camera});this.authenticationService.generateFromImage(o.dataUrl,200,200,.5,e=>{"fotoa"===i&&(this.fotoimg=e,this.form.controls.foto.setValue(this.authenticationService.procesafoto(this.form.controls.foto.value)))})})}uploadPWA2(i,o){o&&o.length>0&&this.firstFileToBase64(o[0]).then(s=>{this.authenticationService.generateFromImage(s,200,300,.5,a=>{"fotoa"===i&&(this.fotoimg=a,this.form.controls.foto.setValue(this.authenticationService.procesafoto(this.form.controls.foto.value)))})},s=>{"fotoa"===i&&(this.fotoimg=null,this.form.controls.foto1.setValue(""))})}uploadPWA(i){if("fotoa"===i){if(null==this.fotoa)return;this.uploadPWA2(i,this.fotoa.nativeElement.files)}}firstFileToBase64(i){return new Promise((o,e)=>{const s=new FileReader;s&&null!=i?(s.readAsDataURL(i),s.onload=()=>{o(s.result)},s.onerror=a=>{e(a)}):e(new Error("No file found"))})}takePicture2(i){return(0,b.mG)(this,void 0,void 0,function*(){"fotoa"===i&&this.fotoa.nativeElement.click()})}fotodatos(i){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(i)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(i)}}]})).present()})}combodatos(i,o,e,s,a,r){return(0,b.mG)(this,void 0,void 0,function*(){const u=yield this.modalController.create({component:k.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{grabax:r,variables:this.variables,userinfo:this.userinfo,record2:null,op:o,frm:e,idllave:this.idllave,titlex:"Buscar "+a},cssClass:"modal-fullscreen"});return u.onWillDismiss().then(l=>{let d=[];d=l,"close"!==d.data&&this.form.controls[s].setValue(d.data?d.data.nombre:"")}),yield u.present()})}}return c.\u0275fac=function(i){return new(i||c)(t.Y36(h.t4),t.Y36(h.Br),t.Y36(N.F0),t.Y36(h.IN),t.Y36(F.X),t.Y36(L.sK),t.Y36(G.$),t.Y36(h.X1),t.Y36(h.BX))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-formulariomovilsproceso-create"]],viewQuery:function(i,o){if(1&i&&(t.Gf(Y,5),t.Gf(B,7)),2&i){let e;t.iGM(e=t.CRH())&&(o.inputElement=e.first),t.iGM(e=t.CRH())&&(o.fotoa=e.first)}},decls:17,vars:6,consts:[["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],[4,"ngIf","ngIfElse"],["loading",""],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"hidden","click"],[3,"controls","form"],["dynamicForm","dynamicForm"],[1,"loading"]],template:function(i,o){if(1&i&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t.TgZ(3,"ion-button",2),t.NdJ("click",function(){return o.dismissModal()}),t._UZ(4,"ion-icon",3),t.qZA(),t.qZA(),t._UZ(5,"ion-title",4),t.qZA(),t.qZA(),t.TgZ(6,"ion-content",5),t.TgZ(7,"section",6),t.YNc(8,D,3,2,"div",7),t.YNc(9,V,3,3,"ng-template",null,8,t.W1O),t.qZA(),t.qZA(),t.TgZ(11,"ion-footer"),t.TgZ(12,"ion-row",9),t.TgZ(13,"ion-col"),t.TgZ(14,"ion-button",10),t.NdJ("click",function(){return o.submitForm0()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.MAs(10);t.xp6(8),t.Q6J("ngIf",o.controls)("ngIfElse",e),t.xp6(6),t.Q6J("hidden",!o.muestrabien),t.xp6(1),t.hij("",t.lcZ(16,4,"enviar_a")," ")}},directives:[h.Gu,h.sr,h.Sm,h.YG,h.gu,h.wd,h.W2,P.O5,h.fr,h.Nd,h.wI,Q.r],pipes:[L.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;font-size:x-large}"]}),c})();var $=v(16112),w=v(65239),W=v(94327),j=v(80829),X=v(21013),K=v(26806),tt=v(75525);const it=["barChart"],et=["valueBarsCanvas"],ot=["valueBarsCanvas2"];function at(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-button",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().exportarexcel()}),t.ALo(1,"translate"),t._UZ(2,"ion-icon",38),t.qZA()}2&c&&t.s9C("title",t.lcZ(1,1,"descargar_excel"))}function st(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-button",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().addRecord()}),t.ALo(1,"translate"),t._UZ(2,"ion-icon",39),t.qZA()}2&c&&t.MGl("title"," ",t.lcZ(1,1,"AGREGARM"),"")}function rt(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-button",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().ejecutaoperacion()}),t.ALo(1,"translate"),t._UZ(2,"ion-icon",40),t.qZA()}2&c&&t.s9C("title",t.lcZ(1,1,"ejecutar_operacion"))}function nt(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-button",5),t.NdJ("click",function(){return t.CHM(i),t.oxw().buscartipo()}),t.ALo(1,"translate"),t._UZ(2,"ion-icon",41),t.qZA()}2&c&&t.s9C("title",t.lcZ(1,1,"buscar_por_grupo"))}function lt(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-col",12),t.TgZ(1,"ion-button",13),t.NdJ("click",function(){return t.CHM(i),t.oxw().buscarpororden()}),t.ALo(2,"translate"),t._UZ(3,"ion-icon",42),t.qZA(),t.qZA()}2&c&&(t.xp6(1),t.s9C("title",t.lcZ(2,1,"buscar_noorden")))}function ct(c,m){1&c&&(t.TgZ(0,"ion-segment-button",43),t.TgZ(1,"ion-label",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"inbox"),""))}function dt(c,m){1&c&&(t.TgZ(0,"ion-segment-button",44),t.TgZ(1,"ion-label",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"ejecutado"),""))}function ut(c,m){1&c&&(t.TgZ(0,"ion-segment-button",45),t.TgZ(1,"ion-label",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"finalizado"),""))}function ht(c,m){1&c&&(t.TgZ(0,"ion-segment-button",46),t.TgZ(1,"ion-label",29),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"dashboard"),""))}function mt(c,m){if(1&c&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&c){const i=t.oxw();t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",i.numeroderegistros," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function ft(c,m){if(1&c&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&c){const i=t.oxw();t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",null==i.vgraf?null:i.vgraf.total," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function pt(c,m){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&c){const i=t.oxw().$implicit;t.xp6(1),t.AsE(" \u272a ",i.item.actorxxx,"-",i.item.asignadoxxx," ")}}function gt(c,m){if(1&c&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&c){const i=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.AsE(" \u272a ",o.daactoresingles(i.item.actorxxx),"-",i.item.asignadoxxx," ")}}function vt(c,m){if(1&c&&(t.TgZ(0,"h3",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",t.lcZ(2,2,"no_ordenp"),": ",i.item.sequencia,"")}}function bt(c,m){if(1&c&&(t.TgZ(0,"h3",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c){const i=t.oxw().$implicit;t.xp6(1),t.AsE("",t.lcZ(2,2,"no_ordenp2"),": ",i.item.sequenciag,"")}}function _t(c,m){if(1&c&&(t.TgZ(0,"h2",52),t.TgZ(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c){const i=t.oxw().$implicit;t.xp6(2),t.AsE("",t.lcZ(3,2,"actividadp"),": ",i.item.actividadxxx," ")}}function xt(c,m){if(1&c&&(t.TgZ(0,"h2",52),t.TgZ(1,"strong"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&c){const i=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,2,"actividadp"),": ",o.daactividadingres(i.item.actividadxxx)," ")}}function Zt(c,m){1&c&&t._UZ(0,"ion-icon",58)}function yt(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-item",48),t.NdJ("click",function(){const s=t.CHM(i).$implicit;return t.oxw(2).updateRecord(s.item,s.nombre,s.nombre2)}),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",49),t.TgZ(4,"ion-label",50),t.YNc(5,pt,2,2,"h2",22),t.YNc(6,gt,2,2,"h2",22),t._UZ(7,"h1"),t.YNc(8,vt,3,4,"h3",51),t.YNc(9,bt,3,4,"h3",51),t.YNc(10,_t,4,4,"h2",51),t.YNc(11,xt,4,4,"h2",51),t.TgZ(12,"h3",52),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"ion-col",53),t.TgZ(16,"ion-label",29),t.TgZ(17,"h1"),t.TgZ(18,"span",54),t.TgZ(19,"ion-note",54),t._uU(20),t.ALo(21,"date"),t._UZ(22,"br"),t._uU(23),t._UZ(24,"br"),t._uU(25),t.qZA(),t.YNc(26,Zt,1,0,"ion-icon",55),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"ion-row"),t.TgZ(28,"ion-col",24),t.TgZ(29,"ion-label",56),t.TgZ(30,"span"),t._UZ(31,"div",57),t.ALo(32,"sanitizeHtml"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&c){const i=m.$implicit,o=t.oxw(2);t.xp6(5),t.Q6J("ngIf","es"===o.authenticationService.getlenguaje()),t.xp6(1),t.Q6J("ngIf","es"!==o.authenticationService.getlenguaje()),t.xp6(2),t.Q6J("ngIf","No"===o.userinfo[0].idempresa.sicorrelativo),t.xp6(1),t.Q6J("ngIf","Si"===o.userinfo[0].idempresa.sicorrelativo),t.xp6(1),t.Q6J("ngIf","es"===o.authenticationService.getlenguaje()),t.xp6(1),t.Q6J("ngIf","es"!==o.authenticationService.getlenguaje()),t.xp6(2),t.AsE(" ",t.lcZ(14,13,"enviado_por"),": ",i.item.enviadoporxxx,""),t.xp6(7),t.hij("\u25f7 ",t.xi3(21,15,i.item.updatedAt,"dd-MM-yyyy h:mm a")," "),t.xp6(3),t.hij("\u2a00 ",i.item.usuarioup2," "),t.xp6(2),t.hij("\u29be ",i.item.estadointerno," "),t.xp6(1),t.Q6J("ngIf",o.isIos()),t.xp6(5),t.Q6J("innerHtml",t.lcZ(32,18,i.nombre2),t.oJD)}}function At(c,m){if(1&c&&(t.TgZ(0,"ion-list"),t.YNc(1,yt,33,20,"ion-item",47),t.qZA()),2&c){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.itemsList)}}function Ct(c,m){if(1&c&&(t.TgZ(0,"tr"),t.TgZ(1,"td",61),t.TgZ(2,"ion-badge",62),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td",63),t._uU(5),t.qZA(),t.TgZ(6,"td",64),t._uU(7),t.qZA(),t.TgZ(8,"td",65),t._uU(9),t.qZA(),t.qZA()),2&c){const i=m.$implicit,o=m.index;t.xp6(3),t.Oqu(o+1),t.xp6(2),t.Oqu(i.grupo),t.xp6(2),t.Oqu(i.subgrupo),t.xp6(2),t.Oqu(i.cantidad)}}function St(c,m){if(1&c&&(t.TgZ(0,"table",59),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t._UZ(3,"th"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,Ct,10,4,"tr",60),t.TgZ(15,"tr"),t.TgZ(16,"td",61),t._UZ(17,"ion-badge",62),t.qZA(),t.TgZ(18,"td",63),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"td",64),t.TgZ(22,"td",65),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&c){const i=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,6,"tipo")),t.xp6(3),t.Oqu(t.lcZ(9,8,"estado")),t.xp6(3),t.Oqu(t.lcZ(12,10,"cantidad")),t.xp6(3),t.Q6J("ngForOf",i.vgraf.tabla),t.xp6(5),t.Oqu(t.lcZ(20,12,"total")),t.xp6(4),t.Oqu(i.totalgraf1)}}function Tt(c,m){if(1&c&&(t.TgZ(0,"tr"),t.TgZ(1,"td",61),t.TgZ(2,"ion-badge",62),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td",63),t._uU(5),t.qZA(),t.TgZ(6,"td",64),t._uU(7),t.qZA(),t.TgZ(8,"td",65),t._uU(9),t.qZA(),t.qZA()),2&c){const i=m.$implicit,o=m.index;t.xp6(3),t.Oqu(o+1),t.xp6(2),t.AsE("",i.grupo,"-",i.grupo0,""),t.xp6(2),t.Oqu(i.subgrupo),t.xp6(2),t.Oqu(i.cantidad)}}function qt(c,m){if(1&c&&(t.TgZ(0,"table",59),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t._UZ(3,"th"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,Tt,10,5,"tr",60),t.TgZ(15,"tr"),t.TgZ(16,"td",61),t._UZ(17,"ion-badge",62),t.qZA(),t.TgZ(18,"td",63),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"td",64),t.TgZ(22,"td",65),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&c){const i=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,6,"tipo")),t.xp6(3),t.Oqu(t.lcZ(9,8,"estado")),t.xp6(3),t.Oqu(t.lcZ(12,10,"cantidad")),t.xp6(3),t.Q6J("ngForOf",i.vgraf2.tabla),t.xp6(5),t.Oqu(t.lcZ(20,12,"total")),t.xp6(4),t.Oqu(i.totalgraf2)}}function Pt(c,m){1&c&&(t.TgZ(0,"ion-item",67),t.TgZ(1,"ion-label",29),t._UZ(2,"skeleton-element"),t._UZ(3,"skeleton-element"),t._UZ(4,"skeleton-element",68),t.qZA(),t.qZA())}const Lt=function(){return[0,1,2,3,4,5,6]};function jt(c,m){1&c&&(t.TgZ(0,"ion-list"),t.YNc(1,Pt,5,0,"ion-item",66),t.qZA()),2&c&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,Lt)))}function It(c,m){1&c&&(t.TgZ(0,"h3",69),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NODATOS")," "))}function Nt(c,m){if(1&c){const i=t.EpF();t.TgZ(0,"ion-infinite-scroll",70),t.NdJ("ionInfinite",function(e){return t.CHM(i),t.oxw().loadData(e)}),t._UZ(1,"ion-infinite-scroll-content",71),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.s9C("loadingText",t.lcZ(2,1,"espere")))}let kt=(()=>{class c{constructor(i,o,e,s,a,r,u){this.platform=i,this.routerOutlet=o,this.router=e,this.authenticationService=s,this.alertController=a,this.translateService=r,this.modalController=u,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.items2=[],this.variables=[],this.permisosorden=[],this.userinfo=[],this.acciones=[],this.filtroottt="",this.actividades=[],this.maximumPages=20,this.misactividades=[],this.misactividadestemp=[],this.actividadpublicas=[],this.otrasact=[],this.actorcorreo=[],this.comandos=[],this.tienedetalle=0,this.viewType="grid",this.totalgraf1=0,this.totalgraf2=0,this.gLimit=100,this.page=2,this.buscanoorden=!1,this.actualizasi=!1,this.filtroextra="",this.vgraf=[],this.vgraf2=[],this.grupousuario="",this.tituloxx="",this.cmpver=[],this.camposbusqueda=[],this.camposbusqueda2=[],this.efecto=0,this.numeroderegistros=0,this.inicio=1,this.seguro="",this.msg="",this.currentSegment="activa",this.currentGraf="grafica",this.currentGraf2="grafica",this.searchSubject=new z.t(1),this.keysaa=[],this.keys=[],this.apifoto=this.authenticationService.getapifoto(),j.kL.register(...j.zX),j.kL.register(X.Z)}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.filtroextra=this.variables.filtrocampo,this.comandos=void 0===this.router.getCurrentNavigation().extras.state.variables.comandos?[]:this.router.getCurrentNavigation().extras.state.variables.comandos,this.permisosorden=this.router.getCurrentNavigation().extras.state.permisosorden,this.idllave=this.router.getCurrentNavigation().extras.state.idllave,this.userinfo=this.authenticationService.getcopiauser(),this.rolexx=this.userinfo[0].role,this.modopc=this.router.getCurrentNavigation().extras.state.modopc,this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.idcategoria=this.router.getCurrentNavigation().extras.state.idcategoria,this.verregistros=this.router.getCurrentNavigation().extras.state.verregistros,this.nidformulario=this.router.getCurrentNavigation().extras.state.nidformulario,this.idformulario=this.router.getCurrentNavigation().extras.state.idformulario,this.geoposicion=this.router.getCurrentNavigation().extras.state.geoposicion,this.cmpver=this.router.getCurrentNavigation().extras.state.datat,this.otrasact=this.router.getCurrentNavigation().extras.state.otrasact,this.actividadpublicas=this.router.getCurrentNavigation().extras.state.actividadpublicas.split(","),this.acciones=this.router.getCurrentNavigation().extras.state.acciones,this.actividades=this.router.getCurrentNavigation().extras.state.actividades,this.misactividades=this.router.getCurrentNavigation().extras.state.misactividades,this.misactividadestemp=this.router.getCurrentNavigation().extras.state.misactividades,this.actorcorreo=this.router.getCurrentNavigation().extras.state.actorcorreo,this.grupousuario=this.dausuariogrupos(this.actorcorreo,this.userinfo[0]._id),this.tipo2=this.router.getCurrentNavigation().extras.state.tipo2,this.tipo=this.router.getCurrentNavigation().extras.state.tipo,this.ejecuta=this.router.getCurrentNavigation().extras.state.ejecuta,this.ejecutainicio=this.router.getCurrentNavigation().extras.state.ejecutainicio,this.ejecutaactualiza=this.router.getCurrentNavigation().extras.state.ejecutaactualiza,this.ejecutaelimina=this.router.getCurrentNavigation().extras.state.ejecutaelimina,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.translateService.get("MSGM").subscribe(i=>{this.msg=i}),this.rangeForm=new q.cw({dual:new q.NI({lower:1,upper:100})}),this.currentSegment="activa",this.camposbusqueda2.push({name:"myInput",type:"radio",label:this.authenticationService.datraduccion("actividad"),value:"Actividad"}),this.camposbusqueda2.push({name:"myInput",type:"radio",label:this.authenticationService.datraduccion("responsable_actor"),value:"Responsable"}),this.camposbusqueda2.push({name:"myInput",type:"radio",label:this.authenticationService.datraduccion("aplicar_filtro"),value:"No aplicar filtro"}),this.authenticationService.getReg(this.idformulario+"/formulariocamposver2/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(i=>{let o;o=i;for(let s=0;s<o.length;s++){var e=o[s].nombre;"es"!==this.authenticationService.getlenguaje()&&(e=o[s].nombre2),this.camposbusqueda.push({name:"myInput",type:"radio",label:e,value:o[s]._id+"\xb0"+o[s].tipo})}},i=>{this.authenticationService.presentAlert(i.error,this.msg,"")}),this.authenticationService.getReg(this.idllave+"/camposdetalle/"+this.userinfo[0].idempresa._id+"/1","frmmovilds",0).then(i=>{let o=[];if(o=i,this.items2=[],o.length>0){this.tienedetalle=1;for(let s=0;s<o.length;s++){let a="";"Check List Detalle"===i[s].type&&(a="Check list ");var e=i[s].title;"es"!==this.authenticationService.getlenguaje()&&(e=i[s].title2),this.items2.push(0===s?{name:i[s].name,type:"radio",label:a+e,checked:!0,value:i[s]._id+"\xb0"+i[s].idformdetalle.id+"\xb0/ProductoListPage\xb0"+e+" ->"+this.nidformulario+"\xb0"+i[s].type+"\xb0"+i[s].maxnumregistros+"\xb0"+i[s].idmovil}:{name:i[s].name,type:"radio",label:a+e,checked:!1,value:i[s]._id+"\xb0"+i[s].idformdetalle.id+"\xb0/ProductoListPage\xb0"+e+" ->"+this.nidformulario+"\xb0"+i[s].type+"\xb0"+i[s].maxnumregistros+"\xb0"+i[s].idmovil})}}},i=>{this.authenticationService.presentAlert(i.error,this.msg,"")}),this.geoposiciontxt="",this.geoposiciontxt="false"===this.geoposicion||void 0===this.geoposicion?"":this.setCurrentLocationa33(),this.authenticationService.authState3.subscribe(i=>{i&&(0===this.inicio?this.inicio=1:(this.inicio=0,this.pideregistros0()))})}ionViewDidLoad(){this.createBarChart("")}generateColorArray(i){this.colorArray=[];for(let o=0;o<i;o++)this.colorArray.push("#"+Math.floor(16777215*Math.random()).toString(16))}buscarqr(){return(0,b.mG)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:$.D,animated:!0,componentProps:{moneda:"",title:this.authenticationService.datraduccion("buscar_porqr"),monto:0,tipo:"formabusca"},presentingElement:yield this.modalController.getTop(),cssClass:"modal-fullscreen"});return i.onWillDismiss().then(o=>{if("close"!==o.data.data){var e=o.data.data.split("\xb0");this.authenticationService.getReg(e[2]+"/"+e[0]+"/"+this.userinfo[0].idempresa._id+"\xb0"+e[2]+"/unregistromoviltodo","frmmovils",0).then(s=>{this.efecto=1,this.items=s,this.itemsList=this.items})}}),yield i.present()})}createBarChart(i){let o;var e;this.valueBarsChart0&&this.valueBarsChart0.destroy(),e={scales:{y:{beginAtZero:!0}},responsive:!0,maintainAspectRatio:!0,aspectRatio:1,tooltips:{enabled:!0},animation:{tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0},onComplete:()=>{o=!0},delay:s=>{let a=0;return o||(a=300*s.dataIndex+100*s.datasetIndex),a}},plugins:{datalabels:{borderRadius:4,color:"white",font:{weight:"bold"},formatter:Math.round,padding:6},legend:{position:"bottom",display:!0},title:{display:!0,text:String(i).toUpperCase(),font:{weight:"bold"},fontSize:16}}},this.valueBarsChart0=new j.kL(this.valueBarsCanvas.nativeElement,{type:"bar",data:{labels:this.vgraf.labels,datasets:this.vgraf.dataset},options:e})}createBarChart2(i){var o;let e;this.valueBarsChart&&this.valueBarsChart.destroy(),o={responsive:!0,maintainAspectRatio:!0,aspectRatio:1,tooltips:{enabled:!0},animation:{onComplete:()=>{e=!0},delay:s=>{let a=0;return e||(a=300*s.dataIndex+100*s.datasetIndex),a}},plugins:{aspectRatio:5/3,layout:{padding:{top:32}},elements:{line:{fill:!1,tension:.4}},datalabels:{borderRadius:4,color:"white",font:{weight:"bold"},formatter:Math.round,padding:6},legend:{position:"bottom",display:!0},title:{display:!0,text:String(i).toUpperCase(),font:{weight:"bold"},fontSize:16}}},this.valueBarsChart=new j.kL(this.valueBarsCanvas2.nativeElement,{type:"bar",data:{labels:this.vgraf2.labels,datasets:this.vgraf2.dataset},options:o})}ionViewWillEnter(){!1===this.buscanoorden&&(0===this.inicio?this.inicio=1:(this.inicio=0,this.pideregistros0()))}setCurrentLocationa33(){return(0,b.mG)(this,void 0,void 0,function*(){var i;i=yield this.authenticationService.getGPS(),this.geoposiciontxt=i.length>0?i[0].la+"\xac"+i[0].ln:""})}s2ab(i){let o=new ArrayBuffer(i.length),e=new Uint8Array(o);for(let s=0;s<i.length;s++)e[s]=255&i.charCodeAt(s);return o}exportarexcel(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("tipo_descarga"),inputs:[{name:"myInput",type:"radio",label:this.authenticationService.datraduccion("en_columnas"),value:"1"},{name:"myInput",type:"radio",label:this.authenticationService.datraduccion("en_unafila"),value:"2"}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:o=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:o=>{this.authenticationService.getReg(this.filtroottt+"\xb0"+o,"frmmovils",0).then(e=>{this.efecto=1;const s=w.utils.book_new();s.SheetNames.push(this.nidformulario);const u=w.utils.aoa_to_sheet(e);s.Sheets[this.nidformulario]=u;const l=w.write(s,{bookType:"xlsx",type:this.platform.is("android")?"base64":"binary"});W.saveAs(new Blob([this.s2ab(l)],{type:"application/octet-stream"}),this.nidformulario+".xlsx")},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")})}}]})).present()})}graf(i){this.currentGraf=i.detail.value}graf2(i){this.currentGraf2=i.detail.value}filterContacts(i){this.lastid="",this.items=[],this.numeroderegistros=0,this.buscanoorden=!1;const o=i.detail.value;this.currentSegment=o,"dashboard"===this.currentSegment?(this.createBarChart(""),this.pideregistros(o,this.misactividades,"formularioprocesodash")):this.pideregistros(o,this.misactividades,"formularioproceso")}pideregistros0(){return(0,b.mG)(this,void 0,void 0,function*(){this.lastid="",this.items=[],this.numeroderegistros=0,this.buscanoorden=!1,this.pideregistros(this.currentSegment,this.misactividades,"dashboard"===this.currentSegment?"formularioprocesodash":"formularioproceso")})}daactoresingles(i){let o;for(let e=0;e<this.actorcorreo.length;e++)if(this.actorcorreo[e].nombre===i){o=this.actorcorreo[e].nombre2;break}return o}daactividadingres(i){let o;for(let e=0;e<this.actividades.length;e++)if(this.actividades[e].nombre===i){o=this.actividades[e].nombre2;break}return o}daactividadsiguiente(i,o){let e;for(let s=0;s<o.length;s++)if(o[s]._id===i){e=o[s];break}return e}daactividadanterior(i,o){let e;for(let s=0;s<o.length;s++)if(o[s]._id===i){e=o[s-1];break}return e}dausuariogrupos(i,o){let e="";for(let s=0;s<i.length;s++)for(let a=0;a<i[s].usuarios.length;a++)if(i[s].usuarios[a].email===o){e=e+i[s]._id+"\xb0";break}return e}pideregistros(i,o,e){this.efecto=0;var s=e;let a=[];for(var r=0;r<o.length;r++)a.push(o[r]);let u="",l="",d=0;if(0===a.length)a.push("123,"),this.permisosorden.acciones="false";else for(var n=0;n<this.actividades.length;n++)for(r=0;r<a.length;r++)if(this.actividades[n]._id===a[r]&&"FINAL"!==this.actividades[n].clase&&0!==n&&(this.actanteriore=this.daactividadanterior(this.actividades[n]._id,this.actividades),"ASIGNACI\xd3N"==this.actanteriore.tipo)){for(var p=this.actorcorreo,g=0,f=0;f<p.length;f++)p[f].idpapa==this.actividades[n]._id&&String(p[f].correousuarios).indexOf(this.userinfo[0]._id)>0&&(g=1);1===g&&(d=1,a.splice(r,1))}if("Ver solo los mios"===this.verregistros||void 0===this.verregistros){for(a.length>0&&"123,"===a[0]&&this.actividadpublicas.length>0&&(a.splice(0,1),this.permisosorden.acciones="true"),n=0;n<this.actividadpublicas.length;n++)""!==this.actividadpublicas[n]&&a.push(this.actividadpublicas[n]);for(n=0;n<this.otrasact.length;n++)a.push(this.otrasact[n]);u=a+"\xac"+this.grupousuario+"/"+s+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.gLimit+"\xb0"+this.page+"\xb0"+this.lastid+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),l=a+"\xac"+this.grupousuario+"/"+s+"2/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),this.filtroottt=a+"\xac"+this.grupousuario+"/formularioexcelproceso/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email+"\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje()}else if("Ver bandeja entrada de proceso"===this.verregistros){for(n=0;n<this.otrasact.length;n++)a.push(this.otrasact[n]);0===a.length&&a.push("123,"),u=a+"\xac"+this.grupousuario+"/"+s+"/"+this.userinfo[0].idempresa._id+"\xb0todosmios\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.gLimit+"\xb0"+this.page+"\xb0"+this.lastid+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),l=a+"\xac"+this.grupousuario+"/"+s+"2/"+this.userinfo[0].idempresa._id+"\xb0todosmios\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),this.filtroottt=a+"\xac"+this.grupousuario+"/formularioexcelproceso/"+this.userinfo[0].idempresa._id+"\xb0todosmios\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje()}else u=a+"\xac"+this.grupousuario+"/"+s+"/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.gLimit+"\xb0"+this.page+"\xb0"+this.lastid+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),l=a+"\xac"+this.grupousuario+"/"+s+"2/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje(),this.filtroottt=a+"\xac"+this.grupousuario+"/formularioexcelproceso/"+this.userinfo[0].idempresa._id+"\xb0todos\xb0"+i+"\xb0"+this.idllave+"\xb0"+this.userinfo[0]._id+"\xb0"+d+"\xb0"+this.filtroextra+"\xb0"+this.authenticationService.getlenguaje();this.vgraf=[],this.filtrouna=u.replace("formularioproceso","formularioprocesosolouna"),this.inicio=0,this.authenticationService.getReg(u,"frmmovils",0).then(_=>{var Z;this.efecto=1,Z=_,this.inicio=1;for(var y=0;y<Z.length;y++)this.items.push(Z[y]);if(this.numeroderegistros=this.items.length,this.itemsList=this.items,(""!==this.searchQuery||void 0!==this.searchQuery)&&this.searchList(),this.lastid=this.items.length>0?this.items[this.items.length-1]._id:"","formularioprocesodash"===s){this.vgraf=_,this.totalgraf1=0;for(var S=0;S<this.vgraf.tabla.length;S++)this.totalgraf1=this.totalgraf1+this.vgraf.tabla[S].cantidad;this.createBarChart(""),this.vgraf2=[],this.authenticationService.getReg(l,"frmmovils",0).then(x=>{this.efecto=1,this.vgraf2=x,this.totalgraf2=0;for(var A=0;A<this.vgraf2.tabla.length;A++)this.totalgraf2=this.totalgraf2+this.vgraf2.tabla[A].cantidad;this.createBarChart2("")},x=>{this.authenticationService.presentAlert(x.error,this.msg,"")})}},_=>{this.authenticationService.presentAlert(_.error,this.msg,"")})}str2DOMElement(i){var o=document.createElement("iframe");o.style.display="none",document.body.appendChild(o),o.contentDocument.open(),o.contentDocument.write(i),o.contentDocument.close();var e=o.contentDocument.body.firstChild;return document.body.removeChild(o),e}bajarexcel(i,o,e){var s='<table id="excel-table" border="1">';if(1===e||2===e){s+=' <tr><td contenteditable="true" colspan="1">Categoria</td><td contenteditable="true" colspan="1">Estado</td><td contenteditable="true" colspan="1">Cantidad</td></tr> ';for(var a=0;a<o.length;a++)s=s+' <tr><td contenteditable="true" colspan="1">'+o[a].grupo+'</td><td contenteditable="true" colspan="1">'+o[a].subgrupo+'</td><td contenteditable="true" colspan="1">'+o[a].cantidad+"</td></tr> "}this.authenticationService.bajarexcel(s+="</table>",i+"-"+this.nidformulario+".xlsx")}trackItems(i,o){return o.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(i,o){return i.filter(e=>e.nombre.toLowerCase().includes(o.toLowerCase()))}otrasop(i){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("ingrese_detalle"),inputs:this.items2,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:e=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:e=>{const s=e.split("\xb0");"Check List Detalle"===s[4]?this.combodatoscheck0(this.idformulario,i,s[0],s[3]):this.authenticationService.getReg(s[1],"frmmovils",0).then(a=>{this.authenticationService.getReg(s[1]+"/formulariocamposver/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(r=>{const u=[];u.push({tabla:this.nidformulario,idtabla:this.idformulario,item:i}),this.router.navigate(["formulariomovilsd2ListPage"],{state:{variables:this.variables,permisosorden:this.permisosorden,user:null,idllave0:i._id,idllave:a[0]._id,datat:r,verregistros:this.verregistros,idcategoria:a[0].categoria,idcampo:s[0],idformulario:a[0]._id,nidformulario:a[0].nombre,regitrosacumulados:u,tipo2:a[0].tipo2,ejecuta:a[0].ejecuta,ejecutainicio:a[0].ejecutainicio,ejecutaactualiza:a[0].ejecutaactualiza,ejecutaelimina:a[0].ejecutaelimina,tipo:a[0].tipo,title:s[3],rranterior:"",rrsiguiente:"3",noreg:s[5],geoposicion:a[0].geoposicion}})},r=>{this.authenticationService.presentAlert(r.error,this.msg,"")})},a=>{this.authenticationService.presentAlert(a.error,this.msg,"")})}}]})).present()})}deleteRecord(i){return(0,b.mG)(this,void 0,void 0,function*(){"Formulario"===this.tipo2&&(yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:this.authenticationService.datraduccion("cancelar"),cssClass:"secondary",handler:e=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:()=>{this.authenticationService.deleteReg(i._id+"/"+this.idformulario+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na","frmmovils").then(s=>{this.pideregistros(this.currentSegment,this.misactividades,"formularioproceso")},s=>{this.authenticationService.presentAlert(s.error,this.msg,"")})}}]})).present())})}updateRecord(i,o,e){return(0,b.mG)(this,void 0,void 0,function*(){if("Formulario"===this.tipo2){const s=[];s.push({tabla:this.nidformulario,idtabla:this.idformulario,item:i}),this.actualizasi=!0,this.router.navigate(["formulariomovilsproceso2CreatePage"],{state:{variables:this.variables,record:i,title:this.nidformulario,datat:this.cmpver,record2:{vistahtml:o,vistahtml2:e,vista:this.currentSegment,permisosorden:this.permisosorden,actorcorreo:this.actorcorreo,acciones:this.acciones,actividades:this.actividades,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,geoposicion:this.geoposicion,regitrosacumulados:s,idcategoria:this.idcategoria,idformulario:this.idformulario,nidformulario:this.nidformulario},userinfo:this.userinfo}})}})}buscarpororden(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("buscar_orden2"),inputs:[{name:"campo2",label:this.authenticationService.datraduccion("buscar"),placeholder:""}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:o=>{}},{text:this.authenticationService.datraduccion("buscar"),handler:o=>{this.itemsList=[],this.efecto=0,"Administrador"!==this.rolexx?this.authenticationService.getReg(this.filtrouna+"\xb0"+o.campo2+"\xb0"+this.userinfo[0].idempresa.sicorrelativo,"frmmovils",0).then(e=>{this.efecto=1,this.items=e,this.items.length>0&&(this.buscanoorden=!0),this.itemsList=this.items}):this.authenticationService.getReg(this.idllave+"/"+o.campo2+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.idllave+"\xb0"+this.userinfo[0].idempresa.sicorrelativo+"/unregistromovilnoorden","frmmovils",0).then(e=>{this.efecto=1,this.items=e,this.items.length>0&&(this.buscanoorden=!0),this.itemsList=this.items})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}ejecutaoperacion(){return(0,b.mG)(this,void 0,void 0,function*(){})}addRecord(){return(0,b.mG)(this,void 0,void 0,function*(){if("true"===this.geoposicion&&""===this.geoposiciontxt)return void this.authenticationService.presentAlert("Este formulario requiere la geoposici\xf3n antes de crear registros",this.msg,"");var i="modal-fullscreen";"true"===this.variables.modopc&&(this.platform.is("desktop")||this.platform.is("mobileweb"))&&(i="modal-fullscreen2");const o=[];o.push({tabla:this.nidformulario,idtabla:this.idformulario,item:null});const e=yield this.modalController.create({component:H,swipeToClose:!0,id:"modal-filters",presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:null,title:this.nidformulario,record2:{vista:this.currentSegment,actorcorreo:this.actorcorreo,acciones:this.acciones,actividades:this.actividades,tipo:this.tipo,tipo2:this.tipo2,ejecuta:this.ejecuta,ejecutainicio:this.ejecutainicio,ejecutaactualiza:this.ejecutaactualiza,ejecutaelimina:this.ejecutaelimina,geoposiciontxt:this.geoposiciontxt,regitrosacumulados:o,idcategoria:this.idcategoria,idformulario:this.idformulario,nidformulario:this.nidformulario},userinfo:this.userinfo},cssClass:i});return e.onWillDismiss().then(s=>{"close"!==s.data&&this.pideregistros0()}),yield e.present()})}loadData(i){setTimeout(()=>{i.target.complete(),this.page++,this.pideregistros(this.currentSegment,this.misactividades,"dashboard"===this.currentSegment?"formularioprocesodash":"formularioproceso")},500)}isIos(){const i=window;return i&&i.Ionic&&"ios"===i.Ionic.mode}buscartipo(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("porque_grupo"),inputs:this.camposbusqueda2,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:o=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:o=>{if("No aplicar filtro"===o)this.searchQuery="";else if("Actividad"===o){var e=[];this.authenticationService.getReg("todos/actividadprocesos/"+this.userinfo[0].idempresa._id+"/"+this.idformulario,"frmactividads",0).then(s=>{var a;a=s;for(var r=0;r<a.length;r++){var u=a[r].nombre;"es"!==this.authenticationService.getlenguaje()&&(u=a[r].nombre2),e.push({name:"myInput",type:"radio",label:u,value:a[r].nombre})}this.buscartipo1(e,"Actividad")})}else e=[],this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.idformulario,"frmactors",0).then(a=>{var r;r=a;for(var u=0;u<r.length;u++){var l=r[u].nombre;"es"!==this.authenticationService.getlenguaje()&&(l=r[u].nombre2),e.push({name:"myInput",type:"radio",label:l,value:r[u].nombre})}this.buscartipo1(e,"Actorees")})}}]})).present()})}buscartipo1(i,o){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("selecciona2")+" "+o+"?",inputs:i,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:s=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:s=>{this.searchQuery=s}}]})).present()})}showFilter(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("buscar_campos"),inputs:this.camposbusqueda,buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:o=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:o=>{this.showFilter2(o)}}]})).present()})}showFilter2(i){return(0,b.mG)(this,void 0,void 0,function*(){const o=i.split("\xb0");yield(yield this.alertController.create({cssClass:"my-custom-class",header:this.authenticationService.datraduccion("info_buscar"),inputs:[{name:"campo2",label:this.authenticationService.datraduccion("buscar"),placeholder:"",type:o[1]}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),role:"cancel",cssClass:"secondary",handler:s=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:s=>{this.itemsList=[],this.efecto=0;let a="";a="Administrador"!==this.rolexx?"Ver solo los mios"===this.verregistros?this.idformulario+"/"+o[0]+"/"+s.campo2+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.userinfo[0].email:this.idformulario+"/"+o[0]+"/"+s.campo2+"/"+this.userinfo[0].idempresa._id+"\xb0todos":this.filtrouna.replace("formularioprocesosolouna","formularioprocesosololike")+"\xb0"+o[0]+"\xb0"+s.campo2,this.lastid="",this.items=[],this.numeroderegistros=0,this.authenticationService.getReg(a,"frmmovils",0).then(r=>{this.efecto=1,this.items=r,this.itemsList=this.items,this.numeroderegistros=this.items.length},r=>{this.authenticationService.presentAlert(r.error,this.msg,"")})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}davaloritem(i,o){let e="";return e=i[o]?i[o]:"",e}combodatoscheck0(i,o,e,s){return(0,b.mG)(this,void 0,void 0,function*(){let a="";this.authenticationService.getReg(i+"\xb0"+e+"/formulariodidxx/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(r=>{let u;const l=r;for(let n=0;n<l.length;n++){let g="";g="true"===l[n].required?" (*)":" (Opcional)";let f="";f=this.davaloritem(o,l[n].name),f||(f=""),"label"===l[n].type&&(f=".");var d=l[n].title+g;if("es"!==this.authenticationService.getlenguaje()&&l[n].title2&&(d=l[n].title2+g),"select3"===l[n].type){const _=[];_.push({tabla:this.nidformulario,idtabla:this.idformulario,item:o}),a=l[n].name,u={idformulario:i,idcampo:l[n]._id,actualiza:"si",verregistros:l[n].verregistros,order:l[n].order,name:l[n].name,type:l[n].type,required:l[n].required,placeholder:l[n].placeholder,display:l[n].display,filtrocampo2:l[n].filtrocampo2,selected:l[n].selected,disabled:l[n].disabled,hidden:l[n].hidden,title:d,position:l[n].position,labelsizefondt:l[n].labelsizefondt,default:"",valor:f,default2:l[n].default2,default3:l[n].default3,copiarencampo:l[n].copiarencampo,categoria:l[n].categoria,combofijo:l[n].combofijo,idcadmovil:"",options:l[n].options,fondoetiqueta:l[n].fondoetiqueta,coloretiqueta:l[n].coloretiqueta,blike:l[n].blike,rangomin:l[n].rangomin,rangomax:l[n].rangomax,rangostep:l[n].rangostep,alfatypo2:l[n].alfatypo2,alfatypo:l[n].alfatypo,idfrmconsulta:l[n].idfrmconsulta,idfrmconsulta2:l[n].idfrmconsulta2,idfrmconsulta2origen:l[n].idfrmconsulta2origen,idfrmconsultaorigen:l[n].idfrmconsultaorigen,usarunaves:l[n].usarunaves,idcampofiltro:l[n].idcampofiltro,idcampofiltro2:l[n].idcampofiltro2,idcampofiltromanual:l[n].idcampofiltromanual,regitrosacumulados:_,frmapirest:l[n].frmapirest,idfrmconsultaorigenpapa:l[n].idfrmconsultaorigenpapa,idfrmconsultaorigenpapa2:l[n].idfrmconsultaorigenpapa2,idcampofiltropapa:l[n].idcampofiltropapa}}}this.combodatoscheck(u,o,s,e,a)},r=>{this.authenticationService.presentAlert(r.error,"Precauci\xf3n","")})})}combodatoscheck(i,o,e,s,a){return(0,b.mG)(this,void 0,void 0,function*(){const r=o;if("no"===i.actualiza)for(let p=0;p<i.regitrosacumulados.length;p++)i.regitrosacumulados[p].idtabla===i.idformulario&&(i.regitrosacumulados[p].item=r);let u="sigraba";"true"===i.combofijo&&(u="nograba");let l="";i.idfrmconsulta&&""!==i.idfrmconsulta.id&&void 0!==i.idfrmconsulta.id&&(l="si",u="formulariott");let d="",n="";if(void 0!==i.idcampofiltro&&""!==i.idcampofiltro){for(let p=0;p<i.regitrosacumulados.length;p++)if(i.regitrosacumulados[p].idtabla===i.idfrmconsultaorigen.id){for(let g=0;g<i.idfrmconsulta2origen.length;g++)n=n+i.idfrmconsulta2origen[g].nombre.split("\xb0")[1]+": "+i.regitrosacumulados[p].item[i.idfrmconsulta2origen[g].nombre.split("\xb0")[0]]+"\xb0";n=n+"\xac"+i.regitrosacumulados[p].item._id}d="Ver solo los mios"===i.verregistros?""!==i.idcampofiltropapa&&void 0!==i.idcampofiltropapa?'"'+i.idcampofiltropapa+'":"'+n+'","usuarionew":"'+this.userinfo[0].email+'"':'"'+i.idcampofiltro+'":"'+n+'","usuarionew":"'+this.userinfo[0].email+'"':""!==i.idcampofiltropapa&&void 0!==i.idcampofiltropapa?'"'+i.idcampofiltropapa+'":"'+n+'"':n.indexOf("\xac")>=0?'"'+i.idcampofiltro+'":{"$regex" : "'+n.split("\xac")[1]+'", "$options" : "i"}':'"'+i.idcampofiltro+'":"'+n+'"'}else"Ver solo los mios"===i.verregistros&&(d='"usuarionew":"'+this.userinfo[0].email+'"');if(""===i.idcampofiltropapa||void 0===i.idcampofiltropapa){const p=yield this.modalController.create({component:k.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{idcampofiltromanual:i.idcampofiltromanual,tipo:i.type,filtrar:d,idfrmconsulta:i.idfrmconsulta,idfrmconsulta2:i.idfrmconsulta2,siformulatiot:l,variables:"",userinfo:"",grabax:u,vector:i.options,record2:null,op:i.idcampo,frm:"frmcats",idllave:"",titlex:"Buscar "+e},cssClass:"modal-fullscreen"});return p.onWillDismiss().then(g=>{let f=[];f=g,"close"!==f.data&&f.data&&this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(_=>{const Z={},y=_;for(let x=0;x<y.length;x++){const A=y[x].name;let T="";T=this.davaloritem(o,y[x].name),T||(T=""),""!==y[x].type&&(Z[A]=A===a?f.data.correos:T)}Z.usuarioup=this.userinfo[0].email,Z.idempresa=this.userinfo[0].idempresa._id;const S={idcat:this.idcategoria,idform:this.idformulario,estructura:Z,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza en formulario movil"}};S&&this.authenticationService.createRegmovil(o._id,S,"frmmovils").then(x=>{this.pideregistros(this.currentSegment,this.misactividades,"formularioproceso")},x=>{this.authenticationService.presentAlert(x.error,"Precauci\xf3n","")})})}),yield p.present()}this.authenticationService.getReg(i.idfrmconsultaorigenpapa.id+"/"+d+"/"+this.userinfo[0].idempresa._id+"/formulariosolopapa/","frmmovils",0).then(g=>(0,b.mG)(this,void 0,void 0,function*(){let f=[];"select3"===i.type&&(f=i.valor.split("\xac")[0].split(";"));const _=yield this.modalController.create({component:k.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{idcampofiltromanual:i.idcampofiltromanual,tarraymultiple:f,tipo:i.type,idpapafiltro:g[0]._id,filtrar:d,idfrmconsulta:i.idfrmconsulta,idfrmconsulta2:i.idfrmconsulta2,siformulatiot:l,variables:"",userinfo:"",grabax:u,vector:i.options,record2:null,op:i.idcampo,frm:"frmcats",idllave:"",titlex:"Buscar "+i.title},cssClass:"modal-fullscreen"});return _.onWillDismiss().then(Z=>{let y=[];y=Z,"close"!==y.data&&y.data&&this.authenticationService.getReg(this.idformulario+"/formulariod/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(S=>{const x={},A=S;for(let C=0;C<A.length;C++){const U=A[C].name;let I="";I=this.davaloritem(o,A[C].name),I||(I=""),""!==A[C].type&&(x[U]=U===a?y.data.correos+"\xac"+y.data.correos2:I)}x.usuarioup=this.userinfo[0].email,x.idempresa=this.userinfo[0].idempresa._id;const T={idcat:this.idcategoria,idform:this.idformulario,estructura:x,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza en formulario movil"}};T&&this.authenticationService.createRegmovil(o._id,T,"frmmovils").then(C=>{this.pideregistros(this.currentSegment,this.misactividades,"formularioproceso")},C=>{this.authenticationService.presentAlert(C.error,"Precauci\xf3n","")})})}),yield _.present()}),g=>{this.authenticationService.presentAlert(g.error,"Precauci\xf3n","")})})}}return c.\u0275fac=function(i){return new(i||c)(t.Y36(h.t4),t.Y36(h.jP),t.Y36(N.F0),t.Y36(G.$),t.Y36(h.Br),t.Y36(L.sK),t.Y36(h.IN))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-formulariomovilsdproceso-list"]],viewQuery:function(i,o){if(1&i&&(t.Gf(it,7),t.Gf(et,7),t.Gf(ot,7),t.Gf(h.ju,5)),2&i){let e;t.iGM(e=t.CRH())&&(o.barChart=e.first),t.iGM(e=t.CRH())&&(o.valueBarsCanvas=e.first),t.iGM(e=t.CRH())&&(o.valueBarsCanvas2=e.first),t.iGM(e=t.CRH())&&(o.infiniteScroll=e.first)}},decls:84,vars:56,consts:[["color","primary"],["slot","start"],["defaultHref","formulariomovilsdprocesoListPage"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","qr-code-outline"],[3,"title","click",4,"ngIf"],["slot","icon-only","name","refresh-circle-outline"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"title","ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],["class","call-to-action-col",4,"ngIf"],["color","secondary","value","activa",3,"ionChange"],["value","activa","checked","",4,"ngIf"],["value","ejecutadas",4,"ngIf"],["value","cerrada",4,"ngIf"],["value","dashboard",4,"ngIf"],["sticky",""],[4,"ngIf"],[1,"ion-no-padding",3,"hidden"],["size","12"],["sticky","true","color","light"],[2,"width","100%","text-align","center"],["value","grafica",3,"ionChange"],["value","grafica","checked",""],[1,"ion-text-wrap"],["value","datos"],[3,"hidden"],["valueBarsCanvas",""],[3,"click"],["class","pure-table",4,"ngIf"],["valueBarsCanvas2",""],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["slot","icon-only","name","download-outline"],["slot","icon-only","name","add"],["slot","icon-only","name","play-skip-forward-circle-outline"],["slot","icon-only","name","filter-outline"],["slot","icon-only","name","search-circle-outline"],["value","activa","checked",""],["value","ejecutadas"],["value","cerrada"],["value","dashboard"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",3,"click",4,"ngFor","ngForOf"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated",3,"click"],["size","8","color","secondary"],["color","secondary",1,"ion-text-wrap"],["color","secondary",4,"ngIf"],["color","secondary"],["size","4"],[2,"float","left","align-items","left","display","flex","font-size","12px"],["name","chevron-forward","size","small",4,"ngIf"],[1,"ion-text-wrap",2,"margin","-15px auto"],[1,"first-letter",3,"innerHtml"],["name","chevron-forward","size","small"],[1,"pure-table"],[4,"ngFor","ngForOf"],["data-label","Check"],["color","light","slot","start"],["data-label","Categoria"],["data-label","Estado"],["data-label","Cantidad"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["width","67%"],[1,"empty-list-message"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"]],template:function(i,o){1&i&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4),t.TgZ(7,"ion-button",5),t.NdJ("click",function(){return o.buscarqr()}),t.ALo(8,"translate"),t._UZ(9,"ion-icon",6),t.qZA(),t.YNc(10,at,3,3,"ion-button",7),t.YNc(11,st,3,3,"ion-button",7),t.YNc(12,rt,3,3,"ion-button",7),t.YNc(13,nt,3,3,"ion-button",7),t.TgZ(14,"ion-button",5),t.NdJ("click",function(){return o.pideregistros0()}),t.ALo(15,"translate"),t._UZ(16,"ion-icon",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"ion-toolbar",9),t.TgZ(18,"ion-row",10),t.TgZ(19,"ion-col"),t.TgZ(20,"ion-searchbar",11),t.NdJ("ngModelChange",function(s){return o.searchQuery=s})("ionChange",function(){return o.searchList()}),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.TgZ(22,"ion-col",12),t.TgZ(23,"ion-button",13),t.NdJ("click",function(){return o.showFilter()}),t.ALo(24,"translate"),t._UZ(25,"ion-icon",14),t.qZA(),t.qZA(),t.YNc(26,lt,4,3,"ion-col",15),t.qZA(),t.qZA(),t.TgZ(27,"ion-segment",16),t.NdJ("ionChange",function(s){return o.filterContacts(s)}),t.YNc(28,ct,4,3,"ion-segment-button",17),t.YNc(29,dt,4,3,"ion-segment-button",18),t.YNc(30,ut,4,3,"ion-segment-button",19),t.YNc(31,ht,4,3,"ion-segment-button",20),t.qZA(),t.TgZ(32,"ion-item-divider",21),t.YNc(33,mt,4,7,"ion-label",22),t.YNc(34,ft,4,7,"ion-label",22),t.qZA(),t.qZA(),t.TgZ(35,"ion-content"),t.YNc(36,At,2,1,"ion-list",22),t.TgZ(37,"div",23),t.TgZ(38,"ion-grid"),t.TgZ(39,"ion-row"),t.TgZ(40,"ion-col",24),t.TgZ(41,"ion-item-divider",25),t.TgZ(42,"div",26),t.TgZ(43,"strong"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"ion-segment",27),t.NdJ("ionChange",function(s){return o.graf(s)}),t.TgZ(47,"ion-segment-button",28),t.TgZ(48,"ion-label",29),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.TgZ(51,"ion-segment-button",30),t.TgZ(52,"ion-label",29),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(55,"canvas",31,32),t.TgZ(57,"ion-button",33),t.NdJ("click",function(){return o.bajarexcel("Ordenes por actividad",o.vgraf.tabla,1)}),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.YNc(60,St,24,14,"table",34),t.qZA(),t.TgZ(61,"ion-col",24),t.TgZ(62,"ion-item-divider",25),t.TgZ(63,"div",26),t.TgZ(64,"strong"),t._uU(65,"ORDENES POR ASIGNADO"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(66,"ion-segment",27),t.NdJ("ionChange",function(s){return o.graf2(s)}),t.TgZ(67,"ion-segment-button",28),t.TgZ(68,"ion-label",29),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.qZA(),t.TgZ(71,"ion-segment-button",30),t.TgZ(72,"ion-label",29),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(75,"canvas",31,35),t.TgZ(77,"ion-button",33),t.NdJ("click",function(){return o.bajarexcel("Ordenes por asignado",o.vgraf2.tabla,2)}),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.YNc(80,qt,24,14,"table",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(81,jt,2,2,"ion-list",22),t.YNc(82,It,3,3,"h3",36),t.YNc(83,Nt,3,3,"ion-infinite-scroll",37),t.qZA()),2&i&&(t.xp6(5),t.hij(" ",o.tituloxx," "),t.xp6(2),t.s9C("title",t.lcZ(8,34,"buscar_porqr")),t.xp6(3),t.Q6J("ngIf","Si"===o.userinfo[0].idempresa.siexporta),t.xp6(1),t.Q6J("ngIf","Formulario"===o.tipo2&&"true"===o.permisosorden.pcreacion),t.xp6(1),t.Q6J("ngIf","Formulario"!==o.tipo2),t.xp6(1),t.Q6J("ngIf","true"===o.permisosorden.filtrarordentipo),t.xp6(1),t.MGl("title"," ",t.lcZ(15,36,"REFRESCARM"),""),t.xp6(6),t.s9C("title",o.idformulario),t.s9C("placeholder",t.lcZ(21,38,"BUSCARM")),t.Q6J("ngModel",o.searchQuery),t.xp6(3),t.MGl("title"," ",t.lcZ(24,40,"FILTROM"),""),t.xp6(3),t.Q6J("ngIf","true"===o.permisosorden.filtrarorden),t.xp6(2),t.Q6J("ngIf","true"===o.permisosorden.activas),t.xp6(1),t.Q6J("ngIf","true"===o.permisosorden.ejecutadas),t.xp6(1),t.Q6J("ngIf","true"===o.permisosorden.cerradas),t.xp6(1),t.Q6J("ngIf","true"===o.permisosorden.dashboard),t.xp6(2),t.Q6J("ngIf","dashboard"!==o.currentSegment),t.xp6(1),t.Q6J("ngIf","dashboard"===o.currentSegment),t.xp6(2),t.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"dashboard"!==o.currentSegment),t.xp6(1),t.Q6J("hidden","dashboard"!==o.currentSegment),t.xp6(7),t.hij(" ",t.lcZ(45,42,"ordenes_poractividad"),""),t.xp6(5),t.hij(" ",t.lcZ(50,44,"grafica"),""),t.xp6(4),t.hij(" ",t.lcZ(54,46,"datos"),""),t.xp6(2),t.Q6J("hidden","grafica"!==o.currentGraf),t.xp6(3),t.Oqu(t.lcZ(59,48,"Excel")),t.xp6(2),t.Q6J("ngIf","datos"===o.currentGraf),t.xp6(9),t.hij(" ",t.lcZ(70,50,"grafica"),""),t.xp6(4),t.hij(" ",t.lcZ(74,52,"datos"),""),t.xp6(2),t.Q6J("hidden","grafica"!==o.currentGraf2),t.xp6(3),t.Oqu(t.lcZ(79,54,"Excel")),t.xp6(2),t.Q6J("ngIf","datos"===o.currentGraf2),t.xp6(1),t.Q6J("ngIf",0===o.efecto),t.xp6(1),t.Q6J("ngIf",0===(null==o.itemsList?null:o.itemsList.length)),t.xp6(1),t.Q6J("ngIf","dashboard"!==o.currentSegment))},directives:[h.Gu,h.sr,h.Sm,h.oU,h.cs,h.wd,h.YG,h.gu,P.O5,h.Nd,h.wI,h.VI,h.j9,q.JJ,q.On,h.cJ,h.QI,h.rH,h.W2,h.jY,h.GO,h.Q$,h.q_,P.sg,h.Ie,h.uN,h.yp,K.B,h.ju,h.MB],pipes:[L.X$,P.uU,tt.A],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}.image[_ngcontent-%COMP%]{height:5vw;width:5vw;border:2px solid #fff;border-radius:50%;box-shadow:0 0 5px gray;display:block}.circle-pic[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10%;display:block}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0}ion-label[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin:0}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;width:95%}ion-item[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{float:right;align-items:center;display:flex;font-size:10px}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#c9c9ca}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:15px;margin-right:8px;font-weight:400}ion-item[_ngcontent-%COMP%]   ion-note.md[_ngcontent-%COMP%]{margin-right:14px}.dot[_ngcontent-%COMP%]{display:block;height:12px;width:12px;border-radius:50%;align-self:start;margin:16px 10px 16px 16px}.dot-unread[_ngcontent-%COMP%]{background:var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:11px;font-weight:400}"]}),c})();var Ot=v(76398),wt=v(81656),Ut=v(22753),Mt=v(92448);let Gt=(()=>{class c{}return c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[[P.ez,h.Pc,R.K,q.u5,q.UX,E.YL,Ot.N,Ut.D,N.Bz.forChild([{path:"",component:kt}]),L.aw.forChild(),wt.YZ,Mt.D]]}),c})()}}]);