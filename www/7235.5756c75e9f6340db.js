"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7235],{17235:(Et,b,m)=>{m.r(b),m.d(b,{frmmovildListPageModule:()=>St});var n=m(23349),A=m(55787),Z=m(69808),F=m(33678),_=m(51062),l=m(93075),N=m(36351),d=m(70655),T=m(68554),U=m(4707),q=m(63814),C=m(15190),h=m(26388),t=m(5e3);const y=["inputId"],k=["fotoa"];function I(i,s){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"ion-icon",31),t.TgZ(2,"span"),t._uU(3,"Ingrese cardinalidad"),t.qZA(),t.qZA())}function w(i,s){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"ion-icon",31),t.TgZ(2,"span"),t._uU(3,"Ingrese tipo campo"),t.qZA(),t.qZA())}function L(i,s){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"ion-icon",31),t.TgZ(2,"span"),t._uU(3,"Ingrese etiqueta"),t.qZA(),t.qZA())}function J(i,s){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"ion-icon",31),t.TgZ(2,"span"),t._uU(3,"Ingrese nombre"),t.qZA(),t.qZA())}function M(i,s){1&i&&(t.TgZ(0,"div",30),t._UZ(1,"ion-icon",31),t.TgZ(2,"span"),t._uU(3,"Ingrese estado"),t.qZA(),t.qZA())}let x=(()=>{class i{constructor(e,o,r,a,c){this.modalController=e,this.translateService=o,this.authenticationService=r,this.navParams=a,this.actionSheetController=c,this.vtype=[],this.vposition=[],this.vlabelsizefondt=[],this.vcategoria=[],this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.apifoto=this.authenticationService.getapifoto()}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.navParams.get("userinfo"),this.idllave=this.navParams.get("idllave"),this.tituloxx=this.navParams.get("title"),this.Form=new l.cw({type:new l.NI("",l.kI.required),required:new l.NI(""),name:new l.NI("",l.kI.compose([l.kI.required,l.kI.pattern("[a-zA-Z0-9]*")])),title:new l.NI("",l.kI.required),title2:new l.NI("",l.kI.required),display:new l.NI("",l.kI.required),orden:new l.NI("",l.kI.required),estado:new l.NI("",l.kI.required)}),null==this.navParams.get("record")?(this.Form.controls.display.setValue("true"),this.Form.controls.required.setValue("true"),this.translateService.get("NUEVOM").subscribe(e=>{this.tituloxx=e+" "+this.tituloxx,this.lpermiso=e}),this.authenticationService.getReg(this.idllave+"/tipofrmorden","frmmovilds",0).then(e=>{if(e){const o=e;setTimeout(()=>{this.Form.controls.orden.setValue(Number(o.orden))},600)}},e=>{this.authenticationService.presentAlert(e.error,"Precauci\xf3n","")})):(this.translateService.get("ACTUALIZAM").subscribe(e=>{this.tituloxx=e+" "+this.tituloxx,this.lpermiso=e}),this._ID=this.navParams.data.record._id,this.Form.controls.type.setValue(this.navParams.data.record.type),this.Form.controls.required.setValue(this.navParams.data.record.required),this.Form.controls.name.setValue(this.navParams.data.record.name),this.Form.controls.title.setValue(this.navParams.data.record.title),this.Form.controls.title2.setValue(this.navParams.data.record.title2),this.Form.controls.orden.setValue(Number(this.navParams.data.record.order)),this.Form.controls.estado.setValue(this.navParams.data.record.estado),this.Form.controls.display.setValue(this.navParams.data.record.display))}runTimeChange(e){let o=e.target.value;null==this.navParams.get("record")&&(o=o.replace(/\s/g,""),this.Form.controls.name.setValue(String(this.authenticationService.noTilde(o.trim().toLowerCase()))))}submitForm(){var e="stacked";""===this.Form.controls.type.value&&(e="na");const o={idempresa:this.userinfo[0].idempresa._id,idmovil:this.idllave,nombre:this.Form.controls.name.value+this.Form.controls.type.value,type:this.Form.controls.type.value,name:this.Form.controls.name.value,required:""+this.Form.controls.required.value,display:""+this.Form.controls.display.value,title:this.Form.controls.title.value,title2:this.Form.controls.title2.value,order:this.Form.controls.orden.value,estado:this.Form.controls.estado.value,position:e,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}};null==this.navParams.get("record")?o&&this.authenticationService.createReg("",o,"frmmovilds").then(r=>{!this.Form.valid||this.modalController.dismiss("ok")},r=>{this.authenticationService.presentAlert(r.error,"Precauci\xf3n","")}):o&&this.authenticationService.createReg(this._ID+"/2",o,"frmmovilds").then(r=>{!this.Form.valid||this.modalController.dismiss("ok")},r=>{this.authenticationService.presentAlert(r.error,"Precauci\xf3n","")})}dacomponente(e,o){return(0,d.mG)(this,void 0,void 0,function*(){let r="";"ubicacion"===e&&(r=this.Form.controls.ubicacion.value);const a=yield this.modalController.create({component:q.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:r},cssClass:"modal-fullscreen"});return a.onWillDismiss().then(c=>{"close"===c.data||("direccion"===e?this.Form.controls.direccion.setValue(c.data.direccion):this.Form.controls.ubicacion.setValue(c.data.direccion+" {"+c.data.la+"\xb0"+c.data.lo+"}"))}),yield a.present()})}takePicture(e){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield h.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:h.dk.DataUrl,source:h.oK.Camera});this.authenticationService.generateFromImage(o.dataUrl,200,200,.5,r=>{"fotoa"===e&&(this.fotoimg=r,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})})}uploadPWA2(e,o){o&&o.length>0&&this.firstFileToBase64(o[0]).then(a=>{this.authenticationService.generateFromImage(a,200,300,.5,c=>{"fotoa"===e&&(this.fotoimg=c,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})},a=>{"fotoa"===e&&(this.fotoimg=null,this.Form.controls.foto1.setValue(""))})}uploadPWA(e){if("fotoa"===e){if(null==this.fotoa)return;this.uploadPWA2(e,this.fotoa.nativeElement.files)}}firstFileToBase64(e){return new Promise((o,r)=>{const a=new FileReader;a&&null!=e?(a.readAsDataURL(e),a.onload=()=>{o(a.result)},a.onerror=c=>{r(c)}):r(new Error("No file found"))})}takePicture2(e){return(0,d.mG)(this,void 0,void 0,function*(){"fotoa"===e&&this.fotoa.nativeElement.click()})}fotodatos(e){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(e)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(e)}}]})).present()})}combodatoslimpia(e){return(0,d.mG)(this,void 0,void 0,function*(){this.Form.controls[e].setValue("")})}combodatos(e,o,r,a,c,p){return(0,d.mG)(this,void 0,void 0,function*(){const v=yield this.modalController.create({component:C.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{grabax:p,variables:this.variables,userinfo:this.userinfo,record2:null,op:o,frm:r,idllave:this.idllave,titlex:"Buscar "+c},cssClass:"modal-fullscreen"});return v.onWillDismiss().then(f=>{let g=[];g=f,"close"!==g.data&&this.Form.controls[a].setValue(g.data?g.data.nombre:"")}),yield v.present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.IN),t.Y36(_.sK),t.Y36(T.$),t.Y36(n.X1),t.Y36(n.BX))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-frmmovild-create"]],viewQuery:function(e,o){if(1&e&&(t.Gf(y,5),t.Gf(k,7)),2&e){let r;t.iGM(r=t.CRH())&&(o.inputElement=r.first),t.iGM(r=t.CRH())&&(o.fotoa=r.first)}},decls:80,vars:12,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],[1,"input-item"],["position","floating"],["color","danger"],["type","number","inputMode","Number","clearInput","true","formControlName","orden","required",""],[1,"error-container"],["class","error-message",4,"ngIf"],["inputMode","text","clearInput","true","formControlName","type","required","",1,"ion-text-end",3,"readonly","click"],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],["inputMode","text","clearInput","true","formControlName","title","required","",3,"ionInput"],["inputMode","text","clearInput","true","formControlName","title2","required",""],["inputMode","text","clearInput","true","formControlName","name","required",""],["color","secondary","clearInput","true","formControlName","display"],["color","secondary","clearInput","true","formControlName","required"],["formControlName","estado",3,"placeholder"],["text-wrap","","value","Activo"],["text-wrap","","value","Inactivo"],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"disabled","click"],[1,"error-message"],["name","information-circle-outline"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"ion-header"),t.TgZ(2,"ion-toolbar",1),t.TgZ(3,"ion-buttons",2),t.TgZ(4,"ion-button",3),t.NdJ("click",function(){return o.dismissModal()}),t._UZ(5,"ion-icon",4),t.qZA(),t.qZA(),t.TgZ(6,"ion-title",5),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-content",6),t.TgZ(9,"section",7),t.TgZ(10,"ion-list",8),t.TgZ(11,"ion-item",9),t.TgZ(12,"ion-label",10),t._uU(13,"Cardinalidad"),t.TgZ(14,"ion-text",11),t._uU(15,"*"),t.qZA(),t.qZA(),t._UZ(16,"ion-input",12),t.qZA(),t.TgZ(17,"div",13),t.YNc(18,I,4,0,"div",14),t.qZA(),t.TgZ(19,"ion-item",9),t.TgZ(20,"ion-label"),t._uU(21,"Tipo Campo"),t.TgZ(22,"ion-text",11),t._uU(23,"*"),t.qZA(),t.qZA(),t.TgZ(24,"ion-input",15),t.NdJ("click",function(){return o.combodatos(1,"1000-type-plantilla","frmcats","type","Type","sigraba")}),t.qZA(),t.TgZ(25,"ion-buttons",2),t.TgZ(26,"ion-button",16),t.NdJ("click",function(){return o.combodatoslimpia("type")}),t._UZ(27,"ion-icon",17),t.qZA(),t.TgZ(28,"ion-button",18),t.NdJ("click",function(){return o.combodatos(1,"1000-type-plantilla","frmcats","type","Type","sigraba")}),t._UZ(29,"ion-icon",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.YNc(31,w,4,0,"div",14),t.qZA(),t.TgZ(32,"ion-item",9),t.TgZ(33,"ion-label",10),t._uU(34,"Etiqueta"),t.TgZ(35,"ion-text",11),t._uU(36,"*"),t.qZA(),t.qZA(),t.TgZ(37,"ion-input",20),t.NdJ("ionInput",function(a){return o.runTimeChange(a)}),t.qZA(),t.qZA(),t.TgZ(38,"div",13),t.YNc(39,L,4,0,"div",14),t.qZA(),t.TgZ(40,"ion-item",9),t.TgZ(41,"ion-label",10),t._uU(42,"Etiqueta (ingles)"),t.TgZ(43,"ion-text",11),t._uU(44,"*"),t.qZA(),t.qZA(),t._UZ(45,"ion-input",21),t.qZA(),t.TgZ(46,"ion-item",9),t.TgZ(47,"ion-label",10),t._uU(48,"Nombre"),t.TgZ(49,"ion-text",11),t._uU(50,"*"),t.qZA(),t.qZA(),t._UZ(51,"ion-input",22),t.qZA(),t.TgZ(52,"div",13),t.YNc(53,J,4,0,"div",14),t.qZA(),t.TgZ(54,"ion-item",9),t.TgZ(55,"ion-label"),t._uU(56,"Mostrar campo en consola"),t.qZA(),t._UZ(57,"ion-toggle",23),t.qZA(),t.TgZ(58,"ion-item",9),t.TgZ(59,"ion-label"),t._uU(60,"Requerido"),t.qZA(),t._UZ(61,"ion-toggle",24),t.qZA(),t.TgZ(62,"ion-item",9),t.TgZ(63,"ion-label"),t._uU(64,"Estado"),t.TgZ(65,"ion-text",11),t._uU(66,"*"),t.qZA(),t.qZA(),t.TgZ(67,"ion-select",25),t.ALo(68,"translate"),t.TgZ(69,"ion-select-option",26),t._uU(70,"Activo"),t.qZA(),t.TgZ(71,"ion-select-option",27),t._uU(72,"Inactivo"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",13),t.YNc(74,M,4,0,"div",14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"ion-footer"),t.TgZ(76,"ion-row",28),t.TgZ(77,"ion-col"),t.TgZ(78,"ion-button",29),t.NdJ("click",function(){return o.submitForm()}),t._uU(79,"CREAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.Form),t.xp6(7),t.Oqu(o.tituloxx),t.xp6(11),t.Q6J("ngIf",o.Form.get("orden").hasError("required")&&(o.Form.get("orden").dirty||o.Form.get("orden").touched)),t.xp6(6),t.Q6J("readonly",!0),t.xp6(7),t.Q6J("ngIf",o.Form.get("type").hasError("required")&&(o.Form.get("type").dirty||o.Form.get("type").touched)),t.xp6(8),t.Q6J("ngIf",o.Form.get("title").hasError("required")&&(o.Form.get("title").dirty||o.Form.get("title").touched)),t.xp6(14),t.Q6J("ngIf",o.Form.get("name").hasError("required")&&(o.Form.get("name").dirty||o.Form.get("name").touched)),t.xp6(14),t.s9C("placeholder",t.lcZ(68,10,"SELECTVALORM")),t.xp6(7),t.Q6J("ngIf",o.Form.get("estado").hasError("required")&&(o.Form.get("estado").dirty||o.Form.get("estado").touched)),t.xp6(4),t.Q6J("disabled",!o.Form.valid))},directives:[l._Y,l.JL,l.sg,n.Gu,n.sr,n.Sm,n.YG,n.gu,n.wd,n.W2,n.q_,n.Ie,n.Q$,n.yW,n.pK,n.as,l.JJ,l.u,l.Q7,Z.O5,n.j9,n.ho,n.w,n.t9,n.QI,n.n0,n.fr,n.Nd,n.wI],pipes:[_.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var V=m(68562);const Q=["inputId"],S=["fotoa"];function Y(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Propiedades campo Alfanumerico "),t.qZA(),t.qZA())}function E(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Tipo campo"),t.qZA(),t.TgZ(3,"ion-select",51),t.ALo(4,"translate"),t.TgZ(5,"ion-select-option",52),t._uU(6,"text"),t.qZA(),t.TgZ(7,"ion-select-option",53),t._uU(8,"password"),t.qZA(),t.TgZ(9,"ion-select-option",54),t._uU(10,"email"),t.qZA(),t.TgZ(11,"ion-select-option",55),t._uU(12,"tel"),t.qZA(),t.TgZ(13,"ion-select-option",56),t._uU(14,"url"),t.qZA(),t.TgZ(15,"ion-select-option",57),t._uU(16,"numeric"),t.qZA(),t.TgZ(17,"ion-select-option",58),t._uU(18,"decimal"),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.s9C("placeholder",t.lcZ(4,1,"SELECTVALORM")))}function R(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Tipo campo"),t.qZA(),t.TgZ(3,"ion-select",59),t.ALo(4,"translate"),t.TgZ(5,"ion-select-option",60),t._uU(6,"Normal"),t.qZA(),t.TgZ(7,"ion-select-option",61),t._uU(8,"Pasar a mayusculas"),t.qZA(),t.TgZ(9,"ion-select-option",62),t._uU(10,"Pasar a minusculas"),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.s9C("placeholder",t.lcZ(4,1,"SELECTVALORM")))}function G(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Propiedades campo Rango "),t.qZA(),t.qZA())}function D(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Valor Minimo"),t.qZA(),t._UZ(3,"ion-input",63),t.qZA())}function O(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Valor Maximo"),t.qZA(),t._UZ(3,"ion-input",64),t.qZA())}function H(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Valor Step (rango)"),t.qZA(),t._UZ(3,"ion-input",65),t.qZA())}function j(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Propiedades campo select (combo) "),t.qZA(),t.qZA())}function z(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Categoria"),t.qZA(),t.TgZ(3,"ion-input",66),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"categoria-plantilla","frmcats","categoria","Categoria","sigraba")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("categoria","sigraba")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"categoria-plantilla","frmcats","categoria","Categoria","sigraba")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function B(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Mostrar solo valores en Combo (No crear, actualizar o eliminar) "),t.qZA(),t._UZ(3,"ion-toggle",67),t.qZA())}function W(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Propiedades campo select (combo) , Asociar formularios de base de datos "),t.qZA(),t.qZA())}function $(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Propiedades campo select (Check List / Detalle) , Asociar formularios de base de datos "),t.qZA(),t.qZA())}function X(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-item-divider",46),t.TgZ(2,"ion-label",11),t._uU(3," 1. Consulta maestra para combo "),t.qZA(),t.qZA(),t.qZA())}function K(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Como ver los registros"),t.TgZ(3,"ion-text",68),t._uU(4,"*"),t.qZA(),t.qZA(),t.TgZ(5,"ion-select",69,15),t.ALo(7,"translate"),t.TgZ(8,"ion-select-option",70),t._uU(9,"Ver Todos"),t.qZA(),t.TgZ(10,"ion-select-option",71),t._uU(11,"Ver solo los mios"),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(5),t.s9C("placeholder",t.lcZ(7,1,"SELECTVALORM")))}function tt(i,s){1&i&&(t.TgZ(0,"div",72),t._UZ(1,"ion-icon",73),t.TgZ(2,"span"),t._uU(3,"Ingrese como ver los registros"),t.qZA(),t.qZA())}function ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",11),t._uU(2,"Asociar Formulario"),t.qZA(),t.TgZ(3,"ion-input",74),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta","Formulario","formulariot")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmconsulta","formulariot")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta","Formulario","formulariot")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function et(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Vizualizar Campos"),t.qZA(),t.TgZ(3,"ion-input",75),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta2","Formulario","formulariot2")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmconsulta2","formulariot2")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta2","Formulario","formulariot2")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function it(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,'Filtro manual ("campo":"valor","campo2":"valor2")'),t.qZA(),t._UZ(3,"ion-textarea",76),t.qZA())}function rt(i,s){1&i&&(t.TgZ(0,"ion-item",77),t.TgZ(1,"ion-item-divider",78),t.TgZ(2,"ion-label",11),t._uU(3," 2. Relacionar campo existente en consulta master (si no existe usar campo manual). "),t.qZA(),t.qZA(),t.qZA())}function at(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",79),t.TgZ(1,"ion-label",11),t._uU(2,"Campo de consulta master"),t.qZA(),t.TgZ(3,"ion-input",80),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantillafiltro","frmcats","frmcampofiltro","Formulario","formulariot2")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmcampofiltro","formulariot2")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantillafiltro","frmcats","frmcampofiltro","Formulario","formulariot2")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function nt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Relacionar campo manual "),t.qZA(),t._UZ(3,"ion-input",81),t.qZA())}function lt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-item-divider",46),t.TgZ(2,"ion-label",11),t._uU(3," 3. Formato para relacionar campo del paso 2 / 5. "),t.qZA(),t.qZA(),t.qZA())}function st(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Formulario filtro"),t.qZA(),t.TgZ(3,"ion-input",82),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsultaorigen","Formulario","formulariot")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmconsultaorigen","formulariot")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsultaorigen","Formulario","formulariot")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Campos filtro"),t.qZA(),t.TgZ(3,"ion-input",83),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta2origen","Formulario","formulariot2")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmconsulta2origen","formulariot2")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsulta2origen","Formulario","formulariot2")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function mt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-item-divider",46),t.TgZ(2,"ion-label",11),t._uU(3," 4. Filtrar este formulario para la consulta maestra ( idpapa=idformulario seleccionado) "),t.qZA(),t.qZA(),t.qZA())}function ut(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Formulario filtro papa"),t.qZA(),t.TgZ(3,"ion-input",84),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsultaorigenpapa","Formulario","formulariot")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmconsultaorigenpapa","formulariot")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantilla","frmcats","frmconsultaorigenpapa","Formulario","formulariot")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function dt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",85),t._uU(2,"Filtro extendidos (_id,*,6190074fb28df824d4ccb59b(frm ids papas),_idpapa) "),t.qZA(),t._UZ(3,"ion-input",86),t.qZA())}function pt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-item-divider",46),t.TgZ(2,"ion-label",11),t._uU(3," 5. Necesito que la consulta anterior , relacione un campo existente de otro formulario de trabajo seleccionado en el paso 3 (tiene prioridad sobre el paso 2) "),t.qZA(),t.qZA(),t.qZA())}function ft(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label"),t._uU(2,"Campos filtro papa"),t.qZA(),t.TgZ(3,"ion-input",87),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantillafiltro","frmcats","frmcampofiltropapa","Formulario","formulariot2")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("frmcampofiltropapa","formulariot2")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"formulario-plantillafiltro","frmcats","frmcampofiltropapa","Formulario","formulariot2")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function gt(i,s){1&i&&(t.TgZ(0,"ion-item-divider",10),t.TgZ(1,"ion-label",11),t._uU(2," Formulario Detalle "),t.qZA(),t.qZA())}function _t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",79),t.TgZ(1,"ion-label"),t._uU(2," Seleccione formulario "),t.qZA(),t.TgZ(3,"ion-input",88),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"categoria-plantilla","frmcats","idformdetalle","idformdetalle","formulariodetalle")}),t.qZA(),t.TgZ(4,"ion-buttons",2),t.TgZ(5,"ion-button",30),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatoslimpia("idformdetalle","formulariodetalle")}),t._UZ(6,"ion-icon",31),t.qZA(),t.TgZ(7,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().combodatos(1e3,"categoria-plantilla","frmcats","idformdetalle","idformdetalle","formulariodetalle")}),t._UZ(8,"ion-icon",33),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Q6J("readonly",!0))}function ht(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Ejecutar funci\xf3n ApiRest "),t.qZA(),t._UZ(3,"ion-input",89),t.qZA())}function Zt(i,s){1&i&&(t.TgZ(0,"ion-item",12),t.TgZ(1,"ion-label",13),t._uU(2,"Maximo No de registros"),t.qZA(),t._UZ(3,"ion-input",90),t.qZA())}let vt=(()=>{class i{constructor(e,o,r,a,c){this.modalController=e,this.translateService=o,this.authenticationService=r,this.navParams=a,this.actionSheetController=c,this.vtype=[],this.vposition=[],this.vlabelsizefondt=[],this.vcategoria=[],this.variables=[],this.userinfo=[],this.tituloxx="",this.idformdetalle="",this.vgrupo=[],this.idfrmconsulta2=[],this.idfrmconsulta2origen=[],this.apifoto=this.authenticationService.getapifoto()}ngAfterViewInit(){setTimeout(()=>{this.inputElement.setFocus()},400)}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.navParams.get("userinfo"),this.idllave=this.navParams.get("idllave"),this.tituloxx=this.navParams.get("title"),this.Form=new l.cw({required:new l.NI(""),placeholder:new l.NI(""),placeholder2:new l.NI(""),display:new l.NI(""),selected:new l.NI(""),disabled:new l.NI(""),hidden:new l.NI(""),position:new l.NI(""),idformdetalle:new l.NI(""),labelsizefondt:new l.NI(""),categoria:new l.NI(""),combofijo:new l.NI(""),blike:new l.NI(""),fondoetiqueta:new l.NI(""),coloretiqueta:new l.NI(""),rangomin:new l.NI(""),rangomax:new l.NI(""),rangostep:new l.NI(""),alfatypo:new l.NI(""),alfatypo2:new l.NI(""),default:new l.NI(""),default2:new l.NI(""),default3:new l.NI(""),copiarencampo:new l.NI(""),frmapirest:new l.NI(""),respuesta:new l.NI(""),valor:new l.NI(""),frmconsulta:new l.NI(""),frmconsulta2:new l.NI(""),usarunaves:new l.NI(""),usarunaves2:new l.NI(""),frmconsultaorigen:new l.NI(""),frmconsulta2origen:new l.NI(""),frmcampofiltro:new l.NI(""),frmcampofiltro2:new l.NI(""),idcampofiltromanual:new l.NI(""),verregistros:new l.NI(""),frmconsultaorigenpapa:new l.NI(""),frmconsultaorigenpapa2:new l.NI(""),frmcampofiltropapa:new l.NI(""),maxnumregistros:new l.NI(""),geoposicion:new l.NI("")}),this.translateService.get("ACTUALIZAM").subscribe(e=>{this.tituloxx=e+" "+this.tituloxx,this.lpermiso=e}),this._ID=this.navParams.data.record._id,this.tcampo=this.navParams.data.record.title+" ["+this.navParams.data.record.type+"]",this.tipocampo=this.navParams.data.record.type,this.Form.controls.required.setValue(this.navParams.data.record.required),this.Form.controls.placeholder.setValue(this.navParams.data.record.placeholder),this.Form.controls.placeholder2.setValue(this.navParams.data.record.placeholder2),this.Form.controls.display.setValue(this.navParams.data.record.display),this.Form.controls.selected.setValue(this.navParams.data.record.selected),this.Form.controls.disabled.setValue(this.navParams.data.record.disabled),this.Form.controls.hidden.setValue(this.navParams.data.record.hidden),this.Form.controls.geoposicion.setValue(this.navParams.data.record.geoposicion),this.Form.controls.verregistros.setValue(this.navParams.data.record.verregistros),this.Form.controls.maxnumregistros.setValue(this.navParams.data.record.maxnumregistros),this.Form.controls.usarunaves.setValue(this.navParams.data.record.usarunaves),this.Form.controls.usarunaves2.setValue(this.navParams.data.record.usarunaves2?this.navParams.data.record.usarunaves2:"false"),this.navParams.data.record.idformdetalle?(this.Form.controls.idformdetalle.setValue(this.navParams.data.record.idformdetalle),this.Form.controls.idformdetalle.setValue(this.navParams.data.record.idformdetalle.nombre),this.idformdetalle=this.navParams.data.record.idformdetalle.id):(this.Form.controls.idformdetalle.setValue(""),this.idformdetalle=""),this.Form.controls.position.setValue(this.navParams.data.record.position),this.Form.controls.labelsizefondt.setValue(this.navParams.data.record.labelsizefondt),this.Form.controls.categoria.setValue(this.navParams.data.record.categoria),this.Form.controls.combofijo.setValue(this.navParams.data.record.combofijo),this.Form.controls.blike.setValue(this.navParams.data.record.blike),this.Form.controls.fondoetiqueta.setValue(this.navParams.data.record.fondoetiqueta),this.Form.controls.coloretiqueta.setValue(this.navParams.data.record.coloretiqueta),this.Form.controls.rangomin.setValue(this.navParams.data.record.rangomin),this.Form.controls.rangomax.setValue(this.navParams.data.record.rangomax),this.Form.controls.rangostep.setValue(this.navParams.data.record.rangostep),this.Form.controls.alfatypo.setValue(this.navParams.data.record.alfatypo),this.Form.controls.alfatypo2.setValue(this.navParams.data.record.alfatypo2?this.navParams.data.record.alfatypo2:"normal"),this.Form.controls.default.setValue(this.navParams.data.record.default),this.Form.controls.default2.setValue(this.navParams.data.record.default2),this.Form.controls.default3.setValue(this.navParams.data.record.default3),this.Form.controls.copiarencampo.setValue(this.navParams.data.record.copiarencampo),this.Form.controls.frmapirest.setValue(this.navParams.data.record.frmapirest),this.Form.controls.respuesta.setValue(this.navParams.data.record.respuesta),this.Form.controls.valor.setValue(this.navParams.data.record.valor),this.Form.controls.idcampofiltromanual.setValue(this.navParams.data.record.idcampofiltromanual),this.Form.controls.frmcampofiltro.setValue(this.navParams.data.record.idcampofiltro),this.Form.controls.frmcampofiltro2.setValue(this.navParams.data.record.idcampofiltro2),this.Form.controls.frmcampofiltropapa.setValue(this.navParams.data.record.idcampofiltropapa),this.navParams.data.record.idfrmconsulta?(this.idfrmconsulta=this.navParams.data.record.idfrmconsulta.id,this.Form.controls.frmconsulta.setValue(this.navParams.data.record.idfrmconsulta.nombre)):(this.Form.controls.frmconsulta.setValue(""),this.idfrmconsulta=""),this.navParams.data.record.idfrmconsulta2&&(this.idfrmconsulta2=this.navParams.data.record.idfrmconsulta2),this.navParams.data.record.nombreconsulta2&&(this.Form.controls.frmconsulta2.setValue(this.navParams.data.record.nombreconsulta2),this.nombreconsulta2=this.navParams.data.record.nombreconsulta2),this.navParams.data.record.idfrmconsultaorigen?(this.idfrmconsultaorigen=this.navParams.data.record.idfrmconsultaorigen.id,this.Form.controls.frmconsultaorigen.setValue(this.navParams.data.record.idfrmconsultaorigen.nombre)):(this.Form.controls.frmconsultaorigen.setValue(""),this.idfrmconsultaorigen=""),this.navParams.data.record.idfrmconsultaorigenpapa?(this.idfrmconsultaorigenpapa=this.navParams.data.record.idfrmconsultaorigenpapa.id,this.Form.controls.frmconsultaorigenpapa.setValue(this.navParams.data.record.idfrmconsultaorigenpapa.nombre)):(this.Form.controls.frmconsultaorigenpapa.setValue(""),this.idfrmconsultaorigenpapa=""),this.Form.controls.frmconsultaorigenpapa2.setValue(this.navParams.data.record.idfrmconsultaorigenpapa2?this.navParams.data.record.idfrmconsultaorigenpapa2:""),this.navParams.data.record.idfrmconsulta2origen&&(this.idfrmconsulta2origen=this.navParams.data.record.idfrmconsulta2origen),this.navParams.data.record.nombreconsulta2origen&&(this.Form.controls.frmconsulta2origen.setValue(this.navParams.data.record.nombreconsulta2origen),this.nombreconsulta2origen=this.navParams.data.record.nombreconsulta2origen)}submitForm(){this.authenticationService.createReg(this._ID,{idempresa:this.userinfo[0].idempresa._id,idmovil:this.idllave,required:this.Form.controls.required.value,placeholder:this.Form.controls.placeholder.value,placeholder2:this.Form.controls.placeholder2.value,title:this.navParams.data.record.title,display:this.Form.controls.display.value,selected:this.Form.controls.selected.value,disabled:this.Form.controls.disabled.value,hidden:this.Form.controls.hidden.value,position:this.Form.controls.position.value,labelsizefondt:this.Form.controls.labelsizefondt.value,categoria:this.Form.controls.categoria.value,combofijo:this.Form.controls.combofijo.value,blike:this.Form.controls.blike.value,idformdetalle:{id:this.idformdetalle,nombre:this.Form.controls.idformdetalle.value},fondoetiqueta:this.Form.controls.fondoetiqueta.value,coloretiqueta:this.Form.controls.coloretiqueta.value,rangomin:this.Form.controls.rangomin.value,rangomax:this.Form.controls.rangomax.value,rangostep:this.Form.controls.rangostep.value,alfatypo:this.Form.controls.alfatypo.value,alfatypo2:this.Form.controls.alfatypo2.value,default:this.Form.controls.default.value,default2:this.Form.controls.default2.value,default3:this.Form.controls.default3.value,copiarencampo:this.Form.controls.copiarencampo.value,frmapirest:this.Form.controls.frmapirest.value,respuesta:this.Form.controls.respuesta.value,verregistros:this.Form.controls.verregistros.value,geoposicion:this.Form.controls.geoposicion.value,maxnumregistros:this.Form.controls.maxnumregistros.value,idcampofiltro:this.Form.controls.frmcampofiltro.value,idcampofiltro2:this.Form.controls.frmcampofiltro2.value,idcampofiltropapa:this.Form.controls.frmcampofiltropapa.value,valor:this.Form.controls.valor.value,idfrmconsulta:{id:this.idfrmconsulta,nombre:this.Form.controls.frmconsulta.value},idfrmconsulta2:this.idfrmconsulta2,nombreconsulta2:this.nombreconsulta2,usarunaves:this.Form.controls.usarunaves.value,usarunaves2:this.Form.controls.usarunaves2.value,idfrmconsultaorigen:{id:this.idfrmconsultaorigen,nombre:this.Form.controls.frmconsultaorigen.value},idfrmconsulta2origen:this.idfrmconsulta2origen,nombreconsulta2origen:this.nombreconsulta2origen,idcampofiltromanual:this.Form.controls.idcampofiltromanual.value,idfrmconsultaorigenpapa2:this.Form.controls.frmconsultaorigenpapa2.value,idfrmconsultaorigenpapa:{id:this.idfrmconsultaorigenpapa,nombre:this.Form.controls.frmconsultaorigenpapa.value},bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}},"frmmovilds").then(o=>{!this.Form.valid||this.modalController.dismiss("ok")},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}dacomponente2(e,o,r){return(0,d.mG)(this,void 0,void 0,function*(){const a=yield this.modalController.create({component:V.E,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,tipo:this.navParams.data.record.type,record2:{titulo:o,opcion:r}},cssClass:"modal-fullscreen"});return a.onWillDismiss().then(c=>{"close"===c.data||this.Form.controls[e].setValue(c.data.color)}),yield a.present()})}dacomponente(e,o){return(0,d.mG)(this,void 0,void 0,function*(){let r="";"ubicacion"===e&&(r=this.Form.controls.ubicacion.value);const a=yield this.modalController.create({component:q.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:r},cssClass:"modal-fullscreen"});return a.onWillDismiss().then(c=>{"close"===c.data||("direccion"===e?this.Form.controls.direccion.setValue(c.data.direccion):this.Form.controls.ubicacion.setValue(c.data.direccion+" {"+c.data.la+"\xb0"+c.data.lo+"}"))}),yield a.present()})}takePicture(e){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield h.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:h.dk.DataUrl,source:h.oK.Camera});this.authenticationService.generateFromImage(o.dataUrl,200,200,.5,r=>{"fotoa"===e&&(this.fotoimg=r,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})})}uploadPWA2(e,o){o&&o.length>0&&this.firstFileToBase64(o[0]).then(a=>{this.authenticationService.generateFromImage(a,200,300,.5,c=>{"fotoa"===e&&(this.fotoimg=c,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})},a=>{"fotoa"===e&&(this.fotoimg=null,this.Form.controls.foto1.setValue(""))})}uploadPWA(e){if("fotoa"===e){if(null==this.fotoa)return;this.uploadPWA2(e,this.fotoa.nativeElement.files)}}firstFileToBase64(e){return new Promise((o,r)=>{const a=new FileReader;a&&null!=e?(a.readAsDataURL(e),a.onload=()=>{o(a.result)},a.onerror=c=>{r(c)}):r(new Error("No file found"))})}takePicture2(e){return(0,d.mG)(this,void 0,void 0,function*(){"fotoa"===e&&this.fotoa.nativeElement.click()})}fotodatos(e){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(e)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(e)}}]})).present()})}combodatoslimpia(e,o){return(0,d.mG)(this,void 0,void 0,function*(){this.Form.controls[e].setValue(""),"formulariodetalle"===o&&(this.idformdetalle=""),"formulariot"===o&&("frmconsulta"===e&&(this.idfrmconsulta=""),"frmconsultaorigen"===e&&(this.idfrmconsultaorigen=""),"frmconsultaorigenpapa"===e&&(this.idfrmconsultaorigenpapa="")),"formulariot2"===o&&("frmconsulta2"===e&&(this.idfrmconsulta2=[],this.nombreconsulta2=""),"frmcampofiltromanual"===e&&(this.idfrmcampofiltro2=""),"frmconsulta2origen"===e&&(this.idfrmconsulta2origen=[],this.nombreconsulta2origen=""))})}combodatos(e,o,r,a,c,p){return(0,d.mG)(this,void 0,void 0,function*(){let v=o;var f,g;1e3===e&&(v=this._ID),"frmcampofiltro2"===a&&(f=this.idfrmcampofiltro2),("frmconsulta"===a||"frmconsulta2"===a||"frmcampofiltro"===a)&&(f=this.idfrmconsulta,g=this.idfrmconsulta2),("frmconsultaorigen"===a||"frmconsulta2origen"===a)&&(f=this.idfrmconsultaorigen,g=this.idfrmconsulta2origen),"frmconsultaorigenpapa"===a&&(f=this.idfrmconsultaorigenpapa),"frmcampofiltropapa"===a&&(f=this.idfrmconsultaorigenpapa);const P=yield this.modalController.create({component:C.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{catalogot:o,tarraymultiple:g,grabax:p,variables:this.variables,userinfo:this.userinfo,record2:null,op:v,frm:r,idllave:f,titlex:"Buscar "+c},cssClass:"modal-fullscreen"});return P.onWillDismiss().then(Yt=>{let u=[];u=Yt,"close"!==u.data&&(u.data?("formulariodetalle"===p&&(this.Form.controls[a].setValue(u.data.nombre),this.idformdetalle=u.data._id),"formulariot"===p&&("frmconsulta"===a&&(this.Form.controls[a].setValue(u.data.nombre),this.idfrmconsulta=u.data._id),"frmconsultaorigen"===a&&(this.Form.controls[a].setValue(u.data.nombre),this.idfrmconsultaorigen=u.data._id),"frmconsultaorigenpapa"===a&&(this.Form.controls[a].setValue(u.data.nombre),this.idfrmconsultaorigenpapa=u.data._id)),"formulariot2"===p&&("frmconsulta2"===a&&(this.idfrmconsulta2=u.data._id,this.nombreconsulta2=u.data.nombres,this.Form.controls[a].setValue(u.data.nombres)),"frmconsulta2origen"===a&&(this.idfrmconsulta2origen=u.data._id,this.nombreconsulta2origen=u.data.nombres,this.Form.controls[a].setValue(u.data.nombres)),"frmcampofiltro"===a&&this.Form.controls[a].setValue(u.data.nombre),"frmcampofiltropapa"===a&&this.Form.controls[a].setValue(u.data.nombre))):(this.Form.controls[a].setValue(""),this.idformdetalle=""))}),yield P.present()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.IN),t.Y36(_.sK),t.Y36(T.$),t.Y36(n.X1),t.Y36(n.BX))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-frmmovild2-create"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Q,5),t.Gf(S,7)),2&e){let r;t.iGM(r=t.CRH())&&(o.inputElement=r.first),t.iGM(r=t.CRH())&&(o.fotoa=r.first)}},decls:166,vars:41,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],[1,"my-label18"],["color","secondary"],[1,"ion-text-wrap"],[1,"input-item"],["position","floating"],["inputMode","text","clearInput","true","formControlName","default"],["inputId",""],["inputMode","text","clearInput","true","formControlName","copiarencampo"],["inputMode","text","clearInput","true","formControlName","default2"],["inputMode","text","clearInput","true","formControlName","default3"],["inputMode","text","clearInput","true","formControlName","placeholder"],["inputMode","text","clearInput","true","formControlName","placeholder2"],["color","secondary","clearInput","true","formControlName","display"],["color","secondary","clearInput","true","formControlName","required"],["color","secondary","clearInput","true","formControlName","selected"],["color","secondary","clearInput","true","formControlName","disabled"],["color","secondary","clearInput","true","formControlName","hidden"],["color","secondary","clearInput","true","formControlName","usarunaves"],["color","secondary","clearInput","true","formControlName","usarunaves2"],["color","secondary","clearInput","true","formControlName","geoposicion"],["inputMode","text","clearInput","true","formControlName","position",1,"ion-text-end",3,"readonly","click"],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],["inputMode","text","clearInput","true","formControlName","labelsizefondt",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","fondoetiqueta",3,"readonly"],["title","Seleccione color",3,"click"],["slot","icon-only","name","color-palette-outline"],["inputMode","text","clearInput","true","formControlName","coloretiqueta",3,"readonly"],["color","secondary","clearInput","true","formControlName","blike"],["color","secondary",4,"ngIf"],["class","input-item",4,"ngIf"],[1,"error-container"],["class","error-message",4,"ngIf"],["lines","full","class","input-item",4,"ngIf"],["class","input-item","text-wrap","",4,"ngIf"],["color","warning"],["inputMode","text","clearInput","true","formControlName","respuesta"],["type","number","inputMode","Number","clearInput","true","formControlName","valor"],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"disabled","click"],["formControlName","alfatypo",3,"placeholder"],["value","text"],["value","password"],["value","email"],["value","tel"],["value","url"],["value","numeric"],["value","decimal"],["formControlName","alfatypo2",3,"placeholder"],["value","normal"],["value","mayusculas"],["value","minusculas"],["type","number","inputMode","Number","clearInput","true","formControlName","rangomin"],["type","number","inputMode","Number","clearInput","true","formControlName","rangomax"],["type","number","inputMode","Number","clearInput","true","formControlName","rangostep"],["inputMode","text","clearInput","true","formControlName","categoria",1,"ion-text-end",3,"readonly","click"],["color","secondary","clearInput","true","formControlName","combofijo"],["color","danger"],["formControlName","verregistros",3,"placeholder"],["text-wrap","","value","Ver Todos"],["text-wrap","","value","Ver solo los mios"],[1,"error-message"],["name","information-circle-outline"],["inputMode","text","clearInput","true","formControlName","frmconsulta",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","frmconsulta2",1,"ion-text-end",3,"readonly","click"],["rows","4","inputMode","text","clearInput","true","formControlName","idcampofiltromanual"],["lines","full",1,"input-item"],["color","warning","text-wrap",""],["text-wrap","",1,"input-item"],["inputMode","text","clearInput","true","formControlName","frmcampofiltro",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","frmcampofiltro2"],["inputMode","text","clearInput","true","formControlName","frmconsultaorigen",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","frmconsulta2origen",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","frmconsultaorigenpapa",1,"ion-text-end",3,"readonly","click"],["position","floating",1,"ion-text-wrap"],["inputMode","text","clearInput","true","formControlName","frmconsultaorigenpapa2"],["inputMode","text","clearInput","true","formControlName","frmcampofiltropapa",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","idformdetalle",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","frmapirest"],["type","number","inputMode","Number","clearInput","true","formControlName","maxnumregistros"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"ion-header"),t.TgZ(2,"ion-toolbar",1),t.TgZ(3,"ion-buttons",2),t.TgZ(4,"ion-button",3),t.NdJ("click",function(){return o.dismissModal()}),t._UZ(5,"ion-icon",4),t.qZA(),t.qZA(),t.TgZ(6,"ion-title",5),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-content",6),t.TgZ(9,"section",7),t.TgZ(10,"ion-list",8),t.TgZ(11,"ion-item-divider",1),t.TgZ(12,"ion-label",9),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"ion-item-divider",10),t.TgZ(15,"ion-label",11),t._uU(16," Propiedades generales "),t.qZA(),t.qZA(),t.TgZ(17,"ion-item",12),t.TgZ(18,"ion-label",13),t._uU(19,"Valor default"),t.qZA(),t._UZ(20,"ion-input",14,15),t.qZA(),t.TgZ(22,"ion-item",12),t.TgZ(23,"ion-label",13),t._uU(24,"Copiar este valor en"),t.qZA(),t._UZ(25,"ion-input",16,15),t.qZA(),t.TgZ(27,"ion-item",12),t.TgZ(28,"ion-label",13),t._uU(29,"Obtener el valor de un campo del formulario"),t.qZA(),t._UZ(30,"ion-input",17,15),t.qZA(),t.TgZ(32,"ion-item",12),t.TgZ(33,"ion-label",13),t._uU(34,"Filtrar un valor del campo de formulario"),t.qZA(),t._UZ(35,"ion-input",18,15),t.qZA(),t.TgZ(37,"ion-item",12),t.TgZ(38,"ion-label",13),t._uU(39,"Placeholder"),t.qZA(),t._UZ(40,"ion-input",19),t.qZA(),t.TgZ(41,"ion-item",12),t.TgZ(42,"ion-label",13),t._uU(43,"Placeholder (ingles)"),t.qZA(),t._UZ(44,"ion-input",20),t.qZA(),t.TgZ(45,"ion-item",12),t.TgZ(46,"ion-label"),t._uU(47,"Mostrar campo en consola"),t.qZA(),t._UZ(48,"ion-toggle",21),t.qZA(),t.TgZ(49,"ion-item",12),t.TgZ(50,"ion-label"),t._uU(51,"Requerido"),t.qZA(),t._UZ(52,"ion-toggle",22),t.qZA(),t.TgZ(53,"ion-item",12),t.TgZ(54,"ion-label"),t._uU(55,"Selecciona"),t.qZA(),t._UZ(56,"ion-toggle",23),t.qZA(),t.TgZ(57,"ion-item",12),t.TgZ(58,"ion-label"),t._uU(59,"Desabilitado (solo lectura)"),t.qZA(),t._UZ(60,"ion-toggle",24),t.qZA(),t.TgZ(61,"ion-item",12),t.TgZ(62,"ion-label"),t._uU(63,"Visible"),t.qZA(),t._UZ(64,"ion-toggle",25),t.qZA(),t.TgZ(65,"ion-item",12),t.TgZ(66,"ion-label"),t._uU(67,"Validar este campo al crear registro (No repetido)"),t.qZA(),t._UZ(68,"ion-toggle",26),t.qZA(),t.TgZ(69,"ion-item",12),t.TgZ(70,"ion-label"),t._uU(71,"Validar este campo al crear registro (No repetido) Warning"),t.qZA(),t._UZ(72,"ion-toggle",27),t.qZA(),t.TgZ(73,"ion-item",12),t.TgZ(74,"ion-label"),t._uU(75,"Grabar Geoposici\xf3n"),t.qZA(),t._UZ(76,"ion-toggle",28),t.qZA(),t.TgZ(77,"ion-item",12),t.TgZ(78,"ion-label"),t._uU(79,"Posicion etiqueta"),t.qZA(),t.TgZ(80,"ion-input",29),t.NdJ("click",function(){return o.combodatos(1,"1000-position-plantilla","frmcats","position","Position","nograba")}),t.qZA(),t.TgZ(81,"ion-buttons",2),t.TgZ(82,"ion-button",30),t.NdJ("click",function(){return o.combodatoslimpia("position","nograba")}),t._UZ(83,"ion-icon",31),t.qZA(),t.TgZ(84,"ion-button",32),t.NdJ("click",function(){return o.combodatos(1,"1000-position-plantilla","frmcats","position","Position","nograba")}),t._UZ(85,"ion-icon",33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"ion-item",12),t.TgZ(87,"ion-label"),t._uU(88,"Tama\xf1o fondo etiqueta"),t.qZA(),t.TgZ(89,"ion-input",34),t.NdJ("click",function(){return o.combodatos(1,"1000-labelsizefondt-plantilla","frmcats","labelsizefondt","Labelsizefondt","nograba")}),t.qZA(),t.TgZ(90,"ion-buttons",2),t.TgZ(91,"ion-button",30),t.NdJ("click",function(){return o.combodatoslimpia("position","nograba")}),t._UZ(92,"ion-icon",31),t.qZA(),t.TgZ(93,"ion-button",32),t.NdJ("click",function(){return o.combodatos(1,"1000-labelsizefondt-plantilla","frmcats","labelsizefondt","Labelsizefondt","nograba")}),t._UZ(94,"ion-icon",33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"ion-item",12),t.TgZ(96,"ion-label",13),t._uU(97,"Color fondo etiqueta"),t.qZA(),t._UZ(98,"ion-input",35),t.TgZ(99,"ion-buttons",2),t.TgZ(100,"ion-button",36),t.NdJ("click",function(){return o.dacomponente2("fondoetiqueta","Color fondo etiqueta","fondo")}),t._UZ(101,"ion-icon",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(102,"ion-item",12),t.TgZ(103,"ion-label",13),t._uU(104,"Color letra etiqueta"),t.qZA(),t._UZ(105,"ion-input",38),t.TgZ(106,"ion-buttons",2),t.TgZ(107,"ion-button",36),t.NdJ("click",function(){return o.dacomponente2("coloretiqueta","Color letra etiqueta","color")}),t._UZ(108,"ion-icon",37),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"ion-item",12),t.TgZ(110,"ion-label"),t._uU(111,"Buscar por coincidencias (%like%)"),t.qZA(),t._UZ(112,"ion-toggle",39),t.qZA(),t.YNc(113,Y,3,0,"ion-item-divider",40),t.YNc(114,E,19,3,"ion-item",41),t.YNc(115,R,11,3,"ion-item",41),t.YNc(116,G,3,0,"ion-item-divider",40),t.YNc(117,D,4,0,"ion-item",41),t.YNc(118,O,4,0,"ion-item",41),t.YNc(119,H,4,0,"ion-item",41),t.YNc(120,j,3,0,"ion-item-divider",40),t.YNc(121,z,9,1,"ion-item",41),t.YNc(122,B,4,0,"ion-item",41),t.YNc(123,W,3,0,"ion-item-divider",40),t.YNc(124,$,3,0,"ion-item-divider",40),t.YNc(125,X,4,0,"ion-item",41),t.YNc(126,K,12,3,"ion-item",41),t.TgZ(127,"div",42),t.YNc(128,tt,4,0,"div",43),t.qZA(),t.YNc(129,ot,9,1,"ion-item",41),t.YNc(130,et,9,1,"ion-item",41),t.YNc(131,it,4,0,"ion-item",41),t.YNc(132,rt,4,0,"ion-item",44),t.YNc(133,at,9,1,"ion-item",45),t.YNc(134,nt,4,0,"ion-item",41),t.YNc(135,lt,4,0,"ion-item",41),t.YNc(136,st,9,1,"ion-item",41),t.YNc(137,ct,9,1,"ion-item",41),t.YNc(138,mt,4,0,"ion-item",41),t.YNc(139,ut,9,1,"ion-item",41),t.YNc(140,dt,4,0,"ion-item",41),t.YNc(141,pt,4,0,"ion-item",41),t.YNc(142,ft,9,1,"ion-item",41),t.YNc(143,gt,3,0,"ion-item-divider",40),t.YNc(144,_t,9,1,"ion-item",45),t.TgZ(145,"ion-item-divider",46),t.TgZ(146,"ion-label",11),t._uU(147," Ejecutar funci\xf3n manual de apirest con valores predeterminados "),t.qZA(),t.qZA(),t.YNc(148,ht,4,0,"ion-item",41),t.YNc(149,Zt,4,0,"ion-item",41),t.TgZ(150,"ion-item-divider",10),t.TgZ(151,"ion-label",11),t._uU(152," Respuestas segun campo "),t.qZA(),t.qZA(),t.TgZ(153,"ion-item",12),t.TgZ(154,"ion-label",13),t._uU(155,"Respuesta de pregunta:"),t.qZA(),t._UZ(156,"ion-input",47),t.qZA(),t.TgZ(157,"ion-item",12),t.TgZ(158,"ion-label",13),t._uU(159,"Valor (pts) pregunta"),t.qZA(),t._UZ(160,"ion-input",48),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(161,"ion-footer"),t.TgZ(162,"ion-row",49),t.TgZ(163,"ion-col"),t.TgZ(164,"ion-button",50),t.NdJ("click",function(){return o.submitForm()}),t._uU(165,"CREAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.Form),t.xp6(7),t.Oqu(o.tituloxx),t.xp6(6),t.hij(" Campo: ",o.tcampo," "),t.xp6(67),t.Q6J("readonly",!0),t.xp6(9),t.Q6J("readonly",!0),t.xp6(9),t.Q6J("readonly",!0),t.xp6(7),t.Q6J("readonly",!0),t.xp6(8),t.Q6J("ngIf","Alfanumerico"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Alfanumerico"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Alfanumerico"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Rango"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Rango"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Rango"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Rango"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo),t.xp6(2),t.Q6J("ngIf",o.Form.get("verregistros").hasError("required")&&(o.Form.get("verregistros").dirty||o.Form.get("verregistros").touched)),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Formulario detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Formulario detalle"===o.tipocampo),t.xp6(4),t.Q6J("ngIf","Visualizar query"===o.tipocampo||"Lista de valores remoto"===o.tipocampo||"Lista de valores"===o.tipocampo||"Check List"===o.tipocampo||"Check List Detalle"===o.tipocampo),t.xp6(1),t.Q6J("ngIf","Formulario detalle"===o.tipocampo),t.xp6(15),t.Q6J("disabled",!o.Form.valid))},directives:[l._Y,l.JL,l.sg,n.Gu,n.sr,n.Sm,n.YG,n.gu,n.wd,n.W2,n.q_,n.rH,n.Q$,n.Ie,n.pK,n.j9,l.JJ,l.u,n.ho,n.w,Z.O5,n.as,n.fr,n.Nd,n.wI,n.t9,n.QI,n.n0,n.yW,n.g2],pipes:[_.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var Tt=m(26806);function bt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeToList()}),t._UZ(1,"ion-icon",33),t.qZA()}}function At(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeToGrid()}),t._UZ(1,"ion-icon",34),t.qZA()}}function qt(i,s){if(1&i&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",e.itemsList.length," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function Ct(i,s){1&i&&(t.TgZ(0,"ion-item",36),t.TgZ(1,"ion-label",37),t._UZ(2,"skeleton-element"),t._UZ(3,"skeleton-element"),t._UZ(4,"skeleton-element",38),t.qZA(),t.qZA())}const xt=function(){return[0,1,2,3,4,5,6]};function Pt(i,s){1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,Ct,5,0,"ion-item",35),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,xt)))}function Ft(i,s){1&i&&(t.TgZ(0,"strong"),t._uU(1," (Requerido)"),t._UZ(2,"br"),t.qZA())}function Nt(i,s){1&i&&(t.TgZ(0,"strong"),t._uU(1," (Opcional)"),t._UZ(2,"br"),t.qZA())}function Ut(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",40),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",41),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).updateRecord(a)}),t._UZ(4,"ion-icon",42),t.TgZ(5,"ion-label",37),t.TgZ(6,"ion-note",43),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"p"),t.TgZ(10,"strong"),t._uU(11," Etiqueta:"),t.qZA(),t._uU(12),t.YNc(13,Ft,3,0,"strong",24),t.YNc(14,Nt,3,0,"strong",24),t.TgZ(15,"strong"),t._uU(16," Etiqueta (Ingles):"),t.qZA(),t._uU(17),t._UZ(18,"br"),t.TgZ(19,"strong"),t._uU(20," Tipo:"),t.qZA(),t._uU(21),t._UZ(22,"br"),t.TgZ(23,"strong"),t._uU(24," Campo:"),t.qZA(),t._uU(25),t._UZ(26,"br"),t.qZA(),t.TgZ(27,"ion-badge",44),t._uU(28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"ion-row"),t.TgZ(30,"ion-col",17),t.TgZ(31,"ion-toolbar",45),t.TgZ(32,"ion-buttons",46),t.TgZ(33,"ion-button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).deleteRecord(a)}),t.ALo(34,"translate"),t._UZ(35,"ion-icon",47),t.qZA(),t.qZA(),t.TgZ(36,"ion-buttons",48),t.TgZ(37,"ion-button",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).updateRecord2(a)}),t.ALo(38,"translate"),t._UZ(39,"ion-icon",50),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=s.$implicit;t.xp6(7),t.hij("No. ",e.order,""),t.xp6(5),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf","true"===e.required),t.xp6(1),t.Q6J("ngIf","false"===e.required),t.xp6(3),t.hij(" ",e.title2,""),t.xp6(4),t.hij(" ",e.type," "),t.xp6(4),t.hij(" ",e.name,""),t.xp6(3),t.Oqu(e.estado),t.xp6(5),t.s9C("title",t.lcZ(34,10,"ELIMINARM")),t.xp6(4),t.s9C("title",t.lcZ(38,12,"MENUM"))}}function yt(i,s){if(1&i&&(t.TgZ(0,"ion-list"),t.YNc(1,Ut,40,14,"ion-item",39),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.itemsList)("ngForTrackBy",e.trackItems)}}function kt(i,s){1&i&&(t.TgZ(0,"strong"),t._uU(1," (Requerido)"),t._UZ(2,"br"),t.qZA())}function It(i,s){1&i&&(t.TgZ(0,"strong"),t._uU(1," (Opcional)"),t._UZ(2,"br"),t.qZA())}function wt(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"ion-col",52),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-row",53),t.TgZ(3,"ion-col"),t.TgZ(4,"span",54),t._uU(5,"No."),t.qZA(),t.TgZ(6,"span",55),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"ion-col"),t.TgZ(9,"span",54),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"ion-item",40),t._UZ(12,"ion-icon",42),t.TgZ(13,"ion-label",56),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).updateRecord(a)}),t.TgZ(14,"p"),t.TgZ(15,"strong"),t._uU(16," Etiqueta:"),t.qZA(),t._uU(17),t.YNc(18,kt,3,0,"strong",24),t.YNc(19,It,3,0,"strong",24),t.TgZ(20,"strong"),t._uU(21," Etiqueta (Ingles):"),t.qZA(),t._uU(22),t._UZ(23,"br"),t.TgZ(24,"strong"),t._uU(25," Tipo:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29," Campo:"),t.qZA(),t._uU(30),t._UZ(31,"br"),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"ion-card-content"),t.TgZ(33,"ion-row",57),t.TgZ(34,"ion-col",17),t.TgZ(35,"ion-toolbar",45),t.TgZ(36,"ion-buttons",46),t.TgZ(37,"ion-button",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).deleteRecord(a)}),t.ALo(38,"translate"),t._UZ(39,"ion-icon",47),t.qZA(),t.qZA(),t.TgZ(40,"ion-buttons",48),t.TgZ(41,"ion-button",49),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(2).updateRecord2(a)}),t.ALo(42,"translate"),t._UZ(43,"ion-icon",50),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=s.$implicit;t.xp6(7),t.hij("",e.order," "),t.xp6(3),t.hij("",e.estado," "),t.xp6(7),t.hij(" ",e.title," "),t.xp6(1),t.Q6J("ngIf","true"===e.required),t.xp6(1),t.Q6J("ngIf","false"===e.required),t.xp6(3),t.hij(" ",e.title2,""),t.xp6(4),t.hij(" ",e.type," "),t.xp6(4),t.hij(" ",e.name,""),t.xp6(7),t.s9C("title",t.lcZ(38,10,"ELIMINARM")),t.xp6(4),t.s9C("title",t.lcZ(42,12,"PROPIEDADESM"))}}function Lt(i,s){if(1&i&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.YNc(2,wt,44,14,"ion-col",51),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.itemsList)("ngForTrackBy",e.trackItems)}}function Jt(i,s){1&i&&(t.TgZ(0,"h3",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NODATOS")," "))}let Mt=(()=>{class i{constructor(e,o,r,a,c,p){this.routerOutlet=e,this.router=o,this.authenticationService=r,this.alertController=a,this.translateService=c,this.modalController=p,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.viewType="grid",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Todos",this.searchSubject=new U.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.idllave=this.router.getCurrentNavigation().extras.state.idllave,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(e=>{this.seguro=e}),this.translateService.get("MSGM").subscribe(e=>{this.msg=e}),this.rangeForm=new l.cw({dual:new l.NI({lower:1,upper:100})}),this.currentSegment="todos",this.pideregistros(this.currentSegment)}filterContacts(e){let o=e.detail.value;this.currentSegment=o,this.pideregistros(o)}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(e){this.itemsList=[],this.efecto=0,this.authenticationService.getReg("todos/"+e+"/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmmovilds",0).then(o=>{this.efecto=1,this.items=o,this.itemsList=this.items},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")})}trackItems(e,o){return o.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(e,o){return e.filter(r=>r.nombre.toLowerCase().includes(o.toLowerCase()))}otrasop(e){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Opci\xf3n",inputs:[{name:"campos",type:"radio",label:"Propiedades del campo",checked:!0,value:"/frmmovild2CreatePage\xb0Campos ->"+e.nombre}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"Ok",handler:r=>{var a=r.split("\xb0");this.router.navigate([a[0]],{state:{variables:this.variables,user:null,idllave:e._id,title:a[1]}})}}]})).present()})}deleteRecord(e){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:r=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(e._id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na","frmmovilds").then(a=>{this.pideregistros(this.currentSegment)},a=>{this.authenticationService.presentAlert(a.error,this.msg,"")})}}]})).present()})}updateRecord2(e){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:vt,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:e,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return o.onWillDismiss().then(r=>{"close"!==r.data&&this.pideregistros(this.currentSegment)}),yield o.present()})}updateRecord(e){return(0,d.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:x,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:e,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return o.onWillDismiss().then(r=>{"close"!==r.data&&this.pideregistros(this.currentSegment)}),yield o.present()})}addRecord(){return(0,d.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:x,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return e.onWillDismiss().then(o=>{"close"!==o.data&&this.pideregistros(this.currentSegment)}),yield e.present()})}loadData(e){setTimeout(()=>{e.target.complete(),1e3===this.items.length&&(e.target.disabled=!0)},500)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(n.jP),t.Y36(A.F0),t.Y36(T.$),t.Y36(n.Br),t.Y36(_.sK),t.Y36(n.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-frmmovild-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(n.ju,5),2&e){let r;t.iGM(r=t.CRH())&&(o.infiniteScroll=r.first)}},decls:55,vars:35,consts:[["color","primary"],["slot","start"],["defaultHref","FormsListPage"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","add"],["slot","icon-only","name","refresh-circle-outline"],[3,"click",4,"ngIf"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col",3,"hidden"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],[3,"formGroup","hidden"],[1,"range-item-row"],["size","12"],[1,"range-header"],[1,"range-value"],[1,"range-label"],["formControlName","dual","color","secondary","pin","true","dualKnobs","true","min","1","max","100","step","1","debounce","400",1,"range-control",3,"ionChange"],[1,"user-friends-content"],["sticky",""],[4,"ngIf"],["value","todos",3,"ionChange"],["value","todos","checked",""],["value","Activo"],["value","Inactivo"],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],[3,"click"],["slot","icon-only","name","grid"],["slot","icon-only","name","list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated"],["size","12",3,"click"],["name","server-outline","slot","start"],["slot","end"],["color","medium"],["color","transparent"],["slot","secondary"],["slot","icon-only","name","trash-outline"],["slot","primary"],["color","secondary",3,"title","click"],["slot","icon-only","name","reader-outline"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],[1,"ion-text-wrap",3,"click"],["no-padding",""],[1,"empty-list-message"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4),t.TgZ(7,"ion-button",5),t.NdJ("click",function(){return o.addRecord()}),t.ALo(8,"translate"),t._UZ(9,"ion-icon",6),t.qZA(),t.TgZ(10,"ion-button",5),t.NdJ("click",function(){return o.pideregistros0()}),t.ALo(11,"translate"),t._UZ(12,"ion-icon",7),t.qZA(),t.YNc(13,bt,2,0,"ion-button",8),t.YNc(14,At,2,0,"ion-button",8),t.qZA(),t.qZA(),t.TgZ(15,"ion-toolbar",9),t.TgZ(16,"ion-row",10),t.TgZ(17,"ion-col"),t.TgZ(18,"ion-searchbar",11),t.NdJ("ngModelChange",function(a){return o.searchQuery=a})("ionChange",function(){return o.searchList()}),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.TgZ(20,"ion-col",12),t.TgZ(21,"ion-button",13),t.NdJ("click",function(){return o.showAgeFilter=!o.showAgeFilter}),t.ALo(22,"translate"),t._UZ(23,"ion-icon",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"form",15),t.TgZ(25,"ion-row",16),t.TgZ(26,"ion-col",17),t.TgZ(27,"div",18),t.TgZ(28,"span",19),t._uU(29),t.qZA(),t.TgZ(30,"span",20),t._uU(31,"Filter by age"),t.qZA(),t.TgZ(32,"span",19),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"ion-col",17),t.TgZ(35,"ion-range",21),t.NdJ("ionChange",function(){return o.searchList()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"ion-content",22),t.TgZ(37,"ion-item-divider",23),t.YNc(38,qt,4,7,"ion-label",24),t.qZA(),t.TgZ(39,"ion-segment",25),t.NdJ("ionChange",function(a){return o.filterContacts(a)}),t.TgZ(40,"ion-segment-button",26),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"ion-segment-button",27),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"ion-segment-button",28),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.qZA(),t.YNc(49,Pt,2,2,"ion-list",24),t.YNc(50,yt,2,2,"ion-list",24),t.YNc(51,Lt,3,2,"ion-grid",24),t.YNc(52,Jt,3,3,"h3",29),t.TgZ(53,"ion-infinite-scroll",30),t.NdJ("ionInfinite",function(a){return o.loadData(a)}),t._UZ(54,"ion-infinite-scroll-content",31),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij(" ",o.tituloxx," "),t.xp6(2),t.MGl("title"," ",t.lcZ(8,21,"AGREGARM"),""),t.xp6(3),t.MGl("title"," ",t.lcZ(11,23,"REFRESCARM"),""),t.xp6(3),t.Q6J("ngIf","grid"===o.viewType),t.xp6(1),t.Q6J("ngIf","list"===o.viewType),t.xp6(4),t.s9C("placeholder",t.lcZ(19,25,"BUSCARM")),t.Q6J("ngModel",o.searchQuery),t.xp6(2),t.Q6J("hidden",!o.showAgeFilter),t.xp6(1),t.MGl("title"," ",t.lcZ(22,27,"FILTROM"),""),t.xp6(3),t.Q6J("formGroup",o.rangeForm)("hidden",!o.showAgeFilter),t.xp6(5),t.Oqu(o.rangeForm.controls.dual.value.lower),t.xp6(4),t.Oqu(o.rangeForm.controls.dual.value.upper),t.xp6(5),t.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0),t.xp6(3),t.hij(" ",t.lcZ(42,29,"TODOSM")," "),t.xp6(3),t.hij(" ",t.lcZ(45,31,"ACTIVOSM")," "),t.xp6(3),t.hij(" ",t.lcZ(48,33,"INACTIVOSM")," "),t.xp6(2),t.Q6J("ngIf",0===o.efecto),t.xp6(1),t.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"list"===o.viewType),t.xp6(1),t.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"grid"===o.viewType),t.xp6(1),t.Q6J("ngIf",0===(null==o.itemsList?null:o.itemsList.length)))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.YG,n.gu,Z.O5,n.Nd,n.wI,n.VI,n.j9,l.JJ,l.On,l._Y,l.JL,l.sg,n.I_,n.QI,l.u,n.W2,n.rH,n.cJ,n.GO,n.ju,n.MB,n.Q$,n.q_,Z.sg,n.Ie,Tt.B,n.jY,n.uN,n.yp,n.PM,n.FN],pipes:[_.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var Vt=m(22675),Qt=m(26932);let St=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[Z.ez,n.Pc,F.K,l.u5,Qt.Y,l.UX,N.YL,Vt.v,A.Bz.forChild([{path:"",component:Mt}]),_.aw.forChild()]]}),i})()}}]);