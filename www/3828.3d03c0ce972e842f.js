"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3828],{83828:(xe,A,d)=>{d.r(A),d.d(A,{frmmovildreportesListPageModule:()=>Te});var a=d(23349),x=d(55787),Z=d(69808),U=d(33678),f=d(51062),s=d(93075),w=d(36351),m=d(70655),b=d(49926),k=d(4707),q=d(63814),y=d(15190),v=d(26388),e=d(5e3);const N=["inputId"],I=["fotoa"];function L(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese cardinalidad"),e.qZA(),e.qZA())}function J(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese un tipo de conexion"),e.qZA(),e.qZA())}function M(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese tipo de reporte"),e.qZA(),e.qZA())}function S(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese etiqueta"),e.qZA(),e.qZA())}function Q(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese nombre"),e.qZA(),e.qZA())}function E(i,l){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"ion-icon",34),e.TgZ(2,"span"),e._uU(3,"Ingrese estado"),e.qZA(),e.qZA())}let C=(()=>{class i{constructor(t,o,r,n,c){this.modalController=t,this.translateService=o,this.authenticationService=r,this.navParams=n,this.actionSheetController=c,this.vtype=[],this.vposition=[],this.vlabelsizefondt=[],this.vcategoria=[],this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.apifoto=this.authenticationService.getapifoto()}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.navParams.get("userinfo"),this.idllave=this.navParams.get("idllave"),this.tituloxx=this.navParams.get("title"),this.Form=new s.cw({type:new s.NI("",s.kI.required),type2:new s.NI("",s.kI.required),name:new s.NI("",s.kI.required),title:new s.NI("",s.kI.required),display:new s.NI(""),orden:new s.NI("",s.kI.required),estado:new s.NI("",s.kI.required)}),null==this.navParams.get("record")?(this.Form.controls.display.setValue("true"),this.authenticationService.getReg(this.idllave+"/orden/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmmovildreportess",0).then(t=>{if(t){const o=t;setTimeout(()=>{this.Form.controls.orden.setValue(Number(o.orden))},600)}},t=>{this.authenticationService.presentAlert(t.error,"Precauci\xf3n","")}),this.translateService.get("NUEVOM").subscribe(t=>{this.tituloxx=t+" "+this.tituloxx,this.lpermiso=t})):(this.translateService.get("ACTUALIZAM").subscribe(t=>{this.tituloxx=t+" "+this.tituloxx,this.lpermiso=t}),this._ID=this.navParams.data.record._id,this.Form.controls.type.setValue(this.navParams.data.record.type),this.Form.controls.type2.setValue(this.navParams.data.record.type2),this.Form.controls.name.setValue(this.navParams.data.record.nombre),this.Form.controls.title.setValue(this.navParams.data.record.title),this.Form.controls.orden.setValue(Number(this.navParams.data.record.order)),this.Form.controls.estado.setValue(this.navParams.data.record.estado),this.Form.controls.display.setValue(this.navParams.data.record.display?this.navParams.data.record.display:"false"))}runTimeChange(t){let o=t.target.value;null==this.navParams.get("record")&&(o=o.replace(/\s/g,""),this.Form.controls.name.setValue(String(o.trim()).toLowerCase()))}submitForm(){const t={idempresa:this.userinfo[0].idempresa._id,idmovil:this.idllave,type:this.Form.controls.type.value,type0:this.Form.controls.type2.value,nombre:this.Form.controls.name.value,display:""+this.Form.controls.display.value,title:this.Form.controls.title.value,order:this.Form.controls.orden.value,estado:this.Form.controls.estado.value,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}};null==this.navParams.get("record")?t&&this.authenticationService.createReg("",t,"frmmovildreportess").then(o=>{!this.Form.valid||this.modalController.dismiss("ok")},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")}):t&&this.authenticationService.createReg(this._ID+"/2",t,"frmmovildreportess").then(o=>{!this.Form.valid||this.modalController.dismiss("ok")},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}dacomponente(t,o){return(0,m.mG)(this,void 0,void 0,function*(){let r="";"ubicacion"===t&&(r=this.Form.controls.ubicacion.value);const n=yield this.modalController.create({component:q.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:r},cssClass:"modal-fullscreen"});return n.onWillDismiss().then(c=>{"close"===c.data||("direccion"===t?this.Form.controls.direccion.setValue(c.data.direccion):this.Form.controls.ubicacion.setValue(c.data.direccion+" {"+c.data.la+"\xb0"+c.data.lo+"}"))}),yield n.present()})}takePicture(t){return(0,m.mG)(this,void 0,void 0,function*(){const o=yield v.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:v.dk.DataUrl,source:v.oK.Camera});this.authenticationService.generateFromImage(o.dataUrl,200,200,.5,r=>{"fotoa"===t&&(this.fotoimg=r,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})})}uploadPWA2(t,o){o&&o.length>0&&this.firstFileToBase64(o[0]).then(n=>{this.authenticationService.generateFromImage(n,200,300,.5,c=>{"fotoa"===t&&(this.fotoimg=c,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})},n=>{"fotoa"===t&&(this.fotoimg=null,this.Form.controls.foto1.setValue(""))})}uploadPWA(t){if("fotoa"===t){if(null==this.fotoa)return;this.uploadPWA2(t,this.fotoa.nativeElement.files)}}firstFileToBase64(t){return new Promise((o,r)=>{const n=new FileReader;n&&null!=t?(n.readAsDataURL(t),n.onload=()=>{o(n.result)},n.onerror=c=>{r(c)}):r(new Error("No file found"))})}takePicture2(t){return(0,m.mG)(this,void 0,void 0,function*(){"fotoa"===t&&this.fotoa.nativeElement.click()})}fotodatos(t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(t)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(t)}}]})).present()})}combodatoslimpia(t){return(0,m.mG)(this,void 0,void 0,function*(){this.Form.controls[t].setValue("")})}combodatos(t,o,r,n,c,h){return(0,m.mG)(this,void 0,void 0,function*(){const p=yield this.modalController.create({component:y.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{grabax:h,variables:this.variables,userinfo:this.userinfo,record2:null,op:o,frm:r,idllave:this.idllave,titlex:"Buscar "+c},cssClass:"modal-fullscreen"});return p.onWillDismiss().then(g=>{let _=[];_=g,"close"!==_.data&&this.Form.controls[n].setValue(_.data?_.data.nombre:"")}),yield p.present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.IN),e.Y36(f.sK),e.Y36(b.$),e.Y36(a.X1),e.Y36(a.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-frmmovildreportes-create"]],viewQuery:function(t,o){if(1&t&&(e.Gf(N,5),e.Gf(I,7)),2&t){let r;e.iGM(r=e.CRH())&&(o.inputElement=r.first),e.iGM(r=e.CRH())&&(o.fotoa=r.first)}},decls:85,vars:17,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],[1,"input-item"],["position","floating"],["color","danger"],["type","number","inputMode","Number","clearInput","true","formControlName","orden","required",""],[1,"error-container"],["class","error-message",4,"ngIf"],["formControlName","type2",3,"placeholder"],["text-wrap","","value","Formularios"],["text-wrap","","value","Procesos"],["text-wrap","","value","Apiweservice"],["inputMode","text","clearInput","true","formControlName","type","required","",1,"ion-text-end",3,"readonly","click"],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],["inputMode","text","clearInput","true","formControlName","title","required",""],["inputMode","text","clearInput","true","formControlName","name","required",""],[1,"input-item",3,"hidden"],["color","secondary","clearInput","true","formControlName","display"],["formControlName","estado",3,"placeholder"],["text-wrap","","value","Activo"],["text-wrap","","value","Inactivo"],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"disabled","click"],[1,"error-message"],["name","information-circle-outline"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"ion-header"),e.TgZ(2,"ion-toolbar",1),e.TgZ(3,"ion-buttons",2),e.TgZ(4,"ion-button",3),e.NdJ("click",function(){return o.dismissModal()}),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.TgZ(6,"ion-title",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"ion-content",6),e.TgZ(9,"section",7),e.TgZ(10,"ion-list",8),e.TgZ(11,"ion-item",9),e.TgZ(12,"ion-label",10),e._uU(13,"Cardinalidad"),e.TgZ(14,"ion-text",11),e._uU(15,"*"),e.qZA(),e.qZA(),e._UZ(16,"ion-input",12),e.qZA(),e.TgZ(17,"div",13),e.YNc(18,L,4,0,"div",14),e.qZA(),e.TgZ(19,"ion-item",9),e.TgZ(20,"ion-label"),e._uU(21,"Tipo conexion"),e.TgZ(22,"ion-text",11),e._uU(23,"*"),e.qZA(),e.qZA(),e.TgZ(24,"ion-select",15),e.ALo(25,"translate"),e.TgZ(26,"ion-select-option",16),e._uU(27,"Formularios"),e.qZA(),e.TgZ(28,"ion-select-option",17),e._uU(29,"Procesos"),e.qZA(),e.TgZ(30,"ion-select-option",18),e._uU(31,"Api Web service"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",13),e.YNc(33,J,4,0,"div",14),e.qZA(),e.TgZ(34,"ion-item",9),e.TgZ(35,"ion-label"),e._uU(36,"Tipo reporte"),e.TgZ(37,"ion-text",11),e._uU(38,"*"),e.qZA(),e.qZA(),e.TgZ(39,"ion-input",19),e.NdJ("click",function(){return o.combodatos(1,"1001-type-reporte","frmcats","type","Type","sigraba")}),e.qZA(),e.TgZ(40,"ion-buttons",2),e.TgZ(41,"ion-button",20),e.NdJ("click",function(){return o.combodatoslimpia("type")}),e._UZ(42,"ion-icon",21),e.qZA(),e.TgZ(43,"ion-button",22),e.NdJ("click",function(){return o.combodatos(1,"1001-type-reporte","frmcats","type","Type","sigraba")}),e._UZ(44,"ion-icon",23),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",13),e.YNc(46,M,4,0,"div",14),e.qZA(),e.TgZ(47,"ion-item",9),e.TgZ(48,"ion-label",10),e._uU(49,"Etiqueta"),e.TgZ(50,"ion-text",11),e._uU(51,"*"),e.qZA(),e.qZA(),e._UZ(52,"ion-input",24),e.qZA(),e.TgZ(53,"div",13),e.YNc(54,S,4,0,"div",14),e.qZA(),e.TgZ(55,"ion-item",9),e.TgZ(56,"ion-label",10),e._uU(57,"Nombre"),e.TgZ(58,"ion-text",11),e._uU(59,"*"),e.qZA(),e.qZA(),e._UZ(60,"ion-input",25),e.qZA(),e.TgZ(61,"div",13),e.YNc(62,Q,4,0,"div",14),e.qZA(),e.TgZ(63,"ion-item",26),e.TgZ(64,"ion-label"),e._uU(65,"Mostrar campo en consola"),e.qZA(),e._UZ(66,"ion-toggle",27),e.qZA(),e.TgZ(67,"ion-item",9),e.TgZ(68,"ion-label"),e._uU(69,"Estado"),e.TgZ(70,"ion-text",11),e._uU(71,"*"),e.qZA(),e.qZA(),e.TgZ(72,"ion-select",28),e.ALo(73,"translate"),e.TgZ(74,"ion-select-option",29),e._uU(75,"Activo"),e.qZA(),e.TgZ(76,"ion-select-option",30),e._uU(77,"Inactivo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",13),e.YNc(79,E,4,0,"div",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"ion-footer"),e.TgZ(81,"ion-row",31),e.TgZ(82,"ion-col"),e.TgZ(83,"ion-button",32),e.NdJ("click",function(){return o.submitForm()}),e._uU(84,"CREAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.Form),e.xp6(7),e.Oqu(o.tituloxx),e.xp6(11),e.Q6J("ngIf",o.Form.get("orden").hasError("required")&&(o.Form.get("orden").dirty||o.Form.get("orden").touched)),e.xp6(6),e.s9C("placeholder",e.lcZ(25,13,"SELECTVALORM")),e.xp6(9),e.Q6J("ngIf",o.Form.get("type2").hasError("required")&&(o.Form.get("type2").dirty||o.Form.get("type2").touched)),e.xp6(6),e.Q6J("readonly",!0),e.xp6(7),e.Q6J("ngIf",o.Form.get("type").hasError("required")&&(o.Form.get("type").dirty||o.Form.get("type").touched)),e.xp6(8),e.Q6J("ngIf",o.Form.get("title").hasError("required")&&(o.Form.get("title").dirty||o.Form.get("title").touched)),e.xp6(8),e.Q6J("ngIf",o.Form.get("name").hasError("required")&&(o.Form.get("name").dirty||o.Form.get("name").touched)),e.xp6(1),e.Q6J("hidden",!0),e.xp6(9),e.s9C("placeholder",e.lcZ(73,15,"SELECTVALORM")),e.xp6(7),e.Q6J("ngIf",o.Form.get("estado").hasError("required")&&(o.Form.get("estado").dirty||o.Form.get("estado").touched)),e.xp6(4),e.Q6J("disabled",!o.Form.valid))},directives:[s._Y,s.JL,s.sg,a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,a.q_,a.Ie,a.Q$,a.yW,a.pK,a.as,s.JJ,s.u,s.Q7,Z.O5,a.t9,a.QI,a.n0,a.j9,a.ho,a.w,a.fr,a.Nd,a.wI],pipes:[f.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var G=d(68562);const V=["inputId"],R=["fotoa"];function O(i,l){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"ion-icon",32),e.TgZ(2,"span"),e._uU(3,"Ingrese formulario"),e.qZA(),e.qZA())}function Y(i,l){if(1&i&&(e.TgZ(0,"ion-select-option",35),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function D(i,l){if(1&i&&(e.TgZ(0,"ion-item",27),e.TgZ(1,"ion-label"),e._uU(2,"Tipo grafica"),e.TgZ(3,"ion-text",13),e._uU(4,"*"),e.qZA(),e.qZA(),e.TgZ(5,"ion-select",33),e.ALo(6,"translate"),e.YNc(7,Y,2,2,"ion-select-option",34),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(5),e.s9C("placeholder",e.lcZ(6,2,"SELECTVALORM")),e.xp6(2),e.Q6J("ngForOf",t.vtipo)}}function j(i,l){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"ion-icon",32),e.TgZ(2,"span"),e._uU(3,"Ingrese tipo de grafica"),e.qZA(),e.qZA())}function H(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-label"),e._uU(2,"Campos en reporte"),e.qZA(),e.TgZ(3,"ion-input",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","camposreporte","camposlectura","controlmultipleidnombre")}),e.qZA(),e.TgZ(4,"ion-buttons",2),e.TgZ(5,"ion-button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatoslimpia("camposreporte","")}),e._UZ(6,"ion-icon",17),e.qZA(),e.TgZ(7,"ion-button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","camposreporte","camposlectura","controlmultipleidnombre")}),e._UZ(8,"ion-icon",19),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("hidden",t.apirestweb),e.xp6(3),e.Q6J("readonly",!0)}}function B(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-label"),e._uU(2,"Campo X (grupo)"),e.qZA(),e.TgZ(3,"ion-input",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","campox","camposlectura","controlmultipleidnombre")}),e.qZA(),e.TgZ(4,"ion-buttons",2),e.TgZ(5,"ion-button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatoslimpia("campox","")}),e._UZ(6,"ion-icon",17),e.qZA(),e.TgZ(7,"ion-button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","campox","camposlectura","controlmultipleidnombre")}),e._UZ(8,"ion-icon",19),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("hidden",t.apirestweb),e.xp6(3),e.Q6J("readonly",!0)}}function $(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-label"),e._uU(2,"Campo Y (conteo)"),e.qZA(),e.TgZ(3,"ion-input",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","campoy","camposlectura","controlmultipleidnombre")}),e.qZA(),e.TgZ(4,"ion-buttons",2),e.TgZ(5,"ion-button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatoslimpia("campoy","")}),e._UZ(6,"ion-icon",17),e.qZA(),e.TgZ(7,"ion-button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().combodatos(1,"1000-actor-plantilla","frmcats","campoy","camposlectura","controlmultipleidnombre")}),e._UZ(8,"ion-icon",19),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("hidden",t.apirestweb),e.xp6(3),e.Q6J("readonly",!0)}}function W(i,l){1&i&&(e.TgZ(0,"ion-item",27),e.TgZ(1,"ion-label",25),e._uU(2,"Etiqueta grupo x"),e.qZA(),e._UZ(3,"ion-input",39),e.qZA())}function z(i,l){1&i&&(e.TgZ(0,"ion-item",27),e.TgZ(1,"ion-label",25),e._uU(2,"Etiqueta grupo y"),e.qZA(),e._UZ(3,"ion-input",40),e.qZA())}function X(i,l){if(1&i&&(e.TgZ(0,"ion-select-option",35),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.nombre)}}function K(i,l){if(1&i&&(e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-label"),e._uU(2,"Tipo conteo (campo y)"),e.TgZ(3,"ion-text",13),e._uU(4,"*"),e.qZA(),e.qZA(),e.TgZ(5,"ion-select",41),e.ALo(6,"translate"),e.YNc(7,X,2,2,"ion-select-option",34),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("hidden",!0),e.xp6(5),e.s9C("placeholder",e.lcZ(6,3,"SELECTVALORM")),e.xp6(2),e.Q6J("ngForOf",t.vtipo2)}}function ee(i,l){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"ion-icon",32),e.TgZ(2,"span"),e._uU(3,"Ingrese tipo de conteo"),e.qZA(),e.qZA())}function te(i,l){if(1&i&&(e.TgZ(0,"ion-item",12),e.TgZ(1,"ion-label"),e._uU(2,"Orden tipo conteo"),e.TgZ(3,"ion-text",13),e._uU(4,"*"),e.qZA(),e.qZA(),e.TgZ(5,"ion-select",42),e.ALo(6,"translate"),e.TgZ(7,"ion-select-option",43),e._uU(8,"Ascendente"),e.qZA(),e.TgZ(9,"ion-select-option",44),e._uU(10,"Descendente"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("hidden",t.apirestweb),e.xp6(5),e.s9C("placeholder",e.lcZ(6,2,"SELECTVALORM"))}}function oe(i,l){1&i&&(e.TgZ(0,"ion-item",27),e.TgZ(1,"ion-label"),e._uU(2,"Colores de grafica"),e.TgZ(3,"ion-text",13),e._uU(4,"*"),e.qZA(),e.qZA(),e.TgZ(5,"ion-select",45),e.ALo(6,"translate"),e.TgZ(7,"ion-select-option",46),e._uU(8,"Generar colores"),e.qZA(),e.TgZ(9,"ion-select-option",47),e._uU(10,"Definir colores"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.s9C("placeholder",e.lcZ(6,1,"SELECTVALORM")))}function ie(i,l){1&i&&(e.TgZ(0,"ion-item",27),e.TgZ(1,"ion-label",25),e._uU(2,"Definir colores(grupo:color\xacgrupo2:color)"),e.qZA(),e._UZ(3,"ion-textarea",48),e.qZA())}let re=(()=>{class i{constructor(t,o,r,n,c){this.modalController=t,this.translateService=o,this.authenticationService=r,this.navParams=n,this.actionSheetController=c,this.vtype=[],this.vposition=[],this.vlabelsizefondt=[],this.vcategoria=[],this.variables=[],this.userinfo=[],this.tituloxx="",this.datallavesdet=[],this.idformdetalle="",this.vgrupo=[],this.idfrmconsulta2=[],this.seguro="",this.msg="",this.vtipo=[],this.vtipo2=[],this.apirestweb=!1,this.idfrmconsulta2origen=[],this.apifoto=this.authenticationService.getapifoto()}ngAfterViewInit(){setTimeout(()=>{this.inputElement.setFocus()},400)}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.navParams.get("userinfo"),this.idllave=this.navParams.get("idllave"),this.tituloxx=this.navParams.get("title"),this.record=this.navParams.get("record"),this.translateService.get("SEGUROM").subscribe(t=>{this.seguro=t}),this.translateService.get("MSGM").subscribe(t=>{this.msg=t}),this.vtipo2.push({id:"SUM",nombre:"Suma"}),this.vtipo2.push({id:"COUNT",nombre:"Conteo"}),this.vtipo2.push({id:"AVG",nombre:"Promedio"}),this.Form=new s.cw({formulario:new s.NI("",s.kI.required),camposreporte:new s.NI(""),typegraf:new s.NI(""),camposfiltro:new s.NI(""),funcionget:new s.NI(""),filtroextra:new s.NI(""),ordentipo:new s.NI(""),nombrex:new s.NI(""),colores1:new s.NI(""),colores2:new s.NI(""),nombrey:new s.NI(""),tipoconteo:new s.NI(""),campox:new s.NI(""),campoy:new s.NI("")}),"Apiweservice"===this.navParams.data.record.type0?(this.apirestweb=!0,this.vtipo.push({id:"line",nombre:"Lineas"}),this.vtipo.push({id:"bar",nombre:"Barras"}),this.vtipo.push({id:"radar",nombre:"Radar"}),this.vtipo.push({id:"doughnut",nombre:"doughnut"}),this.vtipo.push({id:"pie",nombre:"Pie"}),this.vtipo.push({id:"bubble",nombre:"bubble"}),this.vtipo.push({id:"Reporte plano",nombre:"Reporte plano"})):(this.apirestweb=!1,this.vtipo.push({id:"line",nombre:"Lineas"}),this.vtipo.push({id:"bar",nombre:"Barras"}),this.vtipo.push({id:"radar",nombre:"Radar"}),this.vtipo.push({id:"doughnut",nombre:"doughnut"}),this.vtipo.push({id:"pie",nombre:"Pie"}),this.vtipo.push({id:"bubble",nombre:"bubble"})),this.translateService.get("ACTUALIZAM").subscribe(t=>{this.tituloxx=t+" "+this.tituloxx,this.lpermiso=t}),this._ID=this.navParams.data.record._id,this.tcampo=this.navParams.data.record.title+" ["+this.navParams.data.record.type+"]",this.tipocampo=this.navParams.data.record.type,this.Form.controls.formulario.setValue(this.navParams.data.record.formulario),this.idformulario=this.navParams.data.record.idformulario,this.Form.controls.typegraf.setValue(this.navParams.data.record.typegraf),this.Form.controls.funcionget.setValue(this.navParams.data.record.funcionget),this.Form.controls.filtroextra.setValue(this.navParams.data.record.filtroextra),this.Form.controls.nombrex.setValue(this.navParams.data.record.nombrex),this.Form.controls.nombrey.setValue(this.navParams.data.record.nombrey),this.Form.controls.tipoconteo.setValue(this.navParams.data.record.tipoconteo),this.Form.controls.ordentipo.setValue(this.navParams.data.record.ordentipo),this.Form.controls.colores1.setValue(this.navParams.data.record.colores1),this.Form.controls.colores2.setValue(this.navParams.data.record.colores2),this.Form.controls.campox.setValue(this.navParams.data.record.campox),this.Form.controls.campoy.setValue(this.navParams.data.record.campoy),this.navParams.data.record.camposreporte&&(this.idcamposreporte=this.navParams.data.record.camposreporte.id,this.Form.controls.camposreporte.setValue(this.navParams.data.record.camposreporte.nombre)),this.navParams.data.record.camposfiltro&&(this.idcamposfiltro=this.navParams.data.record.camposfiltro.id,this.Form.controls.camposfiltro.setValue(this.navParams.data.record.camposfiltro.nombre)),this.navParams.data.record.campox&&(this.idcamposx=this.navParams.data.record.campox.id,this.Form.controls.campox.setValue(this.navParams.data.record.campox.nombre)),this.navParams.data.record.campoy&&(this.idcamposy=this.navParams.data.record.campoy.id,this.Form.controls.campoy.setValue(this.navParams.data.record.campoy.nombre))}submitForm(){this.authenticationService.createReg(this._ID,{idempresa:this.userinfo[0].idempresa._id,idmovil:this.idllave,formulario:this.Form.controls.formulario.value,idformulario:this.idformulario,typegraf:this.Form.controls.typegraf.value,funcionget:this.Form.controls.funcionget.value,filtroextra:this.Form.controls.filtroextra.value,nombrex:this.Form.controls.nombrex.value,nombrey:this.Form.controls.nombrey.value,tipoconteo:this.Form.controls.tipoconteo.value,colores1:this.Form.controls.colores1.value,colores2:this.Form.controls.colores2.value,ordentipo:this.Form.controls.ordentipo.value,camposreporte:{id:this.idcamposreporte,nombre:this.Form.controls.camposreporte.value},camposfiltro:{id:this.idcamposfiltro,nombre:this.Form.controls.camposfiltro.value},campox:{id:this.idcamposx,nombre:this.Form.controls.campox.value},campoy:{id:this.idcamposy,nombre:this.Form.controls.campoy.value},bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}},"frmmovildreportess").then(o=>{!this.Form.valid||this.modalController.dismiss("ok")},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}dacomponente2(t,o,r){return(0,m.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:G.E,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,tipo:this.navParams.data.record.type,record2:{titulo:o,opcion:r}},cssClass:"modal-fullscreen"});return n.onWillDismiss().then(c=>{"close"===c.data||this.Form.controls[t].setValue(c.data.color)}),yield n.present()})}dacomponente(t,o){return(0,m.mG)(this,void 0,void 0,function*(){let r="";"ubicacion"===t&&(r=this.Form.controls.ubicacion.value);const n=yield this.modalController.create({component:q.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:r},cssClass:"modal-fullscreen"});return n.onWillDismiss().then(c=>{"close"===c.data||("direccion"===t?this.Form.controls.direccion.setValue(c.data.direccion):this.Form.controls.ubicacion.setValue(c.data.direccion+" {"+c.data.la+"\xb0"+c.data.lo+"}"))}),yield n.present()})}takePicture(t){return(0,m.mG)(this,void 0,void 0,function*(){const o=yield v.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:v.dk.DataUrl,source:v.oK.Camera});this.authenticationService.generateFromImage(o.dataUrl,200,200,.5,r=>{"fotoa"===t&&(this.fotoimg=r,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})})}uploadPWA2(t,o){o&&o.length>0&&this.firstFileToBase64(o[0]).then(n=>{this.authenticationService.generateFromImage(n,200,300,.5,c=>{"fotoa"===t&&(this.fotoimg=c,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})},n=>{"fotoa"===t&&(this.fotoimg=null,this.Form.controls.foto1.setValue(""))})}uploadPWA(t){if("fotoa"===t){if(null==this.fotoa)return;this.uploadPWA2(t,this.fotoa.nativeElement.files)}}firstFileToBase64(t){return new Promise((o,r)=>{const n=new FileReader;n&&null!=t?(n.readAsDataURL(t),n.onload=()=>{o(n.result)},n.onerror=c=>{r(c)}):r(new Error("No file found"))})}takePicture2(t){return(0,m.mG)(this,void 0,void 0,function*(){"fotoa"===t&&this.fotoa.nativeElement.click()})}fotodatos(t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Galeria",role:"destructive",icon:"image-outline",handler:()=>{this.takePicture2(t)}},{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(t)}}]})).present()})}combodatoslimpia(t,o){return(0,m.mG)(this,void 0,void 0,function*(){this.Form.controls[t].setValue(""),"formulario"===o&&(this.idformulario=""),"camposreporte"===o&&(this.idcamposreporte="")})}combodatos22(t,o){return(0,m.mG)(this,void 0,void 0,function*(){for(var n=0;n<o.length;n++)o[n].idmovil===t&&this.datallavesdet.push(o[n]._id);return 0})}combodatos222(t,o){return(0,m.mG)(this,void 0,void 0,function*(){for(var n=0;n<o.length;n++)o[n].idmovil===t&&(this.datallavesdet.push(o[n]._id),this.combodatos222(o[n]._id,o));return 0})}combodatos0(t,o,r,n,c,h){return(0,m.mG)(this,void 0,void 0,function*(){this.authenticationService.getReg(this.idllave+"/frmprocedimientos0/"+this.userinfo[0].idempresa._id+"/1","frmmovilds",0).then(p=>{var g;g=p,this.datallavesdet=[],this.datallavesdet.push(this.idllave),this.combodatos22(this.idllave0,g),this.combodatos222(this.datallavesdet[1],g),this.combodatos(t,o,r,n,c,h)},p=>{this.authenticationService.presentAlert(p.error,this.msg,"")})})}combodatos(t,o,r,n,c,h){return(0,m.mG)(this,void 0,void 0,function*(){let p=o;var g=this.idformulario+"/camposformulario";"campox"===n&&(g=this.idformulario+"\xb0camposotros/camposformulario"),"campoy"===n&&(g=this.idformulario+"\xb0camposotrosenteros/camposformulario"),1e3===t&&(p=this._ID);let T=[];"camposreporte"===n&&this.idcamposreporte&&(T=this.idcamposreporte.split(";")),"camposfiltro"===n&&this.idcamposfiltro&&(T=this.idcamposfiltro.split(";")),"campox"===n&&this.idcamposx&&(T=this.idcamposx.split(";")),"campoy"===n&&this.idcamposy&&(T=this.idcamposy.split(";"));const F=yield this.modalController.create({component:y.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{sitipo:"si",catalogot:o,tarraymultiple:void 0,grabax:h,variables:this.variables,userinfo:this.userinfo,filtroformularioconsulta:g,idcamposmodificables:T,idcamposmodificables2:[],formularioconsulta:"frmmovilds",record2:null,op:p,frm:r,idllave:void 0,titlex:"Buscar "+c},cssClass:"modal-fullscreen"});return F.onWillDismiss().then(Ae=>{let u=[];u=Ae,"close"!==u.data&&(u.data?"formulariot"===h?"formulario"===n?(this.Form.controls[n].setValue(u.data.nombre),this.idformulario=u.data._id):"camposreporte"===n&&(this.Form.controls[n].setValue(u.data.nombres),this.idcamposreporte=u.data.correos):("campox"===n&&(this.Form.controls[n].setValue(u.data.nombres),this.idcamposx=u.data.correos),"campoy"===n&&(this.Form.controls[n].setValue(u.data.nombres),this.idcamposy=u.data.correos),"camposreporte"===n&&(this.Form.controls[n].setValue(u.data.nombres),this.idcamposreporte=u.data.correos),"camposfiltro"===n&&(this.Form.controls[n].setValue(u.data.nombres),this.idcamposfiltro=u.data.correos)):(this.Form.controls[n].setValue(""),this.idformdetalle=""))}),yield F.present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.IN),e.Y36(f.sK),e.Y36(b.$),e.Y36(a.X1),e.Y36(a.BX))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-frmmovildreportes2-create"]],viewQuery:function(t,o){if(1&t&&(e.Gf(V,5),e.Gf(R,7)),2&t){let r;e.iGM(r=e.CRH())&&(o.inputElement=r.first),e.iGM(r=e.CRH())&&(o.fotoa=r.first)}},decls:67,vars:22,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],[1,"my-label18"],["color","secondary"],[1,"ion-text-wrap"],[1,"input-item",3,"hidden"],["color","danger"],["inputMode","text","clearInput","true","formControlName","formulario","required","",1,"ion-text-end",3,"readonly","click"],["inputId",""],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],[1,"error-container"],["class","error-message",4,"ngIf"],["class","input-item",4,"ngIf"],["class","input-item",3,"hidden",4,"ngIf"],["inputMode","text","clearInput","true","formControlName","camposfiltro",1,"ion-text-end",3,"readonly","click"],["position","floating"],["inputMode","text","clearInput","true","formControlName","funcionget"],[1,"input-item"],["inputMode","text","rows","6","clearInput","true","formControlName","filtroextra"],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"disabled","click"],[1,"error-message"],["name","information-circle-outline"],["ionChange","onChange($event)","formControlName","typegraf",3,"placeholder"],["style","white-space: pre-wrap !important;",3,"value",4,"ngFor","ngForOf"],[2,"white-space","pre-wrap !important",3,"value"],["inputMode","text","clearInput","true","formControlName","camposreporte",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","campox",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","campoy",1,"ion-text-end",3,"readonly","click"],["inputMode","text","clearInput","true","formControlName","nombrex"],["inputMode","text","clearInput","true","formControlName","nombrey"],["ionChange","onChange($event)","formControlName","tipoconteo",3,"placeholder"],["formControlName","ordentipo",3,"placeholder"],["text-wrap","","value","1"],["text-wrap","","value","-1"],["formControlName","colores1",3,"placeholder"],["text-wrap","","value","generarcolores"],["text-wrap","","value","definircolores"],["inputMode","text","rows","6","clearInput","true","formControlName","colores2"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.TgZ(1,"ion-header"),e.TgZ(2,"ion-toolbar",1),e.TgZ(3,"ion-buttons",2),e.TgZ(4,"ion-button",3),e.NdJ("click",function(){return o.dismissModal()}),e._UZ(5,"ion-icon",4),e.qZA(),e.qZA(),e.TgZ(6,"ion-title",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"ion-content",6),e.TgZ(9,"section",7),e.TgZ(10,"ion-list",8),e.TgZ(11,"ion-item-divider",1),e.TgZ(12,"ion-label",9),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"ion-item-divider",10),e.TgZ(15,"ion-label",11),e._uU(16," Propiedades generales "),e.qZA(),e.qZA(),e.TgZ(17,"ion-item",12),e.TgZ(18,"ion-label"),e._uU(19,"Formulario"),e.TgZ(20,"ion-text",13),e._uU(21,"*"),e.qZA(),e.qZA(),e.TgZ(22,"ion-input",14,15),e.NdJ("click",function(){return o.combodatos(1e3,"formulario-plantilla","frmcats","formulario","Formulario","formulariot")}),e.qZA(),e.TgZ(24,"ion-buttons",2),e.TgZ(25,"ion-button",16),e.NdJ("click",function(){return o.combodatoslimpia("formulario","formulariot")}),e._UZ(26,"ion-icon",17),e.qZA(),e.TgZ(27,"ion-button",18),e.NdJ("click",function(){return o.combodatos(1e3,"formulario-plantilla","frmcats","formulario","Formulario","formulariot")}),e._UZ(28,"ion-icon",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",20),e.YNc(30,O,4,0,"div",21),e.qZA(),e.YNc(31,D,8,4,"ion-item",22),e.TgZ(32,"div",20),e.YNc(33,j,4,0,"div",21),e.qZA(),e.YNc(34,H,9,2,"ion-item",23),e.TgZ(35,"ion-item",12),e.TgZ(36,"ion-label"),e._uU(37,"Campos a filtrar"),e.qZA(),e.TgZ(38,"ion-input",24),e.NdJ("click",function(){return o.combodatos(1,"1000-actor-plantilla","frmcats","camposfiltro","camposlectura","controlmultipleidnombre")}),e.qZA(),e.TgZ(39,"ion-buttons",2),e.TgZ(40,"ion-button",16),e.NdJ("click",function(){return o.combodatoslimpia("camposfiltro","")}),e._UZ(41,"ion-icon",17),e.qZA(),e.TgZ(42,"ion-button",18),e.NdJ("click",function(){return o.combodatos(1,"1000-actor-plantilla","frmcats","camposfiltro","camposlectura","controlmultipleidnombre")}),e._UZ(43,"ion-icon",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"ion-item",12),e.TgZ(45,"ion-label",25),e._uU(46,"Ejecutar funci\xf3n ApiRest "),e.qZA(),e._UZ(47,"ion-input",26),e.qZA(),e.TgZ(48,"ion-item",27),e.TgZ(49,"ion-label",25),e._uU(50,'Filtros extra ("campo1":valorentero\xac"campo2":"valorstring") '),e.qZA(),e._UZ(51,"ion-textarea",28),e.qZA(),e.YNc(52,B,9,2,"ion-item",23),e.YNc(53,$,9,2,"ion-item",23),e.YNc(54,W,4,0,"ion-item",22),e.YNc(55,z,4,0,"ion-item",22),e.YNc(56,K,8,5,"ion-item",23),e.TgZ(57,"div",20),e.YNc(58,ee,4,0,"div",21),e.qZA(),e.YNc(59,te,11,4,"ion-item",23),e.YNc(60,oe,11,3,"ion-item",22),e.YNc(61,ie,4,0,"ion-item",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"ion-footer"),e.TgZ(63,"ion-row",29),e.TgZ(64,"ion-col"),e.TgZ(65,"ion-button",30),e.NdJ("click",function(){return o.submitForm()}),e._uU(66,"CREAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.Form),e.xp6(7),e.Oqu(o.tituloxx),e.xp6(6),e.hij(" Campo: ",o.tcampo," "),e.xp6(4),e.Q6J("hidden",o.apirestweb),e.xp6(5),e.Q6J("readonly",!0),e.xp6(8),e.Q6J("ngIf",o.Form.get("formulario").hasError("required")&&(o.Form.get("formulario").dirty||o.Form.get("formulario").touched)),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(2),e.Q6J("ngIf",o.Form.get("typegraf").hasError("required")&&(o.Form.get("typegraf").dirty||o.Form.get("typegraf").touched)),e.xp6(1),e.Q6J("ngIf","Reporte plano"===o.record.type),e.xp6(1),e.Q6J("hidden",o.apirestweb),e.xp6(3),e.Q6J("readonly",!0),e.xp6(6),e.Q6J("hidden",!o.apirestweb),e.xp6(8),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(2),e.Q6J("ngIf",o.Form.get("tipoconteo").hasError("required")&&(o.Form.get("tipoconteo").dirty||o.Form.get("tipoconteo").touched)),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(1),e.Q6J("ngIf","Grafica"===o.record.type),e.xp6(4),e.Q6J("disabled",!o.Form.valid))},directives:[s._Y,s.JL,s.sg,a.Gu,a.sr,a.Sm,a.YG,a.gu,a.wd,a.W2,a.q_,a.rH,a.Q$,a.Ie,a.yW,a.pK,a.j9,s.JJ,s.u,s.Q7,Z.O5,a.g2,a.fr,a.Nd,a.wI,a.t9,a.QI,Z.sg,a.n0],pipes:[f.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var ne=d(26806);function ae(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeToList()}),e._UZ(1,"ion-icon",33),e.qZA()}}function se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeToGrid()}),e._UZ(1,"ion-icon",34),e.qZA()}}function le(i,l){if(1&i&&(e.TgZ(0,"ion-label"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.lnq("",e.lcZ(2,3,"NOREGISTROSM")," ",t.itemsList.length," ",e.lcZ(3,5,"NOREGISTROSM5"),"")}}function ce(i,l){1&i&&(e.TgZ(0,"ion-item",36),e.TgZ(1,"ion-label",37),e._UZ(2,"skeleton-element"),e._UZ(3,"skeleton-element"),e._UZ(4,"skeleton-element",38),e.qZA(),e.qZA())}const me=function(){return[0,1,2,3,4,5,6]};function de(i,l){1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,ce,5,0,"ion-item",35),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,me)))}function ue(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",40),e.TgZ(1,"ion-grid"),e.TgZ(2,"ion-row"),e.TgZ(3,"ion-col",41),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).updateRecord(n)}),e._UZ(4,"ion-icon",42),e.TgZ(5,"ion-label",37),e.TgZ(6,"ion-note",43),e._uU(7),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"p"),e.TgZ(10,"strong"),e._uU(11," Nombre:"),e.qZA(),e._uU(12),e._UZ(13,"br"),e.TgZ(14,"strong"),e._uU(15," Tipo:"),e.qZA(),e._uU(16),e._UZ(17,"br"),e.TgZ(18,"strong"),e._uU(19," Conexion:"),e.qZA(),e._uU(20),e._UZ(21,"br"),e.qZA(),e.TgZ(22,"ion-badge",44),e._uU(23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"ion-row"),e.TgZ(25,"ion-col",17),e.TgZ(26,"ion-toolbar",45),e.TgZ(27,"ion-buttons",46),e.TgZ(28,"ion-button",5),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).deleteRecord(n)}),e.ALo(29,"translate"),e._UZ(30,"ion-icon",47),e.qZA(),e.qZA(),e.TgZ(31,"ion-buttons",48),e.TgZ(32,"ion-button",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).updateRecord2(n)}),e.ALo(33,"translate"),e._UZ(34,"ion-icon",50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=l.$implicit;e.xp6(7),e.hij("No. ",t.order,""),e.xp6(5),e.hij(" ",t.nombre,""),e.xp6(4),e.hij(" ",t.type," "),e.xp6(4),e.hij(" ",t.type0," "),e.xp6(3),e.Oqu(t.estado),e.xp6(5),e.s9C("title",e.lcZ(29,7,"ELIMINARM")),e.xp6(4),e.s9C("title",e.lcZ(33,9,"MENUM"))}}function pe(i,l){if(1&i&&(e.TgZ(0,"ion-list"),e.YNc(1,ue,35,11,"ion-item",39),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.itemsList)("ngForTrackBy",t.trackItems)}}function ge(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-col",52),e.TgZ(1,"ion-card"),e.TgZ(2,"ion-row",53),e.TgZ(3,"ion-col"),e.TgZ(4,"span",54),e._uU(5,"No."),e.qZA(),e.TgZ(6,"span",55),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"ion-col"),e.TgZ(9,"span",54),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"ion-item",40),e._UZ(12,"ion-icon",42),e.TgZ(13,"ion-label",56),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).updateRecord(n)}),e.TgZ(14,"p"),e.TgZ(15,"strong"),e._uU(16," Nombre:"),e.qZA(),e._uU(17),e._UZ(18,"br"),e.TgZ(19,"strong"),e._uU(20," Tipo:"),e.qZA(),e._uU(21),e._UZ(22,"br"),e.TgZ(23,"strong"),e._uU(24," Conexion:"),e.qZA(),e._uU(25),e._UZ(26,"br"),e.qZA(),e.qZA(),e.qZA(),e._UZ(27,"ion-card-content"),e.TgZ(28,"ion-row",57),e.TgZ(29,"ion-col",17),e.TgZ(30,"ion-toolbar",45),e.TgZ(31,"ion-buttons",46),e.TgZ(32,"ion-button",5),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).deleteRecord(n)}),e.ALo(33,"translate"),e._UZ(34,"ion-icon",47),e.qZA(),e.qZA(),e.TgZ(35,"ion-buttons",48),e.TgZ(36,"ion-button",49),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).updateRecord2(n)}),e.ALo(37,"translate"),e._UZ(38,"ion-icon",50),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=l.$implicit;e.xp6(7),e.hij("",t.order," "),e.xp6(3),e.hij("",t.estado," "),e.xp6(7),e.hij(" ",t.nombre,""),e.xp6(4),e.hij(" ",t.type," "),e.xp6(4),e.hij(" ",t.type0," "),e.xp6(7),e.s9C("title",e.lcZ(33,7,"ELIMINARM")),e.xp6(4),e.s9C("title",e.lcZ(37,9,"PROPIEDADESM"))}}function he(i,l){if(1&i&&(e.TgZ(0,"ion-grid"),e.TgZ(1,"ion-row"),e.YNc(2,ge,39,11,"ion-col",51),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.itemsList)("ngForTrackBy",t.trackItems)}}function fe(i,l){1&i&&(e.TgZ(0,"h3",58),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"NODATOS")," "))}let _e=(()=>{class i{constructor(t,o,r,n,c,h){this.routerOutlet=t,this.router=o,this.authenticationService=r,this.alertController=n,this.translateService=c,this.modalController=h,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.viewType="grid",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Todos",this.searchSubject=new k.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.idllave=this.router.getCurrentNavigation().extras.state.idllave,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(t=>{this.seguro=t}),this.translateService.get("MSGM").subscribe(t=>{this.msg=t}),this.rangeForm=new s.cw({dual:new s.NI({lower:1,upper:100})}),this.currentSegment="todos",this.pideregistros(this.currentSegment)}filterContacts(t){let o=t.detail.value;this.currentSegment=o,this.pideregistros(o)}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(t){this.itemsList=[],this.efecto=0,this.authenticationService.getReg("todos/"+t+"/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmmovildreportess",0).then(o=>{this.efecto=1,this.items=o,this.itemsList=this.items},o=>{this.authenticationService.presentAlert(o.error,this.msg,"")})}trackItems(t,o){return o.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(t,o){return t.filter(r=>r.nombre.toLowerCase().includes(o.toLowerCase()))}otrasop(t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Opci\xf3n",inputs:[{name:"campos",type:"radio",label:"Propiedades del campo",checked:!0,value:"/frmmovildreportes2CreatePage\xb0Campos ->"+t.nombre}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:r=>{}},{text:"Ok",handler:r=>{var n=r.split("\xb0");this.router.navigate([n[0]],{state:{variables:this.variables,user:null,idllave:t._id,title:n[1]}})}}]})).present()})}deleteRecord(t){return(0,m.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:r=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(t._id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na","frmmovildreportess").then(n=>{this.pideregistros(this.currentSegment)},n=>{this.authenticationService.presentAlert(n.error,this.msg,"")})}}]})).present()})}updateRecord2(t){return(0,m.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:re,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:t,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return o.onWillDismiss().then(r=>{"close"!==r.data&&this.pideregistros(this.currentSegment)}),yield o.present()})}updateRecord(t){return(0,m.mG)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:C,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{variables:this.variables,record:t,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return o.onWillDismiss().then(r=>{"close"!==r.data&&this.pideregistros(this.currentSegment)}),yield o.present()})}addRecord(){return(0,m.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:C,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return t.onWillDismiss().then(o=>{"close"!==o.data&&this.pideregistros(this.currentSegment)}),yield t.present()})}loadData(t){setTimeout(()=>{t.target.complete(),1e3===this.items.length&&(t.target.disabled=!0)},500)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.jP),e.Y36(x.F0),e.Y36(b.$),e.Y36(a.Br),e.Y36(f.sK),e.Y36(a.IN))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-frmmovildreportes-list"]],viewQuery:function(t,o){if(1&t&&e.Gf(a.ju,5),2&t){let r;e.iGM(r=e.CRH())&&(o.infiniteScroll=r.first)}},decls:55,vars:35,consts:[["color","primary"],["slot","start"],["defaultHref","FormsListPage"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","add"],["slot","icon-only","name","refresh-circle-outline"],[3,"click",4,"ngIf"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col",3,"hidden"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],[3,"formGroup","hidden"],[1,"range-item-row"],["size","12"],[1,"range-header"],[1,"range-value"],[1,"range-label"],["formControlName","dual","color","secondary","pin","true","dualKnobs","true","min","1","max","100","step","1","debounce","400",1,"range-control",3,"ionChange"],[1,"user-friends-content"],["sticky",""],[4,"ngIf"],["value","todos",3,"ionChange"],["value","todos","checked",""],["value","Activo"],["value","Inactivo"],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],[3,"click"],["slot","icon-only","name","grid"],["slot","icon-only","name","list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated"],["size","12",3,"click"],["name","server-outline","slot","start"],["slot","end"],["color","medium"],["color","transparent"],["slot","secondary"],["slot","icon-only","name","trash-outline"],["slot","primary"],["color","secondary",3,"title","click"],["slot","icon-only","name","reader-outline"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],[1,"ion-text-wrap",3,"click"],["no-padding",""],[1,"empty-list-message"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header"),e.TgZ(1,"ion-toolbar",0),e.TgZ(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title",3),e._uU(5),e.qZA(),e.TgZ(6,"ion-buttons",4),e.TgZ(7,"ion-button",5),e.NdJ("click",function(){return o.addRecord()}),e.ALo(8,"translate"),e._UZ(9,"ion-icon",6),e.qZA(),e.TgZ(10,"ion-button",5),e.NdJ("click",function(){return o.pideregistros0()}),e.ALo(11,"translate"),e._UZ(12,"ion-icon",7),e.qZA(),e.YNc(13,ae,2,0,"ion-button",8),e.YNc(14,se,2,0,"ion-button",8),e.qZA(),e.qZA(),e.TgZ(15,"ion-toolbar",9),e.TgZ(16,"ion-row",10),e.TgZ(17,"ion-col"),e.TgZ(18,"ion-searchbar",11),e.NdJ("ngModelChange",function(n){return o.searchQuery=n})("ionChange",function(){return o.searchList()}),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"ion-col",12),e.TgZ(21,"ion-button",13),e.NdJ("click",function(){return o.showAgeFilter=!o.showAgeFilter}),e.ALo(22,"translate"),e._UZ(23,"ion-icon",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"form",15),e.TgZ(25,"ion-row",16),e.TgZ(26,"ion-col",17),e.TgZ(27,"div",18),e.TgZ(28,"span",19),e._uU(29),e.qZA(),e.TgZ(30,"span",20),e._uU(31,"Filter by age"),e.qZA(),e.TgZ(32,"span",19),e._uU(33),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"ion-col",17),e.TgZ(35,"ion-range",21),e.NdJ("ionChange",function(){return o.searchList()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"ion-content",22),e.TgZ(37,"ion-item-divider",23),e.YNc(38,le,4,7,"ion-label",24),e.qZA(),e.TgZ(39,"ion-segment",25),e.NdJ("ionChange",function(n){return o.filterContacts(n)}),e.TgZ(40,"ion-segment-button",26),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"ion-segment-button",27),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"ion-segment-button",28),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.qZA(),e.YNc(49,de,2,2,"ion-list",24),e.YNc(50,pe,2,2,"ion-list",24),e.YNc(51,he,3,2,"ion-grid",24),e.YNc(52,fe,3,3,"h3",29),e.TgZ(53,"ion-infinite-scroll",30),e.NdJ("ionInfinite",function(n){return o.loadData(n)}),e._UZ(54,"ion-infinite-scroll-content",31),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij(" ",o.tituloxx," "),e.xp6(2),e.MGl("title"," ",e.lcZ(8,21,"AGREGARM"),""),e.xp6(3),e.MGl("title"," ",e.lcZ(11,23,"REFRESCARM"),""),e.xp6(3),e.Q6J("ngIf","grid"===o.viewType),e.xp6(1),e.Q6J("ngIf","list"===o.viewType),e.xp6(4),e.s9C("placeholder",e.lcZ(19,25,"BUSCARM")),e.Q6J("ngModel",o.searchQuery),e.xp6(2),e.Q6J("hidden",!o.showAgeFilter),e.xp6(1),e.MGl("title"," ",e.lcZ(22,27,"FILTROM"),""),e.xp6(3),e.Q6J("formGroup",o.rangeForm)("hidden",!o.showAgeFilter),e.xp6(5),e.Oqu(o.rangeForm.controls.dual.value.lower),e.xp6(4),e.Oqu(o.rangeForm.controls.dual.value.upper),e.xp6(5),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0),e.xp6(3),e.hij(" ",e.lcZ(42,29,"TODOSM")," "),e.xp6(3),e.hij(" ",e.lcZ(45,31,"ACTIVOSM")," "),e.xp6(3),e.hij(" ",e.lcZ(48,33,"INACTIVOSM")," "),e.xp6(2),e.Q6J("ngIf",0===o.efecto),e.xp6(1),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"list"===o.viewType),e.xp6(1),e.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0&&"grid"===o.viewType),e.xp6(1),e.Q6J("ngIf",0===(null==o.itemsList?null:o.itemsList.length)))},directives:[a.Gu,a.sr,a.Sm,a.oU,a.cs,a.wd,a.YG,a.gu,Z.O5,a.Nd,a.wI,a.VI,a.j9,s.JJ,s.On,s._Y,s.JL,s.sg,a.I_,a.QI,s.u,a.W2,a.rH,a.cJ,a.GO,a.ju,a.MB,a.Q$,a.q_,Z.sg,a.Ie,ne.B,a.jY,a.uN,a.yp,a.PM,a.FN],pipes:[f.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}"]}),i})();var Ze=d(22675),ve=d(26932);let Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[Z.ez,a.Pc,U.K,s.u5,ve.Y,s.UX,w.YL,Ze.v,x.Bz.forChild([{path:"",component:_e}]),f.aw.forChild()]]}),i})()}}]);