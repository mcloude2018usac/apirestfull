function _defineProperties(n,e){for(var l=0;l<e.length;l++){var t=e[l];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function _createClass(n,e,l){return e&&_defineProperties(n.prototype,e),l&&_defineProperties(n,l),n}function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"0rIg":function(n,e,l){"use strict";l.d(e,"a",(function(){return t}));var t=function n(){_classCallCheck(this,n)}},"7YSU":function(n,e,l){"use strict";l.d(e,"a",(function(){return p}));var t=l("8Y7J"),i=l("MKJQ"),o=l("sZkV"),a=l("s7LF"),r=l("SVse"),u=l("Gs+c"),c=l("TSSN"),s=l("ZtEv"),d=t.wb({encapsulation:0,styles:[[".book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}ion-header[_ngcontent-%COMP%]{background:#4caf50}ion-title[_ngcontent-%COMP%]{text-align:center}ion-grid.cardON2[_ngcontent-%COMP%]{background-color:#606163;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardON2[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#414142}ion-grid.cardON[_ngcontent-%COMP%]{background-color:#4284ff;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardON[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#679cff}ion-grid.cardOFF[_ngcontent-%COMP%]{background-color:#bbb7b7;border-radius:10px;padding:10px;margin-bottom:15px;max-width:400px!important}ion-grid.cardOFF[_ngcontent-%COMP%]   .msg[_ngcontent-%COMP%]{background-color:#d4d4d4}.msg[_ngcontent-%COMP%]{float:left;padding:5px 8px;font-size:.8em;color:#fff;border-radius:5px}.number[_ngcontent-%COMP%]{color:#fff;font-size:1.5em;line-height:2em;text-align:center}.digits[_ngcontent-%COMP%]{padding-right:5%;padding-left:5%}.bank[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{color:#fff;font-size:.8em}.bank[_ngcontent-%COMP%]{text-align:right}.ON[_ngcontent-%COMP%]{background-color:#8de278}.OFF[_ngcontent-%COMP%], .ON[_ngcontent-%COMP%]{height:8px;width:8px;border-radius:50%;display:inline-block;margin-right:2px}.OFF[_ngcontent-%COMP%]{background-color:#fb5f5f}.brand[_ngcontent-%COMP%]{max-width:40%;float:right}.chip[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-width:50px;padding-top:5%;border-radius:10%!important;overflow:hidden}ion-icon#power[_ngcontent-%COMP%]{font-size:2em}"]],data:{}});function b(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,48,"ion-item",[],null,null,null,i.Pb,i.A)),t.xb(1,49152,null,0,o.I,[t.h,t.l,t.z],null,null),(n()(),t.yb(2,0,null,0,42,"ion-grid",[],[[2,"cardON",null]],null,null,i.Db,i.t)),t.xb(3,49152,null,0,o.B,[t.h,t.l,t.z],null,null),(n()(),t.yb(4,0,null,0,9,"ion-row",[],null,null,null,i.ac,i.Q)),t.xb(5,49152,null,0,o.hb,[t.h,t.l,t.z],null,null),(n()(),t.yb(6,0,null,0,4,"ion-col",[["class","state"]],null,null,null,i.xb,i.n)),t.xb(7,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.yb(8,0,null,0,2,"div",[["class","msg"]],null,null,null,null,null)),(n()(),t.yb(9,0,null,null,0,"span",[],[[2,"ON",null],[2,"OFF",null]],null,null,null,null)),(n()(),t.Xb(10,null,[" "," "])),(n()(),t.yb(11,0,null,0,2,"ion-col",[["class","bank"]],null,null,null,i.xb,i.n)),t.xb(12,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(13,0,[" "," "])),(n()(),t.yb(14,0,null,0,8,"ion-row",[],null,null,null,i.ac,i.Q)),t.xb(15,49152,null,0,o.hb,[t.h,t.l,t.z],null,null),(n()(),t.yb(16,0,null,0,3,"ion-col",[["class","chip"],["size","2"]],null,null,null,i.xb,i.n)),t.xb(17,49152,null,0,o.u,[t.h,t.l,t.z],{size:[0,"size"]},null),(n()(),t.yb(18,0,null,0,1,"ion-img",[["src","assets/img/chip.png"]],null,null,null,i.Gb,i.w)),t.xb(19,49152,null,0,o.E,[t.h,t.l,t.z],{src:[0,"src"]},null),(n()(),t.yb(20,0,null,0,2,"ion-col",[["class","number3"],["size","10"]],null,null,null,i.xb,i.n)),t.xb(21,49152,null,0,o.u,[t.h,t.l,t.z],{size:[0,"size"]},null),(n()(),t.Xb(22,0,[" "," "])),(n()(),t.yb(23,0,null,0,13,"ion-row",[["class","digits"]],null,null,null,i.ac,i.Q)),t.xb(24,49152,null,0,o.hb,[t.h,t.l,t.z],null,null),(n()(),t.yb(25,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),t.xb(26,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(-1,0,[" **** "])),(n()(),t.yb(28,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),t.xb(29,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(-1,0,[" **** "])),(n()(),t.yb(31,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),t.xb(32,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(-1,0,[" **** "])),(n()(),t.yb(34,0,null,0,2,"ion-col",[["class","number"]],null,null,null,i.xb,i.n)),t.xb(35,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(36,0,[" "," "])),(n()(),t.yb(37,0,null,0,7,"ion-row",[],null,null,null,i.ac,i.Q)),t.xb(38,49152,null,0,o.hb,[t.h,t.l,t.z],null,null),(n()(),t.yb(39,0,null,0,2,"ion-col",[["class","date"]],null,null,null,i.xb,i.n)),t.xb(40,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(41,0,[" Expira: "," / "," "])),(n()(),t.yb(42,0,null,0,2,"ion-col",[["class","bank"]],null,null,null,i.xb,i.n)),t.xb(43,49152,null,0,o.u,[t.h,t.l,t.z],null,null),(n()(),t.Xb(44,0,[" "," "])),(n()(),t.yb(45,0,null,0,3,"ion-radio",[["color","success"],["slot","start"]],null,[[null,"ionBlur"],[null,"ionSelect"]],(function(n,e,l){var i=!0;return"ionBlur"===e&&(i=!1!==t.Nb(n,48)._handleBlurEvent(l.target)&&i),"ionSelect"===e&&(i=!1!==t.Nb(n,48)._handleIonSelect(l.target)&&i),i}),i.Yb,i.N)),t.Sb(5120,null,a.m,(function(n){return[n]}),[o.Mb]),t.xb(47,49152,null,0,o.Y,[t.h,t.l,t.z],{color:[0,"color"],value:[1,"value"]},null),t.xb(48,16384,null,0,o.Mb,[t.l],null,null)],(function(n,e){n(e,17,0,"2"),n(e,19,0,"assets/img/chip.png"),n(e,21,0,"10"),n(e,47,0,"success",e.context.$implicit._id)}),(function(n,e){var l=e.component;n(e,2,0,"Activo"),n(e,9,0,"Activo"==e.context.$implicit.estado,"Inactivo"==e.context.$implicit.estado),n(e,10,0,e.context.$implicit.estado),n(e,13,0,e.context.$implicit.banco),n(e,22,0,e.context.$implicit.nombre),n(e,36,0,l.padLeadingZeros(l.authenticationService.decryptvalue(e.context.$implicit.n4))),n(e,41,0,e.context.$implicit.mes,e.context.$implicit.ano),n(e,44,0,e.context.$implicit.tipo)}))}function m(n){return t.ac(0,[t.Tb(671088640,1,{radioGroup:0}),t.Tb(671088640,2,{searchElementRef:0}),(n()(),t.yb(2,0,null,null,12,"ion-header",[],null,null,null,i.Eb,i.u)),t.xb(3,49152,null,0,o.C,[t.h,t.l,t.z],{translucent:[0,"translucent"]},null),(n()(),t.yb(4,0,null,0,10,"ion-toolbar",[["color","primary"]],null,null,null,i.sc,i.ib)),t.xb(5,49152,null,0,o.Ab,[t.h,t.l,t.z],{color:[0,"color"]},null),(n()(),t.yb(6,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,i.pb,i.f)),t.xb(7,49152,null,0,o.m,[t.h,t.l,t.z],null,null),(n()(),t.yb(8,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.closeModal()&&t),t}),i.ob,i.e)),t.xb(9,49152,null,0,o.l,[t.h,t.l,t.z],null,null),(n()(),t.yb(10,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),t.xb(11,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null),(n()(),t.yb(12,0,null,0,2,"ion-title",[],null,null,null,i.qc,i.gb)),t.xb(13,49152,null,0,o.yb,[t.h,t.l,t.z],null,null),(n()(),t.Xb(14,0,["",""])),(n()(),t.yb(15,0,null,null,32,"ion-content",[["class","ion-padding"]],null,null,null,i.yb,i.o)),t.xb(16,49152,null,0,o.v,[t.h,t.l,t.z],{fullscreen:[0,"fullscreen"]},null),(n()(),t.yb(17,0,null,0,4,"ion-item-divider",[["color","primary"]],null,null,null,i.Kb,i.B)),t.xb(18,49152,null,0,o.J,[t.h,t.l,t.z],{color:[0,"color"]},null),(n()(),t.yb(19,0,null,0,2,"ion-label",[],null,null,null,i.Qb,i.G)),t.xb(20,49152,null,0,o.O,[t.h,t.l,t.z],null,null),(n()(),t.Xb(-1,0,[" Canal de pago "])),(n()(),t.yb(22,0,null,0,22,"ion-list",[],null,null,null,i.Sb,i.H)),t.xb(23,49152,null,0,o.P,[t.h,t.l,t.z],null,null),(n()(),t.yb(24,0,null,0,20,"ion-radio-group",[["value","efectivo"]],null,[[null,"ionBlur"],[null,"ionChange"]],(function(n,e,l){var i=!0;return"ionBlur"===e&&(i=!1!==t.Nb(n,27)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t.Nb(n,27)._handleChangeEvent(l.target)&&i),i}),i.Xb,i.O)),t.Sb(5120,null,a.m,(function(n){return[n]}),[o.Ob]),t.xb(26,49152,null,0,o.Z,[t.h,t.l,t.z],{value:[0,"value"]},null),t.xb(27,16384,null,0,o.Ob,[t.l],null,null),(n()(),t.yb(28,0,null,0,16,"div",[],null,null,null,null,null)),(n()(),t.yb(29,0,null,null,15,"ion-radio-group",[["allow-empty-selection","true"],["name","radio-group"]],null,[[null,"ionChange"],[null,"ionBlur"]],(function(n,e,l){var i=!0,o=n.component;return"ionBlur"===e&&(i=!1!==t.Nb(n,32)._handleBlurEvent(l.target)&&i),"ionChange"===e&&(i=!1!==t.Nb(n,32)._handleChangeEvent(l.target)&&i),"ionChange"===e&&(i=!1!==o.radioSelect(l)&&i),i}),i.Xb,i.O)),t.Sb(5120,null,a.m,(function(n){return[n]}),[o.Ob]),t.xb(31,49152,[[1,4],["radioGroup",4]],0,o.Z,[t.h,t.l,t.z],{name:[0,"name"]},null),t.xb(32,16384,null,0,o.Ob,[t.l],null,null),(n()(),t.yb(33,0,null,0,9,"ion-item",[],null,null,null,i.Pb,i.A)),t.xb(34,49152,null,0,o.I,[t.h,t.l,t.z],null,null),(n()(),t.yb(35,0,null,0,3,"ion-label",[],null,null,null,i.Qb,i.G)),t.xb(36,49152,null,0,o.O,[t.h,t.l,t.z],null,null),(n()(),t.yb(37,0,null,0,1,"strong",[],null,null,null,null,null)),(n()(),t.Xb(-1,null,["Saldo actual"])),(n()(),t.yb(39,0,null,0,3,"ion-radio",[["color","success"],["slot","start"],["value","efectivo"]],null,[[null,"ionBlur"],[null,"ionSelect"]],(function(n,e,l){var i=!0;return"ionBlur"===e&&(i=!1!==t.Nb(n,42)._handleBlurEvent(l.target)&&i),"ionSelect"===e&&(i=!1!==t.Nb(n,42)._handleIonSelect(l.target)&&i),i}),i.Yb,i.N)),t.Sb(5120,null,a.m,(function(n){return[n]}),[o.Mb]),t.xb(41,49152,null,0,o.Y,[t.h,t.l,t.z],{color:[0,"color"],value:[1,"value"]},null),t.xb(42,16384,null,0,o.Mb,[t.l],null,null),(n()(),t.hb(16777216,null,0,1,null,b)),t.xb(44,278528,null,0,r.l,[t.P,t.M,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.yb(45,0,null,0,2,"ion-button",[["color","primary"],["expand","block"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.pagar()&&t),t}),i.ob,i.e)),t.xb(46,49152,null,0,o.l,[t.h,t.l,t.z],{color:[0,"color"],expand:[1,"expand"]},null),(n()(),t.Xb(-1,0,[" PAGAR "]))],(function(n,e){var l=e.component;n(e,3,0,!0),n(e,5,0,"primary"),n(e,11,0,"close"),n(e,16,0,!0),n(e,18,0,"primary"),n(e,26,0,"efectivo"),n(e,31,0,"radio-group"),n(e,41,0,"success","efectivo"),n(e,44,0,l.items),n(e,46,0,"primary","block")}),(function(n,e){n(e,14,0,e.component.tituloxx)}))}var p=t.ub("app-my-modalcredito",u.a,(function(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,1,"app-my-modalcredito",[],null,null,null,m,d)),t.xb(1,4308992,null,0,u.a,[c.l,o.Gb,s.a,o.Ib],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[])},"Gs+c":function(n,e,l){"use strict";l.d(e,"a",(function(){return i}));var t=l("mrSG");l("ZtEv");var i=function(){function n(e,l,t,i){_classCallCheck(this,n),this.translateService=e,this.modalController=l,this.authenticationService=t,this.navParams=i,this.title="AGM project",this.items2=[],this.msg="",this.userinfo=[],this.items=[],this.defaultSelectedRadio="efectivo",this.userinfo=this.authenticationService.getcopiauser(),this.passcode="",this.finalPin="",this.mypinseguro=this.userinfo[0].codpersonal,this.message=!0,this.pageStatus="Enter Pin",this.int=0,this.newPincount=0,this.fingerPin=!1}return _createClass(n,[{key:"padLeadingZeros",value:function(n,e){for(var l=n+"";l.length<e;)l="0"+l;return l}},{key:"ngOnInit",value:function(){var n=this;this.tituloxx=this.navParams.get("title"),this.metodopago=this.navParams.get("metodopago"),this.userinfo=this.authenticationService.getcopiauser(),this.translateService.get("SEGUROM").subscribe((function(e){n.seguro=e})),this.translateService.get("MSGM").subscribe((function(e){n.msg=e})),this.pideregistros("Activo")}},{key:"ngAfterViewInit",value:function(){var n=this;setTimeout((function(){n.selectTwo()}),400)}},{key:"pagar",value:function(){this.modalController.dismiss({data:this.metodopago,item:this.tpagoid})}},{key:"closeModal",value:function(){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.modalController.dismiss({data:"close"});case 1:case"end":return n.stop()}}),n,this)})))}},{key:"selectTwo",value:function(){this.radioGroup.value="efectivo"}},{key:"pideregistros",value:function(n){var e=this;this.itemsList=[],this.authenticationService.getReg("todos/"+n+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id,"tarjetacreditos",0).then((function(n){e.items=n,e.itemsList=e.items}),(function(n){e.authenticationService.presentAlert(n.error,e.msg,"")}))}},{key:"radioSelect",value:function(n){this.tpagoid=n.detail.value}}]),n}()},KyMZ:function(n,e,l){"use strict";l.d(e,"a",(function(){return t}));var t=function n(){_classCallCheck(this,n)}},OEUh:function(n,e,l){"use strict";l.d(e,"a",(function(){return p}));var t=l("8Y7J"),i=l("MKJQ"),o=l("sZkV"),a=l("SVse"),r=l("fc4l"),u=l("ZtEv"),c=t.wb({encapsulation:0,styles:[["[_nghost-%COMP%]{--page-margin:var(--app-fair-margin);--page-background:var(--app-background);--page-swiper-pagination-space:30px;--page-swiper-pagination-height:18px;--page-pagination-bullet-size:10px;--page-options-gutter:calc(var(--page-margin)/2);--page-related-items-gutter:calc(var(--page-margin)/2);--page-color:#089bdf}.book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}.detail-title[_ngcontent-%COMP%]{font-size:22px;font-weight:500;color:var(--ion-color-dark-tint);margin:0;margin-bottom:calc(var(--page-margin)/2)}"]],data:{}});function s(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,3,"ion-button",[["color","danger"],["title","Parar escaner"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.stopScan()&&t),t}),i.ob,i.e)),t.xb(1,49152,null,0,o.l,[t.h,t.l,t.z],{color:[0,"color"]},null),(n()(),t.yb(2,0,null,0,1,"ion-icon",[["name","stop-circle-outline"],["slot","start"]],null,null,null,i.Fb,i.v)),t.xb(3,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"danger"),n(e,3,0,"stop-circle-outline")}),null)}function d(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,3,"ion-button",[["color","warning"],["title","Reset"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.reset()&&t),t}),i.ob,i.e)),t.xb(1,49152,null,0,o.l,[t.h,t.l,t.z],{color:[0,"color"]},null),(n()(),t.yb(2,0,null,0,1,"ion-icon",[["name","refresh-circle-outline"],["slot","start"]],null,null,null,i.Fb,i.v)),t.xb(3,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null)],(function(n,e){n(e,1,0,"warning"),n(e,3,0,"refresh-circle-outline")}),null)}function b(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,4,"h3",[["class","detail-title"]],null,null,null,null,null)),(n()(),t.Xb(-1,null,["Monto a cobrar: "])),(n()(),t.yb(2,0,null,null,2,"strong",[],null,null,null,null,null)),(n()(),t.Xb(3,null,[" ",""])),t.Rb(4,2)],null,(function(n,e){var l=e.component,i=t.Yb(e,3,0,n(e,4,0,t.Nb(e.parent,0),l.monto,l.moneda));n(e,3,0,i)}))}function m(n){return t.ac(0,[t.Pb(0,a.d,[t.u,t.k]),t.Tb(671088640,1,{video:0}),t.Tb(671088640,2,{canvas:0}),t.Tb(671088640,3,{fileinput:0}),t.Tb(671088640,4,{searchElementRef:0}),(n()(),t.yb(5,0,null,null,24,"ion-header",[],null,null,null,i.Eb,i.u)),t.xb(6,49152,null,0,o.C,[t.h,t.l,t.z],{translucent:[0,"translucent"]},null),(n()(),t.yb(7,0,null,0,22,"ion-toolbar",[["color","primary"]],null,null,null,i.sc,i.ib)),t.xb(8,49152,null,0,o.Ab,[t.h,t.l,t.z],{color:[0,"color"]},null),(n()(),t.yb(9,0,null,0,17,"ion-buttons",[["slot","end"]],null,null,null,i.pb,i.f)),t.xb(10,49152,null,0,o.m,[t.h,t.l,t.z],null,null),(n()(),t.hb(16777216,null,0,1,null,s)),t.xb(12,16384,null,0,a.m,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.hb(16777216,null,0,1,null,d)),t.xb(14,16384,null,0,a.m,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.yb(15,0,null,0,3,"ion-button",[["title","Iniciar escaner"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.startScan()&&t),t}),i.ob,i.e)),t.xb(16,49152,null,0,o.l,[t.h,t.l,t.z],null,null),(n()(),t.yb(17,0,null,0,1,"ion-icon",[["name","qr-code-outline"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),t.xb(18,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null),(n()(),t.yb(19,0,null,0,3,"ion-button",[["title","leer imagen qr de galeria"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.captureImage()&&t),t}),i.ob,i.e)),t.xb(20,49152,null,0,o.l,[t.h,t.l,t.z],null,null),(n()(),t.yb(21,0,null,0,1,"ion-icon",[["name","image-outline"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),t.xb(22,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null),(n()(),t.yb(23,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.closeModal()&&t),t}),i.ob,i.e)),t.xb(24,49152,null,0,o.l,[t.h,t.l,t.z],null,null),(n()(),t.yb(25,0,null,0,1,"ion-icon",[["name","close"],["slot","icon-only"]],null,null,null,i.Fb,i.v)),t.xb(26,49152,null,0,o.D,[t.h,t.l,t.z],{name:[0,"name"]},null),(n()(),t.yb(27,0,null,0,2,"ion-title",[],null,null,null,i.qc,i.gb)),t.xb(28,49152,null,0,o.yb,[t.h,t.l,t.z],null,null),(n()(),t.Xb(29,0,["",""])),(n()(),t.yb(30,0,null,null,7,"ion-content",[["class","ion-padding"]],null,null,null,i.yb,i.o)),t.xb(31,49152,null,0,o.v,[t.h,t.l,t.z],{fullscreen:[0,"fullscreen"]},null),(n()(),t.yb(32,0,[[3,0],["fileinput",1]],0,0,"input",[["accept","image/*;capture=camera"],["hidden",""],["type","file"]],null,[[null,"change"]],(function(n,e,l){var t=!0;return"change"===e&&(t=!1!==n.component.handleFile(l.target.files)&&t),t}),null,null)),(n()(),t.yb(33,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t.hb(16777216,null,0,1,null,b)),t.xb(35,16384,null,0,a.m,[t.P,t.M],{ngIf:[0,"ngIf"]},null),(n()(),t.yb(36,0,[[1,0],["video",1]],0,0,"video",[["width","100%"]],[[8,"hidden",0]],null,null,null,null)),(n()(),t.yb(37,0,[[2,0],["canvas",1]],0,0,"canvas",[["hidden",""]],null,null,null,null,null))],(function(n,e){var l=e.component;n(e,6,0,!0),n(e,8,0,"primary"),n(e,12,0,l.scanActive),n(e,14,0,l.scanResult),n(e,18,0,"qr-code-outline"),n(e,22,0,"image-outline"),n(e,26,0,"close"),n(e,31,0,!0),n(e,35,0,0!==l.monto)}),(function(n,e){var l=e.component;n(e,29,0,l.tituloxx),n(e,36,0,!l.scanActive)}))}var p=t.ub("app-my-modalscanpay",r.a,(function(n){return t.ac(0,[(n()(),t.yb(0,0,null,null,1,"app-my-modalscanpay",[],null,null,null,m,c)),t.xb(1,4308992,null,0,r.a,[o.b,o.Gb,o.Eb,o.Qb,u.a,t.z,o.Ib,o.Kb],null,null)],(function(n,e){n(e,1,0)}),null)}),{},{},[])},fc4l:function(n,e,l){"use strict";l.d(e,"a",(function(){return a}));var t=l("mrSG"),i=(l("ZtEv"),l("7Ozu")),o=l.n(i),a=function(){function n(e,l,t,i,o,a,r,u){_classCallCheck(this,n),this.alertController=e,this.modalController=l,this.loadingCtrl=t,this.toastCtrl=i,this.authenticationService=o,this.ngZone=a,this.navParams=r,this.plt=u,this.scanActive=!1,this.scanResult=null,this.loading=null,this.title="AGM project",this.zoom=16,this.userinfo=[],this.monto=0,this.plt.is("ios")&&"standalone"in window.navigator&&window}return _createClass(n,[{key:"dismissModal",value:function(){this.modalController.dismiss({data:"close"})}},{key:"ngOnInit",value:function(){this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.navParams.get("title"),this.moneda=this.navParams.get("moneda"),this.monto=this.navParams.get("monto"),this.tipo=this.navParams.get("tipo")}},{key:"ngAfterViewInit",value:function(){this.canvasElement=this.canvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.videoElement=this.video.nativeElement,this.startScan()}},{key:"showQrToast",value:function(){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastCtrl.create({message:"Open ".concat(this.scanResult,"?"),position:"top",buttons:[{text:"Open",handler:function(){window.open(e.scanResult,"_system","location=yes")}}]});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"reset",value:function(){this.scanResult=null}},{key:"stopScan",value:function(){this.scanActive=!1}},{key:"startScan",value:function(){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 2:return e=n.sent,this.videoElement.srcObject=e,this.videoElement.setAttribute("playsinline",!0),n.next=7,this.loadingCtrl.create({});case 7:return this.loading=n.sent,n.next=10,this.loading.present();case 10:this.videoElement.play(),requestAnimationFrame(this.scan.bind(this));case 12:case"end":return n.stop()}}),n,this)})))}},{key:"scan",value:function(){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e,l,t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.videoElement.readyState!==this.videoElement.HAVE_ENOUGH_DATA){n.next=14;break}if(n.t0=this.loading,!n.t0){n.next=7;break}return n.next=5,this.loading.dismiss();case 5:this.loading=null,this.scanActive=!0;case 7:this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.width=this.videoElement.videoWidth,this.canvasContext.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height),e=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),(l=o()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"}))?(this.scanActive=!1,this.scanResult=this.authenticationService.decryptvalue(l.data),t=this.scanResult.split("\xb0"),this.tokenactual=t[6],"pagoqr"===this.tipo?this.verificapago(t):this.cobronormal(t)):this.scanActive&&requestAnimationFrame(this.scan.bind(this)),n.next=15;break;case 14:requestAnimationFrame(this.scan.bind(this));case 15:case"end":return n.stop()}}),n,this)})))}},{key:"captureImage",value:function(){this.fileinput.nativeElement.click()}},{key:"handleFile",value:function(n){var e=this,l=n.item(0),t=new Image;t.onload=function(){e.canvasContext.drawImage(t,0,0,e.canvasElement.width,e.canvasElement.height);var n=e.canvasContext.getImageData(0,0,e.canvasElement.width,e.canvasElement.height),l=o()(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});if(l){e.scanResult=e.authenticationService.decryptvalue(l.data);var i=e.scanResult.split("\xb0");e.tokenactual=i[6],"cobrapagoqr"===e.tipo?e.cobronormalreves(i):"pagoqr"===e.tipo?e.verificapago(i):e.cobronormal(i)}},t.src=URL.createObjectURL(l)}},{key:"verificapago",value:function(n){var e=this;this.authenticationService.getReg(this.tokenactual+"/3","compratokens",0).then((function(l){l.length>0?3===l[0].estado?e.cobronormalsinsaldo(n):0===l[0].estado?e.authenticationService.getReg(n[1]+"/personadispid/"+n[0],"personals",0).then((function(l){if(Number(l[0].saldo)>=Number(e.monto)){var t={estado:2,cobroservicio:e.userinfo[0].idempresa.nombre+"<br> en la ubicaci\xf3n:"+e.userinfo[0].idempresa.direccion+"<br> Quiere cobrar "+e.moneda+" "+e.monto+"<br> \xbf Desea autorizar la transaccion?",bitacora:{idempresa:e.userinfo[0].idempresa._id,idafiliado:"",email:e.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+e.tokenactual}};t&&e.authenticationService.createReg(e.tokenactual,t,"compratokens").then((function(l){e.StartTimer(n)}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}else{var i={estado:10,cobroservicio:"Fondos insuficientes",bitacora:{idempresa:e.userinfo[0].idempresa._id,idafiliado:"",email:e.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+e.tokenactual}};i&&e.authenticationService.createReg(e.tokenactual,i,"compratokens").then((function(n){e.authenticationService.presentAlert("Fondos insuficientes","Precauci\xf3n","")}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")})):e.StartTimer(n):e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}),(function(n){e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"StartTimer",value:function(n){var e=this;this.timer=setTimeout((function(l){e.authenticationService.getReg(e.tokenactual+"/3","compratokens",0).then((function(l){l.length>0&&3===l[0].estado?e.cobronormalsinsaldo(n):e.StartTimer(n)}),(function(n){e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}),3e3)}},{key:"closeModal",value:function(){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.modalController.dismiss({data:"close"});case 1:case"end":return n.stop()}}),n,this)})))}},{key:"cobronormal",value:function(n){var e=this;this.authenticationService.getReg(n[6]+"/2","compratokens",0).then((function(l){var t;if((t=l).length>0)if(0===l[0].estado)if(e.authenticationService.decryptvalue(t[0].trama)+"\xb0"+t[0]._id+"\xb0"+t[0].tipo===e.scanResult)if(e.monto===n[4]){var i={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:e.userinfo[0].idempresa._id,idsuscriptor:n[1],tipocompra:"servicio",tokencompra:t[0]._id,nombre:n[2],monto:e.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:e.userinfo[0].idempresa._id,idafiliado:"",email:e.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:n[1],idsuscriptor2:{id:e.userinfo[0]._id,nombre:e.userinfo[0].nombre}};i&&e.authenticationService.createReg("",i,"comprasaldos").then((function(l){e.modalController.dismiss({data:"Se ha realizado una venta a: "+n[2]+"<br> Por un monto de "+e.moneda+" "+e.monto})}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}else e.authenticationService.presentAlert("El Monto no coincide con lo que el cliente programo.<br> El cliente quiere comprar: "+e.moneda+" "+n[4]+"<br> Se quiere acreditar: "+e.moneda+" "+e.monto,"Precauci\xf3n","");else e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"seguroacepta",value:function(n,e,l){return Object(t.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({message:n,buttons:[{text:"No Aceptar",cssClass:"secondary",handler:function(n){var e={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};e&&o.authenticationService.createReg(o.tokenactual,e,"compratokens").then((function(n){o.modalController.dismiss("ok")}),(function(n){o.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}},{text:"Aceptar",handler:function(){var n=e[2].split("<"),t={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:e[0],idsuscriptor:o.userinfo[0]._id,tipocompra:"servicio",tokencompra:l[0]._id,nombre:o.userinfo[0].nombre,monto:e[4],url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:e[0],idafiliado:"",email:o.userinfo[0].email,permiso:"Crea",accion:"Cobro por pago de servicio"},idempresa0:o.userinfo[0]._id,idsuscriptor2:{id:e[1],nombre:n[0]}};t&&o.authenticationService.createReg("",t,"comprasaldos").then((function(n){var e={estado:33,cobroservicio:"Cobro realizado con exito ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};e&&o.authenticationService.createReg(o.tokenactual,e,"compratokens").then((function(n){o.modalController.dismiss("ok")}),(function(n){o.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}),(function(n){var e={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:o.userinfo[0].idempresa._id,idafiliado:"",email:o.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+o.tokenactual}};e&&o.authenticationService.createReg(o.tokenactual,e,"compratokens").then((function(n){o.modalController.dismiss("ok")}),(function(n){o.authenticationService.presentAlert(n.error,"Precauci\xf3n","")})),o.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}}]});case 2:return i=t.sent,t.next=5,i.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"cobronormalreves",value:function(n){var e=this;this.authenticationService.getReg(n[6]+"/2","compratokens",0).then((function(l){var t;(t=l).length>0&&0===l[0].estado&&e.authenticationService.decryptvalue(t[0].trama)+"\xb0"+t[0].tipo+"\xb0"+t[0]._id+"\xb0"+t[0].tipo===e.scanResult?e.seguroacepta(n[2]+"<br> Quiere cobrar "+e.moneda+" "+n[4]+"<br> \xbf Desea autorizar la transaccion?",n,t):e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}))}},{key:"cobronormalsinsaldo",value:function(n){var e=this;this.authenticationService.getReg(n[1]+"/personadispid/"+n[0],"personals",0).then((function(l){if(Number(l[0].saldo)>=Number(e.monto))e.authenticationService.getReg(n[6]+"/2","compratokens",0).then((function(l){var t;t=l;var i={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:e.userinfo[0].idempresa._id,idsuscriptor:n[1],tipocompra:"servicio",tokencompra:t[0]._id,nombre:n[2],monto:e.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:e.userinfo[0].idempresa._id,idafiliado:"",email:e.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:n[1],idsuscriptor2:{id:e.userinfo[0]._id,nombre:e.userinfo[0].nombre}};i&&e.authenticationService.createReg("",i,"comprasaldos").then((function(l){e.modalController.dismiss({data:"Se ha realizado una venta a: "+n[2]+"<br> Por un monto de "+e.moneda+" "+e.monto})}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}),(function(n){e.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")}));else{var t={estado:100,cobroservicio:"Fondos insuficientes, transaccion anulada",bitacora:{idempresa:e.userinfo[0].idempresa._id,idafiliado:"",email:e.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+e.tokenactual}};t&&e.authenticationService.createReg(e.tokenactual,t,"compratokens").then((function(n){e.authenticationService.presentAlert("Fondos insuficientes, transaccion anulada","Precauci\xf3n","")}),(function(n){e.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}))}}))}}]),n}()}}]);