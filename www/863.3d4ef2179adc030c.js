"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[863],{50076:(L,v,s)=>{s.d(v,{oK:()=>n,GW:()=>p,dk:()=>m});var n=(()=>{return(l=n||(n={})).Prompt="PROMPT",l.Camera="CAMERA",l.Photos="PHOTOS",n;var l})(),p=(()=>{return(l=p||(p={})).Rear="REAR",l.Front="FRONT",p;var l})(),m=(()=>{return(l=m||(m={})).Uri="uri",l.Base64="base64",l.DataUrl="dataUrl",m;var l})()},26388:(L,v,s)=>{s.d(v,{dk:()=>p.dk,oK:()=>p.oK,V1:()=>m});var n=s(47423),p=s(50076);const m=(0,n.fo)("Camera",{web:()=>s.e(3954).then(s.bind(s,63954)).then(l=>new l.CameraWeb)})},32045:(L,v,s)=>{s.r(v),s.d(v,{frmtareasprogramadasservicio2sListPageModule:()=>pi});var n=s(23349),p=s(55787),m=s(69808),l=s(33678),_=s(51062),u=s(93075),b=s(36351),h=s(70655),S=s(68554),I=s(4707),y=s(26388),i=s(5e3),M=s(26806);function q(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",35),i.NdJ("click",function(){return i.CHM(t),i.oxw().addRecord()}),i.ALo(1,"translate"),i._UZ(2,"ion-icon",36),i.qZA()}if(2&e){const t=i.oxw();i.MGl("title"," ",i.lcZ(1,2,"AGREGARM"),""),i.Q6J("hidden",!t.esinspector)}}function O(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",37),i.NdJ("click",function(){return i.CHM(t),i.oxw().changeToList()}),i._UZ(1,"ion-icon",38),i.qZA()}}function E(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",37),i.NdJ("click",function(){return i.CHM(t),i.oxw().changeToGrid()}),i._UZ(1,"ion-icon",39),i.qZA()}}function w(e,a){if(1&e&&(i.TgZ(0,"ion-label"),i._uU(1),i.ALo(2,"translate"),i.ALo(3,"translate"),i.qZA()),2&e){const t=i.oxw();i.xp6(1),i.lnq("",i.lcZ(2,3,"NOREGISTROSM")," ",t.itemsList.length," ",i.lcZ(3,5,"NOREGISTROSM5"),"")}}function N(e,a){1&e&&(i.TgZ(0,"ion-segment-button",40),i._uU(1," Activas "),i.qZA())}function k(e,a){1&e&&(i.TgZ(0,"ion-segment-button",41),i._uU(1," No solucionadas "),i.qZA())}function F(e,a){1&e&&(i.TgZ(0,"ion-segment-button",42),i._uU(1," Solucionadas por empresa "),i.qZA())}function J(e,a){1&e&&(i.TgZ(0,"ion-segment-button",43),i._uU(1," Soluci\xf3n aceptada "),i.qZA())}function R(e,a){1&e&&(i.TgZ(0,"ion-segment-button",44),i._uU(1," Para sancionar "),i.qZA())}function Q(e,a){1&e&&(i.TgZ(0,"ion-segment-button",45),i._uU(1," Sanciones "),i.qZA())}function z(e,a){1&e&&(i.TgZ(0,"ion-item",47),i.TgZ(1,"ion-label",48),i._UZ(2,"skeleton-element"),i._UZ(3,"skeleton-element"),i._UZ(4,"skeleton-element",49),i.qZA(),i.qZA())}const Y=function(){return[0,1,2,3,4,5,6]};function D(e,a){1&e&&(i.TgZ(0,"ion-list"),i.YNc(1,z,5,0,"ion-item",46),i.qZA()),2&e&&(i.xp6(1),i.Q6J("ngForOf",i.DdM(1,Y)))}function j(e,a){1&e&&(i.TgZ(0,"ion-chip",65),i._uU(1," Tempo para resolver orden de campo ha expirado "),i.qZA())}function G(e,a){1&e&&(i.TgZ(0,"a",66),i._uU(1,"Geolocalizaci\xf3n soluci\xf3n empresa "),i.qZA())}function B(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",67),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).notificacion(o)}),i._uU(1," Solucionar Orden de campo "),i.qZA()}}function H(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",68),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,1)}),i._UZ(1,"ion-icon",69),i.qZA()}}function K(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",70),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,0)}),i._UZ(1,"ion-icon",71),i.qZA()}}function W(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",72),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,3)}),i._UZ(1,"ion-icon",73),i.qZA()}}function $(e,a){if(1&e&&(i.TgZ(0,"ion-item",51),i.TgZ(1,"ion-grid"),i.TgZ(2,"ion-row"),i.TgZ(3,"ion-col",17),i.TgZ(4,"ion-avatar",1),i._UZ(5,"ion-img-viewer",52),i.qZA(),i.TgZ(6,"ion-label",48),i.TgZ(7,"ion-note",53),i._uU(8),i.qZA(),i._UZ(9,"br"),i.TgZ(10,"p"),i.TgZ(11,"strong"),i._uU(12," Tipo:"),i.qZA(),i._uU(13),i._UZ(14,"br"),i.TgZ(15,"strong"),i._uU(16," Proyecto:"),i.qZA(),i._uU(17),i._UZ(18,"br"),i.TgZ(19,"strong"),i._uU(20," Descripcion:"),i.qZA(),i._uU(21),i._UZ(22,"br"),i.TgZ(23,"strong"),i._uU(24,"Tipo multa:"),i.qZA(),i.qZA(),i._UZ(25,"div",54),i.TgZ(26,"p"),i._UZ(27,"br"),i.TgZ(28,"strong"),i._uU(29,"Tiempo estimado para resolver orden de campo:"),i.qZA(),i._uU(30),i._UZ(31,"br"),i.TgZ(32,"strong"),i._uU(33,"Tiempo trascurrido de la falla sin resolver::"),i.qZA(),i._uU(34),i._UZ(35,"br"),i.YNc(36,j,2,0,"ion-chip",55),i._UZ(37,"br"),i.TgZ(38,"strong"),i._uU(39),i.qZA(),i._UZ(40,"br"),i.TgZ(41,"strong"),i._uU(42),i.qZA(),i.TgZ(43,"ion-avatar",1),i._uU(44," *ngIf=\"item.fotoempresa!==''\" "),i._UZ(45,"ion-img-viewer",52),i.qZA(),i.qZA(),i.TgZ(46,"ion-badge",56),i._uU(47),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(48,"ion-row"),i.TgZ(49,"ion-col",17),i.TgZ(50,"span"),i.TgZ(51,"div",57),i._uU(52),i.ALo(53,"date"),i._UZ(54,"br"),i._uU(55),i.ALo(56,"date"),i._UZ(57,"br"),i.YNc(58,G,2,0,"a",58),i.qZA(),i.qZA(),i.TgZ(59,"ion-toolbar",59),i.TgZ(60,"ion-buttons",60),i.YNc(61,B,2,0,"ion-button",61),i.qZA(),i.TgZ(62,"ion-buttons",60),i.YNc(63,H,2,0,"ion-button",62),i.qZA(),i.TgZ(64,"ion-buttons",60),i.YNc(65,K,2,0,"ion-button",63),i.qZA(),i.TgZ(66,"ion-buttons",60),i.YNc(67,W,2,0,"ion-button",64),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e){const t=a.$implicit,r=a.index,o=i.oxw(2);i.xp6(5),i.Q6J("title",o.foto)("src",o.apifoto+t.foto),i.xp6(3),i.hij("No. ",r+1,""),i.xp6(5),i.hij(" ",t.tipo," "),i.xp6(4),i.hij(" ",t.proyectotxt," "),i.xp6(4),i.hij(" ",t.descripcion,""),i.xp6(4),i.Q6J("innerHtml",t.tipomulta,i.oJD),i.xp6(5),i.hij(" ",t.tiempo," Horas. "),i.xp6(4),i.hij(" ",t.minutos2," "),i.xp6(2),i.Q6J("ngIf",t.faltante<0),i.xp6(3),i.Oqu(t.correotipo),i.xp6(3),i.hij("Empresa: ",t.empresatxt,""),i.xp6(3),i.Q6J("title",o.foto)("src",o.apifoto+t.fotoempresa),i.xp6(2),i.Oqu(t.estado),i.xp6(5),i.AsE(" Creaci\xf3n [",t.usuarionew,"-",i.xi3(53,24,t.createdAt,"dd-MM-yyyy, hh:mm aaa"),"]"),i.xp6(3),i.AsE(" Actualiza [",t.usuarioup,"-",i.xi3(56,27,t.updatedAt,"dd-MM-yyyy, hh:mm aaa"),"]"),i.xp6(3),i.Q6J("ngIf",""!==t.gpsempresa),i.xp6(3),i.Q6J("ngIf","userempresa"===o.userinfo[0].role&&"Activo"===o.currentSegment&&t.faltante>0),i.xp6(2),i.Q6J("ngIf","Inspector planificaci\xf3n"===o.userinfo[0].role&&("Solucionadas por empresa"===o.currentSegment||"Soluci\xf3n aceptada"===o.currentSegment)),i.xp6(2),i.Q6J("ngIf","Inspector planificaci\xf3n"===o.userinfo[0].role&&("Solucionadas por empresa"===o.currentSegment||"Soluci\xf3n aceptada"===o.currentSegment)),i.xp6(2),i.Q6J("ngIf","Supervisor planificaci\xf3n"===o.userinfo[0].role&&("Para sancionar"===o.currentSegment||"No solucionadas"===o.currentSegment))}}function X(e,a){if(1&e&&(i.TgZ(0,"ion-list"),i.YNc(1,$,68,30,"ion-item",50),i.qZA()),2&e){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.itemsList)("ngForTrackBy",t.trackItems)}}function V(e,a){1&e&&(i.TgZ(0,"ion-chip",83),i._uU(1," Tempo para resolver orden de campo ha expirado "),i.qZA())}function ii(e,a){if(1&e&&(i.TgZ(0,"ion-avatar",1),i._UZ(1,"ion-img-viewer",52),i.qZA()),2&e){const t=i.oxw().$implicit,r=i.oxw(2);i.xp6(1),i.Q6J("title",r.foto)("src",r.apifoto+t.fotoempresa)}}function ti(e,a){if(1&e&&(i.TgZ(0,"a",84),i._uU(1,"Geolocalizaci\xf3n soluci\xf3n empresa "),i.qZA()),2&e){const t=i.oxw().$implicit;i.s9C("href",t.gpsempresa,i.LSH)}}function ei(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",67),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).notificacion(o)}),i._uU(1," Solucionar orden de campo "),i.qZA()}}function oi(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",68),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,1)}),i._UZ(1,"ion-icon",69),i.qZA()}}function ri(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",70),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,0)}),i._UZ(1,"ion-icon",71),i.qZA()}}function ni(e,a){if(1&e){const t=i.EpF();i.TgZ(0,"ion-button",72),i.NdJ("click",function(){i.CHM(t);const o=i.oxw().$implicit;return i.oxw(2).autorizar(o,3)}),i._UZ(1,"ion-icon",73),i.qZA()}}function ai(e,a){if(1&e&&(i.TgZ(0,"ion-col",75),i.TgZ(1,"ion-card"),i.TgZ(2,"ion-row",76),i.TgZ(3,"ion-col"),i.TgZ(4,"span",77),i._uU(5,"No."),i.qZA(),i.TgZ(6,"span",78),i._uU(7),i.qZA(),i.qZA(),i.TgZ(8,"ion-col"),i.TgZ(9,"span",77),i._uU(10),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"ion-item",51),i.TgZ(12,"ion-avatar",1),i._UZ(13,"ion-img-viewer",52),i.qZA(),i.TgZ(14,"ion-label",48),i._UZ(15,"div",54),i.TgZ(16,"p"),i.TgZ(17,"strong"),i._uU(18," Tipo:"),i.qZA(),i._uU(19),i._UZ(20,"br"),i.TgZ(21,"strong"),i._uU(22,"Descripcion:"),i.qZA(),i._uU(23),i._UZ(24,"br"),i.TgZ(25,"strong"),i._uU(26,"Tipo multa:"),i.qZA(),i.qZA(),i._UZ(27,"div",54),i.TgZ(28,"p"),i._UZ(29,"br"),i.TgZ(30,"strong"),i._uU(31,"Tiempo estimado para resolver orden de campo:"),i.qZA(),i._uU(32),i._UZ(33,"br"),i.TgZ(34,"strong"),i._uU(35,"Tiempo trascurrido de la falla sin resolver:"),i.qZA(),i._uU(36),i._UZ(37,"br"),i.YNc(38,V,2,0,"ion-chip",79),i._UZ(39,"br"),i.TgZ(40,"strong"),i._uU(41),i.qZA(),i._UZ(42,"br"),i.TgZ(43,"strong"),i._uU(44),i.qZA(),i.YNc(45,ii,2,2,"ion-avatar",80),i.qZA(),i.qZA(),i.qZA(),i._UZ(46,"ion-card-content"),i.TgZ(47,"ion-row",81),i.TgZ(48,"ion-col",17),i.TgZ(49,"span"),i.TgZ(50,"div",57),i._uU(51),i.ALo(52,"date"),i._UZ(53,"br"),i._uU(54),i.ALo(55,"date"),i._UZ(56,"br"),i._uU(57),i.YNc(58,ti,2,1,"a",82),i.qZA(),i.qZA(),i.TgZ(59,"ion-toolbar",59),i.TgZ(60,"ion-buttons",60),i.YNc(61,ei,2,0,"ion-button",61),i.qZA(),i.TgZ(62,"ion-buttons",60),i.YNc(63,oi,2,0,"ion-button",62),i.qZA(),i.TgZ(64,"ion-buttons",60),i.YNc(65,ri,2,0,"ion-button",63),i.qZA(),i.TgZ(66,"ion-buttons",60),i.YNc(67,ni,2,0,"ion-button",64),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e){const t=a.$implicit,r=a.index,o=i.oxw(2);i.xp6(7),i.hij("",r+1," "),i.xp6(3),i.hij("",t.estado," "),i.xp6(3),i.Q6J("title",o.foto)("src",o.apifoto+t.foto),i.xp6(2),i.Q6J("innerHtml",o.authenticationService.getKeyssrthtmlsubst(t.proyectotxt,158,t.proyectotxt.length),i.oJD),i.xp6(4),i.hij(" ",t.tipo," "),i.xp6(4),i.hij(" ",t.descripcion," "),i.xp6(4),i.Q6J("innerHtml",t.tipomulta,i.oJD),i.xp6(5),i.hij(" ",t.tiempo," Horas. "),i.xp6(4),i.hij(" ",t.minutos2," "),i.xp6(2),i.Q6J("ngIf",t.faltante<0),i.xp6(3),i.Oqu(t.correotipo),i.xp6(3),i.hij("Empresa: ",t.empresatxt,""),i.xp6(1),i.Q6J("ngIf",""!==t.fotoempresa),i.xp6(6),i.AsE(" Creaci\xf3n [",t.usuarionew,"-",i.xi3(52,24,t.createdAt,"dd-MM-yyyy, hh:mm aaa"),"]"),i.xp6(3),i.AsE(" Actualiza [",t.usuarioup,"-",i.xi3(55,27,t.updatedAt,"dd-MM-yyyy, hh:mm aaa"),"]"),i.xp6(3),i.hij(" -",t.gpsempresa,"- "),i.xp6(1),i.Q6J("ngIf",""!==t.gpsempresa),i.xp6(3),i.Q6J("ngIf","userempresa"===o.userinfo[0].role&&"Activo"===o.currentSegment&&t.faltante>0),i.xp6(2),i.Q6J("ngIf","Inspector planificaci\xf3n"===o.userinfo[0].role&&("Solucionadas por empresa"===o.currentSegment||"Soluci\xf3n aceptada"===o.currentSegment)),i.xp6(2),i.Q6J("ngIf","Inspector planificaci\xf3n"===o.userinfo[0].role&&("Solucionadas por empresa"===o.currentSegment||"Soluci\xf3n aceptada"===o.currentSegment)),i.xp6(2),i.Q6J("ngIf","Supervisor planificaci\xf3n"===o.userinfo[0].role&&("Para sancionar"===o.currentSegment||"No solucionadas"===o.currentSegment))}}function si(e,a){if(1&e&&(i.TgZ(0,"ion-grid"),i.TgZ(1,"ion-row"),i.YNc(2,ai,68,30,"ion-col",74),i.qZA(),i.qZA()),2&e){const t=i.oxw();i.xp6(2),i.Q6J("ngForOf",t.itemsList)("ngForTrackBy",t.trackItems)}}function ci(e,a){1&e&&(i.TgZ(0,"h3",85),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"NODATOS")," "))}let li=(()=>{class e{constructor(t,r,o,c,T,x){this.routerOutlet=t,this.router=r,this.authenticationService=o,this.alertController=c,this.translateService=T,this.modalController=x,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.essupervisor=!1,this.esinspector=!1,this.t1=!1,this.t11=!1,this.t2=!1,this.t3=!1,this.t4=!1,this.t5=!1,this.userinfo=[],this.viewType="grid",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Activo",this.searchSubject=new I.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.variables.nombre,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(t=>{this.seguro=t}),this.translateService.get("MSGM").subscribe(t=>{this.msg=t}),this.rangeForm=new u.cw({dual:new u.NI({lower:1,upper:100})}),this.geoposiciontxt=this.setCurrentLocationa33(),this.currentSegment="Inspector planificaci\xf3n"===this.userinfo[0].role?"Solucionadas por empresa":"Supervisor planificaci\xf3n"===this.userinfo[0].role?"No solucionadas":"Activo",this.pideregistros(this.currentSegment)}setCurrentLocationa33(){return(0,h.mG)(this,void 0,void 0,function*(){var t;t=yield this.authenticationService.getGPS(),this.geoposiciontxt=t.length>0?t[0].la+"\xac"+t[0].ln:""})}filterContacts(t){const r=t.detail.value;this.currentSegment=r,this.pideregistros(r)}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(t){this.itemsList=[],this.efecto=0;let r="";if("Inspector planificaci\xf3n"===this.userinfo[0].role)this.t3=!0,this.t2=!0,this.t4=!0,r="todosmultasinspector/"+t+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0]._id;else if("Supervisor planificaci\xf3n"===this.userinfo[0].role)this.t4=!0,this.t5=!0,this.t11=!0,r="No solucionadas"===this.currentSegment?"todosmultassupervisor/"+t+"/"+this.userinfo[0].idempresa._id+"\xb01/"+this.userinfo[0]._id:"todosmultassupervisor/"+t+"/"+this.userinfo[0].idempresa._id+"\xb02/"+this.userinfo[0]._id;else{this.t1=!0,this.t2=!0,this.t3=!0,this.t11=!0;var o=this.userinfo[0].nov;""!==o&&void 0!==o&&(o=o.split("\xac")[0]),r="No solucionadas"===this.currentSegment?"todosmultas/"+t+"/"+this.userinfo[0].idempresa._id+"\xb01/"+o:"todosmultas/"+t+"/"+this.userinfo[0].idempresa._id+"\xb02/"+o}this.authenticationService.getReg(r,"frmtareasprogramadasservicioss",0).then(c=>{this.efecto=1,this.items=c,this.itemsList=this.items},c=>{this.authenticationService.presentAlert(c.error,this.msg,"")})}trackItems(t,r){return r.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(t,r){return t.filter(o=>o.nombre.toLowerCase().includes(r.toLowerCase()))}autorizar(t,r){return(0,h.mG)(this,void 0,void 0,function*(){if(0===r){const o={operacion:"actualizaot2",estado:"Para sancionar",correotipo:"Notifico a supervisor",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};o&&this.authenticationService.createReg(t._id,o,"frmtareasprogramadasservicioss").then(c=>{const T=t.correos.split(";"),x=T[0]+";"+T[2]+";mario.morales@mcloude.com",g='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+'" alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>    <p style="text-align: left;">'+this.proyectotxt+'</p>        <p style="text-align: left;">Tienes una solicitud de una orden de campo:</p>       <p style="text-align: left;"><strong>Tipo</strong>:&nbsp; '+t.tipo+'</p>       <p style="text-align: left;"><strong>Descripci\xf3n</strong>: '+t.descripcion+'</p>       <p style="text-align: left;"><strong>Multa</strong>:'+t.tipomulta+"</p>      <p>&nbsp;</p>  <strong>** APLICAR MULTA**</strong></p> <p>&nbsp;</p>  <strong>** APLICAR MULTA**</strong></p>    <p>&nbsp;</p>      <p>saludos</p></body> </html>",Z=x.split(";");var A="",d={};"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(A="crea/1/GMAIL",d={destino:Z,html:g,text:g,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(A="crea/1/OFFICE365",d={destino:Z,html:g,text:g,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(A="",d={destino:x,html:g,text:g,subjet:t.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(A,d,"mails").then(f=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Exito","Notificaci\xf3n enviada con exito","")},f=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n","")})})}else if(1===r){const o={operacion:"actualizaot2",estado:"Soluci\xf3n aceptada",correotipo:"Notifico a inspector",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};o&&this.authenticationService.createReg(t._id,o,"frmtareasprogramadasservicioss").then(c=>{this.pideregistros(this.currentSegment)})}else this.authenticationService.getReg("5f72a12587c9e33bd4ada7abs/"+t.idcontrato+"/"+this.userinfo[0].idempresa._id+"\xb05f72a12587c9e33bd4ada7ab/registromovilxidpapa","frmmovils",0).then(o=>{let c=[];c=o;let T="";for(let g=0;g<c.length;g++)T=T+c[g]._id+";";this.authenticationService.getReg("5f595df92521cd38c8fe3126/"+T+"/"+this.userinfo[0].idempresa._id+"\xb05f595df92521cd38c8fe3126\xb0"+t.periodomulta+"/registromovilxperiodoyarray","frmmovils",0).then(g=>{let Z=[];if(Z=g,1===Z.length){const f=t.tipomulta.split("<br>");var d;d=f[2].indexOf("sanci\xf3n % por millar")>=0?Number(Z[0].montopago)*(Number(f[2].split(":")[1].trim())/1e3):f[2].split(":")[1].trim();const U={idcat:"GESTION DE CONTRATOS",idform:"5f74c0fff22ed14ea01c1cbe",idpapa:Z[0]._id,estructura:{tiposancion:f[1]+"\xb0"+f[2]+"\xb0\xac"+t.idmulta,fechasancion:t.fechamulta,monto:d,imposicion:"imposici\xf3n",observaciones:"Multa realizada de visita programada, "+t.proyectotxt,estado:"Activo",usuarionew:this.userinfo[0].email,usuarioup:this.userinfo[0].email,idempresa:this.userinfo[0].idempresa._id,idpapa:Z[0]._id},tipo:"detalle",tipo2:"Formulario",ejecuta:"this.ejecuta",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Crea en formulario movil"}};U&&this.authenticationService.createRegmovil("",U,"frmmovils").then(P=>{const C={operacion:"actualizaot2",estado:"Sanciones",correotipo:"Notifico a inspector",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};C&&this.authenticationService.createReg(t._id,C,"frmtareasprogramadasservicioss").then(mi=>{this.pideregistros(this.currentSegment)})},P=>{this.authenticationService.presentAlert(P.error,"Precauci\xf3n","")})}else this.authenticationService.presentAlert("Existe mas de un pago definido para este perido","Precauci\xf3n","")})})})}notificacion2(t,r){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Ingrese comentario de la resoluci\xf3n de la falla",inputs:[{name:"campo2",label:"Comentario",placeholder:""}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:c=>{}},{text:"Ok",handler:c=>{this.authenticationService.subefoto("","Image2s",this.fotoimg,"","","","","create",this.userinfo[0].idempresa._id,"",this.idllave).then(T=>{let x=[];x=T;const g={operacion:"actualizaot",estado:"Solucionadas por empresa",correotipo:"Notifico a inspector",fotoempresa:x.url,gpsempresa:"https://www.google.com/maps/search/?api=1&query="+this.geoposiciontxt.replace("\xac",","),empresatxttiempo:t.minutos,empresatxt:c.campo2,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};g&&this.authenticationService.createReg(t._id,g,"frmtareasprogramadasservicioss").then(Z=>{const A=t.correos,d='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+' alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>    <p style="text-align: left;">'+t.proyectotxt+'</p>  <p style="text-align: left;">Tienes una solicitud de una orden de campo:</p>       <p style="text-align: left;"><strong>Tipo</strong>:&nbsp; '+t.tipo+'</p>       <p style="text-align: left;"><strong>Descripci\xf3n</strong>: '+t.descripcion+'</p>       <p style="text-align: left;"><strong>Multa</strong>:'+t.tipomulta+'</p>      <p>&nbsp;</p>      <p>&nbsp;</p>     <p style="text-align: left;"><strong>SOLUCION DE EMPRESA</strong>:'+c.campo2+" A LOS "+t.minutos+" Minutos.</p>      <p>&nbsp;</p>      <p>&nbsp;</p>    <p>saludos</p></body> </html>";var f="";const U=A.split(";");var P={};"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(f="crea/1/GMAIL",P={destino:U,html:d,text:d,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(f="crea/1/OFFICE365",P={destino:U,html:d,text:d,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(f="",P={destino:A,html:d,text:d,subjet:t.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(f,P,"mails").then(C=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Exito","Notificaci\xf3n enviada con exito","")},C=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n","")})},Z=>{this.authenticationService.presentAlert(Z.error,"Precauci\xf3n","")})})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}takePicture(t){return(0,h.mG)(this,void 0,void 0,function*(){const r=yield y.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:y.dk.DataUrl,source:y.oK.Camera});this.authenticationService.generateFromImage(r.dataUrl,200,200,.5,o=>{this.fotoimg=o,this.notificacion2(t,o)})})}notificacion(t){return(0,h.mG)(this,void 0,void 0,function*(){this.takePicture(t)})}loadData(t){setTimeout(()=>{t.target.complete(),1e3===this.items.length&&(t.target.disabled=!0)},500)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(n.jP),i.Y36(p.F0),i.Y36(S.$),i.Y36(n.Br),i.Y36(_.sK),i.Y36(n.IN))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-frmtareasprogramadasservicio2s-list"]],viewQuery:function(t,r){if(1&t&&i.Gf(n.ju,5),2&t){let o;i.iGM(o=i.CRH())&&(r.infiniteScroll=o.first)}},decls:50,vars:29,consts:[["color","primary"],["slot","start"],["defaultHref","frmtareasprogramadasCreatePage"],["size","small"],["collapse","true","slot","end"],[3,"hidden","title","click",4,"ngIf"],[3,"title","click"],["slot","icon-only","name","refresh-circle-outline"],[3,"click",4,"ngIf"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col",3,"hidden"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],[3,"formGroup","hidden"],[1,"range-item-row"],["size","12"],[1,"range-header"],[1,"range-value"],[1,"range-label"],["formControlName","dual","color","secondary","pin","true","dualKnobs","true","min","1","max","100","step","1","debounce","400",1,"range-control",3,"ionChange"],[1,"user-friends-content"],["sticky",""],[4,"ngIf"],["scrollable","","value","Activo",3,"ionChange"],["value","Activo",4,"ngIf"],["value","No solucionadas",4,"ngIf"],["value","Solucionadas por empresa",4,"ngIf"],["value","Soluci\xf3n aceptada",4,"ngIf"],["value","Para sancionar",4,"ngIf"],["value","Sanciones",4,"ngIf"],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],[3,"hidden","title","click"],["slot","icon-only","name","add"],[3,"click"],["slot","icon-only","name","grid"],["slot","icon-only","name","list"],["value","Activo"],["value","No solucionadas"],["value","Solucionadas por empresa"],["value","Soluci\xf3n aceptada"],["value","Para sancionar"],["value","Sanciones"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated"],["scheme","dark",3,"title","src"],["slot","end"],[2,"text-transform","capitalize","font-size","11px",3,"innerHtml"],["color","damger",4,"ngIf"],["color","medium"],[1,"first-letter2"],["href","item.gpsempresa","target","_blank",4,"ngIf"],["color","transparent"],["slot","secondary"],["title","Solucionar multa","color","primary",3,"click",4,"ngIf"],["title","Autorizar orden de campo",3,"click",4,"ngIf"],["title","Orden de campo para sancionar",3,"click",4,"ngIf"],["title","Aplicar multa",3,"click",4,"ngIf"],["color","damger"],["href","item.gpsempresa","target","_blank"],["title","Solucionar multa","color","primary",3,"click"],["title","Autorizar orden de campo",3,"click"],["slot","icon-only","name","thumbs-up-outline"],["title","Orden de campo para sancionar",3,"click"],["slot","icon-only","name","thumbs-down-outline"],["title","Aplicar multa",3,"click"],["slot","icon-only","name","log-in-outline"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],["color","danger",4,"ngIf"],["slot","start",4,"ngIf"],["no-padding",""],["target","_blank",3,"href",4,"ngIf"],["color","danger"],["target","_blank",3,"href"],[1,"empty-list-message"]],template:function(t,r){1&t&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar",0),i.TgZ(2,"ion-buttons",1),i._UZ(3,"ion-back-button",2),i.qZA(),i.TgZ(4,"ion-title",3),i._uU(5," Ordenes de campo / Sanciones "),i.qZA(),i.TgZ(6,"ion-buttons",4),i.YNc(7,q,3,4,"ion-button",5),i.TgZ(8,"ion-button",6),i.NdJ("click",function(){return r.pideregistros0()}),i.ALo(9,"translate"),i._UZ(10,"ion-icon",7),i.qZA(),i.YNc(11,O,2,0,"ion-button",8),i.YNc(12,E,2,0,"ion-button",8),i.qZA(),i.qZA(),i.TgZ(13,"ion-toolbar",9),i.TgZ(14,"ion-row",10),i.TgZ(15,"ion-col"),i.TgZ(16,"ion-searchbar",11),i.NdJ("ngModelChange",function(c){return r.searchQuery=c})("ionChange",function(){return r.searchList()}),i.ALo(17,"translate"),i.qZA(),i.qZA(),i.TgZ(18,"ion-col",12),i.TgZ(19,"ion-button",13),i.NdJ("click",function(){return r.showAgeFilter=!r.showAgeFilter}),i.ALo(20,"translate"),i._UZ(21,"ion-icon",14),i.qZA(),i.qZA(),i.qZA(),i.TgZ(22,"form",15),i.TgZ(23,"ion-row",16),i.TgZ(24,"ion-col",17),i.TgZ(25,"div",18),i.TgZ(26,"span",19),i._uU(27),i.qZA(),i.TgZ(28,"span",20),i._uU(29,"Filter by age"),i.qZA(),i.TgZ(30,"span",19),i._uU(31),i.qZA(),i.qZA(),i.qZA(),i.TgZ(32,"ion-col",17),i.TgZ(33,"ion-range",21),i.NdJ("ionChange",function(){return r.searchList()}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(34,"ion-content",22),i.TgZ(35,"ion-item-divider",23),i.YNc(36,w,4,7,"ion-label",24),i.qZA(),i.TgZ(37,"ion-segment",25),i.NdJ("ionChange",function(c){return r.filterContacts(c)}),i.YNc(38,N,2,0,"ion-segment-button",26),i.YNc(39,k,2,0,"ion-segment-button",27),i.YNc(40,F,2,0,"ion-segment-button",28),i.YNc(41,J,2,0,"ion-segment-button",29),i.YNc(42,R,2,0,"ion-segment-button",30),i.YNc(43,Q,2,0,"ion-segment-button",31),i.qZA(),i.YNc(44,D,2,2,"ion-list",24),i.YNc(45,X,2,2,"ion-list",24),i.YNc(46,si,3,2,"ion-grid",24),i.YNc(47,ci,3,3,"h3",32),i.TgZ(48,"ion-infinite-scroll",33),i.NdJ("ionInfinite",function(c){return r.loadData(c)}),i._UZ(49,"ion-infinite-scroll-content",34),i.qZA(),i.qZA()),2&t&&(i.xp6(7),i.Q6J("ngIf","activa"===r.estadoxxx),i.xp6(1),i.MGl("title"," ",i.lcZ(9,23,"REFRESCARM"),""),i.xp6(3),i.Q6J("ngIf","grid"===r.viewType),i.xp6(1),i.Q6J("ngIf","list"===r.viewType),i.xp6(4),i.s9C("placeholder",i.lcZ(17,25,"BUSCARM")),i.Q6J("ngModel",r.searchQuery),i.xp6(2),i.Q6J("hidden",!r.showAgeFilter),i.xp6(1),i.MGl("title"," ",i.lcZ(20,27,"FILTROM"),""),i.xp6(3),i.Q6J("formGroup",r.rangeForm)("hidden",!r.showAgeFilter),i.xp6(5),i.Oqu(r.rangeForm.controls.dual.value.lower),i.xp6(4),i.Oqu(r.rangeForm.controls.dual.value.upper),i.xp6(5),i.Q6J("ngIf",(null==r.itemsList?null:r.itemsList.length)>0),i.xp6(2),i.Q6J("ngIf",!0===r.t1),i.xp6(1),i.Q6J("ngIf",!0===r.t11),i.xp6(1),i.Q6J("ngIf",!0===r.t2),i.xp6(1),i.Q6J("ngIf",!0===r.t3),i.xp6(1),i.Q6J("ngIf",!0===r.t4),i.xp6(1),i.Q6J("ngIf",!0===r.t5),i.xp6(1),i.Q6J("ngIf",0===r.efecto),i.xp6(1),i.Q6J("ngIf",(null==r.itemsList?null:r.itemsList.length)>0&&"list"===r.viewType),i.xp6(1),i.Q6J("ngIf",(null==r.itemsList?null:r.itemsList.length)>0&&"grid"===r.viewType),i.xp6(1),i.Q6J("ngIf",0===(null==r.itemsList?null:r.itemsList.length)))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,m.O5,n.YG,n.gu,n.Nd,n.wI,n.VI,n.j9,u.JJ,u.On,u._Y,u.JL,u.sg,n.I_,n.QI,u.u,n.W2,n.rH,n.cJ,n.ju,n.MB,n.Q$,n.GO,n.q_,m.sg,n.Ie,M.B,n.jY,n.BJ,b.A6,n.uN,n.yp,n.hM,n.PM,n.FN],pipes:[_.X$,m.uU],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}"]}),e})();var ui=s(22675);let pi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[m.ez,n.Pc,l.K,u.u5,u.UX,b.YL,ui.v,p.Bz.forChild([{path:"",component:li}]),_.aw.forChild()]]}),e})()},22675:(L,v,s)=>{s.d(v,{v:()=>h});var n=s(69808),p=s(93075),m=s(51062),l=s(23349),_=s(55787),u=s(56604),b=s(5e3);let h=(()=>{class S{}return S.\u0275fac=function(y){return new(y||S)},S.\u0275mod=b.oAB({type:S}),S.\u0275inj=b.cJS({imports:[[n.ez,p.u5,p.UX,l.Pc,_.Bz,u.Cl,m.aw.forChild()]]}),S})()},26806:(L,v,s)=>{s.d(v,{B:()=>l});var n=s(5e3),p=s(69808);const m=function(_,u){return{"no-animated":_,inline:u}};let l=(()=>{class _{constructor(){this.width="100%",this.height="16px",this.borderRadius="0",this.rounded=!1,this.noAnimated=!1,this.inline=!1,this.styles={}}ngOnInit(){this.styles={width:this.width,height:this.height,borderRadius:this.borderRadius},this.rounded&&(this.styles.borderRadius="999em")}}return _.\u0275fac=function(b){return new(b||_)},_.\u0275cmp=n.Xpm({type:_,selectors:[["skeleton-element"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius",rounded:"rounded",noAnimated:"noAnimated",inline:"inline"},decls:1,vars:5,consts:[[3,"ngClass","ngStyle"]],template:function(b,h){1&b&&n._UZ(0,"div",0),2&b&&n.Q6J("ngClass",n.WLB(2,m,h.noAnimated,h.inline))("ngStyle",h.styles)},directives:[p.mk,p.PC],styles:["[_nghost-%COMP%]{display:block}[inline][_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .no-animated[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important;background:rgba(130,130,130,.2)}.animated-background[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(130,130,130,.2);background:linear-gradient(to right,rgba(130,130,130,.2) 8%,rgba(130,130,130,.3) 18%,rgba(130,130,130,.2) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}"]}),_})()}}]);