"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4066],{34066:(M,b,a)=>{a.r(b),a.d(b,{frmclientesListPageModule:()=>q});var i=a(23349),m=a(55787),f=a(69808),Z=a(33678),d=a(51062),g=a(93075),u=a(36351),_=a(68554),p=a(4707),x=a(21295),t=a(5e3),C=a(26806);function P(o,l){if(1&o&&(t.TgZ(0,"ion-select-option",13),t._uU(1),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.nombre)}}function A(o,l){if(1&o&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",e.itemsList.length," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function O(o,l){1&o&&(t.TgZ(0,"ion-item",16),t.TgZ(1,"ion-label",17),t._UZ(2,"skeleton-element"),t._UZ(3,"skeleton-element"),t._UZ(4,"skeleton-element",18),t.qZA(),t.qZA())}const y=function(){return[0,1,2,3,4,5,6]};function S(o,l){1&o&&(t.TgZ(0,"ion-list"),t.YNc(1,O,5,0,"ion-item",15),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,y)))}function U(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",20),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-row",21),t.TgZ(3,"ion-col"),t.TgZ(4,"span",22),t._uU(5,"No."),t.qZA(),t.TgZ(6,"span",23),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-item"),t.TgZ(9,"ion-label",17),t.TgZ(10,"p"),t.TgZ(11,"strong"),t._uU(12,"Cliente:"),t.qZA(),t._uU(13),t._UZ(14,"br"),t.TgZ(15,"strong"),t._uU(16,"No de poliza:"),t.qZA(),t._uU(17),t._UZ(18,"br"),t.TgZ(19,"strong"),t._uU(20,"Referencia:"),t.qZA(),t._uU(21),t._UZ(22,"br"),t.TgZ(23,"strong"),t._uU(24,"Aduana:"),t.qZA(),t._uU(25),t._UZ(26,"br"),t.TgZ(27,"strong"),t._uU(28,"Selectivo:"),t.qZA(),t._uU(29),t._UZ(30,"br"),t.TgZ(31,"strong"),t._uU(32,"Ultimo comentario:"),t.qZA(),t._uU(33),t._UZ(34,"br"),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"ion-card-content"),t.TgZ(36,"ion-row",24),t.TgZ(37,"ion-col",25),t.TgZ(38,"ion-toolbar",26),t.TgZ(39,"ion-buttons",27),t.TgZ(40,"ion-button",28),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).copypaste(r)}),t._UZ(41,"ion-icon",29),t.qZA(),t.TgZ(42,"ion-button",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.oxw(3).descarga(r)}),t._UZ(43,"ion-icon",31),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=l.$implicit,n=l.index;t.xp6(7),t.hij("",n+1," "),t.xp6(6),t.hij(" ",e.cliente," "),t.xp6(4),t.hij(" ",e.nopoliza," "),t.xp6(4),t.hij(" ",e.referencia," "),t.xp6(4),t.hij(" ",e.aduana," "),t.xp6(4),t.hij(" ",e.selectivoma," "),t.xp6(4),t.hij(" ",e.comentario," ")}}function w(o,l){if(1&o&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.YNc(2,U,44,7,"ion-col",19),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.itemsList)("ngForTrackBy",e.trackItems)}}function z(o,l){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"ion-item-divider",14),t.YNc(2,A,4,7,"ion-label",10),t.qZA(),t.YNc(3,S,2,2,"ion-list",10),t.YNc(4,w,3,2,"ion-grid",10),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0),t.xp6(1),t.Q6J("ngIf",0===e.efecto),t.xp6(1),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0)}}let L=(()=>{class o{constructor(e,n,s,r,h,c,v,T,E){this.menu=e,this.Pdfx=n,this.modalCtrl=s,this.routerOutlet=r,this.router=h,this.authenticationService=c,this.alertController=v,this.translateService=T,this.modalController=E,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.vista=0,this.userinfo=[],this.viewType="tabla",this.tituloxx="",this.cliente1="",this.cliente2="",this.cliente1a="",this.cliente2a="",this.datamaster=[],this.detalle1=[],this.detalle2=[],this.costox1=0,this.costox2=0,this.costox3=0,this.costox4=0,this.costox5=0,this.costox6=0,this.costox7=0,this.costox8=0,this.costox9=0,this.costox10=0,this.costottt=0,this.ventattt=0,this.ventax1=0,this.ventax2=0,this.ventax3=0,this.ventax4=0,this.ventax5=0,this.ventax6=0,this.ventax7=0,this.ventax8=0,this.ventax9=0,this.ventax10=0,this.itemservicios=[],this.efecto=1,this.dataperido=[],this.dataempresa=[],this.dataproyecto=[],this.datagrupo=[],this.seguro="",this.msg="",this.filtroxx=!1,this.vordenes=[],this.filtrostt=!1,this.currentSegment="setobar",this.currentSegment2="clientes",this.searchSubject=new p.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="tabla"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.tituloxx="Tracking de clientes",this.userinfo=this.authenticationService.getcopiauser(),this.filtroxx=!0,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(e=>{this.seguro=e}),this.translateService.get("MSGM").subscribe(e=>{this.msg=e}),this.rangeForm=new g.cw({dual:new g.NI({lower:1,upper:100})}),this.cliente2="",this.productocodigo=this.userinfo[0].nombre,this.nov=this.userinfo[0].nov,""!==this.nov&&void 0!==this.nov&&(this.nov=this.nov.split("\xac")[0]),this.authenticationService.convertToDataURLviaCanvas(this.authenticationService.getapifoto()+this.userinfo[0].idempresa.foto0,"image/png").then(e=>this.logotipoempresa=e),this.authenticationService.getReg("ordenes-gess","datosfijos",0).then(e=>{this.vordenes=e},e=>{this.authenticationService.presentAlert(e.error,"Precauci\xf3n","")})}dafecha(e){var s=new Date(e).toISOString().substr(0,10).split("-");return s[2]+"-"+s[1]+"-"+s[0]}copypaste(e){var n="";this.authenticationService.copy(n=n+" Cliente: "+e.cliente+" \n"+n+" No de poliza: "+e.nopoliza+" \n"+n+" Referencia: "+e.referencia+" \n"+n+" Aduana: "+e.aduana+" \n"+n+" Selectivo: "+e.selectivoma+" \n"+n+"  Ultimo comentario: "+e.comentario)}descarga(e){this.nidformulario=this.torden.split("\xac")[3],this.authenticationService.getReg(e._id+"/trayectoriaordencomentario/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(n=>{var s;s=n;let r=[],h=[];h.push({margin:[0,0,0,10],layout:{fillColor:function(c,v,T){return c%2==0?"#ebebeb":"#f5f5f5"}},table:{widths:["100%"],heights:[20,10],body:[[{text:"Bitacora de comentarios, procedimiento "+this.nidformulario,fontSize:14,alignment:"center",margin:[0,10],bold:!0}]]}}),h.push({columns:[{qr:"www.ges.com.gt",fit:75,alignment:"rigth"},{stack:["Usuario creador: "+e.usuarionew,"No. ticket: "+e.sequenciag,"Estado: "+e.estadoxxx],width:"*",margin:[0,15]}],margin:[15,15]}),h.push({text:""}),r.push([{text:"Bitacora de comentarios",colSpan:5,bold:!0,alignment:"center",fontSize:12},{},{},{},{}]),r.push([{text:"Fecha ingreso",bold:!0,fontSize:11},{text:"Fecha salida",bold:!0,fontSize:11},{text:"Actividad",bold:!0,fontSize:11},{text:"Usuario",bold:!0,fontSize:11},{text:"Comentario",bold:!0,fontSize:11}]);for(let c=0;c<s.length;c++)r.push([{text:this.authenticationService.dafechastringtodatefinal(s[c].fechaingreso,"dd-MM-yyyy, hh:mm aaa"),fontSize:10},{text:this.authenticationService.dafechastringtodatefinal(s[c].fechasalida,"dd-MM-yyyy, hh:mm aaa"),fontSize:10},{text:s[c].actividad,fontSize:10},{text:s[c].usuario,fontSize:10},{text:s[c].comentario,fontSize:10}]);h.push({text:""}),h.push({style:"tableExample",margin:[0,0,0,10],layout:{fillColor:function(c,v,T){return 0===c||1===c?"#D5D6EA":null}},table:{widths:[75,75,"*",50,"*"],heights:[20,10],headerRows:1,body:r}}),this.Pdfx.printdocproceso("Bitacora de comentarios ,Procedimiento "+this.nidformulario,h,this.logotipoempresa,this.userinfo[0].idempresa.nombre,this.userinfo[0].idempresa.email,this.authenticationService.dafechastringtodatefinal(new Date,"dd-MM-yyyy, hh:mm aaa"),this.userinfo[0].idempresa.subtitulo,e.actividad,this.userinfo[0].idempresa.simarca)},n=>{this.authenticationService.presentAlert(n.error,this.msg,"")})}bajarexcel(){var e='<table id="excel-table" border="1">';e+=' <tr><td contenteditable="true" colspan="1">Cliente</td><td contenteditable="true" colspan="1">No de poliza</td><td contenteditable="true" colspan="1">Referencia</td><td contenteditable="true" colspan="1">Aduana</td><td contenteditable="true" colspan="1">Selectivo</td><td contenteditable="true" colspan="1">Ultimo comentario</td></tr> ';for(var n=0;n<this.items.length;n++)e=e+' <tr><td contenteditable="true" colspan="1">'+this.items[n].cliente+'</td><td contenteditable="true" colspan="1">'+this.items[n].nopoliza+'</td><td contenteditable="true" colspan="1">'+this.items[n].referencia+'</td><td contenteditable="true" colspan="1">'+this.items[n].aduana+'</td><td contenteditable="true" colspan="1">'+this.items[n].selectivoma+'</td><td contenteditable="true" colspan="1">'+this.items[n].comentario+"</td></tr> ";this.authenticationService.bajarexcel(e+="</table>","clientes.xlsx")}exportar(){}buscarorden(){void 0!==this.torden&&""!==this.torden?(this.itemsList=[],this.efecto=0,this.filtroxx=!0,this.authenticationService.getReg(this.nov+"\xac"+this.torden+"\xac"+this.nopoliza+"\xac"+this.referencia+"/reporteclientes/"+this.userinfo[0].idempresa._id,"gess",0).then(e=>{var n;n=e,this.efecto=1,this.items=n,this.itemsList=this.items},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")})):this.authenticationService.presentAlert("Ingrese un tipo de orden valido",this.msg,"")}filterContacts(e){this.currentSegment=e.detail.value}loadData(e){setTimeout(()=>{e.target.complete(),1e3===this.items.length&&(e.target.disabled=!0)},500)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i._q),t.Y36(x.$),t.Y36(i.IN),t.Y36(i.jP),t.Y36(m.F0),t.Y36(_.$),t.Y36(i.Br),t.Y36(d.sK),t.Y36(i.IN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-frmclientes-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(i.ju,5),2&e){let s;t.iGM(s=t.CRH())&&(n.infiniteScroll=s.first)}},decls:45,vars:7,consts:[["color","primary"],["size","small"],[1,"ion-text-center"],[1,"ion-float-left"],["size","6"],["color","primary",1,"ion-text-wrap"],["placeholder","Seleccione un tipo de orden","cancelText","Cancel","okText","OK",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],[3,"value"],["sticky",""],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],["no-padding",""],["size","12"],["color","transparent"],["slot","secondary"],["title","Copy paste",3,"click"],["slot","icon-only","name","copy-outline"],["title","Descargar bitacora",3,"click"],["slot","icon-only","name","code-download-outline"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-title",1),t._uU(3),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"ion-content"),t.TgZ(5,"div",2),t.TgZ(6,"h1"),t._uU(7),t.qZA(),t.TgZ(8,"ion-grid"),t.TgZ(9,"ion-row"),t.TgZ(10,"ion-col"),t.TgZ(11,"ion-card"),t.TgZ(12,"ion-card-header"),t.TgZ(13,"ion-card-subtitle"),t._uU(14,"FILTROS"),t.qZA(),t.qZA(),t.TgZ(15,"ion-card-content",3),t.TgZ(16,"ion-grid"),t.TgZ(17,"ion-row"),t.TgZ(18,"ion-col",4),t.TgZ(19,"ion-item"),t.TgZ(20,"ion-label",5),t._uU(21,"Tipo orden :"),t.qZA(),t.TgZ(22,"ion-select",6),t.NdJ("ngModelChange",function(r){return n.torden=r}),t.YNc(23,P,2,2,"ion-select-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"ion-col",4),t.TgZ(25,"ion-item"),t.TgZ(26,"ion-label",5),t._uU(27,"Nopoliza :"),t.qZA(),t.TgZ(28,"ion-input",8),t.NdJ("ngModelChange",function(r){return n.nopoliza=r}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"ion-row"),t.TgZ(30,"ion-col",4),t.TgZ(31,"ion-item"),t.TgZ(32,"ion-label",5),t._uU(33,"Referencia :"),t.qZA(),t.TgZ(34,"ion-input",8),t.NdJ("ngModelChange",function(r){return n.referencia=r}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"ion-col",4),t.TgZ(36,"ion-button",9),t.NdJ("click",function(){return n.buscarorden()}),t._uU(37,"Buscar"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"ion-row"),t.TgZ(39,"ion-col",4),t.TgZ(40,"ion-button",9),t.NdJ("click",function(){return n.bajarexcel()}),t._uU(41,"Excel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(42,z,5,3,"div",10),t.TgZ(43,"ion-infinite-scroll",11),t.NdJ("ionInfinite",function(r){return n.loadData(r)}),t._UZ(44,"ion-infinite-scroll-content",12),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",n.tituloxx," "),t.xp6(4),t.hij("CLIENTE: ",n.productocodigo," "),t.xp6(15),t.Q6J("ngModel",n.torden),t.xp6(1),t.Q6J("ngForOf",n.vordenes),t.xp6(5),t.Q6J("ngModel",n.nopoliza),t.xp6(6),t.Q6J("ngModel",n.referencia),t.xp6(8),t.Q6J("ngIf",0===n.vista))},directives:[i.Gu,i.sr,i.wd,i.W2,i.jY,i.Nd,i.wI,i.PM,i.Zi,i.tO,i.FN,i.Ie,i.Q$,i.t9,i.QI,g.JJ,g.On,f.sg,i.pK,i.j9,i.YG,f.O5,i.ju,i.MB,i.n0,i.rH,i.q_,C.B,i.Sm,i.gu],pipes:[d.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}ion-card[_ngcontent-%COMP%]{border-top:3px solid blue}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}#profile-info[_ngcontent-%COMP%]{position:absolute;top:-95px;width:100%;z-index:2;text-align:center}#profile-name[_ngcontent-%COMP%]{color:#444;font-size:26px;box-shadow:0!important;text-align:center}.profile-description[_ngcontent-%COMP%]{font-size:15px;color:#888}.profile-numbers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#444;font-size:medium;margin-bottom:3px}.profile-numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;color:#34354c}hr[_ngcontent-%COMP%]{border:0;height:1px;background:#444;background:-webkit-linear-gradient(left,rgba(0,0,0,0) 0%,#bcc6d6 50%,rgba(0,0,0,0) 100%)}table[_ngcontent-%COMP%]{border:1px solid #ccc;width:100%;margin:0;padding:0;border-collapse:collapse;border-spacing:0}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:1px solid #ddd;padding:5px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;font-size:10px;text-align:left}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-transform:uppercase;font-size:10px;letter-spacing:1px}@media screen and (max-width: 600px){table[_ngcontent-%COMP%]{border:0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:10px;display:block;font-size:9px;border-bottom:2px solid #ddd}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;text-align:right;font-size:9px;border-bottom:1px dotted #ccc}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;text-transform:uppercase;font-weight:700}}"]}),o})();var k=a(22675);let q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.ez,i.Pc,Z.K,g.u5,g.UX,u.YL,k.v,m.Bz.forChild([{path:"",component:L}]),d.aw.forChild()]]}),o})()},22675:(M,b,a)=>{a.d(b,{v:()=>_});var i=a(69808),m=a(93075),f=a(51062),Z=a(23349),d=a(55787),g=a(56604),u=a(5e3);let _=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=u.oAB({type:p}),p.\u0275inj=u.cJS({imports:[[i.ez,m.u5,m.UX,Z.Pc,d.Bz,g.Cl,f.aw.forChild()]]}),p})()},26806:(M,b,a)=>{a.d(b,{B:()=>Z});var i=a(5e3),m=a(69808);const f=function(d,g){return{"no-animated":d,inline:g}};let Z=(()=>{class d{constructor(){this.width="100%",this.height="16px",this.borderRadius="0",this.rounded=!1,this.noAnimated=!1,this.inline=!1,this.styles={}}ngOnInit(){this.styles={width:this.width,height:this.height,borderRadius:this.borderRadius},this.rounded&&(this.styles.borderRadius="999em")}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["skeleton-element"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius",rounded:"rounded",noAnimated:"noAnimated",inline:"inline"},decls:1,vars:5,consts:[[3,"ngClass","ngStyle"]],template:function(u,_){1&u&&i._UZ(0,"div",0),2&u&&i.Q6J("ngClass",i.WLB(2,f,_.noAnimated,_.inline))("ngStyle",_.styles)},directives:[m.mk,m.PC],styles:["[_nghost-%COMP%]{display:block}[inline][_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .no-animated[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important;background:rgba(130,130,130,.2)}.animated-background[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(130,130,130,.2);background:linear-gradient(to right,rgba(130,130,130,.2) 8%,rgba(130,130,130,.3) 18%,rgba(130,130,130,.2) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}"]}),d})()}}]);