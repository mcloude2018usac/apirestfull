"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5190],{15190:(Y,k,f)=>{f.d(k,{j:()=>D});var b=f(70655),M=f(68554),A=f(4707),v=f(56604),i=f(5e3),d=f(23349),x=f(51062),C=f(93075),P=f(69808);function Z(n,u){if(1&n&&(i.TgZ(0,"ion-label"),i._uU(1),i.ALo(2,"translate"),i.ALo(3,"translate"),i.qZA()),2&n){const t=i.oxw();i.xp6(1),i.lnq("",i.lcZ(2,3,"NOREGISTROSM")," ",t.itemsList.length," ",i.lcZ(3,5,"NOREGISTROSM5"),"")}}function T(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-list"),i.TgZ(1,"ion-item"),i.TgZ(2,"ion-label",16),i.TgZ(3,"strong"),i._uU(4,"Seleccionar Todos"),i.qZA(),i.qZA(),i.TgZ(5,"ion-checkbox",17),i.NdJ("ngModelChange",function(r){return i.CHM(t),i.oxw().masterCheck=r})("click",function(r){return i.CHM(t),i.oxw().checkMaster(r)}),i.qZA(),i.qZA(),i.qZA()}if(2&n){const t=i.oxw();i.xp6(5),i.Q6J("ngModel",t.masterCheck)("indeterminate",t.isIndeterminate)}}function y(n,u){if(1&n&&(i.TgZ(0,"ion-label",31),i._uU(1),i.qZA()),2&n){const t=i.oxw().$implicit;i.xp6(1),i.hij(" Actual: ",t.nombre," ")}}function S(n,u){if(1&n&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&n){const t=i.oxw(3).$implicit;i.xp6(1),i.hij(" Codigo interno: ",t.item.sequencia,"")}}function w(n,u){if(1&n&&(i.TgZ(0,"ion-badge",35),i.YNc(1,S,2,1,"div",14),i.qZA()),2&n){const t=i.oxw(2).$implicit,o=i.oxw(2);i.xp6(1),i.Q6J("ngIf","Si"===o.userinfo[0].idempresa.sicodigointerno&&void 0!==t.item)}}function R(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-label",32),i.NdJ("click",function(){i.CHM(t);const r=i.oxw().$implicit;return i.oxw(2).selectitem(r)}),i.YNc(1,w,2,1,"ion-badge",33),i.TgZ(2,"span"),i._UZ(3,"div",34),i.qZA(),i.qZA()}if(2&n){const t=i.oxw().$implicit,o=i.oxw(2);i.xp6(1),i.Q6J("ngIf","Si"===o.userinfo[0].idempresa.sicodigointerno),i.xp6(2),i.Q6J("innerHtml",t.nombre,i.oJD)}}function I(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-checkbox",36),i.NdJ("ngModelChange",function(r){return i.CHM(t),i.oxw().$implicit.isChecked=r})("ionChange",function(){return i.CHM(t),i.oxw(3).checkEvent()}),i.qZA()}if(2&n){const t=i.oxw().$implicit;i.Q6J("ngModel",t.isChecked)}}function q(n,u){if(1&n&&(i.TgZ(0,"ion-label",31),i._uU(1),i.qZA()),2&n){const t=i.oxw().$implicit;i.xp6(1),i.hij(" Actual: ",t.nombre," ")}}function E(n,u){if(1&n&&(i.TgZ(0,"div"),i._uU(1),i.qZA()),2&n){const t=i.oxw(3).$implicit;i.xp6(1),i.hij(" Codigo interno: ",t.item.sequencia,"")}}function O(n,u){if(1&n&&(i.TgZ(0,"ion-badge",35),i.YNc(1,E,2,1,"div",14),i.qZA()),2&n){const t=i.oxw(2).$implicit,o=i.oxw(2);i.xp6(1),i.Q6J("ngIf","Si"===o.userinfo[0].idempresa.sicodigointerno&&void 0!==t.item)}}function J(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-label",32),i.NdJ("click",function(){i.CHM(t);const r=i.oxw().$implicit;return i.oxw(2).selectitem(r)}),i.YNc(1,O,2,1,"ion-badge",33),i.TgZ(2,"span"),i._UZ(3,"div",34),i.qZA(),i.qZA()}if(2&n){const t=i.oxw().$implicit,o=i.oxw(2);i.xp6(1),i.Q6J("ngIf","Si"===o.userinfo[0].idempresa.sicodigointerno),i.xp6(2),i.Q6J("innerHtml",t.nombre,i.oJD)}}function N(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-checkbox",36),i.NdJ("ngModelChange",function(r){return i.CHM(t),i.oxw().$implicit.isChecked=r})("ionChange",function(){return i.CHM(t),i.oxw(3).checkEvent()}),i.qZA()}if(2&n){const t=i.oxw().$implicit;i.Q6J("ngModel",t.isChecked)}}function U(n,u){if(1&n){const t=i.EpF();i.TgZ(0,"ion-item-sliding"),i.TgZ(1,"ion-item",20),i.YNc(2,y,2,1,"ion-label",21),i.YNc(3,R,4,2,"ion-label",22),i.YNc(4,I,1,1,"ion-checkbox",23),i.qZA(),i.TgZ(5,"ion-item",24),i.YNc(6,q,2,1,"ion-label",21),i.YNc(7,J,4,2,"ion-label",22),i.YNc(8,N,1,1,"ion-checkbox",23),i.qZA(),i.TgZ(9,"ion-item",25),i.TgZ(10,"ion-toolbar",26),i.TgZ(11,"ion-buttons",27),i.TgZ(12,"ion-button",28),i.NdJ("click",function(){const m=i.CHM(t).$implicit;return i.oxw(2).deleteRecord(m)}),i.ALo(13,"translate"),i._UZ(14,"ion-icon",29),i.qZA(),i.TgZ(15,"ion-button",28),i.NdJ("click",function(){const m=i.CHM(t).$implicit;return i.oxw(2).updateRecord(m)}),i.ALo(16,"translate"),i._UZ(17,"ion-icon",30),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&n){const t=u.$implicit,o=i.oxw(2);i.xp6(1),i.Q6J("hidden",!o.grabax),i.xp6(1),i.Q6J("ngIf",o.bloquear===t._id),i.xp6(1),i.Q6J("ngIf",o.bloquear!==t._id),i.xp6(1),i.Q6J("ngIf",!0===o.tmultiple),i.xp6(1),i.Q6J("hidden",o.grabax),i.xp6(1),i.Q6J("ngIf",o.bloquear===t._id),i.xp6(1),i.Q6J("ngIf",o.bloquear!==t._id),i.xp6(1),i.Q6J("ngIf",!0===o.tmultiple),i.xp6(1),i.Q6J("hidden",o.grabax),i.xp6(3),i.s9C("title",i.lcZ(13,11,"ELIMINARM")),i.xp6(3),i.s9C("title",i.lcZ(16,13,"ACTUALIZARM"))}}function Q(n,u){if(1&n&&(i.TgZ(0,"cdk-virtual-scroll-viewport",18),i.YNc(1,U,18,15,"ion-item-sliding",19),i.qZA()),2&n){const t=i.oxw();i.Q6J("items",t.itemsList),i.xp6(1),i.Q6J("cdkVirtualForOf",t.items)("cdkVirtualForTrackBy",t.trackItems)}}let D=(()=>{class n{constructor(t,o,r,m,c){this.modalController=t,this.alertController=o,this.translateService=r,this.authenticationService=m,this.navParams=c,this.searchSubject=new A.t(1),this.variables=[],this.userinfo=[],this.tituloxx="",this.vgrupo=[],this.frmiddetalle=[],this.tmultiple=!1,this.vector=[],this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.itemsfrm=[],this.grabax=!0,this.arreglofijo=[],this.scrollTo=120,this.efecto=0,this.keys=[],this.seguro="",this.msg="",this.apifoto=this.authenticationService.getapifoto()}trackItems(t,o){return o.id}searchList(){this.searchSubject.next({query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:""),this.items=this.itemsList}filterList(t,o){return t.filter(r=>r.nombre.toLowerCase().includes(o.toLowerCase()))}checkEvent(){const t=this.itemsList.length;let o=0;this.itemsList.map(r=>{r.isChecked&&o++}),o>0&&o<t?(this.isIndeterminate=!0,this.masterCheck=!1):o==t?(this.masterCheck=!0,this.isIndeterminate=!1):(this.isIndeterminate=!1,this.masterCheck=!1)}checkMaster(){setTimeout(()=>{this.itemsList.forEach(t=>{t.isChecked=this.masterCheck})})}replaceAll(t,o,r){return t.replace(new RegExp(o,"g"),r)}pideregistros(){if(""!==this.doblex)this.authenticationService.getReg("todos/"+this.data+"/"+this.userinfo[0].idempresa._id+"/"+this.doblex,this.frm,0).then(m=>{this.items=m,this.itemsList=this.items});else if("sigraba"===this.sigraba||"nograba"===this.sigraba)this.authenticationService.getReg("todos/"+this.data+"/"+this.userinfo[0].idempresa._id,this.frm,0).then(m=>{this.items=m,this.itemsList=this.items});else if("sigraba"===this.sigraba)this.items=this.vector,this.itemsList=this.items;else{const m=[],c=[];switch(this.sigraba){case"componenteextra":this.authenticationService.getReg("todos/1000-"+this.tipo+"/"+this.userinfo[0].idempresa._id+"/"+this.doblex,this.frm,0).then(s=>{this.items=s,this.itemsList=this.items});break;case"buscarencampo":this.authenticationService.getReg(this.idllave0+"/"+this.idformulario+"/"+this.userinfo[0].idempresa._id+"/buscafrmcampo","frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"arreglofjo":var t=[];for(let s=0;s<this.arreglofijo.length;s++)t.push({_id:this.arreglofijo[s]._id,name:this.arreglofijo[s].nombre,nombre:this.arreglofijo[s].nombre,sequencia:"na"});this.items=t,this.itemsList=this.items;break;case"apiresttodo":var r;(r=this.itemsfrm).idformulario=this.idformulario,this.authenticationService.getReg(this.frmapirest+"/"+this.replaceAll(JSON.stringify(r),"/","\xeb")+"/"+this.userinfo[0].idempresa._id+"/apiresttodo/"+this.dataapirest,"frmmovils",0).then(s=>{var e;(e=s).data?(this.items=e.data,this.itemsList=this.items):(this.items=s,this.itemsList=this.items)});break;case"multas":this.authenticationService.getReg(this.filtrocompleto,"frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"actividadsiguiente":this.authenticationService.getReg(this.idllave0+"/actividadsiguiente/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmactividads",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"controlmultipleidnombre":this.tmultiple=!0,this.authenticationService.getReg(this.filtroformularioconsulta,this.formularioconsulta,0).then(s=>{this.items=s,this.itemsList=this.items,this.itemsList=[];for(let e=0;e<this.items.length;e++){let a=0;if(this.idcampos)for(let l=0;l<this.idcampos.length;l++)this.idcampos[l]===this.items[e]._id&&(a=1);if(0===a&&this.idcamposmodificables)for(let l=0;l<this.idcamposmodificables.length;l++)this.idcamposmodificables[l]===this.items[e]._id&&(a=1);if(0===a&&this.idcamposmodificables2.length>0){for(let l=0;l<this.idcamposmodificables2.length;l++)this.idcamposmodificables2[l]===this.items[e]._id&&(a=1);a=0===a?1:0}this.itemsList.push(1===a?{_id:this.items[e]._id,name:this.items[e].name,nombre:this.items[e].nombre,isChecked:!0}:{_id:this.items[e]._id,name:this.items[e].name,nombre:this.items[e].nombre,isChecked:!1})}this.items=this.itemsList});break;case"nocontrolmultipleidnombre":this.tmultiple=!1,this.authenticationService.getReg(this.filtroformularioconsulta,this.formularioconsulta,0).then(s=>{this.items=s,this.itemsList=this.items,this.itemsList=[];for(let e=0;e<this.items.length;e++){let a=0;if(this.idcampos)for(let l=0;l<this.idcampos.length;l++)this.idcampos[l]===this.items[e]._id&&(a=1);if(0===a&&this.idcamposmodificables)for(let l=0;l<this.idcamposmodificables.length;l++)this.idcamposmodificables[l]===this.items[e]._id&&(a=1);if(0===a&&this.idcamposmodificables2.length>0){for(let l=0;l<this.idcamposmodificables2.length;l++)this.idcamposmodificables2[l]===this.items[e]._id&&(a=1);a=0===a?1:0}this.itemsList.push(1===a?{_id:this.items[e]._id,name:this.items[e].name,nombre:this.items[e].nombre,isChecked:!0}:{_id:this.items[e]._id,name:this.items[e].name,nombre:this.items[e].nombre,isChecked:!1})}this.items=this.itemsList});break;case"formulariottcheck":for(let s=0;s<this.idfrmconsulta2.length;s++)c.push([this.idfrmconsulta2[s].nombre]);if("users"===this.idfrmconsulta.id)this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,"personals",0).then(e=>{this.items=e,this.itemsList=this.items});else{let s="";s=void 0!==this.filtrar&&""!==this.filtrar?this.idfrmconsulta.id+"/"+c+"/"+this.userinfo[0].idempresa._id+"\xac\xb0"+this.filtrar+"/formulariocombofiltro/":this.idfrmconsulta.id+"/"+c+"/"+this.userinfo[0].idempresa._id+"/formulariocombo/",this.authenticationService.getReg(s,"frmmovils",0).then(e=>{this.items=e,this.itemsList=this.items})}break;case"formulariott":let g="";for(let s=0;s<this.idfrmconsulta2.length;s++)m.push([this.replaceAll(this.idfrmconsulta2[s].nombre,"/","-")]);if(""!==this.idpapafiltro&&void 0!==this.idpapafiltro)this.filtrar='"idpapa":"'+this.idpapafiltro+'"',g=this.idfrmconsulta.id+"/"+m+"/"+this.userinfo[0].idempresa._id+"\xac"+this.filtrar+"/formulariosolopapafiltro/","select2"===this.tipo||"select3"===this.tipo?(this.tmultiple=!0,this.authenticationService.getReg(g,"frmmovils",0).then(s=>{if(this.items=s,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let _=0;_<this.items.length;_++){let L=0;if(this.idcampos)for(let p=0;p<this.idcampos.length;p++)this.idcampos[p]===this.items[_]._id&&(L=1);var e="",a="";if(String(this.items[_].nombre).indexOf("\xb0")>=0){var l=String(this.items[_].nombre).split("\xb0");for(let p=0;p<l.length;p++)String(l[p].split("\xac")[0]).indexOf("<br>")>=0?e+=l[p].split("\xac")[0]:e=e+l[p].split("\xac")[0]+"<br>",a=a+l[p].split("\xac")[1]+";"}else e=this.items[_].nombre.split("\xac")[0],a=this.items[_].nombre.split("\xac")[1];this.itemsList.push(1===L?{_id:this.items[_]._id,name:this.items[_].name,nombre:e,isChecked:!0,id2:a}:{_id:this.items[_]._id,name:this.items[_].name,nombre:e,isChecked:!1,id2:a})}this.items=this.itemsList}})):(this.tmultiple=!1,this.authenticationService.getReg(g,"frmmovils",0).then(s=>{if(this.idfrmconsultaorigenpapa2){var e;e=s;for(let a=0;a<e.length;a++)this.items.push({_id:e[a]._id,nombre:this.authenticationService.replaceAll(e[a].nombre,"\xb0","<br>")});this.itemsList=this.items}else this.items=s,this.itemsList=this.items}));else switch(this.idfrmconsulta.id){case"users":this.authenticationService.getReg("Activo/personasactivasfiltro/"+this.userinfo[0].idempresa._id+"\xac"+this.idcampofiltromanual,"personals",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"frmmovilsproceso":this.authenticationService.getReg("sintodos/sintodos/"+this.userinfo[0].idempresa._id+"/frmmovilp","frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items});break;default:""!==this.frmapirest?(g=void 0!==this.filtrar&&""!==this.filtrar?this.idfrmconsulta.id+"/"+m+"/"+this.userinfo[0].idempresa._id+"\xb0/"+this.frmapirest+"/"+this.dataapirest:this.idfrmconsulta.id+"/"+m+"/"+this.userinfo[0].idempresa._id+"/"+this.frmapirest+"/"+this.dataapirest,this.authenticationService.getReg(g,"frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items})):(g=void 0!==this.filtrar&&""!==this.filtrar?this.idfrmconsulta.id+"/"+m+"/"+this.userinfo[0].idempresa._id+"\xb0"+this.replaceAll(this.filtrar,"/","\xeb")+"/formulariocombofiltro/":this.idfrmconsulta.id+"/"+m+"/"+this.userinfo[0].idempresa._id+"/formulariocombo/",this.authenticationService.getReg(g,"frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items}))}break;case"formulariot":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(s=>{if(void 0===this.sitipo)this.items=s,this.items.push({_id:"users",nombre:"Usuarios sistema**"}),this.items.push({_id:"frmmovilsproceso",nombre:"Procesos sistema**"}),this.itemsList=this.items;else{var e;e=s;for(let a=0;a<e.length;a++)this.items.push({_id:e[a]._id,nombre:e[a].nombre,tipo:e[a].tipo});this.itemsList=this.items}});break;case"formulariot2":if("users"===this.idllave)this.tmultiple=!1,this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,"personals",0).then(e=>{this.items=e,this.itemsList=this.items});else{let s="formulariocamposverid";"formulario-plantilla"===this.catalogot?this.tmultiple=!0:(this.tmultiple=!1,s="formulariocamposveridcampo"),this.authenticationService.getReg(this.idllave+"/"+s+"/"+this.userinfo[0].idempresa._id,"frmmovils",0).then(e=>{if(this.items=e,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let a=0;a<this.items.length;a++){let l=0;if(this.idcampos)for(let _=0;_<this.idcampos.length;_++)this.idcampos[_].id===this.items[a]._id&&(l=1);this.itemsList.push(1===l?{_id:this.items[a]._id,name:this.items[a].name,nombre:this.items[a].nombre,isChecked:!0}:{_id:this.items[a]._id,name:this.items[a].name,nombre:this.items[a].nombre,isChecked:!1})}this.items=this.itemsList}})}break;case"role":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,"rols",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"role1":this.authenticationService.getReg("todos/todosope/"+this.userinfo[0].idempresa._id,"rols",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"tarifas":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].idempresa._id,"tarifas",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"formulariodetalle":this.authenticationService.getReg("detalle/Activo/"+this.userinfo[0].idempresa._id+"/frmmovilp","frmmovils",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"personals":this.authenticationService.getReg("Activo/personasactivas/"+this.userinfo[0].idempresa._id,this.sigraba,0).then(s=>{if(this.items=s,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let a=0;a<this.items.length;a++){let l=0;if(this.idusuario)for(let _=0;_<this.idusuario.length;_++)this.idusuario[_].email===this.items[a]._id&&(l=1);var e;e=this.items[a].correonotifica?this.items[a].correonotifica:this.items[a].email,this.itemsList.push(1===l?{_id:this.items[a]._id,correo:e,nombre:this.items[a].nombre,isChecked:!0}:{_id:this.items[a]._id,correo:e,nombre:this.items[a].nombre,isChecked:!1})}"usuario-plantilla-grupoproceso"===this.op&&(this.itemsList.push({_id:"USUARIOSOLICITANTE",correo:"USUARIOSOLICITANTE",nombre:"USUARIO SOLICITANTE",isChecked:!1}),this.itemsList.push({_id:"USUARIOASIGNADO",correo:"USUARIOASIGNADO",nombre:"USUARIO ASIGNADO",isChecked:!1})),this.items=this.itemsList}});break;case"actoress":this.authenticationService.getReg("Activo/todosgrupo/"+this.userinfo[0].idempresa._id+"/frmactors","frmactors",0).then(s=>{if(this.items=s,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let e=0;e<this.items.length;e++){let a=0;if(this.idusuario)for(let l=0;l<this.idusuario.length;l++)this.idusuario[l].email===this.items[e]._id&&(a=1);this.itemsList.push(1===a?{_id:this.items[e]._id,correo:this.items[e].email,nombre:this.items[e].nombre,isChecked:!0}:{_id:this.items[e]._id,correo:this.items[e].email,nombre:this.items[e].nombre,isChecked:!1})}this.items=this.itemsList}});break;case"comandos":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmcomandos",0).then(s=>{if(this.items=s,this.itemsList=this.items,!0===this.tmultiple){this.itemsList=[];for(let e=0;e<this.items.length;e++){let a=0;if(this.idusuario)for(let l=0;l<this.idusuario.length;l++)this.idusuario[l].email===this.items[e]._id&&(a=1);this.itemsList.push(1===a?{_id:this.items[e]._id,correo:this.items[e].comando,nombre:this.items[e].nombre,isChecked:!0}:{_id:this.items[e]._id,correo:this.items[e].comando,nombre:this.items[e].nombre,isChecked:!1})}this.items=this.itemsList}});break;case"frmmovils":void 0===this.idllave0?this.authenticationService.getReg(this.tipo+"/Activo/"+this.userinfo[0].idempresa._id+"/frmmovilp",this.sigraba,0).then(s=>{this.items=s,this.itemsList=this.items}):this.authenticationService.getReg(this.frmiddetalle+"/detallemaster/"+this.userinfo[0].idempresa._id+"/frmmovilp",this.sigraba,0).then(s=>{this.items=s,this.itemsList=this.items});break;case"frmcampos":this.authenticationService.getReg(this.idllave0+"/frmcamposdetalle/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmmovilds",0).then(s=>{this.items=s,this.itemsList=this.items});break;case"frmactors":this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.idllave,this.sigraba,0).then(s=>{this.items=s,this.itemsList=this.items});break;default:this.authenticationService.getReg("todos/Activo/"+this.userinfo[0].idempresa._id,this.sigraba,0).then(s=>{if(this.items=s,this.itemsList=this.items,!0===this.tmultiple){for(let e=0;e<this.items.length;e++){let a=0;if(this.idusuario)for(let l=0;l<this.idusuario.length;l++)this.idusuario[l].email===this.items[e].email&&(a=1);this.itemsList.push(1===a?{_id:this.items[e]._id,nombre:this.items[e].nombre,isChecked:!0}:{_id:this.items[e]._id,nombre:this.items[e].nombre,isChecked:!1})}this.items=this.itemsList}})}}}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.authenticationService.getcopiauser(),this.frm=this.navParams.get("frm"),this.data=this.navParams.get("op"),this.tipo=this.navParams.get("tipo"),this.tituloxx=this.navParams.get("titlex"),this.sitipo=this.navParams.get("sitipo"),this.frmiddetalle=this.navParams.get("frmiddetalle"),this.itemsfrm=this.navParams.get("itemfrm"),this.filtrocompleto=this.navParams.get("filtrocompleto"),this.doblex=this.navParams.get("doble"),this.idasociado=this.navParams.get("idasociado"),this.bloquear=this.navParams.get("bloquear"),void 0===this.bloquear&&(this.bloquear=""),this.tmultiple=this.navParams.get("tmultiple"),this.dataapirest=this.navParams.get("dataapirest"),this.frmapirest=this.navParams.get("frmapirest"),this.idusuario=this.navParams.get("tarraymultiple"),this.idcampos=this.navParams.get("tarraymultiple"),this.idcampos||(this.idcampos=this.navParams.get("idcampos")),this.idllave=this.navParams.get("idllave"),this.idllave0=this.navParams.get("idllave0"),this.idpapafiltro=this.navParams.get("idpapafiltro"),this.catalogot=this.navParams.get("catalogot"),this.op=this.navParams.get("op"),this.idcampofiltromanual=this.navParams.get("idcampofiltromanual"),this.idfrmconsultaorigenpapa2=this.navParams.get("idfrmconsultaorigenpapa2"),this.idfrmconsulta=this.navParams.get("idfrmconsulta"),this.idfrmconsulta2=this.navParams.get("idfrmconsulta2"),this.siformulatiot=this.navParams.get("siformulatiot"),this.idcamposmodificables=this.navParams.get("idcamposmodificables"),this.idcamposmodificables2=this.navParams.get("idcamposmodificables2"),this.filtroformularioconsulta=this.navParams.get("filtroformularioconsulta"),this.formularioconsulta=this.navParams.get("formularioconsulta"),this.filtrar=this.navParams.get("filtrar"),void 0===this.tmultiple&&(this.tmultiple=!1),void 0===this.doblex&&(this.doblex=""),this.sigraba=this.navParams.get("grabax"),this.vector=this.navParams.get("vector"),void 0===this.navParams.get("grabax")&&(this.sigraba="sigraba"),this.grabax="sigraba"!==this.sigraba,this.pideregistros(),this.translateService.get("SEGUROM").subscribe(t=>{this.seguro=t}),"frmcats"===this.frm?this.idunidadt=this.data:(this.idunidadt=this.data.idunidad,this.idformulario=this.data.idformulario)}ionViewDidLoad(){this.frm=this.data.frm,null==this.navParams.get("record")?this.tituloxx="Creaci\xf3n de "+this.idunidadt:(this.Form.controls.nombre.setValue(this.data.record.nombre),this.tituloxx="Actualizaci\xf3n de "+this.idunidadt)}addRecord(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Ingrese informaci\xf3n",message:"",inputs:[{name:"nombre",type:"text",placeholder:"Ingrese informaci\xf3n"}],buttons:[{text:"Cancelar",cssClass:"secondary",handler:o=>{}},{text:"Aceptar",handler:o=>{let r;r="frmcats"===this.frm?{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idunidad2:this.doblex,nombre:o.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Crea catalogos dinamicos "}}:{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idformulario:this.idformulario,nombre:o.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Crea catalogos dinamicos "}},this.authenticationService.createReg("",r,this.frm).then(m=>{this.pideregistros()},m=>{this.authenticationService.presentAlert(m.error,"Precauci\xf3n","")})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}closeModal(){return(0,b.mG)(this,void 0,void 0,function*(){this.modalController.dismiss("close")})}selectitem(t){if(!0===this.tmultiple){const o=[];let r="",m="",c="";for(let h=0;h<this.itemsList.length;h++)if(!0===this.itemsList[h].isChecked)switch(this.sigraba){case"nocontrolmultipleidnombre":case"controlmultipleidnombre":o.push({id:this.itemsList[h]._id,nombre:this.itemsList[h].nombre}),c=c+" , "+this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id;break;case"formulariot2":"users"===this.idllave?(o.push({id:this.itemsList[h]._id,nombre:this.itemsList[h].nombre}),c=c+" , "+this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id):(o.push({id:this.itemsList[h]._id,nombre:this.itemsList[h].name+"\xb0"+this.itemsList[h].nombre}),c=c+" , "+this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id);break;default:if("select2"===this.tipo){o.push({email:this.itemsList[h]._id,nombre:this.itemsList[h].nombre}),c=""!==c?c+"\xb0"+this.itemsList[h].nombre:this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id,m=m+this.itemsList[h].nombre+"\xb0;";break}if("select3"===this.tipo){o.push({email:this.itemsList[h]._id,nombre:this.itemsList[h].nombre}),c=""!==c?c+"\xb0"+this.itemsList[h].nombre:this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id,m=m+this.itemsList[h].id2.split("\xb0")[0]+"\xb0;";break}o.push({email:this.itemsList[h]._id,nombre:this.itemsList[h].nombre,correo:this.itemsList[h].correo}),c=""!==c?c+"\xb0"+this.itemsList[h].nombre:this.itemsList[h].nombre,r=r+";"+this.itemsList[h]._id}this.modalController.dismiss({_id:o,correos:r,nombres:c,correos2:m})}else this.modalController.dismiss({_id:t._id,nombre:t.nombre})}deleteRecord(t){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:r=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(t.id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na",this.frm).then(r=>{this.pideregistros()},r=>{this.authenticationService.presentAlert(r.error,"Precauci\xf3n","")})}}]})).present()})}updateRecord(t){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:"Ingrese informaci\xf3n",message:"",inputs:[{name:"nombre",type:"text",value:t.nombre,placeholder:"Ingrese informaci\xf3n"}],buttons:[{text:"Cancelar",cssClass:"secondary",handler:r=>{}},{text:"Aceptar",handler:r=>{let m;m="frmcats"===this.frm?{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idunidad2:this.doblex,nombre:r.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza catalogos dinamicos "}}:{idempresa:this.userinfo[0].idempresa._id,idunidad:this.idunidadt,idformulario:this.idformulario,nombre:r.nombre,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"Actualiza catalogos dinamicos "}},this.authenticationService.createReg(t.id,m,this.frm).then(c=>{this.pideregistros()},c=>{this.authenticationService.presentAlert(c.error,"Precauci\xf3n","")})}}]})).present()})}}return n.\u0275fac=function(t){return new(t||n)(i.Y36(d.IN),i.Y36(d.Br),i.Y36(x.sK),i.Y36(M.$),i.Y36(d.X1))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-my-modal-combo"]],viewQuery:function(t,o){if(1&t&&i.Gf(v.N7,5),2&t){let r;i.iGM(r=i.CRH())&&(o.viewPort=r.first)}},decls:23,vars:16,consts:[[3,"translucent"],["color","primary"],["collapse","true","slot","end"],[3,"hidden","title","click"],["slot","icon-only","name","add"],[3,"title","click"],["slot","icon-only","name","refresh-circle-outline"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],["sticky",""],[4,"ngIf"],["itemSize","56","minBufferPx","900","maxBufferPx","1350",3,"items",4,"ngIf"],[1,"ion-text-wrap"],["slot","start",3,"ngModel","indeterminate","ngModelChange","click"],["itemSize","56","minBufferPx","900","maxBufferPx","1350",3,"items"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],["lines","full",1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated",3,"hidden"],["style","text-decoration: underline;","color","danger","class","ion-text-wrap",4,"ngIf"],["class","ion-text-wrap",3,"click",4,"ngIf"],["slot","start",3,"ngModel","ngModelChange","ionChange",4,"ngIf"],["lines","none",1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated",3,"hidden"],["lines","full",3,"hidden"],["color","transparent"],["slot","secondary"],["slot","end","fill","outline",1,"ionic-selectable-item-button",3,"title","click"],["slot","icon-only","ios","create","md","trash-sharp"],["slot","icon-only","ios","create","md","create-sharp"],["color","danger",1,"ion-text-wrap",2,"text-decoration","underline"],[1,"ion-text-wrap",3,"click"],["color","light","slot","start",4,"ngIf"],[1,"first-letter",3,"innerHtml"],["color","light","slot","start"],["slot","start",3,"ngModel","ngModelChange","ionChange"]],template:function(t,o){1&t&&(i.TgZ(0,"ion-header",0),i.TgZ(1,"ion-toolbar",1),i.TgZ(2,"ion-buttons",2),i.TgZ(3,"ion-button",3),i.NdJ("click",function(){return o.addRecord()}),i.ALo(4,"translate"),i._UZ(5,"ion-icon",4),i.qZA(),i.TgZ(6,"ion-button",5),i.NdJ("click",function(){return o.pideregistros()}),i.ALo(7,"translate"),i._UZ(8,"ion-icon",6),i.qZA(),i.TgZ(9,"ion-button",7),i.NdJ("click",function(){return o.closeModal()}),i._UZ(10,"ion-icon",8),i.qZA(),i.qZA(),i.TgZ(11,"ion-title",9),i._uU(12),i.qZA(),i.qZA(),i.TgZ(13,"ion-toolbar",10),i.TgZ(14,"ion-row",11),i.TgZ(15,"ion-col"),i.TgZ(16,"ion-searchbar",12),i.NdJ("ngModelChange",function(m){return o.searchQuery=m})("ionChange",function(){return o.searchList()}),i.ALo(17,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(18,"ion-item-divider",13),i.YNc(19,Z,4,7,"ion-label",14),i.qZA(),i.YNc(20,T,6,2,"ion-list",14),i.qZA(),i.TgZ(21,"ion-content"),i.YNc(22,Q,2,3,"cdk-virtual-scroll-viewport",15),i.qZA()),2&t&&(i.Q6J("translucent",!0),i.xp6(3),i.MGl("title"," ",i.lcZ(4,10,"AGREGARM"),""),i.Q6J("hidden",o.grabax),i.xp6(3),i.MGl("title"," ",i.lcZ(7,12,"REFRESCARM"),""),i.xp6(6),i.Oqu(o.tituloxx),i.xp6(4),i.s9C("placeholder",i.lcZ(17,14,"BUSCARMM")),i.Q6J("ngModel",o.searchQuery),i.xp6(3),i.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0),i.xp6(1),i.Q6J("ngIf",!0===o.tmultiple),i.xp6(2),i.Q6J("ngIf",(null==o.itemsList?null:o.itemsList.length)>0))},directives:[d.Gu,d.sr,d.Sm,d.YG,d.gu,d.wd,d.Nd,d.wI,d.VI,d.j9,C.JJ,C.On,d.rH,P.O5,d.W2,d.Q$,d.q_,d.Ie,d.nz,d.w,v.N7,v.xd,v.x0,d.td,d.yp],pipes:[x.X$],styles:[".first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}"]}),n})()}}]);