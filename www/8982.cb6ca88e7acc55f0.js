"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8982],{28230:(M,b,r)=>{r.d(b,{y:()=>i});var p=r(23349),g=r(69808),k=r(33678),y=r(51062),v=r(93075),T=r(36351),c=r(98246),E=r(5e3);let i=(()=>{class A{}return A.\u0275fac=function(C){return new(C||A)},A.\u0275mod=E.oAB({type:A}),A.\u0275inj=E.cJS({imports:[[g.ez,v.u5,v.UX,y.aw.forChild(),p.Pc,c.F5,T.YL,k.K]]}),A})()},2263:(M,b,r)=>{r.d(b,{l:()=>x});var p=r(70655),g=r(93075),k=r(68554),y=r(40872),v=r.n(y),T=r(4707),c=r(23349),E=r(44529),i=r(5e3),A=r(51062),S=r(69808);const C=["inputId"],P=["video"],B=["canvas"],O=["fileinput"];function D(h,f){if(1&h){const e=i.EpF();i.TgZ(0,"ion-button",25),i.NdJ("click",function(){return i.CHM(e),i.oxw().leer()}),i._UZ(1,"ion-icon",26),i.qZA()}}function N(h,f){if(1&h){const e=i.EpF();i.TgZ(0,"ion-button",27),i.NdJ("click",function(){return i.CHM(e),i.oxw().stopScan()}),i._UZ(1,"ion-icon",28),i.qZA()}}function _(h,f){if(1&h){const e=i.EpF();i.TgZ(0,"ion-button",29),i.NdJ("click",function(){return i.CHM(e),i.oxw().reset()}),i._UZ(1,"ion-icon",30),i.qZA()}}function R(h,f){if(1&h){const e=i.EpF();i.TgZ(0,"ion-button",31),i.NdJ("click",function(){return i.CHM(e),i.oxw().startScan()}),i._UZ(1,"ion-icon",32),i.qZA()}}function Z(h,f){if(1&h){const e=i.EpF();i.TgZ(0,"ion-button",33),i.NdJ("click",function(){return i.CHM(e),i.oxw().captureImage()}),i._UZ(1,"ion-icon",34),i.qZA()}}let x=(()=>{class h{constructor(e,t,s,n,a,o,l,d,u,m){this.ndef=e,this.nfc=t,this.menu=s,this.loadingCtrl=n,this.navParams=a,this.authenticationService=o,this.toastCtrl=l,this.alertController=d,this.translateService=u,this.modalController=m,this.scanActive=!1,this.scanResult=null,this.loading=null,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.diasfestivos="DIAS FESTIVOS",this.nombretarifa="TARIFA_BUSES",this.vinactivos=[],this.tiposervicio="cobro_servicio_bus",this.vdiasfestivos=[],this.vtarifa=[],this.foto0="../../../../assets/sample-images/paypago2.svg",this.BROADCAST_KEY="es.movion.intent.message",this.viewType="grid",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.qrData="",this.scannedCode=null,this.elementType="canvas",this.adelante=new Audio("data:audio/ogg;base64,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"),this.saldoinsuficiente=new Audio("data:audio/ogg;base64,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"),this.errormedio=new Audio("data:audio/ogg;base64,T2dnUwACAAAAAAAAAAAAAAAAAAAAACqCBoIBE09wdXNIZWFkAQFoAIA+AAAAAABPZ2dTAAAAAAAAAAAAAAAAAAABAAAAjzLsvAEYT3B1c1RhZ3MIAAAAV2hhdHNBcHAAAAAAT2dnUwAA6GABAAAAAAAAAAAAAgAAABcdEHNeCAkOBwgNCAgICCEyNTcvMTIrMSUzKS40My0wNjE0NycqKCQxNDAzNDE1MTAxLicxNS81MjMvNDQxMTc3LSs2OTYyNSwfIyYkIiY1MzItNS4wODMzNS4yLCsrKS00LUgL5ME27MWASAfJcifhROpQSAfVsCrWj4vCUQQjx8BIB8lyJduKSAfJecjJV8BIB9W2QZBy64ggyJMgSAfJecjJV8BIB8l5yMlXwEgHyXnIyVfASAfJecjJV8BIgPT852aICVvG/0f0wUlTJV4szLa/TDBSv36j/5nLwnZIgcUs6a2K1GuIcor7IK+g/Uw4LeIQ4RnO0YwR45bHNgAJpEZfjaWRutvV+HF/WEsd8EiigbMkb5eYqGurZVzh9sMdR7h20Xmpdu0FZPAKDpKOpoHcA+4KCP6dip7QByt32OtGB/pASKLy5qkiLXBl/mBFSLGJPs9+9cgOlIJb5Y7Q9PfPgztnJiFozmbaU3WVgnauWgmO4hhTTsOMSUij0+NgyUMwq4/hIyIRGmuqPQ+PWcUTx2bBs/ZRfTE+FAKx2DLDZlZJ077osuOASKXyaUpwvKN9TfAzz4poWsSU7tizI/EbzA0KJdEgFONgdTcxn705Ch9JYHx9dVhqgEijYkN45TEqHa4qjdQZvZYP3MHOp3DhUqWbvK0QM3fpB//VFKG0AMfJtFmx8k9pxRwQSIJVkezDsnlsfE6Rqx2CxsbeKdDJKMMPuZDaDanfIfbyywQul8o4ykUOkkiNlzNW4KDYYZdvUd2lPzOksFfc7RzGcTT+fwFVQ73NJ0ZjugQC4rJjHd8gFeY9QJBIgmsUE+L5S0z66dqOTdZOXXc/yunsao8iPG255vOgMc5XKubgSIyX+PoV904KUad5Tp9Oj99+xi0dLAfGQwdMcTh9qBbz4xNP5ybLyc5a52XbdHK5zu1hSIzx8P/3FIPrvDPWc76TlDqW7DhgPrtn0zHW2dBQ/rsFgP0zZ/FgXqBIghswnppmzkmqb7NSVEVtsROVoFCoT099WqK9VXbSu4pXHQNjTkAG/jGgVTycSKDa9EOvQbh9azYKlDbn0+jaA1W6nMeClnZpYnW+1ZSRNMbWTgc/PGhw+0m89zNg8udHgEif8zF0OG054ri0k7MMpu4mhiMDutX96x9zsI8/3XO5MZmrgHho7TL0QKNrl6HgNxrxgEigAQhVaDVxYDSjqrVCj/KGpiZB+f8mPYQnXc4lyaZj4VIETo5pT9Wx4w3YnUif8QcZHWrfy6y44wit5Ee4CUh4GTXfQWkRsaeQfM5NPD36EakHvOQyQd3oNE3E6Eif7U+epYluvynF4ieYv7xHCdZBbtJA+Lm5gRZpPpM6R6l1YkyaeIwe9zhSatA4RodpuDBY9Eif8QzfpjYISRhtAdnN/GNYnSIH3hDHlgGRerGpGGTY9j/A1ZcrKffqOg0x+xOzbVBInlnIUFo7wQLE2ObjABrcaeABp5hC/tyeYWpiCVEHC75nDsMaOBt6LUgmjGIaVGN700uqSKJqfz6y4JTUJ+W+BBosHm/63YEK2fXvLa3FT7kgTlLqZ6ZcaO9Z3p9P8ByCd/hB+KjTufhigEiB3MoqG/5HyujcndkwZ5iXqyh2DJZb8lUJsu/aoEMVA6eab9L3mEiKxz+DAtu8H/KFqhDFCVXxYM5L2wjUYlhZ1jLmkvudMstdLSVpNzxViEg0eW0jnUqy/pqn8C8IFyN3j+N3+6+isgnfuXkvinkn0BpzC7Ico4BIMvlG9sSDM79VmrCeZqop6y04R01b+Id7Z/puIJlZoAqmyZVIgTVwP9u2k/1jkp11NfII6Lx0BJsyAbyGslYe87gvENTuf3TNU2+YTs+LqRTQVlhoSIwiUydoKXqWR1EGa3uHebX1F1II/xrzqSm6DQr303FTPrKnJ7pLQKMHSv1QKHkBtNO6kkiM3pizjuLNph1tOf7GqbdmfglQeOQy6J1SW2CRoVbSCexOWdjcC/3cFCaXu+/ReEiMgpcVaFg2xY9semSkx/e/btHWBu1PGe2Jv6RMOlhm3QGqosZLy2PNBk9I6+YeU/MfoEiCGL0XmqYy0CJ6kEA0308DX4Ghdj8UjSLxMtcId3hRmEWA2lXBp6dntKMyLNCmydX/+ZRIoQmjC5J2GZ2G/EGK7q4UCXwdieEoMMKydWYkItu67/Pji7rKr9mEZA2N4DVTVD0WSJ6nWytTKqVI9kOWNGouUkOeahaiN98Mi4NY64vDyps+ADTfxSLHCGZ+eY9eYSXZQjy5+hVInqd23Booe1RXKc92/cLhFqEt2/HefR5SLspjDnZYBaKKOyZITTxIbWxKmEQwee4+SJ665v+wjOkAoKvj57SF7uA29BdsJR9ycI5ICY86UvPzhqQ+VgVuno7zWhwCrlBASJ6fi4q073MgDtGAWwWXwkrGFrfmAfcToZMwI0iWH1FzGqkVEAFrkgidj3gb3nbznEien2ITfI2Ri54aGDEkAHlN0Hmx+oGempTkfNjt9Jy23AtAkQLELkDq9Q6nXyBInp944uzBRIEQUTTlEjBAg2aWE4eKZXuIzVCXgzjugtmB/3GArcBInyM7NEAgx1hLHVX8jbeoNm7F0l8wxFUvRZSkS91S/Bw2P12BnvdGC0PDxvVVQvhASKUk1qDMTuimQyIhgFOCI0I+cnhTh0zQ5JjJJnCCCG97vYjmH2a6+o9h4VDC3eDKRI1iFTRIpUrdXhsH8tSMppjVddaS1roe2TQq0OwZuxkz4xXDS4OoSPiBHSCeUccSyiUHCkioYCWwn5y15qlRJTl1Wugi0957D5i0ggesHdwBoAKroVN3J83+qzM+uMCq1DKDKWkZP+FgSKl3S7WmJL+aJ4ojmXbQXlDLgYcYhLghiqRlkhfUbsvMR/ZY9kPQy2DlOeD015xaMO1Ip46Es1UNV3RzSQSRnE8EPxpYRD714XHzyPwTW+/3RsYf0+kndJN/NmSa6/hxBBIgfhxIplHaKN3noAouGsT21DGkCD12gQLJp66M69k24jUGD8bJukgvsjF+OcPzEK3fTEilCXqxmRfE4Cayv4W5udv4bwL9jy80oOTVgU2CVJfy1NU7hAoEk3QojOzlJO/U3lUKuzxIppk16BHwtkf+MnKaQFd5DsMpLIIeXzNdbR5wU2BY5edyRpLvHrQPfE2+4BmBepwdfoOASKne7fSOP5wmgXRcBuDO/Ms0i711P6luwgAkgyO258URZ9qJ3EbzhpSNkZ09YMMZREirVf3FU8ZrWkmOVSyK1FX7vNlCjOuLSfFgHYXUOf2yG+j4XHde0GkMK6bTGDjWDIFIqvxuDpI4k7TQrxBA3j7VNNSiV8WMn4AQprAFAOwxEq8AQXDx8zlcOP8EM9jDtdgXJNkuu9vtSKl3qGvrvY0woqfRAlMe0p4zQgVqPl2/Nd7t08AuYz9ZYr9pV30m6gjrQBxLuDilurJkOUM+bkipBuGJXQoq+YgFiwPRnW5h1PXnM4F0jQq1NFPS/LN03rMDCnQ6/eS32UPWgEinm9JQdRo472CZ5tlW+zfIhUH+SVw189HLKVVtBfbGCl9GgdmmYXUnx3dIp8QyzTNQcVkKo0x9l3nqgAoTfpQxeCZpv7qzcWK/3zpvJWE4Q0tMsUyMrQflvjxTwaorNoBIqBqlXbmpmDbWH1iMnAONdpVdbGa/J3Zx1RGv44/6Zt8htnkI8VcjsFkped6eM5SAtWqxxG3A30BIqg9SJIAciSlNQo/9U8EQdQ81dem0m9GAGrXKockso7EAXJShLsLnN4YgxYzxaKwT/EVqh1JIqQQ+P4pxUHajsQTWEHi9fE2qQgCTB2iyNd0fw+uy0zncazDfFE1fk2agGjacjARrgEi+iAycFms3aNR4hEa9ucyickgvPbDFekiqYp5TKi6uHYZOTGjOSqw4PJaDKb7VOHBOV79oSILsgbg4VN7fe0b2X5pSpjKCmZ/HY/XVgD/oCuHY4GSvhMc9ILR3REgPeeBIBZOPvBy9yK/X5qmPLNkJary2PXZZvLm+5FihPdtvSDT83CiuDkddsJkj5eKkMVPAv2XEie3DF1UGdrb1ISfaIaFINPzfIuxVDpmu9vPueLBGWTiBww9p9lp306zdYO6+Iv36td3YmEg0uvSXbJaUJkBolUdPdsM2a8EFtBFCnHM96BPwJSTIRCqp6EgFChFUmjiVpM8RjP9ay9NeA7gcl78hWdTOyvJ4ojHAl9BIgVkudYYHocRy/ibnIOh5XoX7fZPoye7aYEfQbj/wgvUm1vEbYEiC4ZlJBSsQNH8xjCeDUDVor/x2fa8B4sYHbDgrpF+vlObyRyLH84HUJP7/oqQvH9Upv4QWSKtP3vgft1SVBodLHi5r6qMTuUn+utQ/I9w+qxHVrfrpRGsoDJYkYZTA+bNQoLY610rGSKtP4Y6tJ0sjo2ho9O9VkhX18jgMkzhnqBrdR7luCp+/WLVfLEV27svtvNhoNMws8DBIqrqpHelprgp6vwu0bbi9DsiF+YD3NoWe0784/wz1pkMbZOKSge53i9bH6jBIqV7vocdKpkf6sVCOB8N7s1Ka/dB5NHIP3Ybo73hGLITxPfZebyEQbZTPyKp+tVdN9+RpQEinRtQUf7C2h3d+p2/YIn05za1EpCGLvH/tn6VjcC6DsxKsQmsmlorNp5Ry7OBIo55rdopx294S6qc9xx2y2rACFEupkgo9yAthkF4aiyWrkQ9wUDj+PX0uVQe5X8BIoNCwFqI7ZSnnxNQKqKo5lVMyS2v5MdCd1DokMQnYQm+4W8v1nC7xVS8ppOZlpRgR3j05yqVBrkif2b6Z0XnkcAxVsR5Gm2XKLHFV7s2iaZGIUsTY2TszJekpMs3uYTFEOoHNoL5AADfj4EieuIvYAOsmYRTkbCllsn51Q24hCwevRTbEV1SoOD5ACaZLXKr9spCetyg1S7Lt3wM3KEieqH7IhPkMiEtqFdJcQ+3LGFYTr5Hko5JPzsJVyxmBsxWbOC9maPkpASt5hClhGfzqq4jASJ6of6PzSZwsunjJopfmGwZ/gM7se0jJNjs2uFG3oWL5X+3ACFgz7L+9eOgQIEidYB7Z7l2SYj2k5ZEDGYNHsJjJkxX6zOtbugh6Jhd5M6QBqORnbTgUOC4EzsUCD65wSL3USW5FF9B1koiA9xn1pY+O2uSGWgdGEO9Aw53R/3+/mvm1PDlLAum+FJBIBX1Mwb1b/a7yyyCLvWEWvjBOBYrCSTN6EB6Yc6M3iS8gRoKF5ZutwfaASIto8LnxtlPW6cEW1imHRSqpjE8kKIAFBXLFlAXhe4ZrQHE/EmDpa9ggC0iLZ8LKw60v2IAa07zV3fevE9D5V/1hEU/asg1nuVi6T4pV9bbybSkwSIHPLrbW3zUP59ifOgyINKf5nuwpgbN3M8sbVxOdfuCYn1qfrUZhNYykylfGSIIsZ4RxGXmM2KpBaAGFV89HhCg1AMyk4e48ENlf8/f7GS8FTnrn/uN7T7H8/V75IgnP1UiDH1j/NDKneCFA3GerDEIxSpHQ3kqgzlnhsquILXGJbfNBHfHzW2N4Zji0Sg=="),this.enableSound=!0,this.soundEnabled=!0,this.opcionfinal="mixto",this.currentSegment="Todos",this.searchSubject=new T.t(1),this.apifoto=this.authenticationService.getapifoto()}closeModal(){return(0,p.mG)(this,void 0,void 0,function*(){this.stopScan(),this.modalController.dismiss({data:"close"})})}ngAfterViewInit(){setTimeout(()=>{this.inputElement.setFocus(),"broadcaster"===this.opcionfinal||("mixto"===this.opcionfinal?(this.canvasElement=this.canvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.videoElement=this.video.nativeElement,this.startScan(),this.leer()):"qr"===this.opcionfinal?(this.canvasElement=this.canvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.videoElement=this.video.nativeElement,this.startScan()):"nfc"===this.opcionfinal?this.leer():(this.canvasElement=this.canvas.nativeElement,this.canvasContext=this.canvasElement.getContext("2d"),this.videoElement=this.video.nativeElement,this.startScan()))},400)}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.menu.close(),this.variables=this.navParams.get("variables"),this.idllave=this.navParams.get("idllave"),this.opcionfinal=this.navParams.get("opcion"),void 0===this.opcionfinal&&(this.opcionfinal="mixto"),this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.navParams.get("titulo"),this.moneda=this.userinfo[0].idempresa.moneda,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(e=>{this.seguro=e}),this.translateService.get("MSGM").subscribe(e=>{this.msg=e}),this.msmt="APROXIME MEDIO DE PAGO....",this.Form=new g.cw({nombre:new g.NI("",g.kI.required)}),this.currentSegment="0",this.authenticationService.getReg("dinactivos/"+this.userinfo[0].idempresa._id,"datosfijos2",0).then(e=>{this.vinactivos=e,this.authenticationService.getReg(this.nombretarifa+"/"+this.userinfo[0].idempresa._id+"/diasfestivos","datosfijos2",0).then(t=>{this.vdiasfestivos=t,this.authenticationService.getReg(this.nombretarifa+"/"+this.userinfo[0].idempresa._id+"/dtarifa","datosfijos2",0).then(s=>{this.vtarifa=s;const n=Number(this.datarifa());this.tarifa=n},s=>{this.authenticationService.presentAlert(s.error,this.msg,"")})},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")})},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")})}runTimeChange(e){}leer(){this.tagdesc="",this.myListener=this.nfc.addNdefListener(()=>{alert("dispositivo nfc esperando leer tarjetas")},e=>{alert(e)}).subscribe(e=>{try{this.tagdesc=this.nfc.bytesToString(e.tag.ndefMessage[0].payload).substring(3);var s=this.authenticationService.decryptvalue(this.tagdesc).split("\xb0");this.cobranfc(s[1],s[5])}catch(n){alert("Error, tarjeta no valida")}})}presentLoadingWithOptions(e,t){return(0,p.mG)(this,void 0,void 0,function*(){const s=yield this.loadingCtrl.create({spinner:null,duration:2e3,message:e,translucent:!0,cssClass:t,backdropDismiss:!0});yield s.present(),yield s.onDidDismiss()})}submitForm(){this.Form.controls.nombre.setValue("4ET+fXArweOEOA3Bf72xAY7BFC9lYQB7E9yXVjyrg+lEqUrpQthjjajqOSXoatCCDu8rFf1hrg+JEv9EvS8rul4lxKFYwP4+DyeLUyukSQbnfW0ove4/bolXwH94CDYYL5Xyb3gL72NZK8nepumKZTtulCeiEuBpy3WkOT5MgiO2AgZY4v6zTyCcRXSYGaCa")}handleKeyEnter(){this.ingresatrama(this.Form.controls.nombre.value)}test(e){}handleKeyUp(e){"Enter"===e.key&&setTimeout(()=>{this.ingresatrama(this.Form.controls.nombre.value)},1400)}handleInput(e){}regresatodo(){setTimeout(()=>{this.Form.controls.nombre.setValue(""),this.pagot="",this.saldot="",this.msmt="APROXIME MEDIO DE PAGO....","mixto"!==this.opcionfinal&&("qr"===this.opcionfinal&&this.stopScan(),this.modalController.dismiss({data:"close"}))},1e3)}cobranfc(e,t){const s=Number(this.datarifa());this.authenticationService.getReg(e+"/personadispid/"+t,"personals",0).then(n=>{if(Number(n[0].saldo)>=Number(s))this.authenticationService.getReg(e+"/"+this.userinfo[0]._id+"\xb0"+this.userinfo[0].nombre+"\xb0"+this.userinfo[0].idasociado+"/"+this.tarifa+"/"+this.userinfo[0].email+"/"+this.tiposervicio+"/"+this.userinfo[0].iddispositivo+"/"+this.userinfo[0].idsucursal+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].iddispositivo2+"/cobraconqr","personals",0).then(a=>{const o={estado:50,cobroservicio:"Transaccion realizada con exito, cobro de  pasaje Q. "+s,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};o&&this.authenticationService.createReg(this.tokenactual,o,"compratokens").then(l=>{this.adelante.play(),this.presentLoadingWithOptions("Pago realizado con exito: "+this.moneda+" "+a[0].tarifa,"ion-loading-classbueno"),this.tarifa=s,this.regresatodo()},l=>{this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"})},a=>{this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"});else{const a={estado:10,cobroservicio:"Fondos insuficientes",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};a&&this.authenticationService.createReg(this.tokenactual,a,"compratokens").then(o=>{this.saldoinsuficiente.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n",""),this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"})}})}ingresatrama(e){if(this.authenticationService.decryptvalue(e).indexOf("\xb0")>0){const t=this.authenticationService.decryptvalue(e).split("\xb0");this.tokenactual=t[6],this.authenticationService.getReg(this.tokenactual+"/2","compratokens",0).then(s=>{let n=[];if(n=s,n.length>0)if(0===s[0].estado){let a=[];a=s,this.authenticationService.decryptvalue(a[0].trama);const l=Number(this.datarifa());this.authenticationService.getReg(t[1]+"/personadispid/"+t[0],"personals",0).then(d=>{if(Number(d[0].saldo)>=Number(l))this.authenticationService.getReg(t[1]+"/"+this.userinfo[0]._id+"\xb0"+this.userinfo[0].nombre+"\xb0"+this.userinfo[0].idasociado+"/"+this.tarifa+"/"+this.userinfo[0].email+"/"+this.tiposervicio+"/"+this.userinfo[0].iddispositivo+"/"+this.userinfo[0].idsucursal+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].idempresa._id+"/"+this.userinfo[0].iddispositivo2+"/cobraconqr","personals",0).then(u=>{const m={estado:50,cobroservicio:"Transaccion realizada con exito, cobro de  pasaje Q. "+l,bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};m&&this.authenticationService.createReg(this.tokenactual,m,"compratokens").then(I=>{this.adelante.play(),this.pagot="PAGO: "+this.moneda+" "+u[0].tarifa,this.tarifa=l,this.regresatodo()},I=>{this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"})},u=>{this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"});else{const u={estado:10,cobroservicio:"Fondos insuficientes",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};u&&this.authenticationService.createReg(this.tokenactual,u,"compratokens").then(m=>{this.saldoinsuficiente.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"},m=>{this.authenticationService.presentAlert(m.error,"Precauci\xf3n",""),this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"})}})}else this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n",""),this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura";else this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n",""),this.errormedio.play(),this.regresatodo(),this.msmt="Transacci\xf3n insegura"})}else this.msmt="Transacci\xf3n insegura",this.errormedio.play(),this.regresatodo()}datarifa(){let e="0";const t=new Date;let s=0,n=0;for(let a=0;a<this.vdiasfestivos.length;a++)if(t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear()===this.vdiasfestivos[a]){e="0",s=1;break}if(0===s){const o=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"][t.getDay()];for(let l=0;l<this.vtarifa.length;l++){const d=this.vtarifa[l].nombre.split(",");if(o===d[0]){const u=Number(d[1]),m=Number(d[2]),I=Number(t.getHours());if(Number(d[3]),I>=u&&I<=m&&(e=d[3],this.diat=o,this.horat=I,n=1),1===n)break}}}return e}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(e){this.itemsList=[],this.efecto=0,"0"===e?this.authenticationService.getReg(this.userinfo[0].email+"/"+e+"/"+this.userinfo[0].idempresa._id+"/trasferencia","compratokens2",0).then(t=>{this.efecto=1,this.items=t,this.itemsList=this.items},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")}):"1"===e?this.authenticationService.getReg(this.userinfo[0].email+"/1/"+this.userinfo[0].idempresa._id+"/trasferencia","compratokens2",0).then(t=>{this.efecto=1,this.items=t,this.itemsList=this.items},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")}):this.authenticationService.getReg(this.userinfo[0].email+"/"+e+"/"+this.userinfo[0].idempresa._id+"/trasferencia","compratokens2",0).then(t=>{this.efecto=1,this.items=t,this.itemsList=this.items},t=>{this.authenticationService.presentAlert(t.error,this.msg,"")})}showQrToast(){return(0,p.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:`Open ${this.scanResult}?`,position:"top",buttons:[{text:"Open",handler:()=>{window.open(this.scanResult,"_system","location=yes")}}]})).present()})}reset(){this.scanResult=null}stopScan(){this.scanActive=!1}startScan(){return(0,p.mG)(this,void 0,void 0,function*(){const e=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});this.videoElement.srcObject=e,this.videoElement.setAttribute("playsinline",!0),this.loading=yield this.loadingCtrl.create({}),yield this.loading.present(),this.videoElement.play(),requestAnimationFrame(this.scan.bind(this))})}scan(){return(0,p.mG)(this,void 0,void 0,function*(){if(this.videoElement.readyState===this.videoElement.HAVE_ENOUGH_DATA){this.loading&&(yield this.loading.dismiss(),this.loading=null,this.scanActive=!0),this.canvasElement.height=this.videoElement.videoHeight,this.canvasElement.width=this.videoElement.videoWidth,this.canvasContext.drawImage(this.videoElement,0,0,this.canvasElement.width,this.canvasElement.height);const e=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),t=v()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"});if(t){this.scanActive=!1,this.scanResult=this.authenticationService.decryptvalue(t.data);const s=this.scanResult.split("\xb0");this.tokenactual=s[6],this.ingresatrama(t.data)}else this.scanActive&&requestAnimationFrame(this.scan.bind(this))}else requestAnimationFrame(this.scan.bind(this))})}captureImage(){this.fileinput.nativeElement.click()}handleFile(e){const t=e.item(0),s=new Image;s.onload=()=>{this.canvasContext.drawImage(s,0,0,this.canvasElement.width,this.canvasElement.height);const n=this.canvasContext.getImageData(0,0,this.canvasElement.width,this.canvasElement.height),a=v()(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});if(a){this.scanResult=this.authenticationService.decryptvalue(a.data);const o=this.scanResult.split("\xb0");this.tokenactual=o[6],this.ingresatrama(a.data)}},s.src=URL.createObjectURL(t)}verificapago(e){this.authenticationService.getReg(this.tokenactual+"/3","compratokens",0).then(t=>{let s=[];s=t,s.length>0?3===t[0].estado?this.cobronormalsinsaldo(e):0===t[0].estado?this.authenticationService.getReg(e[1]+"/personadispid/"+e[0],"personals",0).then(n=>{if(Number(n[0].saldo)>=Number(this.monto)){const a={estado:2,cobroservicio:this.userinfo[0].idempresa.nombre+"<br> en la ubicaci\xf3n:"+this.userinfo[0].idempresa.direccion+"<br> Quiere cobrar "+this.moneda+" "+this.monto+"<br> \xbf Desea autorizar la transaccion?",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};a&&this.authenticationService.createReg(this.tokenactual,a,"compratokens").then(o=>{this.StartTimer(e)},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}else{const a={estado:10,cobroservicio:"Fondos insuficientes",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};a&&this.authenticationService.createReg(this.tokenactual,a,"compratokens").then(o=>{this.authenticationService.presentAlert("Fondos insuficientes","Precauci\xf3n","")},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}},n=>{this.authenticationService.presentAlert(n.error,"Precauci\xf3n","")}):this.StartTimer(e):this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")},t=>{this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")})}StartTimer(e){this.timer=setTimeout(t=>{this.authenticationService.getReg(this.tokenactual+"/3","compratokens",0).then(s=>{let n=[];n=s,n.length>0&&3===s[0].estado?this.cobronormalsinsaldo(e):this.StartTimer(e)},s=>{this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")})},3e3)}cobronormal(e){this.authenticationService.getReg(e[6]+"/2","compratokens",0).then(t=>{let s=[];if(s=t,s.length>0)if(0===t[0].estado)if(this.authenticationService.decryptvalue(s[0].trama)+"\xb0"+s[0]._id+"\xb0"+s[0].tipo===this.scanResult)if(this.monto===e[4]){const a={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:this.userinfo[0].idempresa._id,idsuscriptor:e[1],tipocompra:"servicio",tokencompra:s[0]._id,nombre:e[2],monto:this.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:e[1],idsuscriptor2:{id:this.userinfo[0]._id,nombre:this.userinfo[0].nombre}};a&&this.authenticationService.createReg("",a,"comprasaldos").then(o=>{this.modalController.dismiss({data:"Se ha realizado una venta a: "+e[2]+"<br> Por un monto de "+this.moneda+" "+this.monto})},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})}else this.authenticationService.presentAlert("El Monto no coincide con lo que el cliente programo.<br> El cliente quiere comprar: "+this.moneda+" "+e[4]+"<br> Se quiere acreditar: "+this.moneda+" "+this.monto,"Precauci\xf3n","");else this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","");else this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")})}seguroacepta(e,t,s){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({message:e,buttons:[{text:"No Aceptar",cssClass:"secondary",handler:a=>{const o={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};o&&this.authenticationService.createReg(this.tokenactual,o,"compratokens").then(l=>{this.modalController.dismiss("ok")},l=>{this.authenticationService.presentAlert(l.error,"Precauci\xf3n","")})}},{text:"Aceptar",handler:()=>{var a=t[2].split("<");const o={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:t[0],idsuscriptor:this.userinfo[0]._id,tipocompra:"servicio",tokencompra:s[0]._id,nombre:this.userinfo[0].nombre,monto:t[4],url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:t[0],idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Cobro por pago de servicio"},idempresa0:this.userinfo[0]._id,idsuscriptor2:{id:t[1],nombre:a[0]}};o&&this.authenticationService.createReg("",o,"comprasaldos").then(l=>{const d={estado:33,cobroservicio:"Cobro realizado con exito ",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};d&&this.authenticationService.createReg(this.tokenactual,d,"compratokens").then(u=>{this.modalController.dismiss("ok")},u=>{this.authenticationService.presentAlert(u.error,"Precauci\xf3n","")})},l=>{const d={estado:33,cobroservicio:"Cliente no autorizo transaccion ",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};d&&this.authenticationService.createReg(this.tokenactual,d,"compratokens").then(u=>{this.modalController.dismiss("ok")},u=>{this.authenticationService.presentAlert(u.error,"Precauci\xf3n","")}),this.authenticationService.presentAlert(l.error,"Precauci\xf3n","")})}}]})).present()})}cobronormalreves(e){this.authenticationService.getReg(e[6]+"/2","compratokens",0).then(t=>{let s=[];s=t,s.length>0&&0===t[0].estado&&this.authenticationService.decryptvalue(s[0].trama)+"\xb0"+s[0].tipo+"\xb0"+s[0]._id+"\xb0"+s[0].tipo===this.scanResult?this.seguroacepta(e[2]+"<br> Quiere cobrar "+this.moneda+" "+e[4]+"<br> \xbf Desea autorizar la transaccion?",e,s):this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")})}cobronormalsinsaldo(e){this.authenticationService.getReg(e[1]+"/personadispid/"+e[0],"personals",0).then(t=>{if(Number(t[0].saldo)>=Number(this.monto))this.authenticationService.getReg(e[6]+"/2","compratokens",0).then(s=>{let n=[];n=s;const a={operacion:"pagaservicio",dservicio:"Cobro por pago de servicio",cservicio:"Cobro por servicio",nodispositivo:"servicio",noprov:"",idempresa:this.userinfo[0].idempresa._id,idsuscriptor:e[1],tipocompra:"servicio",tokencompra:n[0]._id,nombre:e[2],monto:this.monto,url:"",tpago:"Efectivo",estado:"Facturado",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:"Compra de saldo"},idempresa0:e[1],idsuscriptor2:{id:this.userinfo[0]._id,nombre:this.userinfo[0].nombre}};a&&this.authenticationService.createReg("",a,"comprasaldos").then(o=>{this.modalController.dismiss({data:"Se ha realizado una venta a: "+e[2]+"<br> Por un monto de "+this.moneda+" "+this.monto})},o=>{this.authenticationService.presentAlert(o.error,"Precauci\xf3n","")})},s=>{this.authenticationService.presentAlert("Transacci\xf3n insegura","Precauci\xf3n","")});else{const s={estado:100,cobroservicio:"Fondos insuficientes, transaccion anulada",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:"acepta token "+this.tokenactual}};s&&this.authenticationService.createReg(this.tokenactual,s,"compratokens").then(n=>{this.authenticationService.presentAlert("Fondos insuficientes, transaccion anulada","Precauci\xf3n","")},n=>{this.authenticationService.presentAlert(n.error,"Precauci\xf3n","")})}})}}return h.\u0275fac=function(e){return new(e||h)(i.Y36(E.$V),i.Y36(E.eI),i.Y36(c._q),i.Y36(c.HT),i.Y36(c.X1),i.Y36(k.$),i.Y36(c.yF),i.Y36(c.Br),i.Y36(A.sK),i.Y36(c.IN))},h.\u0275cmp=i.Xpm({type:h,selectors:[["app-tokens2-list"]],viewQuery:function(e,t){if(1&e&&(i.Gf(c.ju,5),i.Gf(C,5),i.Gf(P,5),i.Gf(B,5),i.Gf(O,5)),2&e){let s;i.iGM(s=i.CRH())&&(t.infiniteScroll=s.first),i.iGM(s=i.CRH())&&(t.inputElement=s.first),i.iGM(s=i.CRH())&&(t.video=s.first),i.iGM(s=i.CRH())&&(t.canvas=s.first),i.iGM(s=i.CRH())&&(t.fileinput=s.first)}},decls:48,vars:18,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["title","leer","color","danger",3,"click",4,"ngIf"],["title","Parar escaner","color","danger",3,"click",4,"ngIf"],["title","Reset","color","warning",3,"click",4,"ngIf"],["title","Iniciar escaner",3,"click",4,"ngIf"],["title","leer imagen qr de galeria",3,"click",4,"ngIf"],[1,"filters-toolbar",3,"hidden"],["align-items-center","",1,"searchbar-row",3,"hidden"],["inputMode","text","clearInput","true","formControlName","nombre","required","",3,"keyup","keypress"],["inputId",""],[1,"call-to-action-col",3,"hidden"],[1,"legal-content"],["hidden",""],["canvas",""],["width","25%"],["video",""],["size","6","offset","3"],["src","../../../../assets/img/qrandnfc.png"],[1,"legal-text"],["type","file","accept","image/*;capture=camera","hidden","",3,"change"],["fileinput",""],["title","leer","color","danger",3,"click"],["slot","start","name","card-outline"],["title","Parar escaner","color","danger",3,"click"],["slot","start","name","stop-circle-outline"],["title","Reset","color","warning",3,"click"],["slot","start","name","refresh-circle-outline"],["title","Iniciar escaner",3,"click"],["slot","icon-only","name","qr-code-outline"],["title","leer imagen qr de galeria",3,"click"],["slot","icon-only","name","image-outline"]],template:function(e,t){1&e&&(i.TgZ(0,"form",0),i.TgZ(1,"ion-header"),i.TgZ(2,"ion-toolbar",1),i.TgZ(3,"ion-buttons",2),i.TgZ(4,"ion-button",3),i.NdJ("click",function(){return t.closeModal()}),i._UZ(5,"ion-icon",4),i.qZA(),i.qZA(),i.YNc(6,D,2,0,"ion-button",5),i.YNc(7,N,2,0,"ion-button",6),i.YNc(8,_,2,0,"ion-button",7),i.YNc(9,R,2,0,"ion-button",8),i.YNc(10,Z,2,0,"ion-button",9),i.qZA(),i.TgZ(11,"ion-toolbar",10),i.TgZ(12,"ion-row",11),i.TgZ(13,"ion-col"),i.TgZ(14,"ion-input",12,13),i.NdJ("keyup",function(n){return t.handleKeyUp(n)})("keypress",function(n){return t.test(n)}),i.qZA(),i.qZA(),i._UZ(16,"ion-col",14),i.qZA(),i.qZA(),i.qZA(),i.TgZ(17,"ion-content",15),i._UZ(18,"canvas",16,17),i._UZ(20,"video",18,19),i.TgZ(22,"article"),i.TgZ(23,"h1"),i._uU(24,"Bienvenido"),i.qZA(),i.qZA(),i.TgZ(25,"ion-grid"),i.TgZ(26,"ion-row"),i.TgZ(27,"ion-col",20),i._UZ(28,"ion-img",21),i.qZA(),i.qZA(),i.TgZ(29,"ion-row"),i.TgZ(30,"ion-col"),i.TgZ(31,"article"),i.TgZ(32,"h1"),i._uU(33),i.qZA(),i.TgZ(34,"p"),i._uU(35),i.qZA(),i.TgZ(36,"p"),i._uU(37),i.qZA(),i.TgZ(38,"p"),i._uU(39),i.ALo(40,"currency"),i.qZA(),i.qZA(),i.TgZ(41,"h1",22),i._uU(42),i._UZ(43,"br"),i._UZ(44,"br"),i._uU(45),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(46,"input",23,24),i.NdJ("change",function(n){return t.handleFile(n.target.files)}),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Q6J("formGroup",t.Form),i.xp6(6),i.Q6J("ngIf","nfc"===t.opcionfinal),i.xp6(1),i.Q6J("ngIf","qr"===t.opcionfinal&&t.scanActive),i.xp6(1),i.Q6J("ngIf",t.scanResult),i.xp6(1),i.Q6J("ngIf","qr"===t.opcionfinal),i.xp6(1),i.Q6J("ngIf","qr"===t.opcionfinal),i.xp6(1),i.Q6J("hidden",!0),i.xp6(1),i.Q6J("hidden",!0),i.xp6(4),i.Q6J("hidden",!t.showAgeFilter),i.xp6(17),i.Oqu(t.msmt),i.xp6(2),i.hij(" Dia: ",t.diat," "),i.xp6(2),i.hij(" Hora: ",t.horat," "),i.xp6(2),i.hij(" Tarifa : ",i.xi3(40,15,t.tarifa,t.moneda),""),i.xp6(3),i.hij(" ",t.pagot," "),i.xp6(3),i.hij(" ",t.saldot," "))},directives:[g._Y,g.JL,g.sg,c.Gu,c.sr,c.Sm,c.YG,c.gu,S.O5,c.Nd,c.wI,c.pK,c.j9,g.JJ,g.u,g.Q7,c.W2,c.jY,c.Xz],pipes:[S.H9],styles:["[_nghost-%COMP%]{--page-margin: var(--app-broad-margin);--page-background: var(--app-background-shade);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.legal-content[_ngcontent-%COMP%]   .legal-title[_ngcontent-%COMP%]{color:var(--ion-color-secondary);margin:var(--page-margin) 0px calc(var(--page-margin) / 2);text-align:center}.legal-content[_ngcontent-%COMP%]   .legal-text[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin:calc(var(--page-margin) / 2) 0px var(--page-margin);font-size:28px;line-height:20px;color:#4848f8;text-align:center}.example1[_ngcontent-%COMP%]{height:50px;overflow:hidden;position:relative}.example1[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2em;color:#32cd32;position:absolute;width:60%;height:100%;margin:0;line-height:50px;text-align:center;transform:translate(100%);-webkit-animation:example1 15s linear infinite;animation:example1 15s linear infinite}@-webkit-keyframes example1{0%{-webkit-transform:translateX(100%)}to{-webkit-transform:translateX(-100%)}}@keyframes example1{0%{transform:translate(100%)}to{transform:translate(-100%)}}article[_ngcontent-%COMP%]{background:linear-gradient(to right,#84ff3d,#2eabff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-align:center}h1[_ngcontent-%COMP%]{font-size:10vmin;line-height:1.1}body[_ngcontent-%COMP%]{background:#000f1a;min-block-size:100%;min-inline-size:100%;box-sizing:border-box;display:grid;place-content:center;font-family:system-ui;font-size:min(200%,5vmin)}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0}p[_ngcontent-%COMP%]{font-family:Dank Mono,ui-monospace,monospace}html[_ngcontent-%COMP%]{block-size:100%;inline-size:100%}"]}),h})()}}]);