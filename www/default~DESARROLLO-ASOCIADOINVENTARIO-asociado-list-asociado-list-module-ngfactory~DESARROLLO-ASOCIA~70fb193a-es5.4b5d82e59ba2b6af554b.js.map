{"version":3,"sources":["webpack:///src/app/DESARROLLO/modals/my-modal-combo/my-modal-combo.module.ts","webpack:///src/app/DESARROLLO/modals/my-modal-combo/my-modal-combo.page.html","webpack:///node_modules/@agm/core/agm-core.d.ts.AgmMap.html","webpack:///src/app/DESARROLLO/modals/my-modal/my-modal.page.html","webpack:///src/app/DESARROLLO/modals/my-modal/my-modal.module.ts","webpack:///src/app/DESARROLLO/modals/my-modal/my-modal.page.ts"],"names":["MyModalComboPageModule","MyModalPageModule","MyModalPage","modalController","mapsAPILoader","ngZone","navParams","title","zoom","this","dismiss","direccion","address","la","latitude","lo","longitude","uubx","get","load","then","setCurrentLocationa","setCurrentLocation2a","geoCoder","google","maps","Geocoder","autocomplete","places","Autocomplete","searchElementRef","nativeElement","types","addListener","run","place","getPlace","geometry","location","lat","lng","getAddress","setCurrentLocationa33","watchId","Geolocation","clearWatch","id","isPluginAvailable","watchPosition","timeout","enableHighAccuracy","maximumAge","data","err","coords","e","console","error","log","Number","substring","indexOf","$event","geocode","results","status","formatted_address","window","alert"],"mappings":"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","file":"x","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule , ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule} from '@angular/router';\n\n\nimport { MyModalComboPage } from './my-modal-combo.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule, ReactiveFormsModule ,\n    IonicModule, RouterModule,\n    TranslateModule.forChild()\n  ],\n  declarations: [MyModalComboPage],\n  entryComponents: [\n    MyModalComboPage\n  ],\n})\nexport class MyModalComboPageModule {}\n","\n<ion-header [translucent]=\"true\">\n  <ion-toolbar color=\"primary\">\n          <ion-buttons slot=\"end\">\n            <ion-button [hidden]=\"grabax\" title=\" {{ 'AGREGARM' | translate }}\" (click)=\"addRecord()\">\n              <ion-icon slot=\"icon-only\" name=\"add\"></ion-icon>\n            </ion-button>\n            <ion-button title=\" {{ 'REFRESCARM' | translate }}\" (click)=\"pideregistros()\">\n              <ion-icon slot=\"icon-only\" name=\"refresh-circle-outline\"></ion-icon>\n            </ion-button>\n                  <ion-button (click)=\"closeModal()\">\n                     <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n                  </ion-button>\n                 \n          </ion-buttons>\n          <ion-title>{{tituloxx}}</ion-title>\n         \n  </ion-toolbar>   \n  <ion-toolbar class=\"filters-toolbar\">\n    <ion-row class=\"searchbar-row\" align-items-center>\n      <ion-col>\n        <ion-searchbar animated [(ngModel)]=\"searchQuery\" (ionChange)=\"searchList()\" placeholder=\"{{ 'BUSCARM' | translate }}\"></ion-searchbar>\n      </ion-col>\n\n    </ion-row>\n   \n  </ion-toolbar>\n\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"ion-padding\">\n  <ion-list *ngIf=\"tmultiple===true\"  >\n    <ion-item>\n      <ion-label><strong>Seleccionar Todos</strong></ion-label>\n      <ion-checkbox slot=\"start\" \n      [(ngModel)]=\"masterCheck\"\n      [indeterminate]=\"isIndeterminate\"\n        (click)=\"checkMaster($event)\"></ion-checkbox>\n    </ion-item>\n  </ion-list>\n  <ion-list class=\"ion-no-margin\">  \n\n\n    <ion-item class=\"ionic-selectable-item\"  button=\"true\"   detail=\"false\" *ngFor=\"let item of itemsList;let i = index; \" [routerLink]=\"\">\n      <ion-label *ngIf=\"bloquear===item._id\" style=\"text-decoration: underline;\" color=\"danger\" class=\"ion-text-wrap\">\n       \n      Actual:  {{item.nombre}} \n      \n     \n      </ion-label>\n        <ion-label *ngIf=\"bloquear!==item._id\" (click)=\"selectitem(item)\" class=\"ion-text-wrap\">\n       \n        \n          <span *ngIf=\"getKeys(item)\">\n            <div  class=\"first-letter\" *ngFor=\"let key of keys\" [innerHtml]=\"key\">\n               \n            \n         \n            </div> \n          </span>\n        \n       \n        </ion-label>\n        <ion-checkbox slot=\"start\" *ngIf=\"tmultiple===true\"  \n        [(ngModel)]=\"item.isChecked\" \n        (ionChange)=\"checkEvent()\"></ion-checkbox>\n\n     \n    \n\n      <ion-button [hidden]=\"grabax\" title=\"{{ 'ELIMINARM' | translate }}\" \n      class=\"ionic-selectable-item-button\" slot=\"end\" fill=\"outline\"\n      (click)=\"deleteRecord( item)\">\n      <ion-icon slot=\"icon-only\" ios=\"create\" md=\"trash-sharp\"></ion-icon>\n    </ion-button>\n    <ion-button [hidden]=\"grabax\" title=\"{{ 'ACTUALIZARM' | translate }}\"\n      class=\"ionic-selectable-item-button\" slot=\"end\" fill=\"outline\"\n      (click)=\"updateRecord( item)\">\n      <ion-icon slot=\"icon-only\" ios=\"create\" md=\"create-sharp\"></ion-icon>\n    </ion-button>\n\n\n     \n    </ion-item>\n  </ion-list>\n</ion-content>\n\n","\n              <div class='agm-map-container-inner sebm-google-map-container-inner'></div>\n              <div class='agm-map-content'>\n                <ng-content></ng-content>\n              </div>\n  ","\n\n<ion-header [translucent]=\"true\">\n  <ion-toolbar color=\"primary\">\n    <ion-button (click)=\"loadMap()\" shape=\"round\" color=\"dark\">\n      <ion-icon slot=\"start\" name=\"locate\"></ion-icon>\n      Ubicación\n    </ion-button>\n          <ion-buttons slot=\"end\">\n                  <ion-button (click)=\"closeModal()\">\n                     <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n                  </ion-button>\n          </ion-buttons>\n          <ion-title>{{tituloxx}}</ion-title>\n         \n  </ion-toolbar>   \n\n\n\n</ion-header>\n\n<ion-content [fullscreen]=\"true\" class=\"ion-padding\">\n{{latitude}}, {{longitude}}\n  <div id=\"book-search-input\" role=\"search\">  \n\n  <input type=\"text\" class=\"book-search-input native-input sc-ion-input-ios\" (keydown.enter)=\"$event.preventDefault()\"\n   placeholder=\"Ingrese dirección\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"off\" type=\"text\" #search>\n\n  </div>\n  <agm-map [latitude]=\"latitude\" [longitude]=\"longitude\" [zoom]=\"zoom\">\n    <agm-marker [latitude]=\"latitude\" [longitude]=\"longitude\" [markerDraggable]=\"true\"\n      (dragEnd)=\"markerDragEnd($event)\"></agm-marker>\n  </agm-map>\n \n \n  <h5>Dirección: {{address}}</h5>\n\n  <ion-button class=\"login-btn\" (click)=\"dadireccion()\" type=\"submit\" expand=\"block\" >Seleccionar</ion-button>\n  \n</ion-content>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { MyModalPage } from './my-modal.page';\nimport { AgmCoreModule } from '@agm/core';\nimport { environment } from '../../../../environments/environment';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AgmCoreModule.forRoot({\n      apiKey: environment.googleMapsAPIKey,\n      libraries: ['places']\n    })\n  ],\n  declarations: [MyModalPage],\n  entryComponents: [\n    MyModalPage\n  ],\n})\nexport class MyModalPageModule {}\n","\nimport { Component, OnInit, ViewChild, ElementRef, NgZone } from '@angular/core';\nimport { MapsAPILoader, AgmMap } from '@agm/core';\nimport { ModalController , NavParams} from '@ionic/angular';\n\nimport { Plugins, Capacitor , CallbackID} from '@capacitor/core';\nconst { Geolocation} = Plugins;\n\n\n@Component({\n  selector: 'app-my-modal',\n  templateUrl: './my-modal.page.html',\n  styleUrls: ['./my-modal.page.scss'],\n})\nexport class MyModalPage implements OnInit {\n\n\n  title = 'AGM project';\n  latitude: number;\n  longitude: number;\n  zoom = 16 ;\n  address: string;\n  uubx: string;\n  watchId: CallbackID;\n  private geoCoder;\n  tituloxx: any;\n\n  @ViewChild('search', {static: false})\n  public searchElementRef: ElementRef;\n\n\n  constructor( private modalController: ModalController,\n    private mapsAPILoader: MapsAPILoader,\n    private ngZone: NgZone,\n    private navParams: NavParams\n  ) { }\n\n  dismissModal() {     this.modalController.dismiss('close');      }\n\n  dadireccion() {     this.modalController.dismiss({direccion: this.address, la: this.latitude, lo: this.longitude});      }\n  ngOnInit() {\n\n    this.uubx = this.navParams.get('uubx');\n\n\n\n    this.mapsAPILoader.load().then(() => {\n      if (this.uubx === '') {     this.setCurrentLocationa();      } else      {  this.setCurrentLocation2a();      }\n      this.geoCoder = new google.maps.Geocoder;\n\n      const autocomplete = new google.maps.places.Autocomplete(this.searchElementRef.nativeElement, {\n        types: ['address']\n      });\n      autocomplete.addListener('place_changed', () => {\n        this.ngZone.run(() => {\n\n          const place: google.maps.places.PlaceResult = autocomplete.getPlace();\n\n\n          if (place.geometry === undefined || place.geometry === null) {\n            return;\n          }\n\n          if (place) {\n          this.latitude = place.geometry.location.lat();\n          this.longitude = place.geometry.location.lng();\n          this.getAddress(this.latitude, this.longitude);\n          }\n        });\n      });\n    });\n\n  }\n\n  loadMap() {\n    this.mapsAPILoader.load().then(() => {\n   this.setCurrentLocationa33();\n\n\n    });\n  }\n\n  clearWatch() {\n    if (this.watchId != null) {\n      Plugins.Geolocation.clearWatch({ id: this.watchId });\n    }\n  }\n  // Get Current Location Coordinates\n  setCurrentLocationa33() {\n    if (!Capacitor.isPluginAvailable('Geolocation')) {\n      console.log('Plugin geolocation not available');\n      return;\n    }\n    try {\n      this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n        if (data) {\n          this.latitude = data.coords.latitude;\n          this.longitude = data.coords.longitude;\n      \n  \n        }\n  \n    });\n  } catch (e) {\n    console.error(e);\n  }\n  \n  }\n  setCurrentLocationa() {\n  if (!Capacitor.isPluginAvailable('Geolocation')) {\n    console.log('Plugin geolocation not available');\n    return;\n  }\n  try {\n    this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n      if (data) {\n        this.latitude = data.coords.latitude;\n        this.longitude = data.coords.longitude;\n        this.getAddress(this.latitude, this.longitude);\n\n      }\n\n  });\n} catch (e) {\n  console.error(e);\n}\n\n}\n\nsetCurrentLocation2a() {\n  if (!Capacitor.isPluginAvailable('Geolocation')) {\n    console.log('Plugin geolocation not available');\n    return;\n  }\n  try {\n    this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n    this.latitude = Number( this.uubx.substring(this.uubx.indexOf('{') + 1, this.uubx.indexOf('°') ));\n    this.longitude = Number( this.uubx.substring(this.uubx.indexOf('°') + 1, this.uubx.indexOf('}')) );\n    if (this.latitude !== 0) {\n      if (this.latitude) {\n      this.getAddress(this.latitude, this.longitude);\n      }\n    }\n\n  });\n} catch (e) {\n  console.error(e);\n}\n\n}\n\n\n\n\n  markerDragEnd($event: any) {\n    if (this.latitude !== 0) {\n      if (this.latitude) {\n    this.latitude = $event.coords.lat;\n    this.longitude = $event.coords.lng;\n    this.getAddress(this.latitude, this.longitude);\n      }}\n  }\n\n  getAddress(latitude, longitude) {\n    this.geoCoder.geocode({ 'location': { lat: latitude, lng: longitude } }, (results, status) => {\n      console.log(results);\n      console.log(status);\n      if (status === 'OK') {\n        if (results[0]) {\n          this.address = results[0].formatted_address;\n        } else {\n          window.alert('No results found');\n        }\n      } else {\n        window.alert('Geocoder failed due to: ' + status);\n      }\n\n    });\n  }\n\n  async closeModal() {\n    this.modalController.dismiss('close');\n  }\n\n}\n"]}