"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8449],{50076:(S,C,c)=>{c.d(C,{oK:()=>s,GW:()=>_,dk:()=>h});var s=(()=>{return(a=s||(s={})).Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",s;var a})(),_=(()=>{return(a=_||(_={})).Rear="REAR",a.Front="FRONT",_;var a})(),h=(()=>{return(a=h||(h={})).Uri="uri",a.Base64="base64",a.DataUrl="dataUrl",h;var a})()},26388:(S,C,c)=>{c.d(C,{dk:()=>_.dk,oK:()=>_.oK,V1:()=>h});var s=c(47423),_=c(50076);const h=(0,s.fo)("Camera",{web:()=>c.e(3954).then(c.bind(c,63954)).then(a=>new a.CameraWeb)})},58449:(S,C,c)=>{c.r(C),c.d(C,{frmtareasprogramadasserviciosListPageModule:()=>pt});var s=c(23349),_=c(55787),h=c(69808),a=c(33678),g=c(51062),m=c(93075),T=c(36351),p=c(70655),P=c(68554),u=c(4707),f=c(63814),y=c(15190),M=c(26388),t=c(5e3);const L=["inputId"],w=["fotoa"];function F(r,d){1&r&&(t.TgZ(0,"div",31),t._UZ(1,"ion-icon",32),t.TgZ(2,"span"),t._uU(3,"Ingrese sanci\xf3n"),t.qZA(),t.qZA())}function E(r,d){1&r&&(t.TgZ(0,"div",31),t._UZ(1,"ion-icon",32),t.TgZ(2,"span"),t._uU(3,"Ingrese descripcion"),t.qZA(),t.qZA())}function k(r,d){if(1&r&&(t.TgZ(0,"ion-avatar",33),t._UZ(1,"ion-img",34),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("src",i.fotoimg)}}function O(r,d){1&r&&(t.TgZ(0,"div",31),t._UZ(1,"ion-icon",32),t.TgZ(2,"span"),t._uU(3,"Ingrese foto"),t.qZA(),t.qZA())}let q=(()=>{class r{constructor(i,e,o,n,l){this.modalController=i,this.translateService=e,this.authenticationService=o,this.navParams=n,this.actionSheetController=l,this.vtipo=[],this.variables=[],this.userinfo=[],this.novisible=!1,this.tituloxx="",this.vgrupo=[],this.tiempomulta=0,this.essupervisor=!1,this.esinspector=!1,this.supervisorxxx=0,this.apifoto=this.authenticationService.getapifoto()}ngAfterViewInit(){setTimeout(()=>{this.inputElement.setFocus()},400)}dismissModal(){this.modalController.dismiss("close")}ionViewDidEnter(){}ngOnInit(){this.variables=this.navParams.get("variables"),this.userinfo=this.navParams.get("userinfo"),this.idllave=this.navParams.get("idllave"),this.tituloxx=this.navParams.get("title"),this.essupervisor=this.navParams.get("essupervisor"),this.esinspector=this.navParams.get("esinspector"),this.supervisor=this.navParams.data.datareg.idsupervisor,this.inspector=this.navParams.data.datareg.idinspector,this.idcontrato=this.navParams.data.datareg.idcontrato,this.estadoxxx=this.navParams.get("estadoxxx"),this.datareg=this.navParams.get("datareg"),this.proyectotxt=this.navParams.get("proyectotxt"),this.idempresita=this.navParams.get("idempresita"),this.correos=this.navParams.get("correos"),this.geoposiciontxt=this.navParams.get("geoposiciontxt"),this.navParams.data.record?(this.montoxxx=this.navParams.data.record.monto,void 0===this.montoxxx&&(this.montoxxx="0")):this.montoxxx="0","autorizar"===this.estadoxxx&&!0===this.essupervisor?(this.supervisorxxx=1,this.labelmulta="Aplicar multa"):this.labelmulta="Seleccione tipo de incumplimiento",this.Form=new m.cw({descripcion:new m.NI("",m.kI.required),foto:new m.NI("",m.kI.required),tipomulta:new m.NI("",m.kI.required)}),null==this.navParams.get("record")?(this.novisible=!0,this.translateService.get("NUEVOM").subscribe(i=>{this.tituloxx=i+" "+this.tituloxx,this.lpermiso=i})):(this.translateService.get("ACTUALIZAM").subscribe(i=>{this.tituloxx=i+" "+this.tituloxx,this.lpermiso=i}),this._ID=this.navParams.data.record._id,this.idmulta=this.navParams.data.record.idmulta,this.tiempomulta=this.navParams.data.record.tiempo,this.Form.controls.descripcion.setValue(this.navParams.data.record.descripcion),this.authenticationService.convertToDataURLviaCanvas(this.authenticationService.getapifoto()+this.navParams.data.record.foto,"image/jpeg").then(i=>this.fotoimg=i),this.Form.controls.foto.setValue(this.navParams.data.record.foto),this.Form.controls.tipomulta.setValue(this.navParams.data.record.tipomulta),this.tipomultad=this.navParams.data.record.tipomulta)}submitForm0(){this.authenticationService.subefoto("","Image2s",this.fotoimg,"","","","","create",this.userinfo[0].idempresa._id,"",this.idllave).then(i=>{let e=[];e=i,this.Form.controls.foto.setValue(e.url);let o=this.datareg.fechaasignada.split("T")[0].split("-");const n={idempresa:this.userinfo[0].idempresa._id,idpapa:this.idllave,tipo:"123",nombre:this.Form.controls.descripcion.value+" "+this.proyectotxt,descripcion:this.Form.controls.descripcion.value,idmulta:this.idmulta,empresatxt:"",proyectotxt:this.proyectotxt,idinspector:this.inspector,idinspector2:this.inspector,idcontrato:this.idcontrato,fechamulta:this.datareg.createdAt,periodomulta:o[1]+"-"+o[0],idsupervisor:this.supervisor,idempresita:this.datareg.idempresa0,correotipo:"Notifico a empresa",tiempo:this.tiempomulta,foto:this.Form.controls.foto.value,tipomulta:this.Form.controls.tipomulta.value,geoposicion:this.geoposiciontxt,correos:this.correos,monto:this.montoxxx,estado:"Activo",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}};n&&this.authenticationService.createReg("",n,"frmtareasprogramadasservicioss").then(l=>{if(!this.Form.valid)return;let A=this.correos,x=A.split(";");var v={};const Z='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+'" alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>    <p style="text-align: left;">'+this.proyectotxt+'</p>        <p style="text-align: left;">Tienes una solicitud de una orden de campo:</p>       <p style="text-align: left;">     <p style="text-align: left;"><strong>Descripci\xf3n</strong>: '+this.Form.controls.descripcion.value+'</p>       <p style="text-align: left;"><strong>Multa</strong>:'+this.Form.controls.tipomulta.value+"</p>      <p>&nbsp;</p>      <p>&nbsp;</p>      <p>saludos</p></body> </html>";var b="";"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(b="crea/1/GMAIL",v={destino:x,html:Z,text:Z,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(b="crea/1/OFFICE365",v={destino:x,html:Z,text:Z,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(b="",v={destino:A,html:Z,text:Z,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(b,v,"mails").then(U=>{this.modalController.dismiss("ok")},U=>{this.modalController.dismiss("ok"),this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n","")})},l=>{this.authenticationService.presentAlert(l.error,"Precauci\xf3n","")})},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})}submitForm1(){this.authenticationService.subefoto("","Image2s",this.fotoimg,"","","",this.Form.controls.foto.value,"update",this.userinfo[0].idempresa._id,this._ID,this.idllave).then(i=>{let o,e=[];e=i,this.Form.controls.foto.setValue(e.url),o=!0===this.essupervisor?{idempresa:this.userinfo[0].idempresa._id,idpapa:this.idllave,supervisor:1,registros:this.datareg,idinspector:this.inspector,idinspector2:this.inspector,idsupervisor:this.supervisor,tipo:"123",nombre:this.Form.controls.descripcion.value+" "+this.proyectotxt,descripcion:this.Form.controls.descripcion.value,foto:this.Form.controls.foto.value,tipomulta:this.Form.controls.tipomulta.value,monto:this.montoxxx,estado:"Activo",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}}:{idempresa:this.userinfo[0].idempresa._id,idpapa:this.idllave,supervisor:0,idinspector:this.inspector,idinspector2:this.inspector,idsupervisor:this.supervisor,tipo:"123",nombre:this.Form.controls.descripcion.value+" "+this.proyectotxt,descripcion:this.Form.controls.descripcion.value,foto:this.Form.controls.foto.value,tipomulta:this.Form.controls.tipomulta.value,monto:0,estado:"Activo",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:this.lpermiso,accion:this.tituloxx}},o&&this.authenticationService.createReg(this._ID,o,"frmtareasprogramadasservicioss").then(n=>{!this.Form.valid||this.modalController.dismiss("ok")},n=>{this.authenticationService.presentAlert(n.error,"Precauci\xf3n","")})},i=>{this.authenticationService.presentAlert(i.error,"Precauci\xf3n","")})}submitForm(){null==this.navParams.get("record")?this.submitForm0():"0"===this.navParams.data.record.monto&&this.submitForm1()}dacomponente(i,e){return(0,p.mG)(this,void 0,void 0,function*(){let o="";"ubicacion"===i&&(o=this.Form.controls.ubicacion.value);const n=yield this.modalController.create({component:f.B,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{variables:this.variables,record:null,userinfo:this.userinfo,uubx:o},cssClass:"modal-fullscreen"});return n.onWillDismiss().then(l=>{"close"===l.data||("direccion"===i?this.Form.controls.direccion.setValue(l.data.direccion):this.Form.controls.ubicacion.setValue(l.data.direccion+" {"+l.data.la+"\xb0"+l.data.lo+"}"))}),yield n.present()})}takePicture(i){return(0,p.mG)(this,void 0,void 0,function*(){const e=yield M.V1.getPhoto({correctOrientation:!0,height:200,width:200,quality:60,allowEditing:!0,resultType:M.dk.DataUrl,source:M.oK.Camera});this.authenticationService.generateFromImage(e.dataUrl,200,200,.5,o=>{"fotoa"===i&&(this.fotoimg=o,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})})}uploadPWA2(i,e){e&&e.length>0&&this.firstFileToBase64(e[0]).then(n=>{this.authenticationService.generateFromImage(n,200,300,.5,l=>{"fotoa"===i&&(this.fotoimg=l,this.Form.controls.foto.setValue(this.authenticationService.procesafoto(this.Form.controls.foto.value)))})},n=>{"fotoa"===i&&(this.fotoimg=null,this.Form.controls.foto1.setValue(""))})}uploadPWA(i){if("fotoa"===i){if(null==this.fotoa)return;this.uploadPWA2(i,this.fotoa.nativeElement.files)}}firstFileToBase64(i){return new Promise((e,o)=>{const n=new FileReader;n&&null!=i?(n.readAsDataURL(i),n.onload=()=>{e(n.result)},n.onerror=l=>{o(l)}):o(new Error("No file found"))})}takePicture2(i){return(0,p.mG)(this,void 0,void 0,function*(){"fotoa"===i&&this.fotoa.nativeElement.click()})}fotodatos(i){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.actionSheetController.create({header:"Foto",cssClass:"my-custom-class",buttons:[{text:"Camara",icon:"camera-outline",handler:()=>{this.takePicture(i)}}]})).present()})}combodatoslimpia(i){return(0,p.mG)(this,void 0,void 0,function*(){this.Form.controls[i].setValue(""),"tipomulta"===i&&(this.idmulta="",this.tiempomulta="",this.montoxxx="")})}conformatocombo(i){let e="";if(""!==i){let o=[];o=i.split("\xb0"),e="<br>";for(let n=0;n<o.length;n++){const l=o[n].split(":");""!==l[0]&&String(l[0]).indexOf("\xac")<0&&(e=void 0===l[1]?e+""+l[0]+"<br>":e+""+l[0]+": "+l[1]+"<br>")}}return e}combodatos0(i,e,o,n,l,A){return(0,p.mG)(this,void 0,void 0,function*(){this.authenticationService.getReg("5f72a12587c9e33bd4ada7abs/"+this.datareg.idcontrato+"/"+this.userinfo[0].idempresa._id+"\xb05f72a12587c9e33bd4ada7ab/registromovilxidpapa","frmmovils",0).then(x=>{var v,Z="";0==(v=x).length&&this.authenticationService.presentAlert("Este contrato no tiene enmiendas creadas","Precauci\xf3n","");for(let b=0;b<v.length;b++)if("Activo"===v[b].estado){Z=v[b]._id;break}""!==Z&&void 0!==Z&&this.combodatos(i,e,o,n,l,A,Z)})})}combodatos(i,e,o,n,l,A,x){return(0,p.mG)(this,void 0,void 0,function*(){var v="5fc55f9894568f50c4cdcb4c/multa\xb0Multa/5f503bededa4710798a79b84/getcombosancioenmienda/empresa\xb0"+this.datareg.idempresa0+",contrato\xb0"+this.datareg.idcontrato+",enmienda\xb0"+x+",tiposancion\xb05fc5605c94568f50c4cdcb5e";const Z=yield this.modalController.create({component:y.j,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{filtrocompleto:v,grabax:A,variables:this.variables,userinfo:this.userinfo,record2:null,op:e,frm:o,idllave:this.idllave,titlex:"Buscar "+l},cssClass:"modal-fullscreen"});return Z.onWillDismiss().then(b=>{let U=[];if(U=b,"close"!==U.data)if(U.data)if("tipomulta"===n){this.idmulta=U.data._id;const I=U.data.nombre.split("<br>");this.tiempomulta=I[4].split(":")[1].trim(),this.montoxxx=I[2].split(":")[1].trim(),this.Form.controls[n].setValue(U.data.nombre),this.tipomultad=U.data.nombre}else this.Form.controls[n].setValue(U.data.nombre);else this.Form.controls[n].setValue("")}),yield Z.present()})}}return r.\u0275fac=function(i){return new(i||r)(t.Y36(s.IN),t.Y36(g.sK),t.Y36(P.$),t.Y36(s.X1),t.Y36(s.BX))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-frmtareasprogramadasservicios-create"]],viewQuery:function(i,e){if(1&i&&(t.Gf(L,5),t.Gf(w,7)),2&i){let o;t.iGM(o=t.CRH())&&(e.inputElement=o.first),t.iGM(o=t.CRH())&&(e.fotoa=o.first)}},decls:55,vars:12,consts:[[1,"create-user-form","ion-page",3,"formGroup"],["color","primary"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"create-form-content"],[1,"user-details-fields","fields-section"],["lines","full",1,"inputs-list"],[1,"input-item"],["text-wrap","","position","floating"],["color","danger"],["inputMode","text","clearInput","true","formControlName","tipomulta",1,"ion-text-end",3,"hidden","readonly"],[2,"text-transform","capitalize","font-size","11px",3,"innerHtml","click"],["color","secondary","expand","full","title","Limpiar",3,"click"],["slot","icon-only","name","close-circle-outline"],["title","Seleccione Informaci\xf3n",3,"click"],["slot","icon-only","name","search-outline"],[1,"error-container"],["class","error-message",4,"ngIf"],["position","floating"],["rows","5","inputMode","text","clearInput","true","formControlName","descripcion","required",""],["inputId",""],["inputMode","text","clearInput","true","formControlName","foto",3,"hidden"],["type","file","id","fotoa","accept","image/x-png,image/jpeg",2,"visibility","hidden","height","0px",3,"change"],["fotoa",""],["slot","end",4,"ngIf"],["title","Adjuntar Imagen",3,"click"],["slot","icon-only","name","camera-outline"],[1,"form-actions-wrapper"],["color","primary","expand","block","fill","outline","type","submit",3,"disabled","click"],[1,"error-message"],["name","information-circle-outline"],["slot","end"],["ionImgViewer","","scheme","dark",3,"src"]],template:function(i,e){1&i&&(t.TgZ(0,"form",0),t.TgZ(1,"ion-header"),t.TgZ(2,"ion-toolbar",1),t.TgZ(3,"ion-buttons",2),t.TgZ(4,"ion-button",3),t.NdJ("click",function(){return e.dismissModal()}),t._UZ(5,"ion-icon",4),t.qZA(),t.qZA(),t.TgZ(6,"ion-title",5),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"ion-content",6),t.TgZ(9,"section",7),t.TgZ(10,"ion-list",8),t.TgZ(11,"ion-item",9),t.TgZ(12,"ion-label",10),t._uU(13),t.TgZ(14,"ion-text",11),t._uU(15,"*"),t.qZA(),t.qZA(),t._UZ(16,"ion-input",12),t.TgZ(17,"span"),t.TgZ(18,"div",13),t.NdJ("click",function(){return e.combodatos0(1,"10000-tipo-plantilla","frmcats","tipomulta","tipomulta","multas")}),t.qZA(),t.qZA(),t.TgZ(19,"ion-buttons",2),t.TgZ(20,"ion-button",14),t.NdJ("click",function(){return e.combodatoslimpia("tipomulta")}),t._UZ(21,"ion-icon",15),t.qZA(),t.TgZ(22,"ion-button",16),t.NdJ("click",function(){return e.combodatos0(1,"10000-tipo-plantilla","frmcats","tipomulta","tipomulta","multas")}),t._UZ(23,"ion-icon",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",18),t.YNc(25,F,4,0,"div",19),t.qZA(),t.TgZ(26,"ion-item",9),t.TgZ(27,"ion-label",20),t._uU(28,"Descripcion"),t.TgZ(29,"ion-text",11),t._uU(30,"*"),t.qZA(),t.qZA(),t._UZ(31,"ion-textarea",21,22),t.qZA(),t.TgZ(33,"div",18),t.YNc(34,E,4,0,"div",19),t.qZA(),t._UZ(35,"ion-input",23,22),t.TgZ(37,"input",24,25),t.NdJ("change",function(){return e.uploadPWA("fotoa")}),t.qZA(),t.TgZ(39,"ion-item",9),t.TgZ(40,"ion-label"),t._uU(41,"Foto"),t.TgZ(42,"ion-text",11),t._uU(43,"*"),t.qZA(),t.qZA(),t.YNc(44,k,2,1,"ion-avatar",26),t.TgZ(45,"ion-buttons",2),t.TgZ(46,"ion-button",27),t.NdJ("click",function(){return e.fotodatos("fotoa")}),t._UZ(47,"ion-icon",28),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",18),t.YNc(49,O,4,0,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"ion-footer"),t.TgZ(51,"ion-row",29),t.TgZ(52,"ion-col"),t.TgZ(53,"ion-button",30),t.NdJ("click",function(){return e.submitForm()}),t._uU(54,"CREAR"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.Q6J("formGroup",e.Form),t.xp6(7),t.Oqu(e.tituloxx),t.xp6(6),t.Oqu(e.labelmulta),t.xp6(3),t.Q6J("hidden",!0)("readonly",!0),t.xp6(2),t.Q6J("innerHtml",e.tipomultad,t.oJD),t.xp6(7),t.Q6J("ngIf",e.Form.get("tipomulta").hasError("required")&&(e.Form.get("tipomulta").dirty||e.Form.get("tipomulta").touched)),t.xp6(9),t.Q6J("ngIf",e.Form.get("descripcion").hasError("required")&&(e.Form.get("descripcion").dirty||e.Form.get("descripcion").touched)),t.xp6(1),t.Q6J("hidden",!0),t.xp6(9),t.Q6J("ngIf",void 0!==e.fotoimg),t.xp6(5),t.Q6J("ngIf",e.Form.get("foto").hasError("required")&&(e.Form.get("foto").dirty||e.Form.get("foto").touched)),t.xp6(4),t.Q6J("disabled",!e.Form.valid))},directives:[m._Y,m.JL,m.sg,s.Gu,s.sr,s.Sm,s.YG,s.gu,s.wd,s.W2,s.q_,s.Ie,s.Q$,s.yW,s.pK,s.j9,m.JJ,m.u,h.O5,s.g2,m.Q7,s.fr,s.Nd,s.wI,s.BJ,s.Xz,T.Bg],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:8px}"]}),r})();var N=c(26806);function J(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-button",35),t.NdJ("click",function(){return t.CHM(i),t.oxw().addRecord()}),t.ALo(1,"translate"),t._UZ(2,"ion-icon",36),t.qZA()}if(2&r){const i=t.oxw();t.MGl("title"," ",t.lcZ(1,2,"AGREGARM"),""),t.Q6J("hidden",!i.esinspector)}}function R(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-button",37),t.NdJ("click",function(){return t.CHM(i),t.oxw().changeToList()}),t._UZ(1,"ion-icon",38),t.qZA()}}function D(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-button",37),t.NdJ("click",function(){return t.CHM(i),t.oxw().changeToGrid()}),t._UZ(1,"ion-icon",39),t.qZA()}}function Q(r,d){if(1&r&&(t.TgZ(0,"ion-label"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.lnq("",t.lcZ(2,3,"NOREGISTROSM")," ",i.itemsList.length," ",t.lcZ(3,5,"NOREGISTROSM5"),"")}}function G(r,d){1&r&&(t.TgZ(0,"ion-item",41),t.TgZ(1,"ion-label",42),t._UZ(2,"skeleton-element"),t._UZ(3,"skeleton-element"),t._UZ(4,"skeleton-element",43),t.qZA(),t.qZA())}const z=function(){return[0,1,2,3,4,5,6]};function j(r,d){1&r&&(t.TgZ(0,"ion-list"),t.YNc(1,G,5,0,"ion-item",40),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,z)))}function Y(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.dias," Dias")}}function B(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.horas," Horas")}}function W(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.minutos," Minutos ")}}function H(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.segundos," Segundos")}}function K(r,d){if(1&r&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij("Empresa: ",i.empresatxt,"")}}function V(r,d){if(1&r&&(t.TgZ(0,"a",55),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.MGl("href","https://www.google.com/maps/search/?api=1&query=",i.geoposicion.replace("\xac",","),"",t.LSH),t.xp6(1),t.hij("geoposici\xf3n: ",i.geoposicion.replace("\xac",","),"")}}function $(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-toolbar",56),t.TgZ(1,"ion-buttons",57),t.TgZ(2,"ion-button",6),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(2).deleteRecord(o)}),t.ALo(3,"translate"),t._UZ(4,"ion-icon",58),t.qZA(),t.qZA(),t.qZA()}if(2&r){const i=t.oxw(3);t.Q6J("hidden",!i.esinspector),t.xp6(2),t.s9C("title",t.lcZ(3,2,"ELIMINARM"))}}function X(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-item",45),t.TgZ(1,"ion-grid"),t.TgZ(2,"ion-row"),t.TgZ(3,"ion-col",46),t.NdJ("click",function(){const n=t.CHM(i).$implicit;return t.oxw(2).updateRecord(n)}),t.TgZ(4,"ion-avatar",1),t._UZ(5,"ion-img-viewer",47),t.qZA(),t.TgZ(6,"ion-label",42),t.TgZ(7,"ion-note",48),t._uU(8),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"p"),t.TgZ(11,"strong"),t._uU(12," Tipo:"),t.qZA(),t._uU(13),t._UZ(14,"br"),t.TgZ(15,"strong"),t._uU(16," Proyecto:"),t.qZA(),t._uU(17),t._UZ(18,"br"),t.TgZ(19,"strong"),t._uU(20," Descripcion:"),t.qZA(),t._uU(21),t._UZ(22,"br"),t.TgZ(23,"strong"),t._uU(24,"Tipo multa:"),t.qZA(),t.qZA(),t._UZ(25,"div",49),t._UZ(26,"br"),t.TgZ(27,"p"),t.TgZ(28,"strong"),t._uU(29,"Tiempo estimado para resolver servicio:"),t.qZA(),t._uU(30),t._UZ(31,"br"),t._uU(32," Tiempo trascurrido de la falla sin resolver: "),t.YNc(33,Y,4,1,"ion-chip",24),t.YNc(34,B,4,1,"ion-chip",24),t.YNc(35,W,4,1,"ion-chip",24),t.YNc(36,H,4,1,"ion-chip",24),t._UZ(37,"br"),t.TgZ(38,"strong"),t._uU(39),t.qZA(),t.qZA(),t.YNc(40,K,2,1,"h2",24),t.TgZ(41,"ion-badge",50),t._uU(42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"ion-row"),t.TgZ(44,"ion-col",17),t.TgZ(45,"span"),t.TgZ(46,"div",51),t._uU(47),t.ALo(48,"date"),t._UZ(49,"br"),t._uU(50),t.ALo(51,"date"),t._UZ(52,"br"),t.YNc(53,V,2,2,"a",52),t.qZA(),t.qZA(),t.YNc(54,$,5,4,"ion-toolbar",53),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const i=d.$implicit,e=d.index,o=t.oxw(2);t.xp6(5),t.Q6J("title",o.foto)("src",o.apifoto+i.foto),t.xp6(3),t.hij("No. ",e+1,""),t.xp6(5),t.hij(" ",i.tipo," "),t.xp6(4),t.hij(" ",i.proyectotxt," "),t.xp6(4),t.hij(" ",i.descripcion,""),t.xp6(4),t.Q6J("innerHtml",i.tipomulta,t.oJD),t.xp6(5),t.hij(" ",i.tiempo," Horas. "),t.xp6(3),t.Q6J("ngIf",0!==i.dias&&i.horas>60&&i.minutos>0&&i.segundos>0),t.xp6(1),t.Q6J("ngIf",0!==i.horas&&0===i.dias&&i.minutos>60&&i.segundos>0),t.xp6(1),t.Q6J("ngIf",0!==i.minutos&&0===i.dias&&0===i.horas&&i.segundos>60),t.xp6(1),t.Q6J("ngIf",0!==i.segundos&&0===i.dias&&0===i.minutos&&0===i.horas),t.xp6(3),t.Oqu(i.correotipo),t.xp6(1),t.Q6J("ngIf",void 0!==i.empresatxt),t.xp6(2),t.Oqu(i.estado),t.xp6(5),t.AsE(" Creaci\xf3n [",i.usuarionew,"-",t.xi3(48,21,i.createdAt,"dd-MM-yyyy, hh:mm aaa"),"]"),t.xp6(3),t.AsE(" Actualiza [",i.usuarioup,"-",t.xi3(51,24,i.updatedAt,"dd-MM-yyyy, hh:mm aaa"),"]"),t.xp6(3),t.Q6J("ngIf",void 0!==i.geoposicion&&""!==i.geoposicion),t.xp6(1),t.Q6J("ngIf","activa"===o.estadoxxx)}}function tt(r,d){if(1&r&&(t.TgZ(0,"ion-list"),t.YNc(1,X,55,27,"ion-item",44),t.qZA()),2&r){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.itemsList)("ngForTrackBy",i.trackItems)}}function it(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.dias," Dias")}}function et(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.horas," Horas")}}function ot(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.minutos," Minutos ")}}function rt(r,d){if(1&r&&(t.TgZ(0,"ion-chip"),t._UZ(1,"ion-icon",54),t.TgZ(2,"ion-label",42),t._uU(3),t.qZA(),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.segundos," Segundos")}}function st(r,d){if(1&r&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.xp6(1),t.hij("Empresa: ",i.empresatxt,"")}}function at(r,d){if(1&r&&(t.TgZ(0,"a",55),t._uU(1),t.qZA()),2&r){const i=t.oxw().$implicit;t.MGl("href","https://www.google.com/maps/search/?api=1&query=",i.geoposicion.replace("\xac",","),"",t.LSH),t.xp6(1),t.hij("geoposici\xf3n: ",i.geoposicion.replace("\xac",","),"")}}function nt(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-toolbar",56),t.TgZ(1,"ion-buttons",57),t.TgZ(2,"ion-button",6),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit;return t.oxw(2).deleteRecord(o)}),t.ALo(3,"translate"),t._UZ(4,"ion-icon",58),t.qZA(),t.qZA(),t.qZA()}if(2&r){const i=t.oxw(3);t.Q6J("hidden",!i.esinspector),t.xp6(2),t.s9C("title",t.lcZ(3,2,"ELIMINARM"))}}function ct(r,d){if(1&r){const i=t.EpF();t.TgZ(0,"ion-col",60),t.TgZ(1,"ion-card"),t.TgZ(2,"ion-row",61),t.TgZ(3,"ion-col"),t.TgZ(4,"span",62),t._uU(5,"No."),t.qZA(),t.TgZ(6,"span",63),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"ion-col"),t.TgZ(9,"span",62),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"ion-item",45),t.TgZ(12,"ion-avatar",1),t._UZ(13,"ion-img-viewer",47),t.qZA(),t.TgZ(14,"ion-label",64),t.NdJ("click",function(){const n=t.CHM(i).$implicit;return t.oxw(2).updateRecord(n)}),t.TgZ(15,"p"),t.TgZ(16,"strong"),t._uU(17," Tipo:"),t.qZA(),t._uU(18),t._UZ(19,"br"),t.TgZ(20,"strong"),t._uU(21," Proyecto:"),t.qZA(),t._uU(22),t._UZ(23,"br"),t.TgZ(24,"strong"),t._uU(25,"Descripcion:"),t.qZA(),t._uU(26),t._UZ(27,"br"),t.TgZ(28,"strong"),t._uU(29,"Tipo multa:"),t.qZA(),t.qZA(),t._UZ(30,"div",49),t.TgZ(31,"p"),t._UZ(32,"br"),t.TgZ(33,"strong"),t._uU(34,"Tiempo estimado para resolver servicio:"),t.qZA(),t._uU(35),t._UZ(36,"br"),t._uU(37," Tiempo trascurrido de la falla sin resolver: "),t.YNc(38,it,4,1,"ion-chip",24),t.YNc(39,et,4,1,"ion-chip",24),t.YNc(40,ot,4,1,"ion-chip",24),t.YNc(41,rt,4,1,"ion-chip",24),t._UZ(42,"br"),t.TgZ(43,"strong"),t._uU(44),t.qZA(),t.qZA(),t.YNc(45,st,2,1,"h2",24),t.qZA(),t.qZA(),t._UZ(46,"ion-card-content"),t.TgZ(47,"ion-row",65),t.TgZ(48,"ion-col",17),t.TgZ(49,"span"),t.TgZ(50,"div",51),t._uU(51),t.ALo(52,"date"),t._UZ(53,"br"),t._uU(54),t.ALo(55,"date"),t._UZ(56,"br"),t.YNc(57,at,2,2,"a",52),t.qZA(),t.qZA(),t.YNc(58,nt,5,4,"ion-toolbar",53),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const i=d.$implicit,e=d.index,o=t.oxw(2);t.xp6(7),t.hij("",e+1," "),t.xp6(3),t.hij("",i.estado," "),t.xp6(3),t.Q6J("title",o.foto)("src",o.apifoto+i.foto),t.xp6(5),t.hij(" ",i.tipo," "),t.xp6(4),t.hij(" ",i.proyectotxt," "),t.xp6(4),t.hij(" ",i.descripcion," "),t.xp6(4),t.Q6J("innerHtml",i.tipomulta,t.oJD),t.xp6(5),t.hij(" ",i.tiempo," Horas. "),t.xp6(3),t.Q6J("ngIf",0!==i.dias&&i.horas>60&&i.minutos>0&&i.segundos>0),t.xp6(1),t.Q6J("ngIf",0!==i.horas&&0===i.dias&&i.minutos>60&&i.segundos>0),t.xp6(1),t.Q6J("ngIf",0!==i.minutos&&0===i.dias&&0===i.horas&&i.segundos>60),t.xp6(1),t.Q6J("ngIf",0!==i.segundos&&0===i.dias&&0===i.minutos&&0===i.horas),t.xp6(3),t.Oqu(i.correotipo),t.xp6(1),t.Q6J("ngIf",void 0!==i.empresatxt),t.xp6(6),t.AsE(" Creaci\xf3n [",i.usuarionew,"-",t.xi3(52,21,i.createdAt,"dd-MM-yyyy, hh:mm aaa"),"]"),t.xp6(3),t.AsE(" Actualiza [",i.usuarioup,"-",t.xi3(55,24,i.updatedAt,"dd-MM-yyyy, hh:mm aaa"),"]"),t.xp6(3),t.Q6J("ngIf",void 0!==i.geoposicion&&""!==i.geoposicion),t.xp6(1),t.Q6J("ngIf","activa"===o.estadoxxx)}}function lt(r,d){if(1&r&&(t.TgZ(0,"ion-grid"),t.TgZ(1,"ion-row"),t.YNc(2,ct,59,27,"ion-col",59),t.qZA(),t.qZA()),2&r){const i=t.oxw();t.xp6(2),t.Q6J("ngForOf",i.itemsList)("ngForTrackBy",i.trackItems)}}function dt(r,d){1&r&&(t.TgZ(0,"h3",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"NODATOS")," "))}let ut=(()=>{class r{constructor(i,e,o,n,l,A){this.routerOutlet=i,this.router=e,this.authenticationService=o,this.alertController=n,this.translateService=l,this.modalController=A,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.essupervisor=!1,this.esinspector=!1,this.userinfo=[],this.viewType="grid",this.tituloxx="",this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Activo",this.searchSubject=new u.t(1),this.apifoto=this.authenticationService.getapifoto()}changeToList(){this.viewType="list"}changeToGrid(){this.viewType="grid"}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.idllave=this.router.getCurrentNavigation().extras.state.idllave,this.correos=this.router.getCurrentNavigation().extras.state.correos,this.userinfo=this.authenticationService.getcopiauser(),this.tituloxx=this.router.getCurrentNavigation().extras.state.title,this.idinspector=this.router.getCurrentNavigation().extras.state.idinspector,this.idsupervisor=this.router.getCurrentNavigation().extras.state.idsupervisor,this.datareg=this.router.getCurrentNavigation().extras.state.datareg,this.geoposiciontxt=this.router.getCurrentNavigation().extras.state.geoposiciontxt,this.idempresita=this.router.getCurrentNavigation().extras.state.idempresita,this.proyectotxt=this.router.getCurrentNavigation().extras.state.proyectotxt,this.idempresita=this.router.getCurrentNavigation().extras.state.idempresita,this.essupervisor=this.router.getCurrentNavigation().extras.state.essupervisor,this.esinspector=this.router.getCurrentNavigation().extras.state.esinspector,this.estadoxxx=this.router.getCurrentNavigation().extras.state.estadoxxx,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.translateService.get("MSGM").subscribe(i=>{this.msg=i}),this.rangeForm=new m.cw({dual:new m.NI({lower:1,upper:100})}),this.currentSegment="Activo",this.pideregistros(this.currentSegment)}filterContacts(i){const e=i.detail.value;this.currentSegment=e,this.pideregistros(e)}pideregistros0(){this.pideregistros(this.currentSegment)}pideregistros(i){this.itemsList=[],this.efecto=0,this.authenticationService.getReg("todos/"+i+"/"+this.userinfo[0].idempresa._id+"/"+this.idllave,"frmtareasprogramadasservicioss",0).then(e=>{this.efecto=1,this.items=e,this.itemsList=this.items},e=>{this.authenticationService.presentAlert(e.error,this.msg,"")})}trackItems(i,e){return e.id}searchList(){this.searchSubject.next({lower:this.rangeForm.controls.dual.value.lower,upper:this.rangeForm.controls.dual.value.upper,query:this.searchQuery}),this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(i,e){return i.filter(o=>o.nombre.toLowerCase().includes(e.toLowerCase()))}otrasop(i){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Seleccione Opci\xf3n",inputs:[{name:"Productos",type:"radio",label:"Productos",checked:!0,value:"/ProductoListPage\xb0Productos ->"+i.nombre}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{}},{text:"Ok",handler:o=>{const n=o.split("\xb0");this.router.navigate([n[0]],{state:{variables:this.variables,user:null,idllave:i._id,title:n[1]}})}}]})).present()})}notificacion0(i){return(0,p.mG)(this,void 0,void 0,function*(){this.authenticationService.convertToDataURLviaCanvas(this.apifoto+this.userinfo[0].idempresa.foto0,"image/jpeg").then(o=>this.notificacion(o,o))})}autorizar(i,e){return(0,p.mG)(this,void 0,void 0,function*(){if(0===e){const o={operacion:"actualizaot2",estado:"Aplicar Multa",correotipo:"Notifico a supervisor",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};o&&this.authenticationService.createReg(i._id,o,"frmtareasprogramadasservicioss").then(n=>{let l=this.correos.split(";"),A=l[0]+";"+l[2]+";mario.morales@mcloude.com";const x='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+'" alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>    <p style="text-align: left;">'+this.proyectotxt+'</p>        <p style="text-align: left;">Tienes una solicitud de una orden de campo:</p>       <p style="text-align: left;"><strong>Tipo</strong>:&nbsp; '+i.tipo+'</p>       <p style="text-align: left;"><strong>Descripci\xf3n</strong>: '+i.descripcion+'</p>       <p style="text-align: left;"><strong>Multa</strong>:'+i.tipomulta+"</p>      <p>&nbsp;</p>  <strong>** APLICAR MULTA**</strong></p> <p>&nbsp;</p>  <strong>** APLICAR MULTA**</strong></p>    <p>&nbsp;</p>      <p>saludos</p></body> </html>";var v="";const Z=A.split(";");var b={};"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(v="crea/1/GMAIL",b={destino:Z,html:x,text:x,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(v="crea/1/OFFICE365",b={destino:Z,html:x,text:x,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(v="",b={destino:A,html:x,text:x,subjet:i.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(v,b,"mails").then(U=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Exito","Notificaci\xf3n enviada con exito","")},U=>{this.pideregistros(this.currentSegment),this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n","")})})}else if(1===e){const o={operacion:"actualizaot2",estado:"Autorizadas",correotipo:"Notifico a inspector",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};o&&this.authenticationService.createReg(i._id,o,"frmtareasprogramadasservicioss").then(n=>{this.pideregistros(this.currentSegment)})}else{const o={operacion:"actualizaot2",estado:"Multadas",correotipo:"Notifico a inspector",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Actualiza",accion:this.tituloxx}};o&&this.authenticationService.createReg(i._id,o,"frmtareasprogramadasservicioss").then(n=>{this.pideregistros(this.currentSegment)})}})}notificacion(i,e){return(0,p.mG)(this,void 0,void 0,function*(){const o=this.correos,n='<html><body><p style="text-align: center;"><img src="'+this.apifoto+this.userinfo[0].idempresa.foto0+'" alt="" width="300" height="200" /></p>      <p style="text-align: left;"><strong>PROCESSAPPS '+this.userinfo[0].idempresa.nombre+'</strong></p>    <p style="text-align: left;">'+this.proyectotxt+'</p>        <p style="text-align: left;">Tienes una solicitud de una orden de campo:</p>       <p style="text-align: left;"><strong>Tipo</strong>:&nbsp; '+i.tipo+'</p>       <p style="text-align: left;"><strong>Descripci\xf3n</strong>: '+i.descripcion+'</p>       <p style="text-align: left;"><strong>Multa</strong>:'+i.tipomulta+"</p>      <p>&nbsp;</p>      <p>&nbsp;</p>      <p>saludos</p></body> </html>";var l="";const A=o.split(";");var x={};"GMAIL"===this.userinfo[0].idempresa.tipocorreo&&(l="crea/1/GMAIL",x={destino:A,html:n,text:n,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),"OFFICE365"===this.userinfo[0].idempresa.tipocorreo&&(l="crea/1/OFFICE365",x={destino:A,html:n,text:n,segurocorreo:this.userinfo[0].idempresa.segurocorreo,tlscorreo:this.userinfo[0].idempresa.tlscorreo,origencorreo:this.userinfo[0].idempresa.origencorreo,clavecorreo:this.userinfo[0].idempresa.clavecorreo,puertocorreo:this.userinfo[0].idempresa.puertocorreo,subjet:"Solicitud de nueva orden de campo - PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),("SES"===this.userinfo[0].idempresa.tipocorreo||"NA"===this.userinfo[0].idempresa.tipocorreo)&&(l="",x={destino:o,html:n,text:n,subjet:i.notificacionmsm+"- PROCESSAPPS "+this.userinfo[0].idempresa.nombre,actualiza:{tipo:"na",id:"1",estado:"Ingreso, mail enviado",otros:""}}),this.authenticationService.mandamail(l,x,"mails").then(v=>{this.authenticationService.presentAlert("Exito","Notificaci\xf3n enviada con exito","")},v=>{this.authenticationService.presentAlert("Problema con envio de correo en servidor","Precauci\xf3n","")})})}deleteRecord(i){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:o=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(i._id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na","frmtareasprogramadasservicioss").then(n=>{this.pideregistros(this.currentSegment)},n=>{this.authenticationService.presentAlert(n.error,this.msg,"")})}}]})).present()})}updateRecord(i){return(0,p.mG)(this,void 0,void 0,function*(){if("activa"===this.estadoxxx&&!0===this.esinspector){const e=yield this.modalController.create({component:q,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{inspector:this.idinspector,supervisor:this.idsupervisor,correos:this.correos,idempresita:this.idempresita,proyectotxt:this.proyectotxt,datareg:this.datareg,geoposiciontxt:this.geoposiciontxt,essupervisor:this.essupervisor,esinspector:this.esinspector,estadoxxx:this.estadoxxx,variables:this.variables,record:i,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return e.onWillDismiss().then(o=>{"close"!==o.data&&this.pideregistros(this.currentSegment)}),yield e.present()}if("autorizar"===this.estadoxxx&&!0===this.essupervisor){const e=yield this.modalController.create({component:q,swipeToClose:!0,presentingElement:this.routerOutlet.nativeEl,componentProps:{inspector:this.idinspector,supervisor:this.idsupervisor,correos:this.correos,idempresita:this.idempresita,proyectotxt:this.proyectotxt,datareg:this.datareg,geoposiciontxt:this.geoposiciontxt,essupervisor:this.essupervisor,esinspector:this.esinspector,estadoxxx:this.estadoxxx,variables:this.variables,record:i,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return e.onWillDismiss().then(o=>{"close"!==o.data&&this.pideregistros(this.currentSegment)}),yield e.present()}})}addRecord(){return(0,p.mG)(this,void 0,void 0,function*(){const i=yield this.modalController.create({component:q,swipeToClose:!1,backdropDismiss:!1,animated:!0,presentingElement:yield this.modalController.getTop(),componentProps:{inspector:this.idinspector,supervisor:this.idsupervisor,correos:this.correos,idempresita:this.idempresita,proyectotxt:this.proyectotxt,datareg:this.datareg,geoposiciontxt:this.geoposiciontxt,essupervisor:this.essupervisor,esinspector:this.esinspector,estadoxxx:this.estadoxxx,variables:this.variables,record:null,userinfo:this.userinfo,idllave:this.idllave,title:this.tituloxx},cssClass:"modal-fullscreen"});return i.onWillDismiss().then(e=>{"close"!==e.data&&this.pideregistros(this.currentSegment)}),yield i.present()})}conformatocombo(i){let e="";if(""!==i){let o=[];o=i.split("\xb0"),e="<br>";for(let n=0;n<o.length;n++){const l=o[n].split(":");""!==l[0]&&String(l[0]).indexOf("\xac")<0&&(e=void 0===l[1]?e+""+l[0]+"<br>":e+""+l[0]+": "+l[1]+"<br>")}}return e}loadData(i){setTimeout(()=>{i.target.complete(),1e3===this.items.length&&(i.target.disabled=!0)},500)}}return r.\u0275fac=function(i){return new(i||r)(t.Y36(s.jP),t.Y36(_.F0),t.Y36(P.$),t.Y36(s.Br),t.Y36(g.sK),t.Y36(s.IN))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-frmtareasprogramadasservicios-list"]],viewQuery:function(i,e){if(1&i&&t.Gf(s.ju,5),2&i){let o;t.iGM(o=t.CRH())&&(e.infiniteScroll=o.first)}},decls:56,vars:24,consts:[["color","primary"],["slot","start"],["defaultHref","frmtareasprogramadasCreatePage"],["size","small"],["collapse","true","slot","end"],[3,"hidden","title","click",4,"ngIf"],[3,"title","click"],["slot","icon-only","name","refresh-circle-outline"],[3,"click",4,"ngIf"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col",3,"hidden"],["fill","clear","color","secondary",1,"filters-btn",3,"title","click"],["slot","icon-only","name","options"],[3,"formGroup","hidden"],[1,"range-item-row"],["size","12"],[1,"range-header"],[1,"range-value"],[1,"range-label"],["formControlName","dual","color","secondary","pin","true","dualKnobs","true","min","1","max","100","step","1","debounce","400",1,"range-control",3,"ionChange"],[1,"user-friends-content"],["sticky",""],[4,"ngIf"],["scrollable","","value","Activo",3,"ionChange"],["value","Activo"],["value","No solucionadas"],["value","Solucionadas por empresa"],["value","Soluci\xf3n aceptada"],["value","Para sancionar"],["value","Sanciones"],["class","empty-list-message",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Espere un momento..."],[3,"hidden","title","click"],["slot","icon-only","name","add"],[3,"click"],["slot","icon-only","name","grid"],["slot","icon-only","name","list"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],[1,"ion-text-wrap"],["width","67%"],["class","item md in-list ion-activatable ion-focusable item-label hydrated",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item","md","in-list","ion-activatable","ion-focusable","item-label","hydrated"],["size","12",3,"click"],["scheme","dark",3,"title","src"],["slot","end"],[2,"text-transform","capitalize","font-size","11px",3,"innerHtml"],["color","medium"],[1,"first-letter2"],["target","_blank",3,"href",4,"ngIf"],["color","transparent",3,"hidden",4,"ngIf"],["name","hourglass-outline"],["target","_blank",3,"href"],["color","transparent",3,"hidden"],["slot","secondary"],["slot","icon-only","name","trash-outline"],["size-lg","6","size-sm","6","size","12",4,"ngFor","ngForOf","ngForTrackBy"],["size-lg","6","size-sm","6","size","12"],[1,"user-stats-wrapper","user-details-wrapper"],[1,"user-stat-value"],[1,"user-stat-name"],[1,"ion-text-wrap",3,"click"],["no-padding",""],[1,"empty-list-message"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4),t.YNc(7,J,3,4,"ion-button",5),t.TgZ(8,"ion-button",6),t.NdJ("click",function(){return e.pideregistros0()}),t.ALo(9,"translate"),t._UZ(10,"ion-icon",7),t.qZA(),t.YNc(11,R,2,0,"ion-button",8),t.YNc(12,D,2,0,"ion-button",8),t.qZA(),t.qZA(),t.TgZ(13,"ion-toolbar",9),t.TgZ(14,"ion-row",10),t.TgZ(15,"ion-col"),t.TgZ(16,"ion-searchbar",11),t.NdJ("ngModelChange",function(n){return e.searchQuery=n})("ionChange",function(){return e.searchList()}),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.TgZ(18,"ion-col",12),t.TgZ(19,"ion-button",13),t.NdJ("click",function(){return e.showAgeFilter=!e.showAgeFilter}),t.ALo(20,"translate"),t._UZ(21,"ion-icon",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"form",15),t.TgZ(23,"ion-row",16),t.TgZ(24,"ion-col",17),t.TgZ(25,"div",18),t.TgZ(26,"span",19),t._uU(27),t.qZA(),t.TgZ(28,"span",20),t._uU(29,"Filter by age"),t.qZA(),t.TgZ(30,"span",19),t._uU(31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"ion-col",17),t.TgZ(33,"ion-range",21),t.NdJ("ionChange",function(){return e.searchList()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"ion-content",22),t.TgZ(35,"ion-item-divider",23),t.YNc(36,Q,4,7,"ion-label",24),t.qZA(),t.TgZ(37,"ion-segment",25),t.NdJ("ionChange",function(n){return e.filterContacts(n)}),t.TgZ(38,"ion-segment-button",26),t._uU(39," Activas "),t.qZA(),t.TgZ(40,"ion-segment-button",27),t._uU(41," No solucionadas "),t.qZA(),t.TgZ(42,"ion-segment-button",28),t._uU(43," Solucionadas por empresa "),t.qZA(),t.TgZ(44,"ion-segment-button",29),t._uU(45," Soluci\xf3n aceptada "),t.qZA(),t.TgZ(46,"ion-segment-button",30),t._uU(47," Para sancionar "),t.qZA(),t.TgZ(48,"ion-segment-button",31),t._uU(49," Sanciones "),t.qZA(),t.qZA(),t.YNc(50,j,2,2,"ion-list",24),t.YNc(51,tt,2,2,"ion-list",24),t.YNc(52,lt,3,2,"ion-grid",24),t.YNc(53,dt,3,3,"h3",32),t.TgZ(54,"ion-infinite-scroll",33),t.NdJ("ionInfinite",function(n){return e.loadData(n)}),t._UZ(55,"ion-infinite-scroll-content",34),t.qZA(),t.qZA()),2&i&&(t.xp6(5),t.hij(" ",e.tituloxx," "),t.xp6(2),t.Q6J("ngIf","activa"===e.estadoxxx),t.xp6(1),t.MGl("title"," ",t.lcZ(9,18,"REFRESCARM"),""),t.xp6(3),t.Q6J("ngIf","grid"===e.viewType),t.xp6(1),t.Q6J("ngIf","list"===e.viewType),t.xp6(4),t.s9C("placeholder",t.lcZ(17,20,"BUSCARM")),t.Q6J("ngModel",e.searchQuery),t.xp6(2),t.Q6J("hidden",!e.showAgeFilter),t.xp6(1),t.MGl("title"," ",t.lcZ(20,22,"FILTROM"),""),t.xp6(3),t.Q6J("formGroup",e.rangeForm)("hidden",!e.showAgeFilter),t.xp6(5),t.Oqu(e.rangeForm.controls.dual.value.lower),t.xp6(4),t.Oqu(e.rangeForm.controls.dual.value.upper),t.xp6(5),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0),t.xp6(14),t.Q6J("ngIf",0===e.efecto),t.xp6(1),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0&&"list"===e.viewType),t.xp6(1),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0&&"grid"===e.viewType),t.xp6(1),t.Q6J("ngIf",0===(null==e.itemsList?null:e.itemsList.length)))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,h.O5,s.YG,s.gu,s.Nd,s.wI,s.VI,s.j9,m.JJ,m.On,m._Y,m.JL,m.sg,s.I_,s.QI,m.u,s.W2,s.rH,s.cJ,s.GO,s.ju,s.MB,s.Q$,s.q_,h.sg,s.Ie,N.B,s.jY,s.BJ,T.A6,s.uN,s.yp,s.hM,s.PM,s.FN],pipes:[g.X$,h.uU],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin);--page-border-radius: var(--app-fair-radius);--page-segment-background: var(--app-background);--page-segment-indicator-height: 2px}ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-background-shade: var(--app-background-shade);--page-tags-gutter: 5px}.first-letter2[_ngcontent-%COMP%]{text-transform:capitalize;font-size:10px}.first-letter[_ngcontent-%COMP%]{text-transform:capitalize;font-size:14px}"]}),r})();var mt=c(22675);let pt=(()=>{class r{}return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[h.ez,s.Pc,a.K,m.u5,m.UX,T.YL,mt.v,_.Bz.forChild([{path:"",component:ut}]),g.aw.forChild()]]}),r})()},22675:(S,C,c)=>{c.d(C,{v:()=>p});var s=c(69808),_=c(93075),h=c(51062),a=c(23349),g=c(55787),m=c(56604),T=c(5e3);let p=(()=>{class P{}return P.\u0275fac=function(f){return new(f||P)},P.\u0275mod=T.oAB({type:P}),P.\u0275inj=T.cJS({imports:[[s.ez,_.u5,_.UX,a.Pc,g.Bz,m.Cl,h.aw.forChild()]]}),P})()},63814:(S,C,c)=>{c.d(C,{B:()=>T});var s=c(70655),_=c(47423),h=c(96090),a=c(5e3),g=c(23349);const m=["search"];let T=(()=>{class p{constructor(u,f,y){this.modalController=u,this.ngZone=f,this.navParams=y,this.title="AGM project",this.zoom=16}dismissModal(){this.modalController.dismiss("close")}dadireccion(){this.modalController.dismiss({direccion:this.address,la:this.latitude,lo:this.longitude})}ngOnInit(){this.uubx=this.navParams.get("uubx")}loadMap(){}clearWatch(){null!=this.watchId&&h.b.clearWatch({id:this.watchId})}setCurrentLocationa33(){if(_.dV.isPluginAvailable("Geolocation"))try{this.watchId=h.b.watchPosition({timeout:1e3,enableHighAccuracy:!0,maximumAge:1e3},(u,f)=>{u&&(this.latitude=u.coords.latitude,this.longitude=u.coords.longitude)})}catch(u){console.error(u)}}setCurrentLocationa(){try{this.watchId=h.b.watchPosition({timeout:1e3,enableHighAccuracy:!0,maximumAge:1e3},(u,f)=>{u&&(this.latitude=u.coords.latitude,this.longitude=u.coords.longitude,this.getAddress(this.latitude,this.longitude))})}catch(u){console.error(u)}}setCurrentLocation2a(){if(_.dV.isPluginAvailable("Geolocation"))try{this.watchId=h.b.watchPosition({timeout:1e3,enableHighAccuracy:!0,maximumAge:1e3},(u,f)=>{this.latitude=Number(this.uubx.substring(this.uubx.indexOf("{")+1,this.uubx.indexOf("\xb0"))),this.longitude=Number(this.uubx.substring(this.uubx.indexOf("\xb0")+1,this.uubx.indexOf("}"))),0!==this.latitude&&this.latitude&&this.getAddress(this.latitude,this.longitude)})}catch(u){console.error(u)}}markerDragEnd(u){0!==this.latitude&&this.latitude&&(this.latitude=u.coords.lat,this.longitude=u.coords.lng,this.getAddress(this.latitude,this.longitude))}getAddress(u,f){this.geoCoder.geocode({location:{lat:u,lng:f}},(y,M)=>{"OK"===M?y[0]?this.address=y[0].formatted_address:window.alert("No results found"):window.alert("Geocoder failed due to: "+M)})}closeModal(){return(0,s.mG)(this,void 0,void 0,function*(){this.modalController.dismiss("close")})}}return p.\u0275fac=function(u){return new(u||p)(a.Y36(g.IN),a.Y36(a.R0b),a.Y36(g.X1))},p.\u0275cmp=a.Xpm({type:p,selectors:[["app-my-modal"]],viewQuery:function(u,f){if(1&u&&a.Gf(m,5),2&u){let y;a.iGM(y=a.CRH())&&(f.searchElementRef=y.first)}},decls:19,vars:6,consts:[[3,"translucent"],["color","primary"],["shape","round","color","dark",3,"click"],["slot","start","name","locate"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","close"],["size","small"],[1,"ion-padding",3,"fullscreen"],["id","book-search-input","role","search"],["type","text","placeholder","Ingrese direcci\xf3n","autocorrect","off","autocapitalize","off","spellcheck","off","type","text",1,"book-search-input","native-input","sc-ion-input-ios",3,"keydown.enter"],["search",""],["type","submit","expand","block",1,"login-btn",3,"click"]],template:function(u,f){1&u&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar",1),a.TgZ(2,"ion-button",2),a.NdJ("click",function(){return f.loadMap()}),a._UZ(3,"ion-icon",3),a._uU(4," Ubicaci\xf3n "),a.qZA(),a.TgZ(5,"ion-buttons",4),a.TgZ(6,"ion-button",5),a.NdJ("click",function(){return f.closeModal()}),a._UZ(7,"ion-icon",6),a.qZA(),a.qZA(),a.TgZ(8,"ion-title",7),a._uU(9),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"ion-content",8),a._uU(11),a.TgZ(12,"div",9),a.TgZ(13,"input",10,11),a.NdJ("keydown.enter",function(M){return M.preventDefault()}),a.qZA(),a.qZA(),a.TgZ(15,"h5"),a._uU(16),a.qZA(),a.TgZ(17,"ion-button",12),a.NdJ("click",function(){return f.dadireccion()}),a._uU(18,"Seleccionar"),a.qZA(),a.qZA()),2&u&&(a.Q6J("translucent",!0),a.xp6(9),a.Oqu(f.tituloxx),a.xp6(1),a.Q6J("fullscreen",!0),a.xp6(1),a.AsE("\n",f.latitude,", ",f.longitude," "),a.xp6(5),a.hij("Direcci\xf3n: ",f.address,""))},directives:[g.Gu,g.sr,g.YG,g.gu,g.Sm,g.wd,g.W2],styles:[".book-search-input[_ngcontent-%COMP%]{padding:6px;background:0 0;transition:top .5s ease;background:#bdbaba;border-bottom:1px solid rgba(0,0,0,.07);border-top:1px solid rgba(0,0,0,.07);margin-bottom:10px;margin-top:-1px;color:#fff;width:100%}"]}),p})()},26806:(S,C,c)=>{c.d(C,{B:()=>a});var s=c(5e3),_=c(69808);const h=function(g,m){return{"no-animated":g,inline:m}};let a=(()=>{class g{constructor(){this.width="100%",this.height="16px",this.borderRadius="0",this.rounded=!1,this.noAnimated=!1,this.inline=!1,this.styles={}}ngOnInit(){this.styles={width:this.width,height:this.height,borderRadius:this.borderRadius},this.rounded&&(this.styles.borderRadius="999em")}}return g.\u0275fac=function(T){return new(T||g)},g.\u0275cmp=s.Xpm({type:g,selectors:[["skeleton-element"]],inputs:{width:"width",height:"height",borderRadius:"borderRadius",rounded:"rounded",noAnimated:"noAnimated",inline:"inline"},decls:1,vars:5,consts:[[3,"ngClass","ngStyle"]],template:function(T,p){1&T&&s._UZ(0,"div",0),2&T&&s.Q6J("ngClass",s.WLB(2,h,p.noAnimated,p.inline))("ngStyle",p.styles)},directives:[_.mk,_.PC],styles:["[_nghost-%COMP%]{display:block}[inline][_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .inline[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .no-animated[_ngcontent-%COMP%]{-webkit-animation:none!important;animation:none!important;background:rgba(130,130,130,.2)}.animated-background[_ngcontent-%COMP%], [_nghost-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-name:placeHolderShimmer;animation-name:placeHolderShimmer;-webkit-animation-timing-function:linear;animation-timing-function:linear;background:rgba(130,130,130,.2);background:linear-gradient(to right,rgba(130,130,130,.2) 8%,rgba(130,130,130,.3) 18%,rgba(130,130,130,.2) 33%);background-size:800px 100px;position:relative}@-webkit-keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}@keyframes placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}"]}),g})()}}]);