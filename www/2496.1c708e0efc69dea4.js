"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2496],{2496:(S,h,r)=>{r.r(h),r.d(h,{ProductoCompraPageModule:()=>z});var o=r(23349),l=r(55787),s=r(69808),C=r(33678),P=r(45230),m=r(51062),d=r(93075),f=r(70655),M=r(49926),O=r(57230),_=r(4707),t=r(5e3),v=r(89330),x=r(71408),b=r(94840);function Z(i,c){if(1&i&&(t.ynx(0),t._UZ(1,"ion-col",36),t.TgZ(2,"ion-col",30),t.TgZ(3,"span",37),t._UZ(4,"app-text-shell",27),t.ALo(5,"currency"),t.qZA(),t.qZA(),t.BQk()),2&i){const n=t.oxw().$implicit,e=t.oxw();t.xp6(4),t.Q6J("data",t.xi3(5,1,n.precio,e.moneda))}}const w=function(){return{page:99}},y=function(i){return["/app/categories/fashion/detalle",i]},T=function(){return{w:3,h:3}};function A(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"ion-col",18),t.TgZ(1,"div",19),t.TgZ(2,"a",20),t.TgZ(3,"app-aspect-ratio",21),t._UZ(4,"app-image-shell",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"ion-row",23),t.TgZ(6,"ion-col",24),t.TgZ(7,"h4",25),t.TgZ(8,"a",26),t._UZ(9,"app-text-shell",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"ion-col",28),t.TgZ(11,"ion-row",29),t.TgZ(12,"ion-col",30),t.TgZ(13,"span",31),t._UZ(14,"app-text-shell",27),t.ALo(15,"currency"),t.qZA(),t.qZA(),t.YNc(16,Z,6,4,"ng-container",32),t.qZA(),t.qZA(),t.TgZ(17,"ion-col",33),t.TgZ(18,"ion-fab-button",34),t.NdJ("click",function(a){const p=t.CHM(n).$implicit;return t.oxw().masprod(p,a)}),t._UZ(19,"ion-icon",35),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=c.$implicit,e=t.oxw();t.xp6(2),t.Q6J("queryParams",t.DdM(11,w))("routerLink",t.VKq(12,y,n._id)),t.xp6(1),t.Q6J("ratio",t.DdM(14,T)),t.xp6(1),t.Q6J("src",n.foto1)("alt","product image"),t.xp6(5),t.Q6J("data",n.nombre+" "+n.xunidad+" "+n.unidad),t.xp6(5),t.Q6J("data",t.xi3(15,8,n.precio,e.moneda)),t.xp6(2),t.Q6J("ngIf","0"!=n.precio)}}let q=(()=>{class i{constructor(n,e,a,g,p,u){this.routerOutlet=n,this.router=e,this.authenticationService=a,this.alertController=g,this.translateService=p,this.modalController=u,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.viewType="grid",this.tituloxx="",this.sienvio=!1,this.efecto=0,this.seguro="",this.msg="",this.currentSegment="Todos",this.searchSubject=new _.t(1),this.apifoto=this.authenticationService.getapifoto()}ngOnInit(){this.variables=this.router.getCurrentNavigation().extras.state.variables,this.llave=this.router.getCurrentNavigation().extras.state.llave0,this.categoria=this.router.getCurrentNavigation().extras.state.categoria,this.sienvio=this.router.getCurrentNavigation().extras.state.sienvio,this.userinfo=this.authenticationService.getcopiauser(),this.moneda=this.userinfo[0].idempresa.moneda,this.tituloxx=this.router.getCurrentNavigation().extras.state.titulo,this.searchQuery="",this.translateService.get("SEGUROM").subscribe(n=>{this.seguro=n}),this.translateService.get("MSGM").subscribe(n=>{this.msg=n}),this.cartItemCount=this.authenticationService.getCartItemCount(),this.pideregistros()}pideregistros0(){this.pideregistros()}pideregistros(){this.itemsList=[],this.efecto=0,this.authenticationService.getReg("todosproductos/Activo/"+this.userinfo[0].idempresa._id+"/"+this.llave+"\xb0"+this.categoria,"productos",0).then(n=>{this.efecto=1,this.items=n,this.itemsList=this.items},n=>{this.authenticationService.presentAlert(n.error,this.msg,"")})}trackItems(n,e){return e.id}searchList(){this.itemsList=this.filterList(this.items,this.searchQuery&&null!==this.searchQuery?this.searchQuery:"")}filterList(n,e){return n.filter(a=>a.nombre.toLowerCase().includes(e.toLowerCase()))}loadData(n){setTimeout(()=>{n.target.complete(),1e3===this.items.length&&(n.target.disabled=!0)},500)}masprod(n,e){this.authenticationService.addProduct({idproveedor:this.llave,id:n._id,name:n.nombre+" "+n.xunidad+" "+n.unidad,price:n.precio,amount:1})}openCart(){return(0,f.mG)(this,void 0,void 0,function*(){const n=yield this.modalController.create({component:O.b,animated:!0,componentProps:{sienvio:this.sienvio,moneda:this.moneda,nombre:this.userinfo[0].nombre,direccion:this.userinfo[0].direccion,telefono:this.userinfo[0].telefono,correo:this.userinfo[0].correo},presentingElement:yield this.modalController.getTop(),cssClass:"modal-fullscreen"});return n.onWillDismiss().then(e=>{}),yield n.present()})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(o.jP),t.Y36(l.F0),t.Y36(M.$),t.Y36(o.Br),t.Y36(m.sK),t.Y36(o.IN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-producto-compra"]],viewQuery:function(n,e){if(1&n&&t.Gf(o.ju,5),2&n){let a;t.iGM(a=t.CRH())&&(e.infiniteScroll=a.first)}},decls:25,vars:9,consts:[["color","primary"],["slot","start"],["defaultHref","ProvidesPage"],["size","small"],[1,"filters-toolbar"],["align-items-center","",1,"searchbar-row"],["animated","",3,"ngModel","placeholder","ngModelChange","ionChange"],[1,"call-to-action-col"],["fill","clear","color","tw_botton1",1,"filters-btn"],["slot","icon-only","name","options"],[1,"fashion-listing-content"],["vertical","top","horizontal","end","slot","fixed"],["color","tw_botton1",2,"height","70px","width","70px",3,"click"],["cart",""],[1,"cart-length"],["name","cart",1,"cart-icon"],[1,"items-row"],["size","6","class","listing-item",4,"ngFor","ngForOf"],["size","6",1,"listing-item"],[1,"item-image-wrapper"],[1,"image-anchor",3,"queryParams","routerLink"],[3,"ratio"],["animation","spinner",1,"item-image",3,"src","alt"],[1,"item-body"],["size","12",1,"main-info"],[1,"item-name"],[1,"name-anchor"],["animation","gradient",3,"data"],["size","12"],[1,"secondary-info"],[1,"price-col"],[1,"item-sale-price"],[4,"ngIf"],["size","10",2,"display","flex","justify-content","left"],["color","tw_botton1",3,"click"],["name","add"],[1,"separator"],[1,"item-original-price"]],template:function(n,e){1&n&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"ion-toolbar",4),t.TgZ(7,"ion-row",5),t.TgZ(8,"ion-col"),t.TgZ(9,"ion-searchbar",6),t.NdJ("ngModelChange",function(g){return e.searchQuery=g})("ionChange",function(){return e.searchList()}),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.TgZ(11,"ion-col",7),t.TgZ(12,"ion-button",8),t._UZ(13,"ion-icon",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"ion-content",10),t.TgZ(15,"ion-fab",11),t.TgZ(16,"ion-fab-button",12,13),t.NdJ("click",function(){return e.openCart()}),t.TgZ(18,"div",14),t._uU(19),t.ALo(20,"async"),t.qZA(),t._UZ(21,"ion-icon",15),t.qZA(),t.qZA(),t.ynx(22),t.TgZ(23,"ion-row",16),t.YNc(24,A,20,15,"ion-col",17),t.qZA(),t.BQk(),t.qZA()),2&n&&(t.xp6(5),t.Oqu(e.tituloxx),t.xp6(4),t.s9C("placeholder",t.lcZ(10,5,"BUSCARM")),t.Q6J("ngModel",e.searchQuery),t.xp6(10),t.Oqu(t.lcZ(20,7,e.cartItemCount)),t.xp6(5),t.Q6J("ngForOf",e.itemsList))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.Nd,o.wI,o.VI,o.j9,d.JJ,d.On,o.YG,o.gu,o.W2,o.IJ,o.W4,s.sg,l.yS,o.YI,v.m,x.U,b.$,s.O5],pipes:[m.X$,s.Ov,s.H9],styles:["[_nghost-%COMP%]{--page-margin: var(--app-fair-margin);--page-background: var(--app-background);--page-items-gutter: calc(var(--page-margin) / 2);--page-color: #32cb46}.fashion-listing-content[_ngcontent-%COMP%]{--background: var(--page-background);--padding-start: var(--page-margin);--padding-end: var(--page-margin);--padding-top: var(--page-margin);--padding-bottom: var(--page-margin)}.filters-toolbar[_ngcontent-%COMP%]{--padding-start: var(--page-margin);--padding-end: var(--page-margin);--padding-top: var(--page-margin);--padding-bottom: var(--page-margin)}.filters-toolbar[_ngcontent-%COMP%]   .searchbar-row[_ngcontent-%COMP%]{--ion-grid-column-padding: 0px}.filters-toolbar[_ngcontent-%COMP%]   .searchbar-row[_ngcontent-%COMP%]   ion-searchbar.items-searchbar[_ngcontent-%COMP%]{padding:0;height:100%;contain:content}.filters-toolbar[_ngcontent-%COMP%]   .searchbar-row[_ngcontent-%COMP%]   .call-to-action-col[_ngcontent-%COMP%]{-webkit-padding-start:var(--page-margin);padding-inline-start:var(--page-margin);max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;flex-shrink:0;flex-grow:0;display:flex;justify-content:flex-end}.filters-toolbar[_ngcontent-%COMP%]   .searchbar-row[_ngcontent-%COMP%]   .call-to-action-col[_ngcontent-%COMP%]   .filters-btn[_ngcontent-%COMP%]{--padding-start: 0px;--padding-end: 0px;margin:0;font-size:18px;height:auto;height:initial}.filters-toolbar[_ngcontent-%COMP%]   .range-item-row[_ngcontent-%COMP%]{--ion-grid-column-padding: 0px;margin-top:var(--page-margin);padding-top:var(--page-margin);box-shadow:inset 0 6px 3px -8px var(--ion-color-darkest)}.filters-toolbar[_ngcontent-%COMP%]   .range-item-row[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:calc(var(--page-margin) / 2)}.filters-toolbar[_ngcontent-%COMP%]   .range-item-row[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-value[_ngcontent-%COMP%]{font-size:12px;font-weight:600;letter-spacing:.2px;color:var(--ion-color-medium)}.filters-toolbar[_ngcontent-%COMP%]   .range-item-row[_ngcontent-%COMP%]   .range-header[_ngcontent-%COMP%]   .range-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;letter-spacing:.2px;color:var(--ion-color-medium)}.filters-toolbar[_ngcontent-%COMP%]   .range-item-row[_ngcontent-%COMP%]   .range-control[_ngcontent-%COMP%]{--ion-text-color: var(--ion-color-medium);padding-top:0;padding-bottom:0}.cart-icon[_ngcontent-%COMP%]{font-size:50px}.cart-length[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;top:18px;left:25px;font-weight:600;font-size:1em;min-width:25px;z-index:10}.items-row[_ngcontent-%COMP%]{--ion-grid-column-padding: 0}.items-row[_ngcontent-%COMP%]   .counter-item[_ngcontent-%COMP%]{--padding-start: var(--page-margin);--padding-end: var(--page-margin);--inner-padding-end: 0px}.items-row[_ngcontent-%COMP%]   .counter-item[_ngcontent-%COMP%]   .counter-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;letter-spacing:.2px;color:var(--ion-color-medium)}.items-row[_ngcontent-%COMP%]   .counter-item[_ngcontent-%COMP%]   .counter-value[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-primary)}.items-row[_ngcontent-%COMP%]   .counter-item[_ngcontent-%COMP%]   app-counter-input[_ngcontent-%COMP%]{--counter-background: transparent;--counter-color: var(--ion-color-primary);--counter-border-color: var(--ion-color-primary)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]{margin-bottom:calc(var(--page-margin) * 2)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]:nth-child(odd){padding-right:var(--page-items-gutter)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]:nth-child(even){padding-left:var(--page-items-gutter)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]{border:1px solid var(--ion-color-light-shade)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-image-wrapper[_ngcontent-%COMP%]   .image-anchor[_ngcontent-%COMP%]{display:block}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]{--ion-grid-column-padding: 0px;padding:5px 5px 0;text-align:center}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]{margin-bottom:calc(var(--page-margin) / 2)}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:400;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]   .name-anchor[_ngcontent-%COMP%]{color:var(--ion-color-primary);display:block;text-decoration:none}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]{align-items:center}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .price-col[_ngcontent-%COMP%]:first-child{padding-right:calc(var(--page-margin) / 2);text-align:right}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .price-col[_ngcontent-%COMP%]:first-child:last-child{text-align:center}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .price-col[_ngcontent-%COMP%]:last-child{padding-left:calc(var(--page-margin) / 2);text-align:left}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{max-width:0px;border-right:solid 2px var(--ion-color-light-shade);align-self:stretch}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .item-sale-price[_ngcontent-%COMP%]{display:block;font-weight:400;color:var(--page-color);font-size:16px}.items-row[_ngcontent-%COMP%]   .listing-item[_ngcontent-%COMP%]   .item-body[_ngcontent-%COMP%]   .secondary-info[_ngcontent-%COMP%]   .item-original-price[_ngcontent-%COMP%]{display:block;text-decoration:line-through;color:var(--ion-color-medium-shade);font-size:14px}"]}),i})(),z=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[s.ez,d.u5,o.Pc,m.aw.forChild(),P.K,l.Bz.forChild([{path:"",component:q}]),C.K]]}),i})()}}]);