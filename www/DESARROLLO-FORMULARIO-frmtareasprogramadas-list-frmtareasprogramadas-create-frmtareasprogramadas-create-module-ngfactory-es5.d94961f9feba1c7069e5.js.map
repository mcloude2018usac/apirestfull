{"version":3,"sources":["webpack:///src/app/DESARROLLO/FORMULARIO/frmtareasprogramadas-list/frmtareasprogramadas-create/frmtareasprogramadas-create.module.ts","webpack:///src/app/DESARROLLO/FORMULARIO/frmtareasprogramadas-list/frmtareasprogramadas-create/frmtareasprogramadas-Create.page.ts","webpack:///src/app/DESARROLLO/FORMULARIO/frmtareasprogramadas-list/frmtareasprogramadas-create/frmtareasprogramadas-create.page.html","webpack:///src/app/DESARROLLO/modals/my-modal/my-modal.page.ts"],"names":["frmtareasprogramadasCreatePageModule","location","router","alertController","modalController","translateService","authenticationService","actionSheetController","variables","userinfo","tituloxx","seguro","msg","submitted","vgrupo","checkBoxList1","checkBoxList2","checkBoxList3","finalizatt","essupervisor","esinspector","this","apifoto","getapifoto","id","arra","i2","length","cad","split","trim","dismiss","getCurrentNavigation","extras","state","idllave","title","itemactual","record","geoposiciontxt","get","subscribe","value","inspector","idinspector","supervisor","idsupervisor","getReg","idproyecto","idempresa","_id","then","data","correo2","correoelectronico","result","correo1","email","err","presentAlert","error","correo3","role","estadoxxx","estado","verificapersonal","regperosnal2","indexOf","verificavehiculos","regvehiculos2","verificaherramienta","regherramienta2","idcontrato","contratov","arrtemp","recursopersonas","regperosnal","existe","j2","push","nombre","nombres","apellidos","foto","fotografiadelempleado","cui","isChecked","recursodeherramientas","cantidadh","regherramienta","descripcion","tipo","cantidad","dacantidadh","recursodevehiculos","regvehiculos","marca","modelo","nochasis","piloto","Form","lpermiso","_ID","comentariopersonal","controls","setValue","comentariovehiculos","comentarioherramienta","submitForm0","op","op2","presentingElement","uub","swipeToClose","backdropDismiss","animated","getTop","modal","uubx","component","componentProps","create","onWillDismiss","direccion","la","lo","present","image","Camera","getPhoto","correctOrientation","height","width","quality","allowEditing","resultType","DataUrl","source","generateFromImage","dataUrl","fotoimg","procesafoto","controlx","firstFileToBase64","fotoa","uploadPWA2","nativeElement","files","fileImage","Promise","resolve","reject","fileReader","FileReader","readAsDataURL","onload","onerror","Error","click","actionSheet","header","cssClass","buttons","text","icon","handler","takePicture2","takePicture","catalogot","frmt","comp","labelx","sigraba","grabax","record2","frm","titlex","datax","totalItems","checked","map","obj","isIndeterminate1","masterCheck1","item","dataid","isIndeterminate2","masterCheck2","isIndeterminate3","masterCheck3","navigate","user","idempresita","proyectotxt","fechaasignada","novisita","datareg","correos","alert","message","blah","estadott","personalxx","herramientaxx","vehiculoxx","options","estructura","idpapa","idempresa0","idinspector0","idperiodo","idplanifica","idproyecto0","idsupervisor0","periodo","proyecto","idcat","idform","tipo2","ejecuta","bitacora","idafiliado","permiso","accion","createRegmovil","retornatareas","back","MyModalPage","mapsAPILoader","ngZone","navParams","zoom","address","latitude","longitude","load","setCurrentLocationa","setCurrentLocation2a","geoCoder","google","maps","Geocoder","autocomplete","places","Autocomplete","searchElementRef","types","addListener","run","place","getPlace","geometry","lat","lng","getAddress","setCurrentLocationa33","watchId","Geolocation","clearWatch","isPluginAvailable","watchPosition","timeout","enableHighAccuracy","maximumAge","coords","e","console","log","Number","substring","$event","geocode","results","status","formatted_address","window"],"mappings":"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","file":"x","sourcesContent":["import { IonicModule } from '@ionic/angular';\nimport { RouterModule} from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComponentsModule } from '../../../../components/components.module';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgxIonicImageViewerModule } from 'ngx-ionic-image-viewer';\n\nimport { frmtareasprogramadasCreatePage } from './frmtareasprogramadas-Create.page';\n@NgModule({\n  declarations: [\n    frmtareasprogramadasCreatePage\n  ],\n  imports: [\n    CommonModule,IonicModule, ComponentsModule, FormsModule,  ReactiveFormsModule, NgxIonicImageViewerModule,\n    RouterModule.forChild([{ path: '', component: frmtareasprogramadasCreatePage }]), TranslateModule.forChild(),\n  ]\n \n})\nexport class frmtareasprogramadasCreatePageModule {}\n","import { Component, OnInit , ViewChild ,  ElementRef} from '@angular/core';\nimport { AlertController, ModalController ,  ActionSheetController, IonInput } from '@ionic/angular';\nimport { FormGroup, FormControl, Validators, FormGroupDirective } from '@angular/forms';\nimport { AuthenticationService } from '../../../services/Authentication.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport {  Router, NavigationExtras } from '@angular/router';\nimport { MyModalPage } from '../../../modals/my-modal/my-modal.page';\nimport { MyModalComboPage } from './../../../modals/my-modal-combo/my-modal-combo.page';\nimport {Plugins,  CameraResultType,  CameraSource} from '@capacitor/core';\nimport { SafeResourceUrl } from '@angular/platform-browser';\nimport {Location} from '@angular/common';\n@Component({\n  selector: 'app-frmtareasprogramadas-create',\n  templateUrl: './frmtareasprogramadas-create.page.html',\n  styleUrls: ['./frmtareasprogramadas-create.page.scss'],\n})\nexport class frmtareasprogramadasCreatePage implements OnInit {\n@ViewChild('inputId', {  static: false })  inputElement: IonInput;\n @ViewChild('fotoa', {static: true}) fotoa: ElementRef;\n  Form: FormGroup;\n // @ViewChild('createForm', { static: false }) createForm: FormGroupDirective;\n  variables: any = [];\n  userinfo: any = [];\n  idllave: any ;\n  tituloxx = '';\n  seguro ='';\n  msg = '';\n  submitted: any = [];\n  vgrupo: any = [];\n  geoposiciontxt: any;\n  _ID: any;\n  contratov: any;\n  itemactual: any;\n  isIndeterminate1: boolean;\n  masterCheck1: boolean;\n\n  isIndeterminate2: boolean;\n  masterCheck2: boolean;\n\n  isIndeterminate3: boolean;\n  masterCheck3: boolean;\n\ncorreo1:any;\ncorreo2:any;\ncorreo3:any;\n  lpermiso: any;\n\n  checkBoxList1: Array<any> = [];\n  checkBoxList2: Array<any> = [];\n  checkBoxList3: Array<any> = [];\n  regperosnal: any;\n  regherramienta: any;\n  regvehiculos: any;\n  finalizatt:any =0;\n  idempresita:any;\n  regperosnal2: any;\n  regherramienta2: any;\n  regvehiculos2: any;\n  essupervisor:any = false;\n  esinspector: any = false;\n  inspector:any;\n  supervisor:any;\n  estadoxxx:any;\n\n  apifoto: String ;\n  fotoimg: SafeResourceUrl;\n  constructor( private location: Location,private router: Router, public alertController: AlertController,  \n    private modalController: ModalController,\n    public translateService: TranslateService    , private authenticationService: AuthenticationService,\n  public actionSheetController: ActionSheetController\n  ) { this.apifoto = this.authenticationService.getapifoto(); }\n\n\n  dacantidadh(id, arra): String {\n  const re = '0';\n  for (let i2 = 0; i2 < arra.length; i2++) {\n    const cad = arra[i2];\n    if (cad.split(',')[0].trim() === id) {\n      return cad.split(',')[1].split(':')[1].trim();\n      break;\n    }\n\n  }\n\n  return re;\n  \n\n  }\n\n  ngAfterViewInit() {    }\n  dismissModal() {     this.modalController.dismiss('close');      }\n  ionViewDidEnter(): void {               }\n  ngOnInit(): void {\n    this.variables =  this.router.getCurrentNavigation().extras.state.variables   \n    this.userinfo =  this.router.getCurrentNavigation().extras.state.userinfo\n    this.idllave =  this.router.getCurrentNavigation().extras.state.idllave\n    this.tituloxx =   this.router.getCurrentNavigation().extras.state.title\n    this.itemactual =  this.router.getCurrentNavigation().extras.state.record\n    this.geoposiciontxt = this.router.getCurrentNavigation().extras.state.geoposiciontxt\n    this.translateService.get('SEGUROM').subscribe((value) => {   this.seguro = value  });\n    this.translateService.get('MSGM').subscribe((value) => {   this.msg = value  });\n    \n    this.inspector =   this.router.getCurrentNavigation().extras.state.record.idinspector\n    \n    this.supervisor =   this.router.getCurrentNavigation().extras.state.record.idsupervisor\n     \n     \n\n    this.authenticationService.getReg('5f58197323db5a1bdc6591cas' + '/' +  this.itemactual.idproyecto+\n    '/' + this.userinfo[0].idempresa._id + '°5f58197323db5a1bdc6591ca' + '/' + 'unregistromovil',  'frmmovils', 0).then((data) => {\n      var dd:any = []\n      dd=data;\n   this.correo2 = dd.correoelectronico;\n\n    });   \n  \n\n//idsupervisor:this.itemactual.idsupervisor , idinspector:this.itemactual.idinspector \n  this.authenticationService.getReg(this.itemactual.idsupervisor + '/emailsoloidnuevo/' +\n  this.userinfo[0].idempresa._id, 'personals', 0).then((result) => {\n    this.correo1 = result[0].email;\n   \n\n  }, (err) => {\n    this.authenticationService.presentAlert(err.error , 'Precaución' , '');\n  });\n\n  this.authenticationService.getReg(this.itemactual.idinspector + '/emailsoloidnuevo/' +\n  this.userinfo[0].idempresa._id, 'personals', 0).then((result) => {\n    this.correo3 = result[0].email;\n   \n\n  }, (err) => {\n    this.authenticationService.presentAlert(err.error , 'Precaución' , '');\n  });\n\n\n/*\n    this.authenticationService.getReg('5f729c2487c9e33bd4ada798' + '/' + this.itemactual.idcontrato +\n '/' + this.userinfo[0].idempresa._id + '°5f729c2487c9e33bd4ada798' + '/' + 'unregistromovil',  'frmmovils', 0).then((data) => {\n\n\n });\n*/\n\n\n    if(this.userinfo[0].role==='Supervisor planificación'){\n      this.essupervisor=true\n      this.esinspector=false  \n    }\n      else\n      {\n     this.esinspector=true\n     this.essupervisor=false\n     }\n\n     this.estadoxxx=this.itemactual.estado\n  \n\nif( this.essupervisor===true &&  this.estadoxxx==='autorizar'){     this.finalizatt=1}\n\nif( this.esinspector===true &&  this.estadoxxx==='activa'){     this.finalizatt=1}\n\n\nif (this.itemactual.verificapersonal) {\n  if (this.itemactual.verificapersonal.indexOf(';') > 0) {\n    this.regperosnal2 = this.itemactual.verificapersonal.split(';');\n\n  } else {\n    this.regperosnal2 = [];\n  }\n}\n\n\n\nif (this.itemactual.verificavehiculos) {\n  if (this.itemactual.verificavehiculos.indexOf(';') > 0) {\n    this.regvehiculos2 = this.itemactual.verificavehiculos.split(';');\n\n  } else {\n    this.regvehiculos2 = [];\n  }\n}\n\n\nif (this.itemactual.verificaherramienta) {\n  if (this.itemactual.verificaherramienta.indexOf(';') > 0) {\n    this.regherramienta2 = this.itemactual.verificaherramienta.split(';');\n\n  } else {\n    this.regherramienta2 = [];\n  }\n}\n\nif(this.regvehiculos2===undefined){\n  this.regvehiculos2=[]\n}\n\nif(this.regperosnal2===undefined){\n  this.regperosnal2=[]\n}\n\nif(this.regherramienta2===undefined){\n  this.regherramienta2=[]\n}\n\n// encuentra contrato y sus asignacion de personal vehiculos y herramienta\n\nthis.authenticationService.getReg('5f729c2487c9e33bd4ada798' + '/' + this.itemactual.idcontrato +\n '/' + this.userinfo[0].idempresa._id + '°5f729c2487c9e33bd4ada798' + '/' + 'unregistromovil',  'frmmovils', 0).then((data) => {\nthis.contratov = data;\n\nconst arrtemp: any = data;\nlet cad = arrtemp.recursopersonas.split('¬')[1];\n\n\nthis.authenticationService.getReg('5f595d6d2521cd38c8fe311ds' + '/' + cad +\n '/' + this.userinfo[0].idempresa._id  + '°5f595d6d2521cd38c8fe311d' + '/' + 'arrayregistromovil',  'frmmovils', 0).then((data) => {\nthis.regperosnal = data;\n\n// this.checkBoxList1=this.regperosnal\n\nfor (let i2 = 0; i2 < this.regperosnal.length; i2++) {\n\n  let existe = 0;\nfor (let j2 = 0; j2 < this.regperosnal2.length; j2++) {\n\nif ( this.regperosnal2[j2] === this.regperosnal[i2]._id) {\n  existe = 1;\n  break;\n}\n\n}\n\nif (existe === 0) {\n  this.checkBoxList1.push({_id: this.regperosnal[i2]._id, nombre: this.regperosnal[i2].nombres + ' ' +  this.regperosnal[i2].apellidos,\n  foto: this.regperosnal[i2].fotografiadelempleado, cui: this.regperosnal[i2].cui, isChecked: false });\n} else {\n  this.checkBoxList1.push({_id: this.regperosnal[i2]._id, nombre: this.regperosnal[i2].nombres + ' ' +  this.regperosnal[i2].apellidos,\n  foto: this.regperosnal[i2].fotografiadelempleado, cui: this.regperosnal[i2].cui, isChecked: true });\n}\n\n}\n\n });\n\n\n\ncad = arrtemp.recursodeherramientas.split('¬')[1];\nconst cantidadh = arrtemp.recursodeherramientas.split('¬')[1].split(';');\n\n\n\nthis.authenticationService.getReg('5f595da82521cd38c8fe3123' + '/' + cad +\n '/' + this.userinfo[0].idempresa._id  + '°5f595da82521cd38c8fe3123' + '/' + 'arrayregistromovil',  'frmmovils', 0).then((data) => {\nthis.regherramienta = data;\n\nfor (let i2 = 0; i2 < this.regherramienta.length; i2++) {\n\n  let existe = 0;\n  for (let j2 = 0; j2 < this.regherramienta2.length; j2++) {\n\n  if ( this.regherramienta2[j2] === this.regherramienta[i2]._id) {\n    existe = 1;\n    break;\n  }\n\n  }\n\n  if (existe === 0) {\n  this.checkBoxList2.push({_id: this.regherramienta[i2]._id, descripcion: this.regherramienta[i2].descripcion ,\n  tipo: this.regherramienta[i2].tipo, cantidad: this.dacantidadh(this.regherramienta[i2]._id, cantidadh), isChecked: false });\n  } else {\n    this.checkBoxList2.push({_id: this.regherramienta[i2]._id, descripcion: this.regherramienta[i2].descripcion ,\n      tipo: this.regherramienta[i2].tipo, cantidad: this.dacantidadh(this.regherramienta[i2]._id, cantidadh), isChecked: true });\n\n  }\n}\n\n\n });\n\n\n      cad = arrtemp.recursodevehiculos.split('¬')[1];\n      this.authenticationService.getReg('5f595d952521cd38c8fe3120' + '/' + cad +\n      '/' + this.userinfo[0].idempresa._id  + '°5f595d952521cd38c8fe3120' + '/' + 'arrayregistromovil',  'frmmovils', 0).then((data) => {\n      this.regvehiculos = data;\n\n      for (let i2 = 0; i2 < this.regvehiculos.length; i2++) {\n\n        let existe = 0;\n        for (let j2 = 0; j2 < this.regvehiculos2.length; j2++) {\n\n        if ( this.regvehiculos2[j2] === this.regvehiculos[i2]._id) {\n          existe = 1;\n          break;\n        }\n\n        }\n\n        if (existe === 0) {\n\n\n        this.checkBoxList3.push({_id: this.regvehiculos[i2]._id, marca: this.regvehiculos[i2].marca ,\n        modelo: this.regvehiculos[i2].modelo\n          , nochasis: this.regvehiculos[i2].nochasis,\n          piloto: this.regvehiculos[i2].piloto, tipo: this.regvehiculos[i2].tipo, isChecked: false });\n        } else {\n          this.checkBoxList3.push({_id: this.regvehiculos[i2]._id, marca: this.regvehiculos[i2].marca ,\n            modelo: this.regvehiculos[i2].modelo\n              , nochasis: this.regvehiculos[i2].nochasis,\n              piloto: this.regvehiculos[i2].piloto, tipo: this.regvehiculos[i2].tipo, isChecked: true });\n        }\n      }\n\n\n      });\n\n\n\n\n\n\n\n}, (err) => {\nthis.authenticationService.presentAlert(err.error , 'Precaución' , '');\n});\n\n\n\n    this.Form = new FormGroup({\n\n'comentarioherramientas': new FormControl(''),\n'comentariopersonas': new FormControl(''),\n'comentariovehiculos': new FormControl(''),\n\n    });\n    if ( this.itemactual== null) {\n       this.translateService.get('NUEVOM').subscribe((value) => {   this.tituloxx = value + ' ' + this.tituloxx; this.lpermiso = value; });\n\n    } else {\n       this.translateService.get('ACTUALIZAM').subscribe((value) => {this.tituloxx = value + ' ' + this.tituloxx; this.lpermiso = value; });\n       this._ID \t\t\t\t=\t this.itemactual._id;\n\n    }\nif (this.itemactual.comentariopersonal) {\n  this.Form.controls['comentariopersonas'].setValue(this.itemactual.comentariopersonal);\n}\nif (this.itemactual.comentariovehiculos) {\n  this.Form.controls['comentariovehiculos'].setValue(this.itemactual.comentariovehiculos);\n}\n\n  if (this.itemactual.comentarioherramienta) {  this.Form.controls['comentarioherramientas'].setValue(this.itemactual.comentarioherramienta); }\n\n\n  }\n  // onSgrupoChange(selectedValue: any) {    this.sgrupo = selectedValue.detail.value ;(ionChange)='onSgrupoChange($event)'   }\n  submitForm() {\n\n\n    this.submitForm0(this.itemactual.estado)\n  }\n  async dacomponente(op, op2) {\n        let uub = '';\n        if ( op === 'ubicacion') {uub = this.Form.controls['ubicacion'].value; }\n        const modal = await this.modalController.create({\n          component: MyModalPage,      swipeToClose: false,    backdropDismiss: false,     animated: true,\n          presentingElement: await this.modalController.getTop(),\n          componentProps:  { variables:  this.variables, record: null, userinfo: this.userinfo, uubx : uub}\n          // , cssClass: 'modal-fullscreen'\n        });\n        modal.onWillDismiss().then((data) => {\n             if ( data.data === 'close' ) {     }      else      {\n             if (op === 'direccion') {\n              this.Form.controls['direccion'].setValue(data.data.direccion);\n             } else {\n              this.Form.controls['ubicacion'].setValue(data.data.direccion + ' {' + data.data.la + '°' + data.data.lo + '}');\n             }\n            }\n        });\nreturn await modal.present();\n      }\n  /*************************************************+++++FOTOS */\n  async takePicture(op) {\n  const image = await Plugins.Camera.getPhoto({\n  correctOrientation: true,\n            height: 200,\n            width: 200,\n                quality: 60,\n  allowEditing: true,\n            resultType: CameraResultType.DataUrl,\n            source: CameraSource.Camera\n          });\n          this.authenticationService.generateFromImage(image.dataUrl, 200, 200, 0.5, data => {\n            switch (op) {\n              case 'fotoa': this.fotoimg = data;   this.Form.controls['foto'].setValue( this.authenticationService.procesafoto(this.Form.controls['foto'].value)); break;\n                default:\n            }\n        });\n        }\n  uploadPWA2(op , controlx) {\n         const fileList: FileList = controlx;\n         if (fileList && fileList.length > 0) {\n                 this.firstFileToBase64(fileList[0]).then((result: string) => {\n                 this.authenticationService.generateFromImage(result, 200, 300, 0.5, data => {\n                 switch (op) {\n                         case 'fotoa':  this.fotoimg = data;    this.Form.controls['foto'].setValue( this.authenticationService.procesafoto(this.Form.controls['foto'].value)); break;\n                          default:\n                  }\n                 });\n                 }, (err: any) => {\n                 switch (op) {\n                 case 'fotoa':  this.fotoimg = null;  this.Form.controls['foto1'].setValue('');  break;\n                 default:\n                 }\n                 });\n  }}\n  uploadPWA(op) {\n  switch (op) {\n  case 'fotoa':  if (this.fotoa == null ) { return; }\n  this.uploadPWA2(op , this.fotoa.nativeElement.files); break;\n  default:\n  }\n  }\n  private firstFileToBase64(fileImage: File): Promise<{}> {\n  return new Promise((resolve, reject) => {\n  const fileReader: FileReader = new FileReader();\n  if (fileReader && fileImage != null) {\n  fileReader.readAsDataURL(fileImage);\n  fileReader.onload = () => {\n  resolve(fileReader.result);\n  };\n  fileReader.onerror = (error) => {\n  reject(error);\n  };\n  } else {\n  reject(new Error('No file found'));\n  }\n  });\n  }\n        async takePicture2(op) {\n  if ( op === 'fotoa')  {     this.fotoa.nativeElement.click();  }\n        }\n        async fotodatos( op ) {\n          const actionSheet = await this.actionSheetController.create({\n            header: 'Foto',\n            cssClass: 'my-custom-class',\n            buttons: [{   text: 'Galeria',  role: 'destructive',  icon: 'image-outline',\n              handler: () => {\n                this.takePicture2(op);\n              }\n            }, {\n              text: 'Camara',\n              icon: 'camera-outline',\n              handler: () => {\n                this.takePicture(op);\n              }\n            }]\n          });\n          await actionSheet.present();\n        }\n      /****************************************COMBO DE DATOS */\n      async combodatos( op ,  catalogot, frmt, comp, labelx, sigraba) {\n          const modal = await this.modalController.create({\n            component: MyModalComboPage,   swipeToClose: false,     backdropDismiss: false,    animated: true,\n            presentingElement: await this.modalController.getTop(),\n            componentProps: {grabax: sigraba , variables:  this.variables, userinfo: this.userinfo\n              ,  record2 : null , op:  catalogot, frm: frmt, idllave : this.idllave, titlex: 'Buscar ' + labelx}\n            // , cssClass: 'modal-fullscreen'\n          });\n          modal.onWillDismiss().then((data) => {\n            let datax: any = [];\n            datax = data;\n    if (datax.data !==  'close')       {\n        if (datax.data) {this.Form.controls[comp].setValue(datax.data.nombre);\n            //  this.Form.controls[comp].id = datax.data._id\n            } else {        this.Form.controls[comp].setValue('');       }\n          }\n});\n          return await modal.present();\n        }\n\n\n        recursos(op) {\n        }\n\n\n        checkEvent1() {\n          const totalItems = this.checkBoxList1.length;\n          let checked = 0;\n          this.checkBoxList1.map(obj => {\n            if (obj.isChecked) { checked++; }\n          });\n          if (checked > 0 && checked < totalItems) {\n            // If even one item is checked but not all\n            this.isIndeterminate1 = true;\n            this.masterCheck1 = false;\n          } else if (checked == totalItems) {\n            // If all are checked\n            this.masterCheck1 = true;\n            this.isIndeterminate1 = false;\n          } else {\n            // If none is checked\n            this.isIndeterminate1 = false;\n            this.masterCheck1 = false;\n          }\n        }\n\n\n        selectitem1(item: any) {\n\n\n            const datatc: any = [];\n            let dataid: any = '';\n            const dataid2: any = '';\n            const datanombre: any = '';\n\n            for (let i2 = 0; i2 < this.checkBoxList1.length; i2++) {\n              if (this.checkBoxList1[i2].isChecked === true) {\n\n\n                    dataid = dataid + ';' + this.checkBoxList1[i2]._id;\n\n\n                }\n              }\n\n            }\n\n\n\n\n\n        checkEvent2() {\n          const totalItems = this.checkBoxList2.length;\n          let checked = 0;\n          this.checkBoxList2.map(obj => {\n            if (obj.isChecked) { checked++; }\n          });\n          if (checked > 0 && checked < totalItems) {\n            // If even one item is checked but not all\n            this.isIndeterminate2 = true;\n            this.masterCheck2 = false;\n          } else if (checked == totalItems) {\n            // If all are checked\n            this.masterCheck2 = true;\n            this.isIndeterminate2 = false;\n          } else {\n            // If none is checked\n            this.isIndeterminate2 = false;\n            this.masterCheck2 = false;\n          }\n        }\n\n\n\n        checkEvent3() {\n          const totalItems = this.checkBoxList3.length;\n          let checked = 0;\n          this.checkBoxList3.map(obj => {\n            if (obj.isChecked) { checked++; }\n          });\n          if (checked > 0 && checked < totalItems) {\n            // If even one item is checked but not all\n            this.isIndeterminate3 = true;\n            this.masterCheck3 = false;\n          } else if (checked == totalItems) {\n            // If all are checked\n            this.masterCheck3 = true;\n            this.isIndeterminate3 = false;\n          } else {\n            // If none is checked\n            this.isIndeterminate3 = false;\n            this.masterCheck3 = false;\n          }\n        }\n\n\n\n\n    \n      \n\n        fotovisita(){\n\n          const navigationExtras: NavigationExtras = {\n            state: {\n              variables: this.variables,\n              user: null,\n              idllave:  this.itemactual._id,\n              title: 'Subir Fotos',\n              geoposiciontxt:this.geoposiciontxt, \n              essupervisor:this.essupervisor,    esinspector:this.esinspector,  estadoxxx:this.estadoxxx\n            }\n          };\n          this.router.navigate(['frmtareasprogramadasfotosListPage'], navigationExtras);\n\n        }\n      \n        serviciovisita()\n        {\nvar proyectotxt=' <h1>Fecha programada:' +  this.itemactual.fechaasignada + ' </h1> <br>' +'  <h1>Estado: ' + this.itemactual.estado  + ' </h1><br>'+ '<p>No visita:'+ this.itemactual.novisita+'<br></p>'+ this.itemactual.nombre\n        \n\n\n          const navigationExtras: NavigationExtras = {\n            state: {\n              variables: this.variables,\n              user: null,\n              idempresita:this.itemactual.idproyecto,\n              proyectotxt: proyectotxt,\n              idllave:  this.itemactual._id,\n              title: 'Crear Ordenes de campo',\n              datareg:this.itemactual,\n              geoposiciontxt:this.geoposiciontxt, \n              idsupervisor:this.itemactual.idsupervisor , idinspector:this.itemactual.idinspector ,\n              correos:this.correo1+';'+this.correo2 + ';' + this.correo3,\n              essupervisor:this.essupervisor,    esinspector:this.esinspector,  estadoxxx:this.estadoxxx\n            }\n          };\n          this.router.navigate(['frmtareasprogramadasserviciosListPage'], navigationExtras);\n\n        }\n\n        async autorizar()\n        {\n          const alert = await this.alertController.create({\n            header: this.seguro,\n            message: '',\n            buttons: [\n              {\n                text: 'No',\n               cssClass: 'secondary',\n                handler: (blah) => {\n                }\n              }, {\n                 text: 'Si',\n                 handler: () => {\n                  this.submitForm0('autorizar');\n                 }\n               }\n             ]\n           });\n           await alert.present();\n        }\n\n        async finalizar()\n        {\n          const alert = await this.alertController.create({\n            header: this.seguro,\n            message: '',\n            buttons: [\n              {\n                text: 'No',\n               cssClass: 'secondary',\n                handler: (blah) => {\n                }\n              }, {\n                 text: 'Si',\n                 handler: () => {\n                  this.submitForm0('finalizada');\n                 }\n               }\n             ]\n           });\n           await alert.present();\n        }\n\n\n\n        submitForm0(estadott) {\n          let personalxx = '';\n          let herramientaxx = '';\n          let vehiculoxx = '';\n          \n          \n              for (let i2 = 0; i2 < this.checkBoxList1.length; i2++) {\n                if (this.checkBoxList1[i2].isChecked) {\n                  personalxx = personalxx + this.checkBoxList1[i2]._id + ';';\n                }\n          \n              }\n          \n          \n          \n          for (let i2 = 0; i2 < this.checkBoxList2.length; i2++) {\n            if (this.checkBoxList2[i2].isChecked) {\n              herramientaxx = herramientaxx + this.checkBoxList2[i2]._id + ';';\n            }\n          \n          }\n          \n          \n          for (let i2 = 0; i2 < this.checkBoxList3.length; i2++) {\n            if (this.checkBoxList3[i2].isChecked) {\n              vehiculoxx = vehiculoxx + this.checkBoxList3[i2]._id + ';';\n            }\n          \n          }\n              const creat = 'Actualiza';\n          \n           \n          \n          \n          \n              const   options: any\t     = {\n                estructura: {\n                 'usuarioup': this.userinfo[0].email,\n                 'idempresa': this.userinfo[0].idempresa._id,\n                 'idpapa': this.itemactual.idpapa,\n                 'geoposicion': this.geoposiciontxt,\n                 'estado': estadott,\n                 'fechaasignada': this.itemactual.fechaasignada,\n          \n                 'idcontrato': this.itemactual.idcontrato,\n          \n                 'idempresa0': this.itemactual.idempresa0,\n                 'idinspector': this.itemactual.idinspector,\n                 'idinspector0': this.itemactual.idinspector0,\n          \n                 'idperiodo': this.itemactual.idperiodo,\n                 'idplanifica': this.itemactual.idplanifica,\n                 'idproyecto': this.itemactual.idproyecto,\n                 'idproyecto0': this.itemactual.idproyecto0,\n                 'idsupervisor': this.itemactual.idsupervisor,\n                 'idsupervisor0': this.itemactual.idsupervisor0,\n                 'inspector': this.itemactual.idinspector,\n                 'nombre': this.itemactual.nombre,\n                 'novisita': this.itemactual.novisita,\n                 'periodo': this.itemactual.periodo,\n                 'proyecto': this.itemactual.proyecto,\n                 'supervisor': this.itemactual.supervisor,\n                 'verificapersonal': personalxx,\n                 'verificavehiculos': vehiculoxx,\n                 'verificaherramienta': herramientaxx,\n                 'comentariopersonal': this.Form.controls['comentariopersonas'].value,\n                 'comentariovehiculos': this.Form.controls['comentariovehiculos'].value,\n                 'comentarioherramienta': this.Form.controls['comentarioherramientas'].value\n          \n                },\n                idcat: 'PLANIFICACIÓN',\n                idform:   '5f81d95fc07d6532900465a4',\n                idpapa: '5f81cd8ac07d6532900465a2',\n                tipo: 'detalle',\n                tipo2: 'Repositorio',\n                ejecuta: 'visitas_programadas',\n                bitacora: { idempresa : this.userinfo[0].idempresa._id , idafiliado: '' ,\n                email: this.userinfo[0].email , permiso : creat, accion: 'Actualiza en formulario movil'}\n               };\n          \n              if (options) {\n                this.authenticationService.createRegmovil( this.itemactual._id, options, 'frmmovils').then((result) => {\n\n                  this.authenticationService.retornatareas();\n                  this.location.back();\n                \n          \n              }, (err) => {\n                this.authenticationService.presentAlert(err.error , 'Precaución' , '');\n              });\n              }\n            }\n\n}\n","<form class=\"create-user-form ion-page\" [formGroup]=\"Form\" >\n\n  <ion-header>\n    <ion-toolbar color=\"primary\">\n            <ion-buttons slot=\"start\">\n       <ion-back-button defaultHref=\"frmtareasprogramadasListPage\"></ion-back-button>\n      </ion-buttons>\n                <ion-title>Revisar Visita programada</ion-title>\n                <ion-buttons slot=\"end\">\n    \n                  <ion-button title=\"Agregar fotos\" (click)=\"fotovisita()\">\n                          <ion-icon slot=\"icon-only\" name=\"images-outline\"></ion-icon>\n                   \n                  </ion-button>\n                  <ion-button title=\"Agregar orden de campo\" (click)=\"serviciovisita()\">\n                    <ion-icon  slot=\"icon-only\" name=\"albums-outline\"></ion-icon>\n                  </ion-button>\n                \n              \n\n                  <ion-button    *ngIf=\"estadoxxx==='activa'\" [hidden]='!esinspector' title=\"Autorización tarea programada \" (click)=\"autorizar()\">\n                          <ion-icon  slot=\"icon-only\" name=\"checkmark-done-outline\"></ion-icon>\n                        </ion-button>\n\n                     \n                  <ion-button  *ngIf=\"finalizatt===1\" title=\"Finalizar tarea programada\" (click)=\"finalizar()\">\n\n       \n                    <ion-icon  slot=\"icon-only\" name=\"remove-circle-outline\"></ion-icon>\n                  </ion-button>\n                </ion-buttons>\n        </ion-toolbar>\n</ion-header>\n<ion-content class=\"create-form-content\">\n\n\n  \n  <div  class=\"ion-padding\">\n    <h1>Fecha programada: {{itemactual.fechaasignada | date:'dd-MM-yyyy' }}</h1>\n    <h1>Estado: {{itemactual.estado}}</h1>\n \n    <p>No visita: {{itemactual.novisita}}</p>\n  \n    <ion-text color=\"medium\">\n      <div [innerHtml]=\"itemactual.nombre\"></div> \n    </ion-text>\n  </div>\n\n\n  <ion-item-divider  color=\"secondary\">\n    <ion-label>\n      Verificar Personas\n    </ion-label>\n  </ion-item-divider>\n\n  <ion-list class=\"ion-no-margin\">\n    <ion-item class=\"ionic-selectable-item\"  button=\"true\"   detail=\"false\" *ngFor=\"let item of checkBoxList1;\" [routerLink]=\"\">\n  \n      <ion-row >\n        <ion-col size=\"2\">\n          <ion-img  ionImgViewer   *ngIf=\"item.foto !== undefined\" scheme=\"dark\"  [src]=\"apifoto+ item.foto\"></ion-img>\n        </ion-col>\n        <ion-col >\n          <strong>Nombre:</strong>  {{item.nombre}}<br>\n          <strong>CUI:</strong>  {{item.cui}} <br>\n        </ion-col>\n      </ion-row>\n        <ion-checkbox slot=\"start\" \n        [(ngModel)]=\"item.isChecked\" [ngModelOptions]=\"{standalone: true}\"\n        (ionChange)=\"checkEvent1()\"></ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n\n  <ion-item class=\"input-item\">\n    <ion-label  position=\"floating\">Comentarios verificación de personas<ion-text color=\"danger\">*</ion-text></ion-label>\n    <ion-textarea inputMode=\"text\" rows='4'  clearInput=\"true\" formControlName=\"comentariopersonas\" ></ion-textarea>\n</ion-item>\n\n  <ion-item-divider  color=\"secondary\">\n    <ion-label>\n      Verificar Vehiculos\n    </ion-label>\n  </ion-item-divider>\n\n  <ion-list class=\"ion-no-margin\">\n    <ion-item class=\"ionic-selectable-item\"  button=\"true\"   detail=\"false\" *ngFor=\"let item of checkBoxList3;\" [routerLink]=\"\">\n  \n      <ion-row >\n       \n        <ion-col >\n          <strong>Marca:</strong>  {{item.modelo}}<br>\n          <strong>Modelo:</strong>  {{item.modelo}} <br>\n          <strong>No Chasis:</strong>  {{item.nochasis}} <br>\n          <strong>Piloto:</strong>  {{item.piloto}} <br>\n          <strong>Tipo:</strong>  {{item.tipo}} <br>\n        </ion-col>\n      </ion-row>\n        <ion-checkbox slot=\"start\" \n        [(ngModel)]=\"item.isChecked\" [ngModelOptions]=\"{standalone: true}\"\n        (ionChange)=\"checkEvent3()\"></ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n  \n  <ion-item class=\"input-item\">\n    <ion-label  position=\"floating\">Comentarios verificación de vehiculos<ion-text color=\"danger\">*</ion-text></ion-label>\n    <ion-textarea inputMode=\"text\" rows='4'  clearInput=\"true\" formControlName=\"comentariovehiculos\" ></ion-textarea>\n</ion-item>\n\n \n  <ion-item-divider  color=\"secondary\">\n    <ion-label>\n      Verificar Herramientas\n    </ion-label>\n  </ion-item-divider>\n\n\n  <ion-list class=\"ion-no-margin\">\n    <ion-item class=\"ionic-selectable-item\"  button=\"true\"   detail=\"false\" *ngFor=\"let item of checkBoxList2;\" [routerLink]=\"\">\n  \n      <ion-row >\n       \n        <ion-col >\n          <strong>Descripcion:</strong>  {{item.descripcion}}<br>\n       \n          <strong>Tipo:</strong>  {{item.tipo}} <br>\n          <strong>Cantidad:</strong>  {{item.cantidad}} <br>\n        </ion-col>\n      </ion-row>\n        <ion-checkbox slot=\"start\" \n        [(ngModel)]=\"item.isChecked\" [ngModelOptions]=\"{standalone: true}\"\n        (ionChange)=\"checkEvent2()\"></ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n  \n  <ion-item class=\"input-item\">\n    <ion-label  position=\"floating\">Comentarios verificación de herramientas<ion-text color=\"danger\">*</ion-text></ion-label>\n    <ion-textarea inputMode=\"text\" rows='4'  clearInput=\"true\" formControlName=\"comentarioherramientas\" ></ion-textarea>\n</ion-item>\n\n</ion-content>\n<ion-footer>\n  <ion-row class=\"form-actions-wrapper\">\n    <ion-col  *ngIf=\"estadoxxx==='activa'\" [hidden]='!esinspector'>\n      <ion-button (click)=\"submitForm()\" color=\"primary\" expand=\"block\" type=\"submit\" [disabled]=\"!Form.valid\">ACTUALIZAR VISITA</ion-button>\n      </ion-col>\n  </ion-row>\n</ion-footer>\n</form>   \n","\nimport { Component, OnInit, ViewChild, ElementRef, NgZone } from '@angular/core';\nimport { MapsAPILoader, AgmMap } from '@agm/core';\nimport { ModalController , NavParams} from '@ionic/angular';\n\nimport { Plugins, Capacitor , CallbackID} from '@capacitor/core';\nconst { Geolocation} = Plugins;\n\n\n@Component({\n  selector: 'app-my-modal',\n  templateUrl: './my-modal.page.html',\n  styleUrls: ['./my-modal.page.scss'],\n})\nexport class MyModalPage implements OnInit {\n\n\n  title = 'AGM project';\n  latitude: number;\n  longitude: number;\n  zoom = 16 ;\n  address: string;\n  uubx: string;\n  watchId: CallbackID;\n  private geoCoder;\n  tituloxx: any;\n\n  @ViewChild('search', {static: false})\n  public searchElementRef: ElementRef;\n\n\n  constructor( private modalController: ModalController,\n    private mapsAPILoader: MapsAPILoader,\n    private ngZone: NgZone,\n    private navParams: NavParams\n  ) { }\n\n  dismissModal() {     this.modalController.dismiss('close');      }\n\n  dadireccion() {     this.modalController.dismiss({direccion: this.address, la: this.latitude, lo: this.longitude});      }\n  ngOnInit() {\n\n    this.uubx = this.navParams.get('uubx');\n\n\n\n    this.mapsAPILoader.load().then(() => {\n      if (this.uubx === '') {     this.setCurrentLocationa();      } else      {  this.setCurrentLocation2a();      }\n      this.geoCoder = new google.maps.Geocoder;\n\n      const autocomplete = new google.maps.places.Autocomplete(this.searchElementRef.nativeElement, {\n        types: ['address']\n      });\n      autocomplete.addListener('place_changed', () => {\n        this.ngZone.run(() => {\n\n          const place: google.maps.places.PlaceResult = autocomplete.getPlace();\n\n\n          if (place.geometry === undefined || place.geometry === null) {\n            return;\n          }\n\n          if (place) {\n          this.latitude = place.geometry.location.lat();\n          this.longitude = place.geometry.location.lng();\n          this.getAddress(this.latitude, this.longitude);\n          }\n        });\n      });\n    });\n\n  }\n\n  loadMap() {\n    this.mapsAPILoader.load().then(() => {\n   this.setCurrentLocationa33();\n\n\n    });\n  }\n\n  clearWatch() {\n    if (this.watchId != null) {\n      Plugins.Geolocation.clearWatch({ id: this.watchId });\n    }\n  }\n  // Get Current Location Coordinates\n  setCurrentLocationa33() {\n    if (!Capacitor.isPluginAvailable('Geolocation')) {\n      console.log('Plugin geolocation not available');\n      return;\n    }\n    try {\n      this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n        if (data) {\n          this.latitude = data.coords.latitude;\n          this.longitude = data.coords.longitude;\n      \n  \n        }\n  \n    });\n  } catch (e) {\n    console.error(e);\n  }\n  \n  }\n  setCurrentLocationa() {\n  if (!Capacitor.isPluginAvailable('Geolocation')) {\n    console.log('Plugin geolocation not available');\n    return;\n  }\n  try {\n    this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n      if (data) {\n        this.latitude = data.coords.latitude;\n        this.longitude = data.coords.longitude;\n        this.getAddress(this.latitude, this.longitude);\n\n      }\n\n  });\n} catch (e) {\n  console.error(e);\n}\n\n}\n\nsetCurrentLocation2a() {\n  if (!Capacitor.isPluginAvailable('Geolocation')) {\n    console.log('Plugin geolocation not available');\n    return;\n  }\n  try {\n    this.watchId = Plugins.Geolocation.watchPosition({timeout: 1000, enableHighAccuracy: true, maximumAge: 1000}, (data, err) => {\n    this.latitude = Number( this.uubx.substring(this.uubx.indexOf('{') + 1, this.uubx.indexOf('°') ));\n    this.longitude = Number( this.uubx.substring(this.uubx.indexOf('°') + 1, this.uubx.indexOf('}')) );\n    if (this.latitude !== 0) {\n      if (this.latitude) {\n      this.getAddress(this.latitude, this.longitude);\n      }\n    }\n\n  });\n} catch (e) {\n  console.error(e);\n}\n\n}\n\n\n\n\n  markerDragEnd($event: any) {\n    if (this.latitude !== 0) {\n      if (this.latitude) {\n    this.latitude = $event.coords.lat;\n    this.longitude = $event.coords.lng;\n    this.getAddress(this.latitude, this.longitude);\n      }}\n  }\n\n  getAddress(latitude, longitude) {\n    this.geoCoder.geocode({ 'location': { lat: latitude, lng: longitude } }, (results, status) => {\n      console.log(results);\n      console.log(status);\n      if (status === 'OK') {\n        if (results[0]) {\n          this.address = results[0].formatted_address;\n        } else {\n          window.alert('No results found');\n        }\n      } else {\n        window.alert('Geocoder failed due to: ' + status);\n      }\n\n    });\n  }\n\n  async closeModal() {\n    this.modalController.dismiss('close');\n  }\n\n}\n"]}