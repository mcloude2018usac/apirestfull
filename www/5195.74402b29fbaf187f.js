"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5195],{75195:(T,m,a)=>{a.r(m),a.d(m,{NotificationsPageModule:()=>S});var n=a(23349),g=a(55787),u=a(69808),f=a(93075),h=a(51062),v=a(33678),p=a(70655),Z=a(49926),_=a(4707),t=a(5e3),C=a(89330),x=a(71408);const P=function(){return{w:1,h:1}};function M(o,c){if(1&o){const i=t.EpF();t.TgZ(0,"ion-item",13),t.NdJ("click",function(){const s=t.CHM(i).$implicit;return t.oxw(2).showConversationPage(s.idsuscriptor.id)}),t.TgZ(1,"ion-row",14),t.TgZ(2,"ion-col",15),t.TgZ(3,"app-aspect-ratio",16),t._UZ(4,"app-image-shell",17),t.qZA(),t.qZA(),t.TgZ(5,"ion-col",18),t.TgZ(6,"p",19),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"h2",19),t._uU(10),t.qZA(),t.TgZ(11,"p",19),t._uU(12),t.qZA(),t.TgZ(13,"ion-label",20),t._uU(14),t.ALo(15,"translate"),t._UZ(16,"ion-icon",21),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const i=c.$implicit,e=t.oxw(2);t.xp6(3),t.Q6J("ratio",t.DdM(13,P)),t.xp6(1),t.Q6J("src",e.apifoto+i.idsuscriptor.id.foto)("alt","user image"),t.xp6(3),t.AsE(" ",t.lcZ(8,9,"role"),": ",i.idsuscriptor.id.role,""),t.xp6(3),t.Oqu(i.idsuscriptor.id.nombre),t.xp6(2),t.Oqu(i.idsuscriptor.id.email),t.xp6(2),t.AsE("",t.lcZ(15,11,"nuevos_msg"),": ",i.cantidad," ")}}function A(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"ion-item-group"),t.TgZ(2,"ion-item-divider",10),t.TgZ(3,"ion-label",11),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.YNc(6,M,17,14,"ion-item",12),t.qZA(),t.BQk()),2&o){const i=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,2,"usuario_reg")),t.xp6(2),t.Q6J("ngForOf",i.itemsList)}}let O=(()=>{class o{constructor(i,e,r,s,l,d,b){this.router=i,this.alertController=e,this.translateService=r,this.modalController=s,this.navCtrl=l,this.route=d,this.authenticationService=b,this.showAgeFilter=!1,this.showmenu=!1,this.items=[],this.variables=[],this.userinfo=[],this.viewType="grid",this.tituloxx="",this.efecto=0,this.simenu=!1,this.seguro="",this.msg="",this.searchSubject=new _.t(1),this.apifoto=this.authenticationService.getapifoto()}showConversationPage(i){this.router.navigate(["conversation"],{state:{variables:"",user:null,nombre:i.nombre,estado:i.estado,foto:i.foto,userid:i._id,item:i,record:{toUserId:this.userinfo[0]._id,email:this.userinfo[0].email,toUserName:this.userinfo[0].nombre,avatar:this.apifoto+this.userinfo[0].foto},grupal:"no",record2:{toUserId:i._id,email:i.email,toUserName:i.nombre,avatar:this.apifoto+i.foto}}})}addRecord(){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.authenticationService.datraduccion("ingrese_corronotificar"),message:"",inputs:[{name:"nombre",type:"text",placeholder:this.authenticationService.datraduccion("usuario_emeil_not")}],buttons:[{text:this.authenticationService.datraduccion("cancelar"),cssClass:"secondary",handler:e=>{}},{text:this.authenticationService.datraduccion("aceptar"),handler:e=>{e.nombre===this.userinfo[0].email?this.authenticationService.presentAlert(this.authenticationService.datraduccion("usuario_noexiste"),this.authenticationService.datraduccion("precaucion"),""):""!==e.nombre&&this.authenticationService.getReg(e.nombre+"/emailsolonuevo/"+this.userinfo[0].idempresa._id,"personals",0).then(r=>{let s=[];s=r;const l={idsuscriptor:{id:s[0]._id,nombre:s[0].nombre},nombre:s[0].nombre,idempresa:s[0].idempresa,estado:"Activo",idsuscriptor2:{id:this.userinfo[0]._id,nombre:this.userinfo[0].nombre,email:s[0].email},nota:"",bitacora:{idempresa:this.userinfo[0].idempresa._id,idafiliado:"",email:this.userinfo[0].email,permiso:"Crea",accion:NaN}};l&&this.authenticationService.createReg("",l,"userchats").then(d=>{this.pideregistros()},d=>{this.authenticationService.presentAlert(d.error,this.authenticationService.datraduccion("precaucion"),"")})})}}]})).present().then(()=>{document.querySelector("ion-alert input").focus()})})}deleteRecord(i){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.seguro,message:"",buttons:[{text:"No",cssClass:"secondary",handler:r=>{}},{text:"Si",handler:()=>{this.authenticationService.deleteReg(i._id+"/"+this.userinfo[0].email+"/"+this.userinfo[0].idempresa._id+"/na","userchats").then(s=>{this.pideregistros()},s=>{this.authenticationService.presentAlert(s.error,this.msg,"")})}}]})).present()})}pideregistros(){this.itemsList=[],this.efecto=0,this.authenticationService.getReg(this.userinfo[0].email+"/mios/"+this.userinfo[0].idempresa._id,"userchats",0).then(i=>{this.efecto=1,this.items=i,this.itemsList=this.items},i=>{this.authenticationService.presentAlert(i.error,this.msg,"")})}ngOnInit(){this.userinfo=this.authenticationService.getcopiauser(),this.logo1=this.authenticationService.dalogo1(this.userinfo),this.translateService.get("SEGUROM").subscribe(i=>{this.seguro=i}),this.translateService.get("MSGM").subscribe(i=>{this.msg=i}),this.pideregistros()}}return o.\u0275fac=function(i){return new(i||o)(t.Y36(g.F0),t.Y36(n.Br),t.Y36(h.sK),t.Y36(n.IN),t.Y36(n.SH),t.Y36(g.gz),t.Y36(Z.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-notifications"]],viewQuery:function(i,e){if(1&i&&t.Gf(n.ju,5),2&i){let r;t.iGM(r=t.CRH())&&(e.infiniteScroll=r.first)}},decls:17,vars:11,consts:[["color","primary"],["slot","start"],["size","small"],["collapse","true","slot","end"],[3,"title","click"],["slot","icon-only","name","add"],["slot","icon-only","name","refresh-circle-outline"],["alt","logo","id","header_logo","height","33",3,"src"],[1,"notifications-content"],[4,"ngIf"],["sticky",""],[1,"ion-text-wrap"],["class","notification-item","lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",1,"notification-item",3,"click"],[1,"notification-item-wrapper"],["size","2"],[3,"ratio"],[1,"notification-image",3,"src","alt"],[1,"details-wrapper"],[1,"details-name"],["color","warning"],["name","notifications-outline"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title",2),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-buttons",3),t.TgZ(8,"ion-button",4),t.NdJ("click",function(){return e.addRecord()}),t.ALo(9,"translate"),t._UZ(10,"ion-icon",5),t.qZA(),t.TgZ(11,"ion-button",4),t.NdJ("click",function(){return e.pideregistros()}),t.ALo(12,"translate"),t._UZ(13,"ion-icon",6),t.qZA(),t._UZ(14,"img",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"ion-content",8),t.YNc(16,A,7,4,"ng-container",9),t.qZA()),2&i&&(t.xp6(5),t.hij(" ",t.lcZ(6,5,"notificacion")," "),t.xp6(3),t.MGl("title"," ",t.lcZ(9,7,"AGREGARM"),""),t.xp6(3),t.MGl("title"," ",t.lcZ(12,9,"REFRESCARM"),""),t.xp6(3),t.Q6J("src",e.apifoto+e.logo1,t.LSH),t.xp6(2),t.Q6J("ngIf",(null==e.itemsList?null:e.itemsList.length)>0))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.YG,n.gu,n.W2,u.O5,n.Ub,n.rH,n.Q$,u.sg,n.Ie,n.Nd,n.wI,C.m,x.U],pipes:[h.X$],styles:["[_nghost-%COMP%]{--page-margin: var(--app-narrow-margin)}.notifications-content[_ngcontent-%COMP%]   ion-item-divider[_ngcontent-%COMP%]{--background: var(--ion-color-light);--padding-start: var(--page-margin)}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]{--padding-start: 0px;--inner-padding-end: 0px;padding:var(--page-margin);color:var(--ion-color-medium);box-shadow:inset 0 8px 2px -9px var(--ion-color-darkest)}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .notification-item-wrapper[_ngcontent-%COMP%]{--ion-grid-column-padding: 0px;width:100%;align-items:center}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;padding-left:var(--page-margin)}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details-wrapper[_ngcontent-%COMP%]   .details-name[_ngcontent-%COMP%]{margin-top:0;margin-bottom:5px;font-size:16px;font-weight:400;letter-spacing:.2px;color:var(--ion-color-secondary)}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .details-wrapper[_ngcontent-%COMP%]   .details-description[_ngcontent-%COMP%]{font-size:12px;margin:0}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .date-wrapper[_ngcontent-%COMP%]{align-self:flex-start}.notifications-content[_ngcontent-%COMP%]   .notification-item[_ngcontent-%COMP%]   .date-wrapper[_ngcontent-%COMP%]   .notification-date[_ngcontent-%COMP%]{margin:0;font-size:12px;text-align:end}","app-image-shell.notification-image[_ngcontent-%COMP%]{--image-shell-border-radius: 50%}"]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[n.Pc,u.ez,f.u5,h.aw.forChild(),v.K,g.Bz.forChild([{path:"",component:O}])]]}),o})()}}]);